{"version":3,"sources":["node_modules/nittro-forms/src/Bridges/netteForms.js","node_modules/promiz/promiz.js","node_modules/nittro-core/src/context.js","node_modules/nittro-core/src/Utils/Strings.js","node_modules/nittro-core/src/Utils/Arrays.js","node_modules/nittro-core/src/Utils/HashMap.js","node_modules/nittro-core/src/Utils/Url.js","node_modules/nittro-core/src/Utils/DOM.js","node_modules/nittro-core/src/Utils/CSSTransitions.js","node_modules/nittro-core/src/Utils/ReflectionClass.js","node_modules/nittro-core/src/Utils/ReflectionFunction.js","node_modules/nittro-core/src/Nittro/EventEmitter.js","node_modules/nittro-core/src/Nittro/Freezable.js","node_modules/nittro-core/src/Nittro/Object.js","node_modules/nittro-datetime/src/DateInterval.js","node_modules/nittro-datetime/src/DateTime.js","node_modules/nittro-datetime/src/DateTime.i18n.js","node_modules/nittro-datetime/src/DateTime.en.js","node_modules/nittro-neon/src/Utils/Tokenizer.js","node_modules/nittro-neon/src/Neon/Neon.js","node_modules/nittro-di/src/ServiceDefinition.js","node_modules/nittro-di/src/ContainerMixin.js","node_modules/nittro-di/src/Container.js","node_modules/nittro-di/src/BuilderExtension.js","node_modules/nittro-di/src/ContainerBuilder.js","node_modules/nittro-ajax/src/Request.js","node_modules/nittro-ajax/src/Response.js","node_modules/nittro-ajax/src/Service.js","node_modules/nittro-ajax/src/Transport/Native.js","node_modules/nette-forms/src/assets/netteForms.js","node_modules/nittro-forms/src/Vendor.js","node_modules/nittro-forms/src/FormData.js","node_modules/nittro-forms/src/Form.js","node_modules/nittro-forms/src/Locator.js","node_modules/nittro-forms/src/DefaultErrorRenderer.js","node_modules/nittro-page/src/js/Snippet.js","node_modules/nittro-page/src/js/SnippetManagerHelpers.js","node_modules/nittro-page/src/js/SnippetManager.js","node_modules/nittro-page/src/js/SnippetAgent.js","node_modules/nittro-page/src/js/AjaxAgent.js","node_modules/nittro-page/src/js/HistoryAgent.js","node_modules/nittro-page/src/js/History.js","node_modules/nittro-page/src/js/TransitionAgent.js","node_modules/nittro-page/src/js/ScrollAgent.js","node_modules/nittro-page/src/js/Transaction.js","node_modules/nittro-page/src/js/CspAgent.js","node_modules/nittro-page/src/js/GoogleAnalyticsHelper.js","node_modules/nittro-page/src/js/Service.js","node_modules/nittro-flashes/src/js/Helpers.js","node_modules/nittro-flashes/src/js/Message.js","node_modules/nittro-flashes/src/js/DefaultPositioner.js","node_modules/nittro-flashes/src/js/Service.js","node_modules/nittro-extras-dialogs/src/js/Dialog.js","node_modules/nittro-extras-dialogs/src/js/IFrameDialog.js","node_modules/nittro-extras-dialogs/src/js/Manager.js","node_modules/nittro-extras-confirm/src/Confirm.js","node_modules/nittro-extras-confirm/src/ConfirmMixin.js","node_modules/nittro-ajax/src/Bridges/AjaxDI/AjaxExtension.js","node_modules/nittro-forms/src/Bridges/FormsDI/FormsExtension.js","node_modules/nittro-forms/src/Bridges/FormsPage/FormsMixin.js","node_modules/nittro-page/src/js/Bridges/PageDI/PageExtension.js","node_modules/nittro-page/src/js/Bridges/PageFlashes/FlashAgent.js","node_modules/nittro-flashes/src/js/Bridges/FlashesDI/FlashesExtension.js","node_modules/nittro-extras-dialogs/src/js/Bridges/DialogsPage/DialogAgent.js","node_modules/nittro-extras-dialogs/src/js/FormDialog.js","node_modules/nittro-extras-dialogs/src/js/Bridges/DialogsForms/FormDialogMixin.js","node_modules/nittro-extras-dialogs/src/js/Bridges/DialogsDI/DialogsExtension.js","node_modules/nittro-extras-confirm/src/Bridges/ConfirmDI/ConfirmExtension.js","node_modules/nittro-extras-confirm/src/Bridges/ConfirmPage/AutoConfirm.js","__bootstrap-generated.js","node_modules/nittro-core/src/stack.js"],"names":["module","exports","window","Nette","noInit","global","this","queueId","queue","isRunningTask","setImmediate","addEventListener","e","source","nextTick","data","fn","importScripts","setTimeout","postMessage","Deferred","resolve","value","_d","TypeError","reject","all","arr","Array","d","done","v","unresolved","reduce","cnt","then","map","i","r","race","length","resolver","undefined","self","state","val","next","er","fire","_fn","_er","push","finish","type","p","thennable","ref","cb","ec","cn","call","_context","t","api","loaded","loading","REQ_TIMEOUT","doc","document","elem","n","createElement","win","loc","history","location","c","clearTimeout","promise","Promise","nsStack","nonce","names","classes","resolveUrl","u","href","isRelative","len","exec","substr","err","xhrFactory","o","f","shift","Error","XMLHttpRequest","ActiveXObject","xdrFactory","XDomainRequest","xhr","fulfill","req","m","open","onsuccess","onerror","onload","onreadystatechange","readyState","status","send","abort","resolveNonce","elems","getElementsByTagName","item","test","s","match","replace","toLowerCase","setAttribute","q","styleSheet","cssText","appendChild","createTextNode","head","text","parentNode","removeChild","lookup","indexOf","split","lookupClass","constructor","Object","load","a","arguments","invoke","responseText","getResponseHeader","fulfilled","rejected","ns","unshift","params","toString","args","apply","register","name","key","pop","join","__ns","extend","parent","proto","tmp","prototype","Super","hasOwnProperty","STATIC","copyProps","mixin","target","merge","b","Strings","applyModifiers","slice","sprintf","vsprintf","parseInt","parseFloat","toFixed","webalize","chars","ws","RegExp","escapeRegex","trim","re","offsetCapture","noEmpty","delimCapture","ignoreCase","multiline","filter","ofs","substring","_trim","trimLeft","trimRight","l","firstUpper","toUpperCase","compare","Math","min","contains","h","isNumeric","escapeHtml","nl2br","collapse","random","charCodeAt","abs","String","fromCharCode","round","Arrays","isArrayLike","shuffle","createFrom","getKeys","keys","k","isArray","filterKeys","rem","getValues","mergeTree","props","walk","HashMap","src","_","values","nonNumeric","nextNumeric","from","clone","set","isList","deep","forEach","append","_shiftKeys","splice","to","remove","removed","get","need","RangeError","has","index","strict","callback","thisArg","recursive","find","predicate","_find","findKey","some","exportData","diff","expect","Url","protocol","hostname","port","path","pathname","parseQuery","search","hash","extractAuthInfo","RE_PROTOCOL","auth","RE_AUTHORITY","username","password","getProtocol","getUsername","getPassword","getHostname","getPort","getAuthority","getOrigin","getPath","getQuery","buildQuery","getParam","hasParam","getParams","getHash","setProtocol","setUsername","setPassword","setHostname","setPort","setPath","setQuery","query","setParam","addParams","setParams","removeParam","setHash","toAbsolute","toLocal","toRelative","getRelativePath","qto","qthis","isLocal","fromCurrent","PART","PORT","PROTOCOL","USERNAME","PASSWORD","HOSTNAME","PATH","QUERY","HASH","getDirName","pairs","en","encodeURIComponent","flatten","dec","decodeURIComponent","convertType","url","onto","ret","getElem","HTMLCollection","NodeList","DOM","getById","getPrefixed","prop","style","charAt","variants","parseData","JSON","parse","CustomEvent","event","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","knownEventModules","MouseEvent","create","view","init","initMouseEvent","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","KeyboardEvent","modifiers","initKeyboardEvent","FocusEvent","initUIEvent","HTMLEvents","initEvent","knownEvents","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","contextmenu","keydown","keypress","keyup","focus","blur","change","submit","reset","containers","caption","colgroup","col","thead","tbody","tfoot","tr","th","td","li","optgroup","option","getByClassName","className","context","getElementsByClassName","id","getElementById","sel","getChildren","childNodes","node","nodeType","closest","nodeName","hasClass","attrs","setAttributes","createFromHtml","html","container","setStyle","prefix","getStyle","prefixed","getComputedStyle","res","getStyleFloat","refloat","normalizeValue","stylePropsToFloat","innerHTML","hasAttribute","textContent","script","attributes","insertBefore","str","empty","firstChild","children","child","prepend","first","before","adown","documentElement","bup","compareDocumentPosition","addListener","listener","capture","removeListener","removeEventListener","trigger","dispatchEvent","delegate","handler","ids","found","j","getData","def","getAttribute","setData","stringify","addClass","removeClass","toggleClass","testElem","prepare","asStr","classList","add","toggle","current","CSSTransitions","support","getDuration","elements","durations","concat","max","run","forceLayout","_resolve","foo","pageXOffset","duration","after","ReflectionClass","reflectedClass","getClass","getClassName","obj","hasProperty","hasMethod","newInstance","newInstanceArgs","inst","ReflectionFunction","reflectedFunction","argsList","parts","getName","getArgs","invokeArgs","list","eventEmitter","listeners","defaultListeners","namespaces","prepareNamespaces","emitter","hasCommonElement","process","op","arg1","arg2","dflt","sort","mode","NittroEvent","isAsync","triggerDefault","isDefaultPrevented","NittroEventEmitter","on","one","off","defaultPrevented","async","preventDefault","waitFor","onfulfilled","onrejected","frozen","Freezable","freeze","isFrozen","_updating","Utils","DateInterval","interval","locale","initialized","DateTime","defaultLocale","intervals","intervalLengths","year","month","week","day","hour","minute","second","millisecond","getValue","getLength","_initialize","subtract","isNegative","valueOf","formatAuto","precision","last","sign","floor","i18n","getInterval","getConjuction","format","pattern","pad","rest","getIntervalParser","y","w","date","Date","now","isDateObject","timezone","timezone_type","isLeapYear","isModifyString","getParser","getDaysInMonth","3","5","8","10","ni","formatTz","offset","getLocalTzOffset","getTimezoneOffset","formatModifiers","getUTCDate","getDate","D","getWeekday","getUTCDay","getDay","N","S","z","M","getUTCFullYear","getFullYear","getUTCMonth","getMonth","W","F","L","Y","getUTCHours","getHours","A","g","G","H","getUTCMinutes","getMinutes","getUTCSeconds","getSeconds","getUTCMilliseconds","getMilliseconds","I","O","P","T","Z","U","getTime","utc","getLocale","setLocale","hasLocale","method","getTimestamp","getDateObject","modify","dt","setHours","setFullYear","setMonth","setDate","getWeekStart","modifyClone","buildParser","parsers","months","keywords","full","abbrev","weekdays","yesterday","today","tomorrow","firstOf","lastOf","at","noon","midnight","buildIntervalParser","locales","conjuction","unit","getPlural","weekStart","parser","intervalParser","Nittro","Tokenizer","patterns","matchCase","types","getCoordinates","lastIndexOf","tokenize","input","tokens","pos","bind","Neon","_cbStr","brackets","{","[","(","consts","true","True","TRUE","yes","Yes","YES","On","ON","false","False","FALSE","no","No","NO","Off","OFF","null","Null","NULL","indent","BLOCK","encode","options","NeonEntity","decode","tokenizer","error","indentTabs","result","inlineParser","entity","hasValue","hasKey","addValue","newIndent","mapping","\"","\\","/","msg","token","ServiceDefinition","factory","setup","getFactory","setFactory","getArguments","setArguments","getSetup","hasSetup","addSetup","setRun","isRun","services","serviceDefs","ContainerMixin","addService","service","addServiceDefinition","definition","override","hasServiceDefinition","getServiceDefinition","getService","_createService","hasService","isServiceCreated","runServices","_autowireArguments","_expandArguments","_toEntity","_expandEntity","argList","arg","lookupArg","_expandArg","mergeArgs","traverse","cursor","Container","config","factories","hasFactory","addFactory","__expandArg","BuilderExtension","containerBuilder","_getConfig","defaults","_getContainerBuilder","ContainerBuilder","extensions","addExtension","extension","createContainer","_prepareExtensions","_loadExtensions","_setupExtensions","Request","headers","normalized","dispatched","deferred","aborted","response","getUrl","_normalize","getMethod","isGet","isPost","isMethod","getHeaders","setUrl","setMethod","setHeader","header","setHeaders","setDispatched","isDispatched","setFulfilled","setResponse","getResponse","setRejected","reason","isAborted","Forms","FormData","Response","payload","getStatus","getPayload","getHeader","getAllHeaders","Service","transport","allowOrigins","setTransport","addTransport","console","log","supports","isAllowedOrigin","dispatch","createRequest","post","request","Native","createXhr","isUpload","adv","_checkSupport","_createError","_bindEvents","_formatData","_addHeaders","onLoad","_createResponse","onError","onProgress","lengthComputable","total","upload","ontimeout","setRequestHeader","getAllResponseHeaders","define","amd","initOnLoad","preventFiltering","formToggles","toggleListeners","WeakMap","formErrors","version","invalidNumberMessage","onDocumentReady","tagName","form","checked","files","selectedIndex","selected","getEffectiveValue","validateControl","rules","onlyCheck","emptyOptional","top","validateRule","rule","curElem","control","namedItem","neg","condition","success","isDisabled","message","addError","validity","valid","validateForm","sender","scope","scopeArr","showFormErrors","radios","select","textarea","disabled","element","errors","messages","focusElem","alert","validators","filled","badInput","FileList","blank","equal","loop","i1","len1","i2","len2","notEqual","minLength","tooShort","maxLength","tooLong","email","regexp","caseInsensitive","regExp","patternCaseInsensitive","numeric","integer","float","rangeUnderflow","rangeOverflow","range","submitted","fileSize","size","mimeType","image","static","toggleForm","toggleControl","firsttime","curSuccess","els","toggleId","selector","visible","srcElement","querySelectorAll","hidden","compactCheckboxes","removeAttribute","initForm","check","noValidate","stopPropagation","forms","body","ch","webalizeTable","á","ä","č","ď","é","ě","í","ľ","ň","ó","ô","ř","š","ť","ú","ů","ý","ž","require","dataStorage","_isFile","File","Blob","mergeData","forcePlain","fd","Vendor","Form","submittedBy","inLiveValidation","errorRenderer","_handleSubmit","_handleReset","setElement","_handleError","_handleBlur","setErrorRenderer","renderer","HTMLFormElement","validationMode","getElement","getElements","setSubmittedBy","validate","cleanupErrors","setValues","_getFieldNames","setValue","toStr","single","serialize","by","btn","destroy","enabledOnly","anonId","Locator","formErrorRenderer","registry","_forwardError","getForm","removeForm","refreshForms","DefaultErrorRenderer","_getErrorContainer","class","Snippet","phase","INACTIVE","handlers","PREPARE_SETUP","RUN_SETUP","PREPARE_TEARDOWN","RUN_TEARDOWN","getId","teardown","runPhase","elm","getPhase","setContainer","isContainer","Helpers","buildContent","prepareDynamicContainer","snippet","mask","sortCache","computeSortedSnippets","snippets","changeset","sortData","_getSortData","_mergeSortData","_applySortData","applySortedSnippets","firstElementChild","content","previousElementSibling","nextElementSibling","sorted","_compareSnippets","descriptor","asc","_buildSortData","_parseDescriptor","update","_extractSortData","field","extractor","attr","_getAttrExtractor","_getDataExtractor","_getTextExtractor","SnippetManager","containerCache","currentPhase","getSnippet","isSnippet","_runSnippetsPhase","getRemoveTargets","computeChanges","removeTargets","_clearDynamicContainerCache","_resolveRemovals","_resolveUpdates","_resolveDynamicSnippets","applyChanges","_applyRemove","_applyUpdate","_applyAdd","_applyDynamic","_runSnippetsPhaseOnNextFrame","cleanupDescendants","isDescendant","_resolveAddition","_resolveUpdate","cid","_getDynamicContainerParams","action","_getDynamicContainerParamsForId","requestAnimationFrame","_getDynamicContainerCache","cache","SnippetAgent","page","snippetManager","_initTransaction","transaction","_handleResponse","_applyChangeset","_doApplyChangeset","AjaxAgent","ajax","_checkTransaction","whitelistRedirects","_dispatch","_abort","_doDispatch","_doHandleResponse","postGet","allowAjax","redirect","HistoryAgent","whitelistHistory","fromHistory","setIsFromHistory","setIsHistoryState","title","_saveState","isBackground","isHistoryState","History","_handleState","_nittro","replaceState","getState","pushState","TransitionAgent","defaultSelector","_getTransitionTargets","_getRemoveTargets","_handleSnippets","_transitionIn","transitionOut","_transitionOut","_transition","aborting","dir","targets","transition","ScrollAgent","anchor","position","left","width","height","marginTop","scrollRestoration","_init","margin","scrollDown","scrollAgent","_resolveSingleTarget","_scrollTo","rect","getBoundingClientRect","previous","pageYOffset","bottom","_cleanup","_handleHistory","scrollTo","isFromHistory","_apply","_resolveTarget","force","instant","y0","dy","t0","step","x","cos","PI","Transaction","background","createRejected","setIsBackground","CspAgent","pending","_handleChangeset","_fixNonce","scripts","GoogleAnalyticsHelper","ga","currentTransaction","currentUrl","_handleLinkClick","_checkReady","whitelistLinks","backgroundErrors","_createRejectedTransaction","_createTransaction","openLink","link","_checkUrl","_checkLink","_dispatchTransaction","_handleSuccess","hasFixedParent","offsetParent","getRect","right","tryFloatingPosition","placement","positioner","opacity","fixed","elemRect","targetRect","order","getDefaultOrder","Message","_doDismiss","_normalizeDismissTime","_scheduleDismiss","_getTarget","tag","inline","rich","data-flash-dynamic","wrap","dismiss","show","_show","getLayer","getPositioner","getGlobalHolder","hide","DefaultPositioner","defaultOrder","above","innerWidth","innerHeight","below","leftOf","rightOf","globalHolder","layer","_removeStatic","Dialog","getDefaults","destroying","scrollLock","cancel","scrollPosition","keyMap","tabContext","origFocusTarget","ios","navigator","userAgent","elms","holder","templates","wrapper","buttons","HTMLElement","_createButtons","keymap","_handleKey","addFromContainer","_saveFocusedElement","_restoreFocusedElement","_handleClick","_handleScroll","Escape","setDefaults","isVisible","_setState","_lockScrolling","_setVisible","_unlockScrolling","isBusy","setBusy","getContent","getButtons","getKeyMap","getTabContext","_doDestroy","resolved","activeElement","label","IFrameDialog","_handleLoad","allowFullscreen","allowPaymentRequest","autoHeight","lazy","close","getContentDocument","contentDocument","external","ready","busy","_load","isCurrent","ignoreHash","_applyAutoHeight","offsetHeight","Manager","baseZ","stack","zIndex","_handleShow","_handleHide","_handleDestroy","createDialog","dlg","_setup","createIFrameDialog","hasOpenDialog","getTopmostOpenDialog","getOpenDialogs","getDialog","registerDialog","dialog","unregisterDialog","Confirm","_prepareOptions","confirm","Enter","onfulfill","onreject","ConfirmMixin","createConfirm","AjaxExtension","builder","FormsExtension","whitelistForms","autoResetForms","formLocator","initForms","FormsMixin","_handleButtonClick","_refreshForms","_initFormTransaction","sendForm","frm","_handleFormSuccess","allowReset","_handleFormResponse","_checkForm","PageExtension","csp","transitions","connectionError","unknownError","scroll","flashes","FlashAgent","_showFlashes","FlashesExtension","DialogAgent","dialogManager","_setupTransactionContext","disableDefaultTransitions","disableDefaultScroll","setFormLocator","ctx","dialogs","active","iframe","_mergeDefinitions","_openIframeDialog","_createDialog","_processDialog","merged","_isSnippetType","_injectForm","defs","","warn","createFormDialog","_cleanupDialog","setForm","FormDialog","_handleButton","autoFocus","_autoFocus","resetOnHide","_autoReset","clear","tabIndex","FormDialogMixin","_removeDialogForm","DialogsExtension","ConfirmExtension","autoConfirm","handleTransaction","AutoConfirm","prompt","DI","di","_stack"],"mappings":"AAAA,UAAWA,SAAW,iBAAmBA,OAAOC,UAAY,SAAU,CAClEC,OAAOC,MAAQ,CACXC,OAAQ;CCFhB,WACEC,OAASC,KAET,IAAIC,QAAU,EACd,IAAIC,MAAQ,GACZ,IAAIC,cAAgB,MAEpB,IAAKJ,OAAOK,aACVL,OAAOM,iBAAiB,UAAW,SAAUC,GAC3C,GAAIA,EAAEC,QAAUR,OAAO,CACrB,GAAII,cACFK,SAASN,MAAMI,EAAEG,WACd,CACHN,cAAgB,KAChB,IACED,MAAMI,EAAEG,QACR,MAAOH,WAEFJ,MAAMI,EAAEG,MACfN,cAAgB,UAKxB,SAASK,SAASE,IAChB,GAAIX,OAAOK,aAAcA,aAAaM,SAEjC,GAAIX,OAAOY,cAAeC,WAAWF,QACrC,CACHT,UACAC,MAAMD,SAAWS,GACjBX,OAAOc,YAAYZ,QAAS,MAIhCa,SAASC,QAAU,SAAUC,OAC3B,KAAMhB,KAAKiB,IAAM,GACf,MAAMC,YAER,GAAIF,iBAAiBF,SACnB,OAAOE,MAET,OAAO,IAAIF,SAAS,SAAUC,SAC1BA,QAAQC,UAIdF,SAASK,OAAS,SAAUH,OAC1B,KAAMhB,KAAKiB,IAAM,GACf,MAAMC,YAER,OAAO,IAAIJ,SAAS,SAAUC,QAASI,QACnCA,OAAOH,UAIbF,SAASM,IAAM,SAAUC,KACvB,KAAMrB,KAAKiB,IAAM,GACf,MAAMC,YAER,KAAMG,eAAeC,OACnB,OAAOR,SAASK,OAAOD,aAEzB,IAAIK,EAAI,IAAIT,SAEZ,SAASU,KAAKlB,EAAGmB,GACf,GAAIA,EACF,OAAOF,EAAER,QAAQU,GAEnB,GAAInB,EACF,OAAOiB,EAAEJ,OAAOb,GAElB,IAAIoB,WAAaL,IAAIM,OAAO,SAAUC,IAAKH,GACzC,GAAIA,GAAKA,EAAEI,KACT,OAAOD,IAAM,EACf,OAAOA,KACN,GAEH,GAAGF,YAAc,EACfH,EAAER,QAAQM,KAEZA,IAAIS,IAAI,SAAUL,EAAGM,GACnB,GAAIN,GAAKA,EAAEI,KACTJ,EAAEI,KAAK,SAAUG,GACfX,IAAIU,GAAKC,EACTR,OACA,OAAOQ,GACNR,QAITA,OAEA,OAAOD,GAGTT,SAASmB,KAAO,SAAUZ,KACxB,KAAMrB,KAAKiB,IAAM,GACf,MAAMC,YAER,KAAMG,eAAeC,OACnB,OAAOR,SAASK,OAAOD,aAEzB,GAAIG,IAAIa,QAAU,EAChB,OAAO,IAAIpB,SAEb,IAAIS,EAAI,IAAIT,SAEZ,SAASU,KAAKlB,EAAGmB,GACf,GAAIA,EACF,OAAOF,EAAER,QAAQU,GAEnB,GAAInB,EACF,OAAOiB,EAAEJ,OAAOb,GAElB,IAAIoB,WAAaL,IAAIM,OAAO,SAAUC,IAAKH,GACzC,GAAIA,GAAKA,EAAEI,KACT,OAAOD,IAAM,EACf,OAAOA,KACN,GAEH,GAAGF,YAAc,EACfH,EAAER,QAAQM,KAEZA,IAAIS,IAAI,SAAUL,EAAGM,GACnB,GAAIN,GAAKA,EAAEI,KACTJ,EAAEI,KAAK,SAAUG,GACfR,KAAK,KAAMQ,IACVR,QAITA,OAEA,OAAOD,GAGTT,SAASG,GAAK,EAMd,SAASH,SAASqB,uBAEhB,UAAWA,UAAY,YAAcA,UAAYC,UAC/C,MAAMlB,YAER,UAAWlB,MAAQ,UAAaA,MAAQA,KAAK6B,KAC3C,MAAMX,YAQR,IAAImB,KAAOrC,KACTsC,MAAQ,EACRC,IAAM,EACNC,KAAO,GACP9B,GAAI+B,GAENJ,KAAK,WAAaA,KAElBA,KAAK,WAAa,SAAUZ,GAC1Bf,GAAK2B,KAAK3B,GACV+B,GAAKJ,KAAKI,GACV,IAAKH,MAAO,CACVC,IAAMd,EACNa,MAAQ,EAER9B,SAASkC,MAEX,OAAOL,MAGTA,KAAK,UAAY,SAAUZ,GACzBf,GAAK2B,KAAK3B,GACV+B,GAAKJ,KAAKI,GACV,IAAKH,MAAO,CACVC,IAAMd,EACNa,MAAQ,EAER9B,SAASkC,MAGX,OAAOL,MAGTA,KAAK,MAAQ,EAEbA,KAAK,QAAU,SAAUM,IAAKC,KAC5B,KAAM5C,KAAKiB,IAAM,GACf,MAAMC,YAER,IAAIK,EAAI,IAAIT,SAEZS,EAAEb,GAAKiC,IACPpB,EAAEkB,GAAKG,IACP,GAAIN,OAAS,EAAG,CACdf,EAAER,QAAQwB,UAEP,GAAID,OAAS,EAAG,CACnBf,EAAEJ,OAAOoB,SAEN,CACHC,KAAKK,KAAKtB,GAGZ,OAAOA,GAGTc,KAAK,SAAW,SAAUO,KACxB,OAAOP,KAAK,QAAQ,KAAMO,MAG5B,IAAIE,OAAS,SAAUC,MACrBT,MAAQS,MAAQ,EAChBP,KAAKV,IAAI,SAAUkB,GACjBV,OAAS,GAAKU,EAAEjC,QAAQwB,MAAQS,EAAE7B,OAAOoB,QAI7C,IACE,UAAWJ,UAAY,WACrBA,SAASE,KAAK,WAAYA,KAAK,WACjC,MAAO/B,GACP+B,KAAK,UAAU/B,GAGjB,OAAO+B,KAIP,SAASY,UAAWC,IAAKC,GAAIC,GAAIC,IAE/B,GAAIf,OAAS,EAAG,CACd,OAAOe,KAET,WAAYd,KAAO,iBAAmBA,KAAO,oBAAsBW,KAAO,WAAY,CACpF,IAGE,IAAItB,IAAM,EACVsB,IAAII,KAAKf,IAAK,SAAUd,GACtB,GAAIG,MAAO,OACXW,IAAMd,EACN0B,MACC,SAAU1B,GACX,GAAIG,MAAO,OACXW,IAAMd,EACN2B,OAEF,MAAO9C,GACPiC,IAAMjC,EACN8C,UAEG,CACLC,MAIJ,SAASX,OAGP,IAAIQ,IACJ,IACEA,IAAMX,KAAOA,IAAIV,KACjB,MAAOvB,GACPiC,IAAMjC,EACNgC,MAAQ,EACR,OAAOI,OAGTO,UAAUC,IAAK,WACbZ,MAAQ,EACRI,QACC,WACDJ,MAAQ,EACRI,QACC,WACD,IACE,GAAIJ,OAAS,UAAY5B,IAAM,WAAY,CACzC6B,IAAM7B,GAAG6B,UAGN,GAAID,OAAS,UAAYG,IAAM,WAAY,CAC9CF,IAAME,GAAGF,KACTD,MAAQ,GAEV,MAAOhC,GACPiC,IAAMjC,EACN,OAAOwC,SAGT,GAAIP,KAAOF,KAAM,CACfE,IAAMrB,YACN4B,cACKG,UAAUC,IAAK,WAClBJ,OAAO,IACNA,OAAQ,WACTA,OAAOR,OAAS,GAAK,QAU/B,UAAW5C,QAAU,YAAa,CAChCA,OAAO,WAAaoB,aACf,CACLf,OAAO,WAAaA,OAAO,YAAce,WA3T7C;ACAA,IAAIyC,SAAW,WACX,IAAIC,EAAI,GACJC,IACAC,OAAS,GACTC,QAAU,GACVC,YAAc,IACdxB,UACAyB,IAAMC,SACNC,KAAO,SAASC,GAAK,OAAOH,IAAII,cAAcD,IAC9CE,IAAMtE,OACNuE,IAAMD,IAAIE,QAAQC,UAAYH,IAAIG,SAClCzD,WAAa,SAAS0D,EAAGd,GAAK,OAAOU,IAAItD,WAAW0D,EAAGd,IACvDe,aAAe,SAASf,GAAK,OAAOU,IAAIK,aAAaf,IACrDgB,QAAUC,QACVtC,SAAW,KACXuC,QAAU,GACVC,MAAQ,KACR7C,IAAM,CACF8C,MAAO,GACPC,QAAS,IAGjB,SAASC,WAAWC,GAChB5C,WAAaA,SAAW4B,KAAK,MAC7B5B,SAAS6C,KAAOD,EAChB,OAAO5C,SAAS6C,KAIpB,SAASC,WAAWF,GAChB,IACI,IAAIG,IAAM,yBAAyBC,KAAKhB,IAAIa,MAAM,GAAG9C,OACrD,OAAO6C,EAAEK,OAAO,EAAGF,OAASf,IAAIa,KAAKI,OAAO,EAAGF,KAEjD,MAAOG,KACL,OAAO,OAKf,IAAIC,WAAa,SAAUC,EAAGC,GAC1B,MAAMD,EAAErD,OAAQ,CACZ,IACIsD,EAAID,EAAEE,QACND,IAEA,OAAOA,EAET,MAAOlF,KAGb,OAAO,WAAa,MAAM,IAAIoF,OAXjB,CAad,CACC,WAAa,OAAO,IAAIC,gBACxB,WAAa,OAAO,IAAIC,cAAc,mBACtC,WAAa,OAAO,IAAIA,cAAc,mBACtC,WAAa,OAAO,IAAIA,cAAc,wBAG1C,IAAIC,WAAa,WACb,IACI,GAAI,oBAAqB,IAAIF,eAAkB,CAC3C,OAAO,WAAa,OAAO,IAAIA,qBAE5B,GAAIzB,IAAI4B,iBAAmB1D,UAAW,CACzC,OAAO,WAAa,OAAO,IAAI8B,IAAI4B,iBAIzC,MAAOT,MAET,OAAO,WAAa,MAAM,IAAIK,OAZjB,GAgBjB,SAASK,IAAIhB,GACT,OAAO,IAAIP,QAAQ,SAASwB,QAAS7E,QACjC,IAAI8E,IACAC,EAEJ,GAAIjB,WAAWF,GAAI,CACfkB,IAAMX,iBAEH,CACHW,IAAMJ,aAIVI,IAAIE,KAAK,MAAOpB,EAAG,MAEnB,IAAIS,EAAI,WACJU,GAAK3B,aAAa2B,GAClBF,QAAQC,MAGZ,IAAIjE,EAAI,WACJkE,GAAK3B,aAAa2B,GAClB/E,OAAO8E,MAGX,GAAI,cAAeA,IAAK,CACpBA,IAAIG,UAAYZ,EAChBS,IAAII,QAAUrE,OAEX,GAAIkC,IAAI4B,iBAAmB1D,WAAa6D,eAAe/B,IAAI4B,eAAgB,CAC9EG,IAAIK,OAASd,EACbS,IAAII,QAAUrE,MAEX,CACHiE,IAAIM,mBAAqB,WACrB,GAAIN,IAAIO,aAAe,EAAG,CACtB,OAIJ,GAAIP,IAAIQ,SAAW,IAAK,CACpBjB,QAEG,CACHxD,MAMZiE,IAAIS,OAEJR,EAAItF,WAAW,WACX,GAAIqF,IAAIO,YAAcP,IAAIO,WAAa,EAAG,IACtCP,IAAIU,QAEN,MAAOtB,MAETa,EAAI,KACJlE,KAED4B,eAKX,SAASgD,eACL,GAAIjC,QAAU,KAAM,CAChB,OAAOA,MAGX,IAAIkC,MAAQ/C,SAASgD,qBAAqB,UACtC/E,EAAGiC,EAAGD,KAEV,IAAKhC,EAAI,EAAGiC,EAAI6C,MAAM3E,OAAQH,EAAIiC,EAAGjC,IAAK,CACtCgC,KAAO8C,MAAME,KAAKhF,GAElB,GAAI,uCAAuCiF,KAAKjD,KAAKhB,OAASgB,KAAKY,MAAO,CACtE,OAAOA,MAAQZ,KAAKY,OAI5B,OAAOA,MAAQ,MAGnB,SAASQ,KAAK8B,EAAGzD,EAAGuB,GAChB,IAAIzE,EAAGiF,EAAIqB,eAEX,IAAKpD,EAAG,CACJ,GAAIuB,EAAEmC,MAAM,mBAAoB,CAC5B1D,EAAI,eACA,CACJA,EAAI,8BAEL,CACHA,EAAIA,EAAE2D,QAAQ,UAAW,IAAIC,cAGjC,GAAI5D,IAAM,WAAY,CAClBlD,EAAIyD,KAAK,SACTzD,EAAEyC,KAAOS,EACT+B,GAAKjF,EAAE+G,aAAa,QAAS9B,GAE7BR,EAAIA,EAAEoC,QAAQ,UAAW,IACzBF,EAAIA,EAAEE,QAAQ,oCAAqC,SAAUjB,EAAGoB,EAAGtD,GAC/DsD,IAAMA,EAAI,KAEV,GAAItD,EAAEkD,MAAM,0BAA2B,CACnC,MAAO,OAASI,EAAItD,EAAIsD,EAAI,QACzB,CACH,MAAO,OAASA,EAAIxC,WAAWC,EAAIf,GAAKsD,EAAI,OAIpD,GAAIhH,EAAEiH,WAAY,CACdjH,EAAEiH,WAAWC,QAAUP,MACpB,CACH3G,EAAEmH,YAAY5D,IAAI6D,eAAeT,IAGrCpD,IAAI8D,KAAKF,YAAYnH,OAElB,CACHA,EAAIyD,KAAK,UACTzD,EAAEyC,KAAOS,EACTlD,EAAEsH,KAAOX,EACT1B,GAAKjF,EAAE+G,aAAa,QAAS9B,GAC7B1B,IAAI8D,KAAKF,YAAYnH,GAAGuH,WAAWC,YAAYxH,IAIvD,SAASyH,OAAOd,EAAG3C,GACf,IAAIvC,EAAID,IAAI8C,MAAMoD,QAAQf,GAE1B,GAAIlF,GAAK,EAAG,CACR,OAAOD,IAAI+C,QAAQ9C,GAIvB,IAAIC,EAAIwB,EACJR,EAAIiE,EAAEgB,MAAM,KACZjE,EAEJ,MAAOhB,EAAEd,OAAQ,CACb8B,EAAIhB,EAAEyC,QACN,GAAIzD,EAAEgC,KAAO5B,UAAW,CACpB,GAAIkC,EAAG,CACHtC,EAAEgC,GAAK,OAEJ,CACH,MAAM,IAAI0B,MAAMuB,EAAI,0BAK5BjF,EAAIA,EAAEgC,GAIVlC,IAAI8C,MAAM/B,KAAKoE,GACfnF,IAAI+C,QAAQhC,KAAKb,GAEjB,OAAOA,EAIX,SAASkG,YAAY3C,GACjB,UAAWA,IAAM,UAAYA,EAAE4C,cAAgBC,OAAQ,CACnD7C,EAAIA,EAAE4C,YAIV,UAAW5C,IAAM,mBAAqBA,IAAM,SAAU,CAClD,MAAM,IAAIG,MAAM,0CAIpB,IAAI3D,EAAID,IAAI+C,QAAQmD,QAAQzC,GAE5B,OAAOxD,KAAO,EAAI,MAAQD,IAAI8C,MAAM7C,GAIxC,SAASsG,OACL,IAAItD,EAAGuD,EAAGtF,EAAIwB,QAAQzD,QAAQ,MAE9B,IAAKuH,EAAI,EAAGA,EAAIC,UAAUrG,OAAQoG,IAAK,CACnC,UAAWC,UAAUD,KAAO,WAAY,CACpCtF,EAAIA,EAAEnB,KAAK,SAAS2D,GAChB,OAAO,WACH,OAAOgD,OAAOhD,IAFX,CAKT+C,UAAUD,UAET,UAAWC,UAAUD,KAAO,SAAU,CACzCvD,EAAID,WAAWyD,UAAUD,IAEzB,GAAI5E,OAAOsE,QAAQjD,MAAQ,EAAG,CAC1B,GAAIpB,QAAQoB,GAAI,CACZ/B,EAAIA,EAAEnB,KAAK,SAAUmB,GACjB,OAAO,WACH,OAAOA,GAFJ,CAKTW,QAAQoB,SACP,CACH/B,EAAIW,QAAQoB,GAAK,SAAU/B,EAAG+B,GAC1B,OAAO,IAAIP,QAAQ,SAAUgB,EAAGxD,GAC5B+D,IAAIhB,GAAGlD,KAAK,SAAUkE,KAClB/C,EAAEnB,KAAK,WACHsD,KAAKY,IAAI0C,aAAc1C,IAAI2C,kBAAkB,gBAAiB3D,UACvDpB,QAAQoB,GACfrB,OAAOb,KAAKkC,GACZS,KAEDxD,OATE,CAafgB,EAAG+B,MAMrB,OAAOuD,EAAI,CACPzG,KAAM,SAAU8G,UAAWC,UACvB5F,EAAEnB,KAAK,WACH8G,WAAaH,OAAOG,YACrB,WACCC,UAAYJ,OAAOI,YAGvB,OAAON,IAOnB,SAASE,OAAOK,GAAIrD,EAAGzD,GACnB,GAAIA,IAAMK,kBAAoByG,KAAO,WAAY,CAC7C9G,EAAIyD,EACJA,EAAIqD,GACJA,GAAK,KAIT,GAAIA,GAAI,CACJnE,QAAQoE,QAAQD,GAAIA,GAAKd,OAAOc,GAAI,WAEjC,CACHA,GAAKrF,EACLkB,QAAQoE,QAAQ,KAAMD,IAI1B,IAAIE,OAASvD,EAAEtD,OAASsD,EAAEwD,WAAW9B,MAAM,0BAA0B,GAAGe,MAAM,WAAa,GACvFgB,KAAO,GACPjG,EAAGsB,EAAGtC,EAEV,IAAKgB,EAAI,EAAGA,EAAI+F,OAAO7G,OAAQc,IAAK,CAChC,GAAI+F,OAAO/F,KAAO,UAAW,CACzBiG,KAAKpG,KAAKY,UAEP,GAAIsF,OAAO/F,KAAO,OAAQ,CAC7BiG,KAAKpG,KAAKgG,SAEP,GAAIE,OAAO/F,KAAO,YAAa,CAClCiG,KAAKpG,KAAKT,gBAEP,GAAIL,IAAMK,WAAa2G,OAAO/F,KAAMjB,EAAG,CAC1CuC,EAAIvC,EAAEgH,OAAO/F,IAEb,UAAWsB,IAAM,SAAU,CACvBA,EAAIyD,OAAOzD,GAIf2E,KAAKpG,KAAKyB,QAEP,GAAIuE,GAAGE,OAAO/F,MAAQZ,UAAW,CACpC6G,KAAKpG,KAAKgG,GAAGE,OAAO/F,UAEjB,GAAIQ,EAAEuF,OAAO/F,MAAQZ,UAAW,CACnC6G,KAAKpG,KAAKW,EAAEuF,OAAO/F,SAEhB,CACH,MAAM,IAAI0C,MAAM,IAAMqD,OAAO/F,GAAK,2BAK1ChB,EAAIwD,EAAE0D,MAAML,GAAII,MAEhBvE,QAAQe,QACRf,QAAQe,QACR,OAAOzD,EAIX,SAASmH,SAAShB,YAAaiB,MAC3B,IAAIP,GAAKO,KAAKnB,MAAM,OAChBoB,IAAMR,GAAGS,MAEb,GAAIT,GAAG3G,OAAQ,CACX2G,GAAKd,OAAOc,GAAGU,KAAK,KAAM,UAEvB,CACH,GAAI7E,QAAQxC,QAAUwC,QAAQ,KAAO,KAAM,CACvC0E,KAAO1E,QAAQ,GAAK,IAAM0E,KAC1BP,GAAKnE,QAAQ,OAEV,CACHmE,GAAKrF,GAKbqF,GAAGQ,KAAOlB,YAEVrG,IAAI8C,MAAM/B,KAAKuG,MACftH,IAAI+C,QAAQhC,KAAKsF,aACjB,OAAO1E,IAIX,SAAS+F,OACL,GAAIjB,UAAUrG,OAAQ,CAClBwC,QAAQoE,QAAQP,UAAU,GAAIA,UAAU,QAErC,CACH7D,QAAQe,QACRf,QAAQe,SAIhB,SAASgE,OAAOC,OAAQvB,YAAawB,OACjC,IAAKA,MAAO,CACRA,MAAQxB,YACRA,YAAcuB,OACdA,OAAS,KAIb,IAAKA,OAAQ,CACTA,OAAStB,YAEN,UAAWsB,SAAW,SAAU,CACnCA,OAAS3B,OAAO2B,QAIpB,IAAIE,IAAM,aACVA,IAAIC,UAAYH,OAAOG,UACvB1B,YAAY0B,UAAY,IAAID,IAC5BzB,YAAY0B,UAAU1B,YAAcA,YACpCA,YAAY2B,MAAQJ,OAEpB,GAAIC,MAAO,CACP,GAAIA,MAAMI,eAAe,WAAaJ,MAAMK,OAAQ,CAChDC,UAAU9B,YAAawB,MAAMK,QAIjCC,UAAU9B,YAAY0B,UAAWF,OAIrC,OAAOxB,YAIX,SAAS+B,MAAMC,OAAQ5J,OAAQuB,KAC3B,UAAWqI,SAAW,SAAU,CAC5BA,OAASpC,OAAOoC,QAIpB,UAAW5J,SAAW,SAAU,CAC5BA,OAASwH,OAAOxH,QAIpB,GAAIA,OAAOwJ,eAAe,WAAaxJ,OAAOyJ,OAAQ,CAClDI,MAAMD,OAAQ5J,OAAOyJ,QAIzBC,UAAUE,OAAON,UAAWtJ,OAAQuB,KACpC,OAAOqI,OAIX,SAASF,UAAUE,OAAQ5J,OAAQuB,KAC/B,IAAIuH,IAEJ,IAAKA,OAAO9I,OAAQ,CAChB,GAAIA,OAAOwJ,eAAeV,MAAQA,MAAQ,SAAU,CAChDc,OAAOrI,KAAOuH,OAAOvH,IAAMA,IAAIuH,KAAOA,KAAO9I,OAAO8I,OAMhE,SAASe,MAAM9B,EAAG+B,GACd,IAAK,IAAIhB,OAAOgB,EAAG,CACf,GAAIA,EAAEN,eAAeV,KAAM,CACvB,IAAKf,EAAEyB,eAAeV,KAAM,CACxBf,EAAEe,KAAOgB,EAAEhB,UAER,UAAWf,EAAEe,OAAS,iBAAmBgB,EAAEhB,OAAS,SAAU,CACjE,IAAKf,EAAEe,KAAM,CACTf,EAAEe,KAAOgB,EAAEhB,UAER,GAAIgB,EAAEhB,KAAM,CACfe,MAAM9B,EAAEe,KAAMgB,EAAEhB,WAGjB,CACHf,EAAEe,KAAOgB,EAAEhB,QAO3B,OAAO5F,IAAM,CACTsE,OAAQA,OACRG,YAAaA,YACbM,OAAQA,OACRH,KAAMA,KACNoB,OAAQA,OACRS,MAAOA,MACPf,SAAUA,SACVK,KAAMA,MAhgBC;ACAfjG,SAASiF,OAAO,QAAS,SAASpG,WAE9B,IAAIkI,QAAU,CACVC,eAAgB,SAAStD,GACrB,IAAIzB,EAAIlE,MAAMuI,UAAUW,MAAMlH,KAAKiF,UAAW,GAC1CxG,EAAI,EACJuG,EAAGpC,EAEP,KAAOnE,EAAIyD,EAAEtD,OAAQH,IAAK,CACtBuG,EAAI9C,EAAEzD,GAAGkG,MAAM,KACf/B,EAAIoC,EAAE7C,QACN6C,EAAEQ,QAAQ7B,GACVA,EAAIqD,QAAQpE,GAAGgD,MAAMoB,QAAShC,GAIlC,OAAOrB,GAIX+B,SAAU,SAAS/B,GACf,OAAOA,IAAM7E,UAAY,mBAAsB6E,IAAM,SAAWA,EAAKA,EAAE+B,WAAa5G,UAAY6E,EAAE+B,WAAaZ,OAAOyB,UAAUb,SAAS1F,KAAK2D,IAIlJwD,QAAS,SAASxD,GACd,OAAOqD,QAAQI,SAASzD,EAAG3F,MAAMuI,UAAUW,MAAMlH,KAAKiF,UAAW,KAIrEmC,SAAU,SAASzD,EAAGgC,MAClB,IAAIjF,EAAI,EAER,OAAOiD,EAAEE,QAAQ,+CAAgD,SAASjB,EAAGoC,EAAGtF,EAAGwC,GAC/E,GAAIA,IAAM,IAAK,CACX,OAAOA,EAIX8C,EAAIA,EAAIqC,SAASrC,GAAK,EAAItE,IAE1B,GAAIiF,KAAKX,KAAOlG,UAAW,CACvB,MAAM,IAAIsD,MAAM,uBAAyB4C,EAAI,IAIjDA,EAAIW,KAAKX,GAET,OAAQ9C,GACJ,IAAK,IACD,OAAO8E,QAAQtB,SAASV,GAE5B,IAAK,IACL,IAAK,IACD,OAAOqC,SAASrC,GAEpB,IAAK,IACDA,EAAIsC,WAAWtC,GAEf,GAAItF,GAAKA,EAAEkE,MAAM,WAAY,CACzBoB,EAAIA,EAAEuC,QAAQF,SAAS3H,EAAEoC,OAAO,KAIpC,OAAOkD,EAEX,IAAK,IACDtF,EAAIA,GAAKA,EAAEkE,MAAM,eAAiBlE,EAAEoC,OAAO,EAAGpC,EAAEd,OAAS,GAAG+F,MAAM,KAAO,CAAC,KAAM,MAChF,OAAOK,EAAEpG,SAAW,EAAI,GAAKoG,EAAEkC,MAAM,GAAI,GAAGjB,KAAKvG,EAAE,KAAOsF,EAAEpG,OAAS,EAAIc,EAAE,GAAK,IAAMsF,EAAEA,EAAEpG,OAAS,GAI3G,OAAOgE,KAKf4E,SAAU,SAAS7D,EAAG8D,MAAOC,IACzB,GAAIA,GAAI,CACJ/D,EAAIA,EAAEE,QAAQ,OAAQ,KAI1BF,EAAIA,EAAEE,QAAQ,IAAI8D,OAAO,eAA2BX,QAAQY,YAAYH,OAAS,IAAI5D,QAAQ,OAAQ,KAAO,KAAM,KAAM,KAExH,OAAOmD,QAAQa,KAAKlE,EAAG,OAI3BiE,YAAa,SAASjE,GAClB,OAAOA,EAAEE,QAAQ,sCAAuC,SAI5Dc,MAAO,SAAShB,EAAGmE,GAAIC,cAAeC,QAASC,cAC3C,GAAIH,cAAcH,OAAQ,CACtBG,GAAK,IAAIH,OAAOG,GAAG7K,OAAQ,CAAC6K,GAAGI,WAAa,IAAM,GAAIJ,GAAGK,UAAY,IAAM,GAAI,KAAKC,OAAO,SAASjK,GAAK,QAASA,IAAM8H,KAAK,SAE1H,CACH6B,GAAK,IAAIH,OAAOG,GAAI,KAIxB,IAAIpJ,EAAI,GACJkD,IAAM,EAEV+B,EAAIA,EAAEE,QAAQiE,GAAI,SAASlF,EAAGlD,EAAG2I,KAC7BA,IAAMpD,UAAUA,UAAUrG,OAAS,GACnCc,EAAIiE,EAAE2E,UAAU1G,IAAKyG,KAErB,GAAI3I,EAAEd,SAAWc,EAAEkE,MAAM,cAAgBoE,QAAS,CAC9CtJ,EAAEa,KAAKwI,cAAgB,CAACrI,EAAGkC,KAAO+B,EAAE2E,UAAU1G,IAAKyG,MAIvD,GAAIJ,eAAiBrF,EAAEhE,SAAWgE,EAAEgB,MAAM,cAAgBoE,SAAU,CAChEtJ,EAAEa,KAAKwI,cAAgB,CAACnF,EAAGyF,KAAOzF,GAItChB,IAAMyG,IAAMzF,EAAEhE,OAEd,OAAOgE,IAIX,GAAIhB,IAAM+B,EAAE/E,SAAWoJ,QAAS,CAC5BrE,EAAIA,EAAE2E,UAAU1G,OACdoG,SAAYrE,EAAE/E,SAAW+E,EAAEC,MAAM,cAAiBlF,EAAEa,KAAKwI,cAAgB,CAACpE,EAAG/B,KAAO+B,GAI1F,OAAOjF,GAIXmJ,KAAM,SAASlE,EAAG3C,GACd,OAAOgG,QAAQuB,MAAM5E,EAAG3C,EAAG,KAAM,OAIrCwH,SAAU,SAAS7E,EAAG3C,GAClB,OAAOgG,QAAQuB,MAAM5E,EAAG3C,EAAG,KAAM,QAIrCyH,UAAW,SAAS9E,EAAG3C,GACnB,OAAOgG,QAAQuB,MAAM5E,EAAG3C,EAAG,MAAO,OAItCuH,MAAO,SAAU5E,EAAG3C,EAAG0H,EAAGhK,GACtB,IAAKsC,EAAG,CACJA,EAAI,gBAIR,IAAI8G,GAAK,GACT9G,EAAI,IAAMgG,QAAQY,YAAY5G,GAAK,KACnC0H,GAAKZ,GAAGvI,KAAK,IAAKyB,GAClB0H,GAAKhK,GAAKoJ,GAAGvI,KAAK,KAClBb,GAAKoJ,GAAGvI,KAAKyB,EAAG,KAEhB,OAAO2C,EAAEE,QAAQ,IAAI8D,OAAOG,GAAG7B,KAAK,IAAK,MAAO,KAIpD0C,WAAY,SAAShF,GACjB,OAAOA,EAAE7B,OAAO,EAAG,GAAG8G,cAAgBjF,EAAE7B,OAAO,IAInD+G,QAAS,SAAS7D,EAAG+B,EAAGnF,KACpB,UAAWoD,IAAM,iBAAmB+B,IAAM,SAAU,CAChD,OAAO,MAIX,IAAKnF,IAAK,CACNA,IAAMkH,KAAKC,IAAI/D,EAAEpG,OAAQmI,EAAEnI,QAI/B,OAAOoG,EAAElD,OAAO,EAAGF,KAAKkC,gBAAkBiD,EAAEjF,OAAO,EAAGF,KAAKkC,eAI/DkF,SAAU,SAASC,EAAGvI,GAClB,OAAOuI,EAAEvE,QAAQhE,MAAQ,GAI7BwI,UAAW,SAASvF,GAChB,OAAOmB,OAAOyB,UAAUb,SAAS1F,KAAK2D,KAAO,kBAAqBA,EAAI2D,WAAW3D,GAAK,GAAM,GAIhGwF,WAAY,SAASxF,GACjB,OAAOA,EACFE,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,WAIvBuF,MAAO,SAASzF,EAAG0F,UACf,OAAO1F,EAAEE,QAAQwF,SAAW,OAAS,MAAO,WAIhDC,OAAQ,SAAS1H,IAAK6F,OAClBA,OAASA,OAAS,UAAU5D,QAAQ,OAAQ,SAASjB,EAAGoC,EAAG+B,GACvD/B,EAAIpC,EAAE2G,WAAW,GACjBxC,EAAInE,EAAE2G,WAAW,GACjB,IAAI7I,EAAIoI,KAAKU,IAAIzC,EAAI/B,GACjBhE,EAAI,IAAIhD,MAAM0C,GACduB,EAAI6G,KAAKC,IAAI/D,EAAG+B,GAChBtI,EAAI,EAER,KAAOA,GAAKiC,EAAGjC,IAAK,CAChBuC,EAAEvC,GAAKwD,EAAIxD,EAGf,OAAOgL,OAAOC,aAAa9D,MAAM,KAAM5E,KAI3CY,MAAQA,IAAM,GAEd,IAAI+B,EAAI,IAAI3F,MAAM4D,KACdlB,EAAI+G,MAAM7I,OAAS,EACnBH,EAEJ,IAAKA,EAAI,EAAGA,EAAImD,IAAKnD,IAAK,CACtBkF,EAAElF,GAAKgJ,MAAMqB,KAAKa,MAAMb,KAAKQ,SAAW5I,IAI5C,OAAOiD,EAAEsC,KAAK,MAKtBhG,SAAS4F,SAASmB,QAAS;ACrP/B/G,SAASiF,OAAO,QAAS,SAASpG,WAE9B,IAAI8K,OAAS,CACTC,YAAa,SAAS7E,GAClB,cAAcA,IAAM,UAAYA,EAAEpG,SAAWE,WAIjDgL,QAAS,SAAU9E,GACf,IAAIhE,EAAIgE,EAAEpG,OAAQsB,EAAGzB,EAGrB,MAAOuC,IAAK,CAERvC,EAAKqK,KAAKQ,SAAWtI,EAAK,EAG1Bd,EAAI8E,EAAEhE,GACNgE,EAAEhE,GAAKgE,EAAEvG,GACTuG,EAAEvG,GAAKyB,EAGX,OAAO8E,GAIX+E,WAAY,SAAS/E,EAAGrB,EAAG3G,GACvB,GAAIgI,EAAEpG,SAAWE,UAAW,CACxB,MAAM,IAAIsD,MAAM,6DAIpB,OAAOpE,MAAMuI,UAAUW,MAAMlH,KAAKgF,EAAGrB,GAAK,EAAG3G,GAAKgI,EAAEpG,SAIxDoL,QAAS,SAAShF,GACd,IAAIiF,KAAO,GAAIC,EAEf,GAAIlM,MAAMmM,QAAQnF,GAAI,CAClB,IAAKkF,EAAI,EAAGA,EAAIlF,EAAEpG,OAAQsL,IAAK,CAC3BD,KAAK1K,KAAK2K,QAGX,CACH,IAAKA,KAAKlF,EAAG,CACTiF,KAAK1K,KAAK2K,IAKlB,OAAOD,MAIXG,WAAY,WACR,IAAIzE,KAAOiE,OAAOG,WAAW9E,WACzB/E,EAAIyF,KAAKxD,QACT6C,EAAGvG,EAAGC,EAAI,GAAI2L,IAElBA,IAAM,SAASH,GACX,GAAIxL,EAAEwL,KAAOpL,UAAW,CACpBJ,EAAEwL,GAAKhK,EAAEgK,UACFhK,EAAEgK,KAKjB,MAAOvE,KAAK/G,OAAQ,CAChBoG,EAAIW,KAAKxD,QAET,UAAW6C,IAAM,SAAU,CACvB,GAAIA,aAAahH,MAAO,CACpB,IAAKS,EAAI,EAAGA,EAAIuG,EAAEpG,OAAQH,IAAK,CAC3B4L,IAAIrF,EAAEvG,SAGP,CACH,IAAKA,KAAKuG,EAAG,CACTqF,IAAI5L,SAIT,CACH4L,IAAIrF,MAMhBsF,UAAW,SAAStF,GAChB,IAAIjH,IAAM,GAAImM,EAEd,IAAKA,KAAKlF,EAAG,CACTjH,IAAIwB,KAAKyF,EAAEkF,IAIf,OAAOnM,KAIX+I,MAAO,WACH,IAAInB,KAAOiE,OAAOG,WAAW9E,WACzBD,EAAIW,KAAKxD,QACTzD,EAAI,MACJqI,EAAGtI,EAEP,UAAWuG,IAAM,UAAW,CACxBtG,EAAIsG,EACJA,EAAIW,KAAKxD,QAIb,IAAK6C,EAAG,CACJA,EAAI,GAGR,MAAOW,KAAK/G,OAAQ,CAChBmI,EAAIpB,KAAKxD,QACT,GAAI4E,aAAa/I,MAAO,CACpB,IAAKS,EAAI,EAAGA,EAAIsI,EAAEnI,OAAQH,IAAK,CAC3B,GAAIC,UAAYqI,EAAEtI,KAAO,UAAYqG,OAAOyB,UAAUb,SAAS1F,KAAK+G,EAAEtI,MAAQ,kBAAmB,CAC7FuG,EAAEzF,KAAKqK,OAAOW,UAAU7L,EAAG,GAAIqI,EAAEtI,SAE9B,CACHuG,EAAEzF,KAAKwH,EAAEtI,OAOzB,OAAOuG,GAIXuF,UAAW,WACP,IAAI7L,EAAI,MACJiH,KAAOiE,OAAOG,WAAW9E,WACzBoD,IAAM,EACNnI,EAAIyF,KAAKxD,QACTqI,MAAQ,GAEZ,UAAWtK,IAAM,UAAW,CACxBxB,EAAIwB,EACJA,EAAIyF,KAAKxD,QACTkG,IAAM,EAIV,MAAO1C,KAAK/G,OAAQ,CAChB,IAAIqD,EAAI0D,KAAKK,MACTtG,EAAGsF,EAAGvG,EAEV,UAAWwD,IAAM,UAAYA,IAAM,KAAM,CACrC,SAIJ,IAAK/B,EAAG,CACJA,EAAI,GAIR,IAAKR,KAAKuC,EAAG,CACT,IAAKA,EAAEwE,eAAe/G,IAAM8K,MAAM9F,QAAQhF,MAAQ,EAAG,CACjD,SAIJ,UAAWuC,EAAEvC,KAAO,SAAU,CAC1B,GAAIhB,EAAG,CACH,GAAIuD,EAAEvC,aAAc1B,MAAO,CACvBgH,EAAI,CAACtG,EAAGwB,EAAER,IAAM,MAEhB,IAAKjB,EAAI4J,IAAK5J,EAAIwG,UAAUrG,OAAQH,IAAK,CACrCuG,EAAEzF,KAAK0F,UAAUxG,GAAGiB,IAAM,MAI9BQ,EAAER,GAAKkK,OAAO9C,MAAMlB,MAAMlJ,KAAMsI,OAE7B,CACHA,EAAI,CAACtG,EAAG,MAER,IAAKD,EAAI4J,IAAK5J,EAAIwG,UAAUrG,OAAQH,IAAK,CACrCuG,EAAEzF,KAAK0F,UAAUxG,GAAKwG,UAAUxG,GAAGiB,IAAM,KAAO,MAIpDQ,EAAER,GAAKkK,OAAOW,UAAU3E,MAAMlJ,KAAMsI,IAAM9E,EAAER,QAI7C,CACHQ,EAAER,GAAKQ,EAAER,KAAOZ,UAAYmD,EAAEvC,GAAMuC,EAAEvC,KAAO,KAAOQ,EAAER,GAAKuC,EAAEvC,QAG9D,CACHQ,EAAER,GAAKuC,EAAEvC,GAIb8K,MAAMjL,KAAKG,IAKnB,OAAOQ,GAIXuK,KAAM,SAAS/L,EAAGsG,EAAG9C,GACjB,UAAWxD,IAAM,UAAW,CACxBwD,EAAI8C,EACJA,EAAItG,EACJA,EAAI,MAGR,IAAID,EACAiB,EAAI,SAASwK,EAAG/L,GACZ,GAAIO,IAAMP,aAAaH,OAASG,aAAa2G,QAAS,CAClD8E,OAAOa,KAAK/L,EAAGP,EAAG+D,OAEf,CACHA,EAAElC,KAAK7B,EAAG+L,EAAG/L,KAKzB,GAAI6G,aAAahH,MAAO,CACpB,IAAKS,EAAI,EAAGA,EAAIuG,EAAEpG,OAAQH,IAAK,CAC3BiB,EAAEjB,EAAGuG,EAAEvG,UAGR,GAAIuG,aAAaF,OAAQ,CAC5B,IAAKrG,KAAKuG,EAAG,CACTtF,EAAEjB,EAAGuG,EAAEvG,SAGR,CACHiB,EAAE,KAAMsF,MAMpB/E,SAAS4F,SAAS+D,OAAQ;ACxP9B3J,SAASiF,OAAO,QAAS,SAAU0E,OAAQ9K,WAEvC,IAAI4L,QAAUzK,SAASkG,OAAO,SAAUwE,KACpCjO,KAAKkO,EAAI,CACLX,KAAM,GACNY,OAAQ,GACRC,WAAY,EACZC,YAAa,GAGjB,GAAIJ,IAAK,CACLjO,KAAKoK,MAAM6D,OAGhB,CACCjE,OAAQ,CACJsE,KAAM,SAAU7N,KAAM8M,MAClB,IAAKA,KAAM,CACP,OAAO9M,gBAAgBuN,QAAUvN,KAAK8N,QAAU,IAAIP,QAAQvN,WAEzD,IAAKa,MAAMmM,QAAQF,MAAO,CAC7B,MAAM,IAAI7H,MAAM,qFAIpB,IAAI5D,IAAM,IAAIkM,QACVjM,EAAGiC,EAAIuJ,KAAKrL,OACZsL,EACAnM,IAAMC,MAAMmM,QAAQhN,MAExB,IAAKsB,EAAI,EAAGA,EAAIiC,EAAGjC,IAAK,CACpByL,EAAInM,IAAMU,EAAIwL,KAAKxL,GAEnB,GAAItB,KAAK+M,KAAOpL,UAAW,CACvBN,IAAI0M,IAAIjB,KAAKxL,GAAItB,KAAK+M,KAK9B,OAAO1L,MAKfI,OAAQ,EAERuM,OAAQ,WACJ,OAAOzO,KAAKkO,EAAEE,aAAe,GAIjCG,MAAO,SAAUG,MACb,IAAInJ,EAAI,IAAIyI,QACZzI,EAAE2I,EAAEX,KAAOvN,KAAKkO,EAAEX,KAAK/C,QACvBjF,EAAE2I,EAAEG,YAAcrO,KAAKkO,EAAEG,YACzB9I,EAAErD,OAASlC,KAAKkC,OAEhB,GAAIwM,KAAM,CACNnJ,EAAE2I,EAAEC,OAASnO,KAAKkO,EAAEC,OAAOrM,IAAI,SAAUL,GACrC,OAAOA,aAAauM,QAAUvM,EAAE8M,MAAMG,MAAQjN,QAE/C,CACH8D,EAAE2I,EAAEC,OAASnO,KAAKkO,EAAEC,OAAO3D,QAI/B,OAAOjF,GAIX6E,MAAO,SAAU6D,KACb,GAAIA,eAAeD,SAAW1M,MAAMmM,QAAQQ,KAAM,CAC9CA,IAAIU,QAAQ,SAAS3N,MAAOqI,KAAOrJ,KAAKwO,IAAInF,IAAKrI,QAAWhB,WAEzD,UAAWiO,MAAQ,UAAYA,MAAQ,KAAM,CAChD,IAAK,IAAIT,KAAKS,IAAK,CACf,GAAIA,IAAIlE,eAAeyD,GAAI,CACvBxN,KAAKwO,IAAIhB,EAAGS,IAAIT,UAIrB,CACH,MAAM,IAAItM,UAAU,kFAAqF+M,IAAO,UAIpH,OAAOjO,MAIX4O,OAAQ,SAAUX,KACd,GAAIA,eAAeD,SAAW1M,MAAMmM,QAAQQ,KAAM,CAC9CA,IAAIU,QAAQ,SAAU3N,MAAOqI,KACzB,UAAWA,MAAQ,SAAU,CACzBrJ,KAAK6C,KAAK7B,WAEP,CACHhB,KAAKwO,IAAInF,IAAKrI,SAGnBhB,UACA,CACHA,KAAKoK,MAAM6D,KAIf,OAAOjO,MAIX6C,KAAM,SAAU7B,OACZ,IAAK,IAAIe,EAAI,EAAGA,EAAIwG,UAAUrG,OAAQH,IAAK,CACvC/B,KAAKkO,EAAEX,KAAK1K,KAAK7C,KAAKkO,EAAEG,aACxBrO,KAAKkO,EAAEC,OAAOtL,KAAK0F,UAAUxG,IAC7B/B,KAAKkO,EAAEG,cACPrO,KAAKkC,SAIT,OAAOlC,MAIXsJ,IAAK,WACD,IAAKtJ,KAAKkC,OAAQ,CACd,OAAO,KAIX,IAAIsL,EAAIxN,KAAKkO,EAAEX,KAAKjE,MAEpB,UAAWkE,IAAM,SAAU,CACvB,GAAIA,EAAI,IAAMxN,KAAKkO,EAAEG,YAAa,CAC9BrO,KAAKkO,EAAEG,mBAGR,CACHrO,KAAKkO,EAAEE,aAIXpO,KAAKkC,SACL,OAAOlC,KAAKkO,EAAEC,OAAO7E,OAIzB7D,MAAO,WACH,IAAKzF,KAAKkC,OAAQ,CACd,OAAO,KAIX,UAAWlC,KAAKkO,EAAEX,KAAK,KAAO,SAAU,CACpCvN,KAAKkO,EAAEG,cACPrO,KAAK6O,WAAW,EAAG7O,KAAKkC,QAAS,OAE9B,CACHlC,KAAKkO,EAAEE,aAIXpO,KAAKkC,SACLlC,KAAKkO,EAAEX,KAAK9H,QACZ,OAAOzF,KAAKkO,EAAEC,OAAO1I,SAIzBqD,QAAS,SAAU9H,OACf,IAAImN,OAASjB,OAAOG,WAAW9E,WAC3BvE,EAAImK,OAAOjM,OACXH,EAAI,EACJwL,KAAO,IAAIjM,MAAM0C,GAErB,MAAOjC,EAAIiC,EAAG,CACVuJ,KAAKxL,GAAKA,IAGdwL,KAAKzE,QAAQ,EAAG,GAChBqF,OAAOrF,QAAQ,EAAG,GAElB9I,KAAK6O,WAAW,EAAG7O,KAAKkC,OAAQ8B,GAChChE,KAAKkO,EAAEX,KAAKuB,OAAO5F,MAAMlJ,KAAKkO,EAAEX,KAAMA,MACtCvN,KAAKkO,EAAEC,OAAOW,OAAO5F,MAAMlJ,KAAKkO,EAAEC,OAAQA,QAC1CnO,KAAKkO,EAAEG,aAAerK,EACtBhE,KAAKkC,QAAU8B,EACf,OAAOhE,MAIXwK,MAAO,SAAU8D,KAAMS,IAClBT,OAASlM,YAAekM,KAAO,GAC/BA,KAAO,IAAOA,MAAQtO,KAAKkC,QAC3B6M,KAAO3M,YAAe2M,GAAK/O,KAAKkC,QAChC6M,GAAK,IAAOA,IAAM/O,KAAKkC,QAExB,IAAIqD,EAAI,IAAIyI,QAEZzI,EAAE2I,EAAEX,KAAOvN,KAAKkO,EAAEX,KAAK/C,MAAM8D,KAAMS,IAAIjN,IAAI,SAAS0L,GAChD,UAAWA,IAAM,SAAU,CACvBA,EAAIjI,EAAE2I,EAAEG,YACR9I,EAAE2I,EAAEG,cACJ,OAAOb,MAEJ,CACHjI,EAAE2I,EAAEE,aACJ,OAAOZ,KAKfjI,EAAE2I,EAAEC,OAASnO,KAAKkO,EAAEC,OAAO3D,MAAM8D,KAAMS,IACvCxJ,EAAErD,OAASqD,EAAE2I,EAAEX,KAAKrL,OAEpB,OAAOqD,GAIXuJ,OAAQ,SAAUR,KAAMU,QACpB,IAAIb,OAASjB,OAAOG,WAAW9E,WAC3BgF,KAAOY,OAAO3D,QAAQ1I,IAAI,WAAa,OAAQ,IAC/CmN,QAASlN,EAEbwL,KAAK,GAAKY,OAAO,GACjBZ,KAAK,GAAKY,OAAO,GAEjBnO,KAAKkO,EAAEX,KAAKuB,OAAO5F,MAAMlJ,KAAKkO,EAAEX,KAAMA,MACtC0B,QAAUjP,KAAKkO,EAAEC,OAAOW,OAAO5F,MAAMlJ,KAAKkO,EAAEC,OAAQA,QAEpDnO,KAAKkC,OAASlC,KAAKkO,EAAEX,KAAKrL,OAC1BlC,KAAKkO,EAAEG,YAAc,EACrBrO,KAAKkO,EAAEE,WAAa,EAEpB,IAAKrM,EAAI,EAAGA,EAAI/B,KAAKkC,OAAQH,IAAK,CAC9B,UAAW/B,KAAKkO,EAAEX,KAAKxL,KAAO,SAAU,CACpC/B,KAAKkO,EAAEX,KAAKxL,GAAK/B,KAAKkO,EAAEG,YACxBrO,KAAKkO,EAAEG,kBAEJ,CACHrO,KAAKkO,EAAEE,cAKf,OAAOa,SAIXT,IAAO,SAAUnF,IAAKrI,OAClB,IAAIe,EAAI/B,KAAKkO,EAAEX,KAAKvF,QAAQqB,KAE5B,GAAItH,KAAO,EAAG,CACV/B,KAAKkO,EAAEX,KAAK1K,KAAKwG,KACjBrJ,KAAKkO,EAAEC,OAAOtL,KAAK7B,OACnBhB,KAAKkC,SAEL,UAAWmH,MAAQ,SAAU,CACzB,GAAIA,KAAOrJ,KAAKkO,EAAEG,YAAa,CAC3BrO,KAAKkO,EAAEG,YAAchF,IAAM,OAG5B,CACHrJ,KAAKkO,EAAEE,kBAGR,CACHpO,KAAKkO,EAAEC,OAAOpM,GAAKf,MAIvB,OAAOhB,MAIXkP,IAAO,SAAU7F,IAAK8F,MAClB,IAAIpN,EAAI/B,KAAKkO,EAAEX,KAAKvF,QAAQqB,KAE5B,GAAItH,GAAK,EAAG,CACR,OAAO/B,KAAKkO,EAAEC,OAAOpM,QAElB,GAAIoN,KAAM,CACb,MAAM,IAAIC,WAAW,OAAS/F,IAAM,2BAIxC,OAAO,MAIXgG,IAAK,SAAUhG,KACX,IAAIiG,MAAQtP,KAAKkO,EAAEX,KAAKvF,QAAQqB,KAChC,OAAOiG,OAAS,GAAKtP,KAAKkO,EAAEC,OAAOmB,SAAWlN,WAIlD4M,OAAQ,SAAU3F,IAAKkG,QACnB,IAAID,MAAQtP,KAAKkO,EAAEX,KAAKvF,QAAQqB,KAEhC,GAAIiG,OAAS,EAAG,CACZtP,KAAKkO,EAAEX,KAAKuB,OAAOQ,MAAO,GAC1BtP,KAAKkO,EAAEC,OAAO3D,MAAM8E,MAAO,GAC3BtP,KAAKkC,SAEL,UAAWmH,MAAQ,SAAU,CACzB,GAAIA,IAAM,IAAMrJ,KAAKkO,EAAEG,YAAa,CAChCrO,KAAKkO,EAAEG,mBAER,CACHrO,KAAKkO,EAAEE,mBAER,GAAImB,OAAQ,CACf,MAAM,IAAIH,WAAW,OAAS/F,IAAM,2BAGxC,OAAOrJ,MAGX2O,QAAS,SAAUa,SAAUC,SACzB,IAAK,IAAI1N,EAAI,EAAGA,EAAI/B,KAAKkC,OAAQH,IAAK,CAClCyN,SAASlM,KAAKmM,SAAW,KAAMzP,KAAKkO,EAAEC,OAAOpM,GAAI/B,KAAKkO,EAAEX,KAAKxL,GAAI/B,MAIrE,OAAOA,MAIX8B,IAAK,SAAU0N,SAAUE,UAAWD,SAChC,OAAOzP,KAAKuO,MAAMmB,WAAW3B,KAAKyB,SAAUE,UAAWD,UAI3D1B,KAAM,SAAUyB,SAAUE,UAAWD,SACjC,IAAK,IAAI1N,EAAI,EAAGA,EAAI/B,KAAKkC,OAAQH,IAAK,CAClC,GAAI2N,WAAa1P,KAAKkO,EAAEC,OAAOpM,aAAciM,QAAS,CAClDhO,KAAKkO,EAAEC,OAAOpM,GAAGgM,KAAKyB,SAAUE,UAAWD,aAExC,CACHzP,KAAKkO,EAAEC,OAAOpM,GAAKyN,SAASlM,KAAKmM,SAAW,KAAMzP,KAAKkO,EAAEC,OAAOpM,GAAI/B,KAAKkO,EAAEX,KAAKxL,GAAI/B,OAK5F,OAAOA,MAIX2P,KAAM,SAAUC,UAAWH,SACvB,IAAI1N,EAAI/B,KAAK6P,MAAMD,UAAWH,QAAS,MACvC,OAAO1N,IAAM,MAAQ,KAAO/B,KAAKkO,EAAEC,OAAOpM,IAI9C+N,QAAS,SAAUF,UAAWH,SAC1B,IAAI1N,EAAI/B,KAAK6P,MAAMD,UAAWH,QAAS,MACvC,OAAO1N,IAAM,MAAQ,KAAO/B,KAAKkO,EAAEX,KAAKxL,IAI5CgO,KAAM,SAAUH,UAAWH,SACvB,OAAOzP,KAAK6P,MAAMD,UAAWH,QAAS,QAAU,OAIpDrO,IAAK,SAAUwO,UAAWH,SACtB,OAAOzP,KAAK6P,MAAMD,UAAWH,QAAS,SAAW,OAIrD/D,OAAQ,SAAUkE,UAAWH,SACzB,IAAIlK,EAAI,IAAIyI,QACRjM,EAEJ,IAAKA,EAAI,EAAGA,EAAI/B,KAAKkC,OAAQH,IAAK,CAC9B,GAAI6N,UAAUtM,KAAKmM,SAAW,KAAMzP,KAAKkO,EAAEC,OAAOpM,GAAI/B,KAAKkO,EAAEX,KAAKxL,GAAI/B,MAAO,CACzE,UAAWA,KAAKkO,EAAEX,KAAKxL,KAAO,SAAU,CACpCwD,EAAE1C,KAAK7C,KAAKkO,EAAEC,OAAOpM,QAElB,CACHwD,EAAEiJ,IAAIxO,KAAKkO,EAAEX,KAAKxL,GAAI/B,KAAKkO,EAAEC,OAAOpM,MAMhD,OAAOwD,GAIXyK,WAAY,WACR,GAAIhQ,KAAKyO,SAAU,CACf,OAAOzO,KAAK4N,YAAY9L,IAAI,SAASL,GACjC,OAAOA,aAAauM,QAAUvM,EAAEuO,aAAevO,IAKvD,IAAK,IAAIM,EAAI,EAAGC,EAAI,GAAID,EAAI/B,KAAKkC,OAAQH,IAAK,CAC1C,GAAI/B,KAAKkO,EAAEC,OAAOpM,aAAciM,QAAS,CACrChM,EAAEhC,KAAKkO,EAAEX,KAAKxL,IAAM/B,KAAKkO,EAAEC,OAAOpM,GAAGiO,iBAElC,CACHhO,EAAEhC,KAAKkO,EAAEX,KAAKxL,IAAM/B,KAAKkO,EAAEC,OAAOpM,IAK1C,OAAOC,GAIXsL,QAAS,WACL,OAAOtN,KAAKkO,EAAEX,KAAK/C,SAIvBoD,UAAW,WACP,OAAO5N,KAAKkO,EAAEC,OAAO3D,SAIzBqE,WAAY,SAAUP,KAAMS,GAAIkB,MAC5B,MAAO3B,KAAOS,GAAI,CACd,UAAW/O,KAAKkO,EAAEX,KAAKe,QAAU,SAAU,CACvCtO,KAAKkO,EAAEX,KAAKe,OAAS2B,KAIzB3B,SAKRuB,MAAO,SAAUD,UAAWH,QAASS,QACjC,IAAK,IAAInO,EAAI,EAAGA,EAAI/B,KAAKkC,OAAQH,IAAK,CAClC,GAAI6N,UAAUtM,KAAKmM,SAAW,KAAMzP,KAAKkO,EAAEC,OAAOpM,GAAI/B,KAAKkO,EAAEX,KAAKxL,GAAI/B,QAAUkQ,OAAQ,CACpF,OAAOnO,GAKf,OAAO,SAKfwB,SAAS4F,SAAS6E,QAAS;AC7b/BzK,SAASiF,OAAO,QAAS,SAAS8B,QAASlI,WAEvC,IAAIiC,SAAWzE,OAAOwE,QAAQC,UAAYzE,OAAOyE,SAEjD,IAAI8L,IAAM,SAASlJ,GACf,GAAIA,IAAM,MAAQA,IAAM,IAAMA,IAAM7E,UAAW,CAC3CpC,KAAKkO,EAAI,CACLkC,SAAU/L,SAAS+L,SACnBC,SAAUhM,SAASgM,SACnBC,KAAMjM,SAASiM,KACfC,KAAMlM,SAASmM,SACfzH,OAAQoH,IAAIM,WAAWpM,SAASqM,QAChCC,KAAMtM,SAASsM,MAGnBC,gBAAgBvM,SAASW,KAAMhF,KAAKkO,OACjC,CACHjH,GAAK,GAEL,IAAI0C,MAAQwG,IAAIU,YAAY1L,KAAK8B,GAC7B6J,KACA/O,EAEJ/B,KAAKkO,EAAI,CACLkC,SAAUzG,MAAQA,MAAM,IAAMtF,SAAS+L,SAAW/L,SAAS+L,UAG/D,GAAIzG,MAAO,CACP,GAAIA,MAAM,IAAMA,MAAM,IAAMA,MAAM,GAAI,CAClC1C,EAAIA,EAAE7B,OAAOuE,MAAM,GAAGzH,QACtB4O,KAAOX,IAAIY,aAAa5L,KAAK8B,IAAM,CAAC,IACpCA,EAAIA,EAAE7B,OAAO0L,KAAK,GAAG5O,QACrBlC,KAAKkO,EAAE8C,SAAWF,KAAK,IAAM,GAC7B9Q,KAAKkO,EAAE+C,SAAWH,KAAK,IAAM,GAC7B9Q,KAAKkO,EAAEmC,SAAWS,KAAK,IAAM,GAC7B9Q,KAAKkO,EAAEoC,KAAOQ,KAAK,IAAM,OACtB,CACH9Q,KAAKkO,EAAE8C,SACDhR,KAAKkO,EAAE+C,SACPjR,KAAKkO,EAAEmC,SACPrQ,KAAKkO,EAAEoC,KACPtQ,KAAKkO,EAAEqC,KACPvQ,KAAKkO,EAAEyC,KACP,GAEN3Q,KAAKkO,EAAEnF,OAAS,GAChB,YAED,CACH/I,KAAKkO,EAAE8C,SAAW,GAClBhR,KAAKkO,EAAE+C,SAAW,GAClBjR,KAAKkO,EAAEmC,SAAWhM,SAASgM,SAC3BrQ,KAAKkO,EAAEoC,KAAOjM,SAASiM,KAG3B,IAAKvO,EAAIkF,EAAEe,QAAQ,OAAS,EAAG,CAC3BhI,KAAKkO,EAAEyC,KAAO1J,EAAE7B,OAAOrD,GACvBkF,EAAIA,EAAE7B,OAAO,EAAGrD,OACb,CACH/B,KAAKkO,EAAEyC,KAAO,GAGlB,IAAK5O,EAAIkF,EAAEe,QAAQ,OAAS,EAAG,CAC3BhI,KAAKkO,EAAEnF,OAASoH,IAAIM,WAAWxJ,EAAE7B,OAAOrD,EAAI,IAC5CkF,EAAIA,EAAE7B,OAAO,EAAGrD,OACb,CACH/B,KAAKkO,EAAEnF,OAAS,GAGpB/I,KAAKkO,EAAEqC,KAAOtJ,GAAK,MAI3BkJ,IAAItG,UAAUqH,YAAc,WACxB,OAAOlR,KAAKkO,EAAEkC,UAIlBD,IAAItG,UAAUsH,YAAc,WACxB,OAAOnR,KAAKkO,EAAE8C,UAIlBb,IAAItG,UAAUuH,YAAc,WACxB,OAAOpR,KAAKkO,EAAE+C,UAIlBd,IAAItG,UAAUwH,YAAc,WACxB,OAAOrR,KAAKkO,EAAEmC,UAIlBF,IAAItG,UAAUyH,QAAU,WACpB,OAAOtR,KAAKkO,EAAEoC,MAIlBH,IAAItG,UAAU0H,aAAe,WACzB,IAAIjJ,EAAI,GAER,GAAItI,KAAKkO,EAAE8C,SAAU,CACjB,GAAIhR,KAAKkO,EAAE+C,SAAU,CACjB3I,GAAKtI,KAAKkO,EAAE8C,SAAW,IAAMhR,KAAKkO,EAAE+C,SAAW,QAE5C,CACH3I,GAAKtI,KAAKkO,EAAE8C,SAAW,KAK/B1I,GAAKtI,KAAKkO,EAAEmC,SAEZ,GAAIrQ,KAAKkO,EAAEoC,KAAM,CACbhI,GAAK,IAAMtI,KAAKkO,EAAEoC,KAItB,OAAOhI,GAIX6H,IAAItG,UAAU2H,UAAY,WACtB,OAAOxR,KAAKkO,EAAEkC,SAAW,KAAOpQ,KAAKkO,EAAEmC,UAAYrQ,KAAKkO,EAAEoC,KAAO,IAAMtQ,KAAKkO,EAAEoC,KAAO,KAGzFH,IAAItG,UAAU4H,QAAU,WACpB,OAAOzR,KAAKkO,EAAEqC,MAIlBJ,IAAItG,UAAU6H,SAAW,WACrB,IAAIpK,EAAI6I,IAAIwB,WAAW3R,KAAKkO,EAAEnF,QAC9B,OAAOzB,EAAEpF,OAAS,IAAMoF,EAAI,IAIhC6I,IAAItG,UAAU+H,SAAW,SAAS5N,GAC9B,OAAOhE,KAAKkO,EAAEnF,OAAO/E,IAIzBmM,IAAItG,UAAUgI,SAAW,SAAS7N,GAC9B,OAAOhE,KAAKkO,EAAEnF,OAAO/E,KAAO5B,WAIhC+N,IAAItG,UAAUiI,UAAY,WACtB,OAAO9R,KAAKkO,EAAEnF,QAIlBoH,IAAItG,UAAUkI,QAAU,WACpB,OAAO/R,KAAKkO,EAAEyC,MAKlBR,IAAItG,UAAUmI,YAAc,SAAS5B,UACjCpQ,KAAKkO,EAAEkC,SAAWA,SAAW9F,QAAQyB,UAAUqE,SAAU,KAAO,IAAM,GACtE,OAAOpQ,MAIXmQ,IAAItG,UAAUoI,YAAc,SAASjB,UACjChR,KAAKkO,EAAE8C,SAAWA,SAClB,OAAOhR,MAIXmQ,IAAItG,UAAUqI,YAAc,SAASjB,UACjCjR,KAAKkO,EAAE+C,SAAWA,SAClB,OAAOjR,MAIXmQ,IAAItG,UAAUsI,YAAc,SAAS9B,UACjCrQ,KAAKkO,EAAEmC,SAAWA,SAClB,OAAOrQ,MAIXmQ,IAAItG,UAAUuI,QAAU,SAAS9B,MAC7BtQ,KAAKkO,EAAEoC,KAAOA,KACd,OAAOtQ,MAIXmQ,IAAItG,UAAUwI,QAAU,SAAS9B,MAC7BvQ,KAAKkO,EAAEqC,KAAOA,KAAO,IAAMjG,QAAQwB,SAASyE,KAAM,KAAO,GACzD,OAAOvQ,MAIXmQ,IAAItG,UAAUyI,SAAW,SAASC,OAC9BvS,KAAKkO,EAAEnF,OAASoH,IAAIM,WAAW8B,OAC/B,OAAOvS,MAIXmQ,IAAItG,UAAU2I,SAAW,SAASxO,EAAGvC,GACjCzB,KAAKkO,EAAEnF,OAAO/E,GAAKvC,EACnB,OAAOzB,MAIXmQ,IAAItG,UAAU4I,UAAY,SAASzP,GAC/B,GAAI1B,MAAMmM,QAAQzK,KAAOA,EAAEd,QAAU,SAAUc,EAAE,IAAM,UAAWA,EAAE,IAAK,CACrEA,EAAImN,IAAIM,WAAWN,IAAIwB,WAAW3O,EAAG,OAGzC,IAAK,IAAIwK,KAAKxK,EAAG,CACb,GAAIA,EAAEwK,KAAOpL,UAAW,CACpBpC,KAAKkO,EAAEnF,OAAOyE,GAAKxK,EAAEwK,IAI7B,OAAOxN,MAIXmQ,IAAItG,UAAUiI,UAAY,WACtB,OAAO9R,KAAKkO,EAAEnF,QAIlBoH,IAAItG,UAAU6I,UAAY,SAAS1P,GAC/BhD,KAAKkO,EAAEnF,OAAS,GAChB/I,KAAKyS,UAAUzP,GACf,OAAOhD,MAIXmQ,IAAItG,UAAU8I,YAAc,SAAS3O,UAC1BhE,KAAKkO,EAAEnF,OAAO/E,GACrB,OAAOhE,MAIXmQ,IAAItG,UAAU+I,QAAU,SAASjC,MAC7B3Q,KAAKkO,EAAEyC,KAAOA,KAAO,IAAMrG,QAAQwB,SAAS6E,KAAM,KAAO,GACzD,OAAO3Q,MAKXmQ,IAAItG,UAAUgJ,WAAa,WACvB,OAAO7S,KAAKkO,EAAEkC,SAAW,KAAOpQ,KAAKuR,eAAiBvR,KAAKkO,EAAEqC,KAAOvQ,KAAK0R,WAAa1R,KAAKkO,EAAEyC,MAIjGR,IAAItG,UAAUiJ,QAAU,WACpB,OAAO9S,KAAKkO,EAAEqC,KAAOvQ,KAAK0R,WAAa1R,KAAKkO,EAAEyC,MAIlDR,IAAItG,UAAUkJ,WAAa,SAAShE,IAChCA,GAAKoB,IAAI7B,KAAKS,IAAM1K,SAASW,MAE7B,GAAI+J,GAAGmC,gBAAkBlR,KAAKkR,cAAe,CACzC,OAAOlR,KAAK6S,aAIhB,GAAI9D,GAAGwC,iBAAmBvR,KAAKuR,eAAgB,CAC3C,MAAO,KAAOvR,KAAKuR,eAAiBvR,KAAKyR,UAAYzR,KAAK0R,WAAa1R,KAAK+R,UAIhF,GAAIhD,GAAG0C,YAAczR,KAAKyR,UAAW,CACjC,OAAOtB,IAAI6C,gBAAgBjE,GAAG0C,UAAWzR,KAAKyR,WAAazR,KAAK0R,WAAa1R,KAAK+R,UAItF,IAAIkB,IAAMlE,GAAG2C,WAAYwB,MAAQlT,KAAK0R,WACtC,GAAIuB,MAAQC,MAAO,CACf,OAAOA,MAAQlT,KAAK+R,UAIxB,OAAOhD,GAAGgD,YAAc/R,KAAK+R,UAAY,GAAK/R,KAAK+R,WAIvD5B,IAAItG,UAAUb,SAAW,WACrB,OAAOhJ,KAAK6S,cAIhB1C,IAAItG,UAAUsJ,QAAU,WACpB,OAAOnT,KAAKmM,QAAQgE,IAAIiD,eAAiBjD,IAAIkD,KAAKC,MAItDnD,IAAItG,UAAUsC,QAAU,SAAS4C,IAC7B,KAAMA,cAAcoB,KAAM,CACtBpB,GAAKoB,IAAI7B,KAAKS,IAIlB,IAAI/M,EAAI,EAERhC,KAAKkR,gBAAkBnC,GAAGmC,gBAAkBlP,GAAKmO,IAAIkD,KAAKE,UAC1DvT,KAAKmR,gBAAkBpC,GAAGoC,gBAAkBnP,GAAKmO,IAAIkD,KAAKG,UAC1DxT,KAAKoR,gBAAkBrC,GAAGqC,gBAAkBpP,GAAKmO,IAAIkD,KAAKI,UAC1DzT,KAAKqR,gBAAkBtC,GAAGsC,gBAAkBrP,GAAKmO,IAAIkD,KAAKK,UAC1D1T,KAAKsR,YAAcvC,GAAGuC,YAActP,GAAKmO,IAAIkD,KAAKC,MAClDtT,KAAKyR,YAAc1C,GAAG0C,YAAczP,GAAKmO,IAAIkD,KAAKM,MAClD3T,KAAK0R,aAAe3C,GAAG2C,aAAe1P,GAAKmO,IAAIkD,KAAKO,OACpD5T,KAAK+R,YAAchD,GAAGgD,YAAc/P,GAAKmO,IAAIkD,KAAKQ,MAElD,OAAO7R,GAIXmO,IAAIU,YAAc,qDAClBV,IAAIY,aAAe,oDAEnBZ,IAAIkD,KAAO,CACPE,SAAU,IACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVJ,KAAM,EACNK,KAAM,EACNC,MAAO,EACPC,KAAM,GAGV1D,IAAI7B,KAAO,SAASrH,GAChB,OAAOA,aAAakJ,IAAM,IAAIA,IAAIlJ,EAAE4L,cAAgB,IAAI1C,IAAIlJ,IAGhEkJ,IAAIiD,YAAc,WACd,OAAO,IAAIjD,KAGfA,IAAI2D,WAAa,SAAUvD,MACvB,OAAOA,KAAKpJ,QAAQ,gBAAiB,KAIzCgJ,IAAI6C,gBAAkB,SAAS1E,KAAMS,IACjCT,KAAOhE,QAAQwB,SAASwC,KAAM,KAAKrG,MAAM,KACzCqG,KAAKhF,MAEL,IAAKyF,GAAG7H,MAAM,OAAQ,CAClB,OAAO6H,GAAG5H,QAAQ,QAAS,IAI/B4H,GAAKzE,QAAQwB,SAASiD,GAAI,KAAK9G,MAAM,KAErC,IAAI3H,EAAI,EACJkF,EACAhC,EACA+B,EAAI,GACJvB,EAAIoI,KAAKC,IAAIiC,KAAKpM,OAAQ6M,GAAG7M,QAEjC,KAAO5B,EAAI0D,EAAG1D,IAAK,CACf,GAAIgO,KAAKhO,KAAOyO,GAAGzO,GAAI,CACnB,OAKR,IAAKkF,EAAIlF,EAAGkF,EAAI8I,KAAKpM,OAAQsD,IAAK,CAC9BD,EAAE1C,KAAK,MAIX,IAAKW,EAAIlD,EAAGkD,EAAIuL,GAAG7M,OAAQsB,IAAK,CAC5B+B,EAAE1C,KAAKkM,GAAGvL,IAId,OAAO+B,EAAEgE,KAAK,MAIlB4G,IAAIwB,WAAa,SAASlR,KAAMsT,OAC5B,IAAIzM,EAAI,GAAItD,EAEZ,SAASgQ,GAAGvS,GACR,OAAOwS,mBAAmBxS,GAAG0F,QAAQ,OAAQ,KAGjD,SAAS5E,IAAId,GACT,GAAIA,IAAMW,UAAW,CACjB,OAAO,UAEJ,UAAWX,IAAM,UAAW,CAC/B,OAAOA,EAAI,EAAI,MAEZ,CACH,OAAOuS,GAAG,GAAKvS,IAKvB,SAASyS,QAAQ5L,EAAGtE,GAChB,IAAIhC,EAAI,GAAID,EAEZ,GAAIT,MAAMmM,QAAQnF,GAAI,CAClB,IAAKvG,EAAI,EAAGA,EAAIuG,EAAEpG,OAAQH,IAAK,CAC3BC,EAAEa,KAAKmR,GAAGhQ,EAAI,MAAQ,IAAMzB,IAAI+F,EAAEvG,UAGnC,CACH,IAAKA,KAAKuG,EAAG,CACT,UAAWA,EAAEvG,KAAO,SAAU,CAC1BC,EAAEa,KAAKqR,QAAQ5L,EAAEvG,GAAIiC,EAAI,IAAMjC,EAAI,UAEhC,CACHC,EAAEa,KAAKmR,GAAGhQ,EAAI,IAAMjC,EAAI,KAAO,IAAMQ,IAAI+F,EAAEvG,OAMvD,OAAOC,EAAEE,OAASF,EAAE0J,OAAO,SAASjK,GAAK,OAAOA,IAAM,OAAQ8H,KAAK,KAAO,KAI9E,IAAKvF,KAAKvD,KAAM,CACZ,GAAIA,KAAKuD,KAAO,MAAQvD,KAAKuD,KAAO5B,UAAW,CAC3C,cAEG,GAAI2R,MAAO,CACdzM,EAAEzE,KAAKmR,GAAGvT,KAAKuD,GAAGoF,MAAQ,IAAM7G,IAAI9B,KAAKuD,GAAGhD,aAEzC,UAAWP,KAAKuD,KAAO,SAAU,CACpCsD,EAAEzE,KAAKqR,QAAQzT,KAAKuD,GAAIA,QAErB,CACHsD,EAAEzE,KAAKmR,GAAGhQ,GAAK,IAAMzB,IAAI9B,KAAKuD,MAKtC,OAAOsD,EAAEoE,OAAO,SAASjK,GAAK,OAAOA,IAAM,OAAS8H,KAAK,MAI7D4G,IAAIM,WAAa,SAASxJ,GACtB,GAAIA,EAAEC,MAAM,SAAU,CAClB,MAAO,GAIXD,EAAIqD,QAAQwB,SAAS7E,EAAG,KAAKgB,MAAM,KAEnC,IAAIjF,EAAI,GAAIsF,EAAI,MAAOhE,EAAG/C,EAAGiM,EAAGzL,EAAGmE,EAAGlC,EAAGvC,EAEzC,SAAS0S,IAAI1S,GACT,OAAO2S,mBAAmB3S,EAAE0F,QAAQ,MAAM,MAG9C,SAASkN,YAAY5S,GACjB,IAAI6C,EAEJ,GAAI7C,EAAEyF,MAAM,sBAAwB5C,EAAIqG,SAASlJ,IAAM,KAAOA,EAAG,CAC7D,OAAO6C,OAEJ,GAAI7C,EAAEyF,MAAM,gBAAkB5C,EAAIsG,WAAWnJ,IAAM,KAAOA,EAAG,CAChE,OAAO6C,EAIX,OAAO7C,EAIX,IAAKM,EAAI,EAAGA,EAAIkF,EAAE/E,OAAQH,IAAK,CAC3BmE,EAAIe,EAAElF,GAAGkG,MAAM,KACfjE,EAAImQ,IAAIjO,EAAET,SACVhE,EAAI4S,YAAYF,IAAIjO,EAAEqD,KAAK,OAE3B,GAAIvF,EAAEgE,QAAQ,QAAU,EAAG,CACvBhE,EAAIA,EAAEmD,QAAQ,MAAO,IACrB5F,EAAIyC,EAAEiE,MAAM,KACZ3D,EAAItB,EACJsF,EAAI,MAEJ,GAAItE,EAAEkD,MAAM,OAAQ,CAChB3F,EAAE+H,MACFhB,EAAI,KAIRtE,EAAIzC,EAAE+H,MAEN,MAAO/H,EAAEW,OAAQ,CACbsL,EAAIjM,EAAEkE,QAEN,GAAInB,EAAEkJ,KAAOpL,UAAW,CACpBkC,EAAEkJ,GAAK,GAIXlJ,EAAIA,EAAEkJ,GAIV,GAAIlF,EAAG,CACH,GAAIhE,EAAEN,KAAO5B,UAAW,CACpBkC,EAAEN,GAAK,CAACvC,OAEL,CACH6C,EAAEN,GAAGnB,KAAKpB,QAGX,CACH6C,EAAEN,GAAKvC,OAGR,CACHuB,EAAEgB,GAAKvC,GAKf,OAAOuB,GAKX,SAAS4N,gBAAgB0D,IAAKC,MAC1BD,IAAMA,IAAInN,QAAQgJ,IAAIU,YAAa,IAEnC,IAAIjH,IAAM0K,IAAItM,QAAQ,KAEtB,GAAI4B,KAAO,EAAG,CACVA,IAAM0K,IAAIlP,OAAO,EAAGwE,KAAK3B,MAAM,IAAK,GACpCsM,KAAKvD,SAAWpH,IAAI,GACpB2K,KAAKtD,SAAWrH,IAAI,IAAM,OACvB,CACH2K,KAAKvD,SAAWuD,KAAKtD,SAAW,IAIxC1N,SAAS4F,SAASgH,IAAK;AC7hB3B5M,SAASiF,OAAO,QAAS,SAAU0E,OAAQ5C,QAASlI,WAIhD,SAASN,IAAImH,KAAMuG,UACfvG,KAAOiE,OAAOG,WAAWpE,MAEzB,GAAI3H,MAAMmM,QAAQxE,KAAK,IAAK,CACxB,IAAK,IAAIlH,EAAI,EAAG8E,MAAQoC,KAAK,GAAIuL,IAAM,GAAIzS,EAAI8E,MAAM3E,OAAQH,IAAK,CAC9DkH,KAAK,GAAKwL,QAAQ5N,MAAM9E,IAExB,GAAIkH,KAAK,GAAI,CACTuL,IAAI3R,KAAK2M,SAAStG,MAAM,KAAMD,WAE3B,CACHuL,IAAI3R,KAAKoG,KAAK,KAKtB,OAAOuL,QAEJ,CACHvL,KAAK,GAAKwL,QAAQxL,KAAK,IAEvB,GAAIA,KAAK,GAAI,CACT,OAAOuG,SAAStG,MAAM,KAAMD,UAEzB,CACH,OAAOA,KAAK,KAMxB,SAASwL,QAAQ1Q,MACb,GAAIzC,MAAMmM,QAAQ1J,OAASA,gBAAgB2Q,gBAAkB3Q,gBAAgB4Q,SAAU,CACnF5Q,KAAOA,KAAK,GAIhB,cAAcA,OAAS,SAAW6Q,IAAIC,QAAQ9Q,MAAQA,KAI1D,SAAS+Q,YAAY/Q,KAAMgR,MACvBhR,KAAO0Q,QAAQ1Q,MAEf,IAAKA,MAAQgR,QAAQhR,KAAKiR,MAAO,CAC7B,OAAOD,KAKX,IAAI/R,EAAI+R,KAAKE,OAAO,GAAG/I,cAAgB6I,KAAK3P,OAAO,GAC/C8P,SAAW,CAAC,SAAWlS,EAAG,MAAQA,EAAG,IAAMA,EAAG,KAAOA,GACrDjB,EAEJ,IAAKA,EAAI,EAAGA,EAAImT,SAAShT,OAAQH,IAAK,CAClC,GAAImT,SAASnT,KAAMgC,KAAKiR,MAAO,CAC3B,OAAOE,SAASnT,IAKxB,OAAOgT,KAIX,SAASI,UAAUnU,OACf,IAAKA,MAAO,OAAO,KAEnB,IACI,OAAOoU,KAAKC,MAAMrU,OAEpB,MAAOV,GACL,OAAOU,OAUf,UAAWpB,OAAO0V,cAAgB,WAAY,CAC1C1V,OAAO0V,YAAc,SAASC,MAAOxM,QACjCA,OAASA,QAAU,CAAEyM,QAAS,MAAOC,WAAY,MAAOC,OAAQtT,WAChE,IAAIuT,IAAM7R,SAAS8R,YAAY,eAC/BD,IAAIE,gBAAgBN,MAAOxM,OAAOyM,QAASzM,OAAO0M,WAAY1M,OAAO2M,QACrE,OAAOC,KAGX/V,OAAO0V,YAAYzL,UAAYjK,OAAOkW,MAAMjM,UAIhD,IAAIkM,kBAAoB,CACpBC,WAAY,CACRC,OAAQ,SAASlT,KAAMgG,QACnBA,OAAOmN,OAASnN,OAAOmN,KAAOtW,QAC9B,OAAO,IAAIoW,WAAWjT,KAAMgG,SAEhCoN,KAAM,SAASZ,MAAOxS,KAAMgG,QACxBwM,MAAMa,eACFrT,KACAgG,OAAOyM,QACPzM,OAAO0M,WACP1M,OAAOmN,MAAQtW,OACfmJ,OAAO2M,QAAU,EACjB3M,OAAOsN,SAAW,EAClBtN,OAAOuN,SAAW,EAClBvN,OAAOwN,SAAW,EAClBxN,OAAOyN,SAAW,EAClBzN,OAAO0N,SAAW,MAClB1N,OAAO2N,QAAU,MACjB3N,OAAO4N,UAAY,MACnB5N,OAAO6N,SAAW,MAClB7N,OAAO8N,QAAU,EACjB9N,OAAO+N,iBAInBC,cAAe,CACXd,OAAQ,SAASlT,KAAMgG,QAAU,OAAO,IAAIgO,cAAchU,KAAMgG,SAChEoN,KAAM,SAASZ,MAAOxS,KAAMgG,QACxB,IAAIiO,UAAY,GAChBjO,OAAO0N,SAAWO,UAAUnU,KAAK,WACjCkG,OAAO4N,UAAYK,UAAUnU,KAAK,SAClCkG,OAAO2N,QAAUM,UAAUnU,KAAK,OAChCkG,OAAO6N,SAAWI,UAAUnU,KAAK,QACjC0S,MAAM0B,kBAAkBlU,KAAMgG,OAAOyM,QAASzM,OAAO0M,WAAY1M,OAAOmN,MAAQtW,OAAQmJ,OAAOM,KAAO,GAAIN,OAAO1E,UAAY,EAAG2S,UAAUzN,KAAK,QAGvJ2N,WAAY,CACRjB,OAAQ,SAASlT,KAAMgG,QAAU,OAAO,IAAImO,WAAWnU,KAAMgG,SAC7DoN,KAAM,SAASZ,MAAOxS,KAAMgG,QACxBwM,MAAM4B,YAAYpU,KAAMgG,OAAOyM,QAASzM,OAAO0M,WAAY1M,OAAOmN,MAAQtW,OAAQmJ,OAAO2M,QAAU,IAEvGtM,KAAM,WAEVgO,WAAY,CACRnB,OAAQ,SAASlT,KAAMgG,QAAU,OAAO,IAAI+M,MAAM/S,KAAMgG,SACxDoN,KAAM,SAASZ,MAAOxS,KAAMgG,QACxBwM,MAAM8B,UAAUtU,KAAMgG,OAAOyM,QAASzM,OAAO0M,cAGrDH,YAAa,CACTW,OAAQ,SAASlT,KAAMgG,QAAU,OAAO,IAAIuM,YAAYvS,KAAMgG,SAC9DoN,KAAM,SAASZ,MAAOxS,KAAMgG,QACxBwM,MAAMM,gBAAgB9S,KAAMgG,OAAOyM,QAASzM,OAAO0M,WAAY1M,OAAO2M,WAKlF,IAAI4B,YAAc,CACdC,MAAO,aACPC,SAAU,aACVC,UAAW,aACXC,WAAY,aACZC,WAAY,aACZC,UAAW,aACXC,SAAU,aACVC,UAAW,aACXC,QAAS,aACTC,YAAa,aACbC,QAAS,gBACTC,SAAU,gBACVC,MAAO,gBACPC,MAAO,aACPC,KAAM,aACNC,OAAQ,aACRC,OAAQ,aACRC,MAAO,cAGX,IAAIC,WAAa,CACbC,QAAS,QACTC,SAAU,QACVC,IAAK,WACLC,MAAO,QACPC,MAAO,QACPC,MAAO,QACPC,GAAI,QACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,SAAU,SACVC,OAAQ,UAOZ,IAAIzE,IAAM,CACN0E,eAAgB,SAAUC,UAAWC,SACjC,OAAOtM,OAAOG,YAAYmM,SAAW1V,UAAU2V,uBAAuBF,aAI1E1E,QAAS,SAAU6E,IACf,OAAO5V,SAAS6V,eAAeD,KAInC/J,KAAM,SAAUiK,IAAKJ,SACjB,IAAI3S,MAAQ,GACZ+S,IAAMA,IAAIzO,OAAOlD,MAAM,YAEvB2R,IAAIjL,QAAQ,SAAU1H,GAClB,IAAIf,EAAIe,EAAEC,MAAM,uCAEhB,GAAIhB,EAAG,CACHW,MAAMhE,KAAKqG,MAAMrC,MAAO+N,IAAI0E,eAAepT,EAAE,GAAI0O,IAAIC,QAAQ3O,EAAE,MAC/D,YAEG,GAAIe,EAAEC,MAAM,oBAAqB,CACpC,MAAM,IAAIhG,UAAU,qBAAuB+F,EAAI,mEAInD,GAAIA,EAAEgO,OAAO,KAAO,IAAK,CACrB/O,EAAI0O,IAAIC,QAAQ5N,EAAE7B,OAAO,IAEzB,GAAIc,EAAG,CACHW,MAAMhE,KAAKqD,QAGZ,CACHA,EAAI0O,IAAI0E,eAAerS,EAAE7B,OAAO,GAAIoU,SACpC3S,MAAMhE,KAAKqG,MAAMrC,MAAOX,MAKhC,OAAOW,OAIXgT,YAAa,SAAU9V,MACnB,OAAOmJ,OAAOG,WAAWtJ,KAAK+V,YAAc,IAAIpO,OAAO,SAAUqO,MAC7D,OAAOA,KAAKC,WAAa,KAKjCC,QAAS,SAAUlW,KAAMmW,SAAUX,WAC/B,OAAOzX,IAAIyG,UAAW,SAAUxE,KAAMmW,SAAUX,WAC5C,MAAOxV,KAAM,CACT,GAAIA,KAAKiW,WAAa,KAAOE,UAAYnW,KAAKmW,SAAS9S,gBAAkB8S,aAAeX,WAAa3E,IAAIuF,SAASpW,KAAMwV,YAAa,CACjI,OAAOxV,KAIXA,KAAOA,KAAK8D,WAIhB,OAAO,QAIfoO,OAAQ,SAAUlS,KAAMqW,OACpBrW,KAAOD,SAASG,cAAcF,MAE9B,GAAIqW,MAAO,CACPxF,IAAIyF,cAActW,KAAMqW,OAI5B,OAAOrW,MAIXuW,eAAgB,SAAUC,MACtB,IAAIC,UACA3T,MAEJ,GAAI2T,UAAYD,KAAKrT,MAAM,mFAAoF,CAC3GsT,UAAY/B,WAAW+B,UAAU,GAAGpT,eAGxCoT,UAAY5F,IAAIqB,OAAOuE,WAAa,OACpC5F,IAAI2F,KAAKC,UAAWD,MACpB1T,MAAQ+N,IAAIiF,YAAYW,WAExB3T,MAAM8H,QAAQ,SAAUrO,GACpBka,UAAU1S,YAAYxH,KAG1Bka,UAAY,KAEZ,OAAO3T,MAAM3E,OAAS,EAAI2E,MAAQA,MAAM,IAI5CwT,cAAe,SAAUtW,KAAMqW,OAC3B,OAAOtY,IAAI,CAACiC,MAAO,SAAUA,MACzB,IAAK,IAAIuE,KAAK8R,MAAO,CACjB,GAAIA,MAAMrQ,eAAezB,GAAI,CACzBvE,KAAKsD,aAAaiB,EAAG8R,MAAM9R,KAKnC,OAAOvE,QAKf0W,SAAU,SAAU1W,KAAMgR,KAAM/T,MAAO0Z,QACnC,GAAI3F,aAAeA,OAAS,SAAU,CAClC2F,OAAS1Z,MACTA,MAAQ+T,KAER,IAAKA,QAAQ/T,MAAO,CAChB,GAAIA,MAAM+I,eAAegL,MAAO,CAC5BH,IAAI6F,SAAS1W,KAAMgR,KAAM/T,MAAM+T,MAAO2F,SAK9C,OAAO3W,KAIX,GAAI2W,SAAW,MAAO,CAClB3F,KAAOD,YAAY/Q,KAAMgR,MAI7B,OAAOjT,IAAI,CAACiC,MAAO,SAAUA,MACzBA,KAAKiR,MAAMD,MAAQ/T,SAK3B2Z,SAAU,SAAS5W,KAAM+J,MAAO4M,QAC5B,IAAKpZ,MAAMmM,QAAQK,OAAQ,CACvBA,MAAQA,MAAM7F,MAAM,QAGxB,IAAI2S,SAAW9M,MAEf,GAAI4M,SAAW,MAAO,CAClBE,SAAW9M,MAAMhM,IAAI,SAASiT,MAC1B,OAAOD,YAAY/Q,KAAMgR,QAIjC,OAAOjT,IAAI,CAACiC,MAAO,SAASA,MACxB,IAAIiR,MAAQpV,OAAOib,iBAAiB9W,MAEpC,GAAI+J,MAAM5L,SAAW,EAAG,CACpB,OAAO8S,MAAM4F,SAAS,QAEnB,CACH,IAAIE,IAAM,GAEVhN,MAAMa,QAAQ,SAASoG,KAAMhT,GACzB+Y,IAAI/F,MAAQC,MAAM4F,SAAS7Y,MAI/B,OAAO+Y,QAMnBC,cAAe,SAAShX,KAAM+J,MAAO4M,QACjC,IAAKpZ,MAAMmM,QAAQK,OAAQ,CACvBA,MAAQA,MAAM7F,MAAM,QAGxB,IAAI+M,MAAQJ,IAAI+F,SAAS5W,KAAM+J,MAAO4M,QAClCM,QAAU,4BAEd,SAASC,eAAexZ,GACpB,IAAIyE,EAAI8U,QAAQ7V,KAAK1D,GAErB,GAAIyE,EAAG,CACHzE,EAAImJ,WAAW1E,EAAE,IAEjB,GAAIA,EAAE,KAAO,IAAK,CACdzE,GAAK,KAKb,OAAOA,EAIX,SAASyZ,kBAAkBlG,OACvB,GAAIlH,MAAM5L,SAAW,EAAG,CACpB,OAAO+Y,eAAejG,WAEnB,CACHlH,MAAMa,QAAQ,SAASoG,MACnBC,MAAMD,MAAQkG,eAAejG,MAAMD,SAIvC,OAAOC,OAKf,GAAI1T,MAAMmM,QAAQuH,OAAQ,CACtB,OAAOA,MAAMlT,IAAIoZ,uBAEd,CACH,OAAOA,kBAAkBlG,SAKjCuF,KAAM,SAAUxW,KAAMwW,MAClB,OAAOzY,IAAI,CAACiC,MAAO,SAAUA,MACzBA,KAAKoX,UAAYZ,KAEjBrN,OAAOG,WAAWtJ,KAAK+C,qBAAqB,WAAW6H,QAAQ,SAAU5K,MACrE,IAAIhB,KAAOgB,KAAKhB,KAAOgB,KAAKhB,KAAKqE,cAAgB,KAEjD,IAAKrE,MAAQA,OAAS,mBAAqBA,OAAS,yBAA0B,CAC1E,IAAIsF,KAAOtE,KAAKqX,aAAa,OACzBnN,IAAM5F,KAAOtE,KAAKkK,IAAOlK,KAAK6D,MAAQ7D,KAAKsX,aAAetX,KAAKoX,WAAa,GAC5Ef,MAAQ,GAAIrY,EACZuZ,OAEJ,IAAKvZ,EAAI,EAAGA,EAAIgC,KAAKwX,WAAWrZ,OAAQH,IAAK,CACzC,GAAIgC,KAAKwX,WAAWxU,KAAKhF,GAAGqH,OAAS,MAAO,CACxCgR,MAAMrW,KAAKwX,WAAWxU,KAAKhF,GAAGqH,MAAQrF,KAAKwX,WAAWxU,KAAKhF,GAAGf,OAItEsa,OAAS1G,IAAIqB,OAAO,SAAUmE,OAE9B,GAAI/R,KAAM,CACNiT,OAAOrN,IAAMA,QAEV,CACH,IACIqN,OAAO7T,YAAY3D,SAAS4D,eAAeuG,MAE7C,MAAO3N,GACLgb,OAAO1T,KAAOqG,KAKtBlK,KAAK8D,WAAW2T,aAAaF,OAAQvX,MACrCA,KAAK8D,WAAWC,YAAY/D,YAO5C6D,KAAM,SAAU6T,KACZ,GAAIlT,UAAUrG,OAAS,EAAG,CACtB,GAAIZ,MAAMmM,QAAQlF,UAAU,IAAK,CAC7BkT,IAAMnR,QAAQI,SAAS+Q,IAAKlT,UAAU,QACnC,CACHkT,IAAMvO,OAAOG,WAAW9E,WAAWgB,KAAK,MAIhD,OAAOzF,SAAS4D,eAAe+T,MAGnCC,MAAO,SAAS3X,MACZ,OAAOjC,IAAIyG,UAAW,SAAUxE,MAC5B,MAAOA,KAAK4X,WAAY,CACpB5X,KAAK+D,YAAY/D,KAAK4X,gBAKlC/M,OAAQ,SAAU7K,KAAM6X,UACpB7X,KAAO0Q,QAAQ1Q,MACf6X,SAAWta,MAAMmM,QAAQmO,UAAYA,SAAW1O,OAAOG,WAAW9E,UAAW,GAE7EqT,SAASjN,QAAQ,SAASkN,OACtB9X,KAAK0D,YAAYoU,SAGrB,OAAO9X,MAIX+X,QAAS,SAAU/X,KAAM6X,UACrB7X,KAAO0Q,QAAQ1Q,MACf6X,SAAWta,MAAMmM,QAAQmO,UAAYA,SAAW1O,OAAOG,WAAW9E,UAAW,GAE7E,IAAIwT,MAAQhY,KAAK4X,WAEjBC,SAASjN,QAAQ,SAASkN,OACtB9X,KAAKyX,aAAaK,MAAOE,SAG7B,OAAOhY,MAIXyX,aAAc,SAASQ,OAAQjY,MAC3B,IAAI8C,MAAQvF,MAAMmM,QAAQ1J,MAAQA,KAAOmJ,OAAOG,WAAW9E,UAAW,GAClEmB,OAEJsS,OAASvH,QAAQuH,QACjBtS,OAASsS,OAAOnU,WAEhBhB,MAAM8H,QAAQ,SAAS5K,MACnB2F,OAAO8R,aAAazX,KAAMiY,UAG9B,OAAOA,QAIX1P,SAAU,SAAUhE,EAAG+B,GACnB,IAAI4R,MAAQ3T,EAAE0R,WAAa,EAAI1R,EAAE4T,gBAAkB5T,EAC/C6T,IAAM9R,GAAKA,EAAExC,WAEjB,OAAOS,IAAM6T,QAAWA,KAAOA,IAAInC,WAAa,IACxCiC,MAAM3P,SACA2P,MAAM3P,SAAU6P,KAChB7T,EAAE8T,yBAA2B9T,EAAE8T,wBAAyBD,KAAQ,MAIlFE,YAAa,SAAUtY,KAAM4R,IAAK2G,SAAUC,SACxC,OAAOza,IAAIyG,UAAW,SAAUxE,KAAM4R,IAAK2G,SAAUC,SACjDxY,KAAK1D,iBAAiBsV,IAAK2G,WAAYC,SACvC,OAAOxY,QAIfyY,eAAgB,SAAUzY,KAAM4R,IAAK2G,SAAUC,SAC3C,OAAOza,IAAIyG,UAAW,SAAUxE,KAAM4R,IAAK2G,SAAUC,SACjDxY,KAAK0Y,oBAAoB9G,IAAK2G,WAAYC,SAC1C,OAAOxY,QAKf2Y,QAAS,SAAU3Y,KAAM4R,IAAK5M,QAC1B,KAAMhF,KAAO0Q,QAAQ1Q,OAAQ,CACzB,OAGJ,IAAIrE,OAAS4X,YAAY3B,MAAQ,cAC7BJ,MAEJxM,SAAWA,OAAS,IACpB,YAAaA,SAAWA,OAAOyM,QAAU,MACzC,eAAgBzM,SAAWA,OAAO0M,WAAa,MAE/C,IACIF,MAAQQ,kBAAkBrW,QAAQuW,OAAON,IAAK5M,QAChD,MAAOzI,GACLiV,MAAQzR,SAAS8R,YAAYG,kBAAkBrW,QAAQ0J,MAAQ1J,QAC/DqW,kBAAkBrW,QAAQyW,KAAKZ,MAAOI,IAAK5M,QAG/C,OAAOhF,KAAK4Y,cAAcpH,QAG9BqH,SAAU,SAAShD,IAAKiD,SACpBjD,IAAMA,IACDzO,OACAlD,MAAM,YACNnG,IAAI,SAASmF,GACV,IAAIf,EAAIe,EAAEC,MAAM,gEAChB,MAAO,CAAChB,EAAE,IAAMA,EAAE,GAAIA,EAAE,MAGhC,OAAO,SAASyP,KACZ,IAAKA,IAAIxL,OAAQ,CACb,OAGJ,IAAItD,MAAQ,GACRiW,IAAM,GACNjY,QAAU,GACVkY,MAAQ,GACRhZ,KAAO4R,IAAIxL,OACXpI,EAAGib,EAEP,EAAG,CACCnW,MAAMhE,KAAKkB,MACX+Y,IAAIja,KAAKkB,KAAK2V,IACd7U,QAAQhC,OAAOkB,KAAKwV,WAAa,IAAM,IAAIpO,OAAOlD,MAAM,eACnDlE,KAAOA,KAAK8D,YAErB,IAAK9F,EAAI,EAAGA,EAAI8E,MAAM3E,OAAQH,IAAK,CAC/B,IAAKib,EAAI,EAAGA,EAAIpD,IAAI1X,OAAQ8a,IAAK,CAC7B,KAAMpD,IAAIoD,GAAG,IAAMnY,QAAQ9C,GAAGiG,QAAQ4R,IAAIoD,GAAG,KAAO,MAAQpD,IAAIoD,GAAG,MAAQpD,IAAIoD,GAAG,GAAKF,IAAI/a,KAAO6X,IAAIoD,GAAG,GAAKF,IAAI9U,QAAQ4R,IAAIoD,GAAG,IAAMjb,IAAK,CACxIgb,MAAMla,KAAKgE,MAAM9E,MAK7B,IAAKA,EAAI,EAAGA,EAAIgb,MAAM7a,OAAQH,IAAK,CAC/B8a,QAAQvZ,KAAKyZ,MAAMhb,GAAI4T,IAAKoH,MAAMhb,OAK9Ckb,QAAS,SAAUlZ,KAAMsF,IAAK6T,KAC1BnZ,KAAO0Q,QAAQ1Q,MACfsF,IAAM,QAAUA,IAEhB,IAAKtF,KAAKqX,aAAa/R,KAAM,CACzB,OAAO6T,IAGX,OAAO/H,UAAUpR,KAAKoZ,aAAa9T,OAGvC+T,QAAS,SAAUrZ,KAAMsF,IAAKrI,OAC1B,OAAOc,IAAI,CAACiC,MAAO,SAAUA,MACzBA,KAAKsD,aAAa,QAAUgC,IAAK+L,KAAKiI,UAAUrc,QAChD,OAAO+C,QAKfuZ,SAAU,KACVC,YAAa,KACbC,YAAa,KACbrD,SAAU,MAId,IAAIsD,SAAW7I,IAAIqB,OAAO,QACtByH,QAAU,SAASzU,KAAM0U,OACrB1U,KAAOiE,OAAOG,WAAWpE,KAAM,GAAGM,KAAK,KAAK4B,OAC5C,OAAOwS,MAAQ1U,KAAOA,KAAKhB,MAAM,SAGzC,GAAI,cAAewV,SAAU,CACzBA,SAASG,UAAUC,IAAI,KAAM,MAE7B,GAAIJ,SAASG,UAAUtR,SAAS,MAAO,CACnCsI,IAAI0I,SAAW,SAAUvZ,KAAMc,SAC3BA,QAAU6Y,QAAQnV,WAElB,OAAOzG,IAAI,CAACiC,MAAO,SAAUA,MACzBA,KAAK6Z,UAAUC,IAAI3U,MAAMnF,KAAK6Z,UAAW/Y,SACzC,OAAOd,QAKf6Q,IAAI2I,YAAc,SAAUxZ,KAAMc,SAC9BA,QAAU6Y,QAAQnV,WAElB,OAAOzG,IAAI,CAACiC,MAAO,SAAUA,MACzBA,KAAK6Z,UAAU5O,OAAO9F,MAAMnF,KAAK6Z,UAAW/Y,SAC5C,OAAOd,YAIZ,CACH6Q,IAAI0I,SAAW,SAAUvZ,KAAMc,SAC3BA,QAAU6Y,QAAQnV,WAElB,OAAOzG,IAAI,CAACiC,MAAO,SAAUA,MACzBc,QAAQ8J,QAAQ,SAAUrK,GACtBP,KAAK6Z,UAAUC,IAAIvZ,KAIvB,OAAOP,QAKf6Q,IAAI2I,YAAc,SAAUxZ,KAAMc,SAC9BA,QAAU6Y,QAAQnV,WAElB,OAAOzG,IAAI,CAACiC,MAAO,SAAUA,MACzBc,QAAQ8J,QAAQ,SAAUrK,GACtBP,KAAK6Z,UAAU5O,OAAO1K,KAI1B,OAAOP,QAMnB0Z,SAASG,UAAUE,OAAO,KAAM,MAEhC,GAAIL,SAASG,UAAUtR,SAAS,MAAO,CACnCsI,IAAI4I,YAAc,SAAUzZ,KAAMc,QAAS7D,OACvC6D,QAAUA,QAAQsG,OAAOlD,MAAM,QAE/B,OAAOnG,IAAI,CAACiC,MAAO,SAAUA,MACzB,GAAI/C,QAAUoB,UAAW,CACrByC,QAAQ8J,QAAQ,SAAUrK,GACtBP,KAAK6Z,UAAUE,OAAOxZ,SAGvB,CACHO,QAAQ8J,QAAQ,SAAUrK,GACtBP,KAAK6Z,UAAUE,OAAOxZ,IAAKtD,SAKnC,OAAO+C,YAIZ,CACH6Q,IAAI4I,YAAc,SAAUzZ,KAAMc,QAAS7D,OACvC6D,QAAUA,QAAQsG,OAAOlD,MAAM,QAE/B,OAAOnG,IAAI,CAACiC,MAAO,SAAUA,MACzBc,QAAQ8J,QAAQ,SAAUrK,GACtB,GAAItD,QAAUoB,YAAcpB,QAAU+C,KAAK6Z,UAAUtR,SAAShI,GAAI,CAC9DP,KAAK6Z,UAAUE,OAAOxZ,MAK9B,OAAOP,QAMnB6Q,IAAIuF,SAAW,SAAUpW,KAAMc,SAC3Bd,KAAO0Q,QAAQ1Q,MACfc,QAAU6Y,QAAQnV,WAElB,IAAK,IAAIxG,EAAI,EAAGA,EAAI8C,QAAQ3C,OAAQH,IAAK,CACrC,IAAKgC,KAAK6Z,YAAc7Z,KAAK6Z,UAAUtR,SAASzH,QAAQ9C,IAAK,CACzD,OAAO,OAKf,OAAO,UAGR,CACH6S,IAAI0I,SAAW,SAAUvZ,KAAMc,SAC3BA,QAAU6Y,QAAQnV,UAAW,MAE7B,OAAOzG,IAAI,CAACiC,MAAO,SAAUA,MACzBA,KAAKwV,YAAcxV,KAAKwV,UAAY,IAAM,IAAM1U,QAChD,OAAOd,QAKf6Q,IAAI2I,YAAc,SAAUxZ,KAAMc,SAC9BA,QAAU6Y,QAAQnV,WAAWzG,IAAIwI,QAAQY,aAEzC,OAAOpJ,IAAI,CAACiC,MAAO,SAAUA,MACzB,IAAKA,KAAKwV,UAAW,OAAOxV,KAE5BA,KAAKwV,UAAYxV,KAAKwV,UAAUpS,QAAQ,IAAI8D,OAAO,mBAAqBpG,QAAQ0E,KAAK,KAAO,gBAAiB,KAAM,KAAK4B,OAAOhE,QAAQ,SAAU,KACjJ,OAAOpD,QAKf6Q,IAAI4I,YAAc,SAAUzZ,KAAMc,QAAS7D,OACvC6D,QAAUA,QAAQsG,OAAOlD,MAAM,QAE/B,OAAOnG,IAAI,CAACiC,MAAO,SAAUA,MACzB,IAAIga,SAAWha,KAAKwV,WAAa,IAAIpO,OAAOlD,MAAM,QAElDpD,QAAQ8J,QAAQ,SAAUrK,GACtB,IAAIvC,EAAIgc,QAAQ/V,QAAQ1D,GACpB+K,IAAMtN,GAAK,EAEf,GAAIf,QAAU,QAAUqO,IAAK,CACzB0O,QAAQlb,KAAKyB,QAEV,GAAItD,QAAU,MAAQqO,IAAK,CAC9B0O,QAAQjP,OAAO/M,EAAG,MAK1BgC,KAAKwV,UAAYwE,QAAQxU,KAAK,KAC9B,OAAOxF,QAKf6Q,IAAIuF,SAAW,SAAUpW,KAAMc,SAC3Bd,KAAO0Q,QAAQ1Q,MACf,IAAKA,KAAKwV,UAAW,OAAO,MAC5B1U,QAAU6Y,QAAQnV,WAElB,IAAIwV,QAAUha,KAAKwV,UAAUpO,OAAOlD,MAAM,QAE1C,IAAK,IAAIlG,EAAI,EAAGA,EAAI8C,QAAQ3C,OAAQH,IAAK,CACrC,GAAIgc,QAAQ/V,QAAQnD,QAAQ9C,OAAS,EAAG,CACpC,OAAO,OAKf,OAAO,MAKf0b,SAAW,KAEXla,SAAS4F,SAASyL,IAAK;ACrzB3BrR,SAASiF,OAAO,QAAS,SAAUoM,KAE/B,IAAIoJ,eAAiB,CACjBC,QAAS,qBAAsBre,OAE/Bse,YAAa,SAAUC,UACnB,IAAK7c,MAAMmM,QAAQ0Q,UAAW,CAC1BA,SAAW,CAACA,UAGhB,IAAIC,UAAYxJ,IAAI+F,SAASwD,SAAU,qBAClCE,OAAOzJ,IAAI+F,SAASwD,SAAU,uBAC9Brc,IAAI,SAASP,GACV,IAAKA,EAAG,CACJ,OAAO,EAGX,OAAO6K,KAAKkS,IAAIpV,MAAM,KAAM3H,EAAE0G,MAAM,YAAYnG,IAAI,SAASL,GACzDA,EAAIA,EAAEyF,MAAM,0BACZ,OAAOzF,EAAImJ,WAAWnJ,EAAE,KAAOA,EAAE,KAAO,KAAO,EAAI,KAAQ,OAKvE,OAAO2c,UAAUlc,OAASkK,KAAKkS,IAAIpV,MAAM,KAAMkV,WAAa,GAIhEG,IAAK,SAASJ,SAAUtZ,QAAS2Z,aAC7B,IAAKR,eAAeC,UAAY3c,MAAMmM,QAAQ0Q,WAAaA,SAASjc,QAAUic,UAAW,CACrF,OAAO1Z,QAAQ1D,QAAQod,cAEpB,CACH,OAAOH,eAAeS,SAASN,SAAUtZ,QAAS2Z,eAK1DC,SAAU,SAAUN,SAAUtZ,QAAS2Z,aACnC,GAAIA,YAAa,CACb,IAAIE,IAAM9e,OAAO+e,YAIrB9Z,SAAWA,QAAQgZ,KAAOjJ,IAAI0I,SAASa,SAAUtZ,QAAQgZ,KACzDhZ,SAAWA,QAAQmK,QAAU4F,IAAI2I,YAAYY,SAAUtZ,QAAQmK,QAE/D,IAAI4P,SAAWZ,eAAeE,YAAYC,UAE1C,OAAO,IAAI1Z,QAAQ,SAAUuB,SACzBpG,OAAOgB,WAAW,WACdiE,SAAWA,QAAQgZ,KAAOjJ,IAAI2I,YAAYY,SAAUtZ,QAAQgZ,KAC5DhZ,SAAWA,QAAQga,OAASjK,IAAI0I,SAASa,SAAUtZ,QAAQga,OAC3D7Y,QAAQmY,WAETS,cAKf,GAAIZ,eAAeC,QAAS,IACxB,IAAIhX,EAAI2N,IAAIqB,OAAO,QAAQjB,MAE3BgJ,eAAeC,QAAU,CACrB,aACA,mBACA,gBACA,eACA,eACFlO,KAAK,SAASgF,MACZ,OAAOA,QAAQ9N,IAGnBA,EAAI,KAEN,MAAO3G,IAETiD,SAAS4F,SAAS6U,eAAgB;AC7EtCza,SAASiF,OAAO,QAAS,SAASpG,WAE9B,IAAI0c,gBAAkB,SAASxa,GAC3BtE,KAAKkO,EAAI,CACL6Q,sBAAuBza,IAAM,SAAWwa,gBAAgBE,SAAS1a,GAAKA,IAI9Ewa,gBAAgBxQ,KAAO,SAAShK,GAC5B,OAAOA,aAAawa,gBAAkBxa,EAAI,IAAIwa,gBAAgBxa,IAIlEwa,gBAAgBE,SAAW,SAAS5V,MAChC,OAAO7F,SAASwE,OAAOqB,OAI3B0V,gBAAgBG,aAAe,SAASC,IAAK/P,MACzC,IAAIoK,UAAYhW,SAAS2E,YAAYgX,KAErC,GAAI3F,YAAc,OAASpK,KAAM,CAC7B,MAAM,IAAIzJ,MAAM,iBAIpB,OAAO6T,WAIXuF,gBAAgBjV,UAAUsV,YAAc,SAAS/V,MAC7C,OAAOpJ,KAAKkO,EAAE6Q,eAAelV,UAAUT,QAAUhH,kBAAoBpC,KAAKkO,EAAE6Q,eAAelV,UAAUT,QAAU,YAInH0V,gBAAgBjV,UAAUuV,UAAY,SAAShW,MAC3C,OAAOpJ,KAAKkO,EAAE6Q,eAAelV,UAAUT,QAAUhH,kBAAoBpC,KAAKkO,EAAE6Q,eAAelV,UAAUT,QAAU,YAInH0V,gBAAgBjV,UAAUwV,YAAc,WACpC,OAAOrf,KAAKsf,gBAAgB/W,YAIhCuW,gBAAgBjV,UAAUyV,gBAAkB,SAASrW,MACjD,IAAIsW,KAAM/K,IAAK5K,IAAM,aACrBA,IAAIC,UAAY7J,KAAKkO,EAAE6Q,eAAelV,UACtC0V,KAAO,IAAI3V,IACX4K,IAAMxU,KAAKkO,EAAE6Q,eAAe7V,MAAMqW,KAAMtW,MAExC,OAAOb,OAAOoM,OAASA,IAAMA,IAAM+K,MAIvChc,SAAS4F,SAAS2V,gBAAiB;ACvDvCvb,SAASiF,OAAO,QAAS,SAAS0E,OAAQ9K,WAEtC,IAAIod,mBAAqB,SAASha,GAC9BxF,KAAKkO,EAAI,CACLuR,kBAAmBja,EACnBka,SAAU,KACVtW,KAAM,MAGV,IAAIuW,MAAQna,EAAEwD,WACT9B,MAAM,4DAEXlH,KAAKkO,EAAE9E,KAAOuW,MAAM,IAAM,KAC1B3f,KAAKkO,EAAEwR,UAAYC,MAAM,GAAK,GAAKA,MAAM,GACpCxY,QAAQ,uBAAwB,IAChCgE,OACAlD,MAAM,YAIfuX,mBAAmBlR,KAAO,SAAS9I,GAC/B,OAAOA,aAAaga,mBAAqBha,EAAI,IAAIga,mBAAmBha,IAIxEga,mBAAmB3V,UAAU+V,QAAU,WACnC,OAAO5f,KAAKkO,EAAE9E,MAIlBoW,mBAAmB3V,UAAUgW,QAAU,WACnC,OAAO7f,KAAKkO,EAAEwR,UAIlBF,mBAAmB3V,UAAUrB,OAAS,SAASgR,SAC3C,IAAIvQ,KAAOiE,OAAOG,WAAW9E,WAC7BU,KAAKxD,QAEL,OAAOzF,KAAKkO,EAAEuR,kBAAkBvW,MAAMsQ,QAASvQ,OAInDuW,mBAAmB3V,UAAUiW,WAAa,SAAStG,QAASvQ,MACxD,IAAI8W,KAAO,GACX,IAAK,IAAIhe,EAAI,EAAGA,EAAI/B,KAAKkO,EAAEwR,SAASxd,OAAQH,IAAK,CAC7C,GAAIkH,KAAKjJ,KAAKkO,EAAEwR,SAAS3d,MAAQK,UAAW,CACxC,MAAM,IAAIsD,MAAM,cAAgB1F,KAAKkO,EAAEwR,SAAS3d,GAAK,uCAIzDge,KAAKld,KAAKoG,KAAKjJ,KAAKkO,EAAEwR,SAAS3d,KAInC,OAAO/B,KAAKkO,EAAEuR,kBAAkBvW,MAAMsQ,QAASuG,OAInDxc,SAAS4F,SAASqW,mBAAoB;AC3D1Cjc,SAASiF,OAAO,SAAU,WAEtB,SAASkV,QAASrb,KAAM8M,MACpB,IAAK9M,KAAK6L,EAAG,CACT,GAAIiB,OAAS,MAAO,OAAO,MAC3B9M,KAAK6L,EAAI,GAIb,IAAK7L,KAAK6L,EAAE8R,aAAc,CACtB,GAAI7Q,OAAS,MAAO,OAAO,MAE3B9M,KAAK6L,EAAE8R,aAAe,CAClBC,UAAW,GACXC,iBAAkB,GAClBC,WAAY,KAKxB,SAASC,kBAAmBC,QAASF,YACjC,OAAOA,WAAWre,IAAI,SAAU+G,IAC5B,IAAI9G,EAAIse,QAAQF,WAAWnY,QAAQa,IAEnC,GAAI9G,GAAK,EAAG,OAAOA,EAEnBA,EAAIse,QAAQF,WAAWje,OACvBme,QAAQF,WAAWtd,KAAKgG,IAExB,OAAO9G,IAKf,SAASue,iBAAkBhY,EAAG+B,GAC1B,IAAItI,EAAI,EAAGib,EAAI,EAEf,MAAOjb,EAAIuG,EAAEpG,QAAU8a,EAAI3S,EAAEnI,OAAQ,CACjC,GAAIoG,EAAEvG,GAAKsI,EAAE2S,GAAIjb,SACZ,GAAIuG,EAAEvG,GAAKsI,EAAE2S,GAAIA,SACjB,OAAO,KAIhB,OAAO,MAIX,SAASuD,QAASF,QAAS1K,IAAK6K,GAAIC,KAAMC,MACtC/K,KAAOA,KAAO,IAAIxO,QAAQ,aAAc,IAAIc,MAAM,QAElD0N,IAAIhH,QAAQ,SAAUrO,GAClB,IAAIqgB,KAAOrgB,EAAE2H,MAAM,KACfY,GAAK8X,KAAK,GAAG1Y,MAAM,OAEvB3H,EAAIuI,GAAGpD,QACPoD,GAAKuX,kBAAkBC,QAASxX,IAChCA,GAAG+X,OACHJ,GAAGH,QAAS/f,EAAGuI,GAAI8X,KAAK,KAAO,UAAWF,KAAMC,QAKxD,SAAS7C,IAAKwC,QAAS1K,IAAK9M,GAAI8X,KAAM9D,QAASgE,MAC3C,IAAKlL,IAAK,CACN,MAAM,IAAIzU,UAAU,sBAGxB,GAAIyf,KAAM,CACN,GAAIE,OAAS,GAAKhY,GAAG3G,OAAQ,CACzB,MAAM,IAAIhB,UAAU,0EAEjB,GAAImf,QAAQH,iBAAiBnW,eAAe4L,KAAM,CACrD,MAAM,IAAIzU,UAAU,UAAYyU,IAAM,oCAI1C0K,QAAQH,iBAAiBvK,KAAOkH,QAChC,OAIJ,GAAIgE,OAAS,EAAG,CACZhY,GAAGC,QAAQuX,QAAQF,WAAWje,QAIlCme,QAAQJ,UAAUtK,OAAS0K,QAAQJ,UAAUtK,KAAO,IACpD0K,QAAQJ,UAAUtK,KAAK9S,KAAK,CAACga,QAASA,QAASsD,WAAYtX,GAAIgY,KAAMA,OAIzE,SAAS7R,OAAQqR,QAAS1K,IAAK9M,GAAI8X,KAAM9D,SACrC,IAAKlH,IAAK,CACN,IAAIsK,UAAYU,KAAON,QAAQH,iBAAmBG,QAAQJ,UAE1D,IAAKtK,OAAOsK,UAAW,CACnB,GAAIA,UAAUlW,eAAe4L,KAAM,CAC/B3G,OAAOqR,QAAS1K,IAAK9M,GAAI8X,KAAM9D,UAKvC,OAIJ,GAAI8D,KAAM,CACN,GAAIN,QAAQH,iBAAiBnW,eAAe4L,QAAUkH,SAAWwD,QAAQH,iBAAiBvK,OAASkH,SAAU,QAClGwD,QAAQH,iBAAiBvK,KAIpC,OAIJ,IAAK0K,QAAQJ,UAAUtK,KAAM,OAE7B,GAAI9M,GAAG3G,OAAQ,CACXme,QAAQJ,UAAUtK,KAAO0K,QAAQJ,UAAUtK,KAAKjK,OAAO,SAAU4Q,UAC7D,GAAIO,SAAWP,SAASO,UAAYA,QAAS,OAAO,KACpD,OAAQP,SAAS6D,WAAWje,SAAWoe,iBAAiBhE,SAAS6D,WAAYtX,WAG9E,GAAIgU,QAAS,CAChBwD,QAAQJ,UAAUtK,KAAO0K,QAAQJ,UAAUtK,KAAKjK,OAAO,SAAU4Q,UAC7D,OAAOA,SAASO,UAAYA,cAG7B,CACH,GAAIwD,QAAQJ,UAAUlW,eAAe4L,KAAM,QAChC0K,QAAQJ,UAAUtK,KAI7B,GAAI0K,QAAQH,iBAAiBnW,eAAe4L,KAAM,QACvC0K,QAAQH,iBAAiBvK,OAM5C,SAAS+G,QAASra,KAAMsT,IAAKlV,MACzB,IAAIH,EAAG4N,EAAI7L,KAAK6L,EAAE8R,aAElB,UAAWrK,MAAQ,SAAU,CACzBrV,EAAIqV,IACJA,IAAMrV,EAAEyC,SACL,CACHzC,EAAI,IAAIwgB,YAAYze,KAAMsT,IAAKlV,MAGnC,GAAIyN,EAAE+R,UAAUlW,eAAe4L,KAAM,CACjCzH,EAAE+R,UAAUtK,KAAKnL,QAAQmE,QAAQ,SAAU2N,UACvC,GAAIA,SAASuE,OAAS,EAAG,CACrB7R,OAAOd,EAAGyH,IAAK,GAAI,MAAO2G,SAASO,cAEhC,GAAIP,SAASuE,OAAS,EAAG,CAC5B7R,OAAOd,EAAG,GAAI,CAACoO,SAAS6D,WAAW,IAAK,OAI5C7D,SAASO,QAAQvZ,KAAKjB,KAAM/B,KAKpC,GAAIA,EAAEygB,UAAW,CACbzgB,EAAEuB,KAAK,WACHmf,eAAe3e,KAAM6L,EAAGyH,IAAKrV,IAC9B,kBACA,CACH0gB,eAAe3e,KAAM6L,EAAGyH,IAAKrV,GAGjC,OAAOA,EAIX,SAAS0gB,eAAgB3e,KAAM6L,EAAGyH,IAAKrV,GACnC,IAAKA,EAAE2gB,sBAAwB/S,EAAEgS,iBAAiBnW,eAAe4L,KAAM,CACnEzH,EAAEgS,iBAAiBvK,KAAKrS,KAAKjB,KAAM/B,IAI3C,IAAI4gB,mBAAqB,CACrBC,GAAI,SAAUxL,IAAKkH,SACfa,QAAQ1d,MACRugB,QAAQvgB,KAAKkO,EAAE8R,aAAcrK,IAAKkI,IAAKhB,QAAS,GAChD,OAAO7c,MAIXohB,IAAK,SAAUzL,IAAKkH,SAChBa,QAAQ1d,MACRugB,QAAQvgB,KAAKkO,EAAE8R,aAAcrK,IAAKkI,IAAKhB,QAAS,GAChD,OAAO7c,MAIX+b,MAAO,SAAUpG,IAAKkH,SAClBa,QAAQ1d,MACRugB,QAAQvgB,KAAKkO,EAAE8R,aAAcrK,IAAKkI,IAAKhB,QAAS,GAChD7c,KAAKkO,EAAE8R,aAAaG,WAAWtd,KAAK,MACpC,OAAO7C,MAIXqhB,IAAK,SAAU1L,IAAKkH,SAChB,GAAIa,QAAQ1d,KAAM,SAAW,MAAO,OAAOA,KAC3CugB,QAAQvgB,KAAKkO,EAAE8R,aAAcrK,IAAK3G,OAAQ6N,SAC1C,OAAO7c,MAIX0c,QAAS,SAAU/G,IAAKlV,MACpBid,QAAQ1d,MACR,OAAO0c,QAAQ1c,KAAM2V,IAAKlV,QAKlC,IAAIqgB,YAAcvd,SAASkG,OAAO,SAAUU,OAAQpH,KAAMtC,MACtDT,KAAKmK,OAASA,OACdnK,KAAK+C,KAAOA,KACZ/C,KAAKS,KAAOA,MAAQ,GAEpBT,KAAKkO,EAAI,CACLoT,iBAAkB,MAClBC,MAAO,MACPrhB,MAAO,KACPsE,QAAS,OAEd,CACCgd,eAAgB,WACZxhB,KAAKkO,EAAEoT,iBAAmB,KAC1B,OAAOthB,MAGXihB,mBAAoB,WAChB,OAAOjhB,KAAKkO,EAAEoT,kBAGlBG,QAAS,SAAUjd,SACf,GAAIxE,KAAKkO,EAAE1J,QAAS,CAChB,MAAM,IAAIkB,MAAM,6CAGpB1F,KAAKkO,EAAEhO,QAAUF,KAAKkO,EAAEhO,MAAQ,IAChCF,KAAKkO,EAAEhO,MAAM2C,KAAK2B,SAClBxE,KAAKkO,EAAEqT,MAAQ,KACf,OAAOvhB,MAGX+gB,QAAS,WACL,OAAO/gB,KAAKkO,EAAEqT,OAGlB1f,KAAM,SAAU6f,YAAaC,YACzB,IAAK3hB,KAAKkO,EAAE1J,QAAS,CACjBxE,KAAKkO,EAAE1J,QAAUxE,KAAKkO,EAAEhO,MAAQuE,QAAQrD,IAAIpB,KAAKkO,EAAEhO,OAASuE,QAAQ1D,UACpEf,KAAKkO,EAAEhO,MAAQ,KAGnB,OAAOF,KAAKkO,EAAE1J,QAAQ3C,KAAK6f,YAAaC,eAIhDpe,SAAS4F,SAAS+X,mBAAoB,gBACtC3d,SAAS4F,SAAS2X,YAAa;AC9QnCvd,SAASiF,OAAO,SAAU,WAEtB,IAAIkV,QAAU,SAAUrb,KAAM8M,MAC1B,IAAK9M,KAAK6L,EAAG,CACT,GAAIiB,OAAS,MAAO,OAAO,MAC3B9M,KAAK6L,EAAI,GAIb,IAAK7L,KAAK6L,EAAEnE,eAAe,UAAW,CAClC,GAAIoF,OAAS,MAAO,OAAO,MAC3B9M,KAAK6L,EAAE0T,OAAS,QAKxB,IAAIC,UAAY,CACZC,OAAQ,WACJpE,QAAQ1d,MACRA,KAAKkO,EAAE0T,OAAS,KAChB,OAAO5hB,MAIX+hB,SAAU,WACN,GAAIrE,QAAQ1d,KAAM,SAAW,MAAO,CAChC,OAAO,MAIX,OAAOA,KAAKkO,EAAE0T,QAIlBI,UAAW,SAAUjN,MACjB,GAAI2I,QAAQ1d,KAAM,SAAW,MAAO,CAChC,OAAOA,KAIX,GAAIA,KAAKkO,EAAE0T,OAAQ,CACf,IAAIrI,UAAYhW,SAAS2E,YAAYlI,OAAS,SAE9C,GAAI+U,KAAM,CACNA,KAAO,KAAOA,KAAO,IAIzB,MAAM,IAAIrP,MAAM,yBAA2BqP,KAAO,gBAAkBwE,WAIxE,OAAOvZ,OAMfuD,SAAS4F,SAAS0Y,UAAW;AC1DjCte,SAASiF,OAAO,SAAU,WAEtB,IAAIJ,OAAS7E,SAASkG,OAAO,WACzBzJ,KAAKkO,EAAI,IAEV,IAIH3K,SAAS2G,MAAM9B,OAAQ,uBACvB7E,SAAS4F,SAASf,OAAQ;ACV9B7E,SAASiF,OAAO,QAAS,SAAUyZ,MAAO7f,WAEtC,IAAI8f,aAAe,SAAUC,SAAUC,QACnCpiB,KAAKkO,EAAI,CACLmU,YAAa,MACbF,SAAUA,SACVC,OAAQA,QAAUH,MAAMK,SAASC,gBAIzCL,aAAa5T,KAAO,SAAU6T,SAAUC,QACpC,OAAO,IAAIF,aAAaC,SAAUC,SAItC,IAAII,UAAY,CACZ,OAAQ,QAAS,OAAQ,MAAO,OAAQ,SAAU,SAAU,eAGhE,IAAIC,gBAAkB,CAClBC,KAAM,QACNC,MAAO,QACPC,KAAM,OACNC,IAAK,MACLC,KAAM,KACNC,OAAQ,IACRC,OAAQ,IACRC,YAAa,GAGjB,SAASC,SAASf,UACd,UAAWA,WAAa,SAAU,CAC9B,OAAOA,cACJ,GAAIA,oBAAoBD,aAAc,CACzC,OAAOC,SAASgB,gBACb,CACH,OAAOjB,aAAa5T,KAAK6T,UAAUgB,aAI3CjB,aAAarY,UAAUgU,IAAM,SAAUsE,UACnCniB,KAAKojB,cACLpjB,KAAKkO,EAAEiU,UAAYe,SAASf,UAC5B,OAAOniB,MAIXkiB,aAAarY,UAAUwZ,SAAW,SAAUlB,UACxCniB,KAAKojB,cACLpjB,KAAKkO,EAAEiU,UAAYe,SAASf,UAC5B,OAAOniB,MAIXkiB,aAAarY,UAAUyZ,WAAa,WAChCtjB,KAAKojB,cACL,OAAOpjB,KAAKkO,EAAEiU,SAAW,GAI7BD,aAAarY,UAAUsZ,UAAY,WAC/BnjB,KAAKojB,cACL,OAAOpjB,KAAKkO,EAAEiU,UAIlBD,aAAarY,UAAU0Z,QAAU,WAC7B,OAAOvjB,KAAKmjB,aAKhB,SAASK,WAAWrB,SAAUsB,UAAWrB,QACrC,GAAIqB,YAAc,KAAM,CACpBA,UAAY,OAET,IAAKA,UAAW,CACnBA,UAAY,EAIhB,IAAI1hB,EAAGN,EAAGga,IAAM,GAAIiI,KAAMC,KAAO,GAEjC,GAAIxB,SAAW,EAAG,CACdwB,KAAO,IACPxB,UAAYA,SAIhBK,UAAUzS,KAAK,SAAUhO,GACrB,GAAIogB,UAAYM,gBAAgB1gB,GAAI,CAChC0hB,YACAhiB,EAAI0gB,SAAWM,gBAAgB1gB,GAC/BN,EAAIgiB,YAAc,EAAIrX,KAAKa,MAAMxL,GAAK2K,KAAKwX,MAAMniB,GACjDga,IAAI5Y,KAAKpB,EAAI,IAAMwgB,MAAMK,SAASuB,KAAKC,YAAY1B,OAAQrgB,EAAGN,IAC9D0gB,UAAY1gB,EAAIghB,gBAAgB1gB,GAEhC,GAAI0hB,YAAc,EAAG,CACjB,OAAO,SAMnB,GAAIhI,IAAIvZ,OAAS,EAAG,CAChBwhB,KAAOjI,IAAInS,MACX,OAAOqa,KAAOlI,IAAIlS,KAAK,MAAQ,IAAM0Y,MAAMK,SAASuB,KAAKE,cAAc3B,QAAU,IAAMsB,SAEpF,CACH,OAAOC,KAAOlI,IAAIlS,KAAK,IAAM0Y,MAAMK,SAASuB,KAAKE,cAAc3B,QAAU,MAKjF,SAAS4B,OAAO7B,SAAU8B,SACtB,IAAIN,KAAOxB,SAAW,EAAI,IAAM,IAChCA,SAAW/V,KAAKU,IAAIqV,UAEpB,OAAQ8B,QAAU,IAAI9c,QAAQ,QAAS,SAAUjB,EAAGV,GAChD,IAAI/D,EAAGyiB,IAAM,MAEb,OAAQ1e,GACJ,IAAK,IACD,MAAO,IAEX,IAAK,IACDU,EAAIuc,gBAAgBC,KACpB,MAEJ,IAAK,IACDxc,EAAIuc,gBAAgBG,KACpB,MAEJ,IAAK,IACDsB,IAAM,KACV,IAAK,IACDhe,EAAIuc,gBAAgBE,MACpB,MAEJ,IAAK,IACDuB,IAAM,KACV,IAAK,IACDhe,EAAIuc,gBAAgBI,IACpB,MAEJ,IAAK,IACDqB,IAAM,KACV,IAAK,IACDhe,EAAIuc,gBAAgBK,KACpB,MAEJ,IAAK,IACDoB,IAAM,KACV,IAAK,IACDhe,EAAIuc,gBAAgBM,OACpB,MAEJ,IAAK,IACDmB,IAAM,KACV,IAAK,IACDhe,EAAIuc,gBAAgBO,OACpB,MAEJ,IAAK,IACD,OAAOW,OAAS,IAAMA,KAAO,GAEjC,IAAK,IACD,OAAOA,KAEX,QACI,MAAM,IAAIje,MAAM,6BAA+BF,GAIvD/D,EAAI2K,KAAKwX,MAAMzB,SAAWjc,GAC1Bic,UAAYjc,EAAIzE,EAChB,OAAOyiB,KAAOziB,EAAI,GAAK,IAAMA,EAAIA,IAKzCygB,aAAarY,UAAUma,OAAS,SAAUC,SACtCjkB,KAAKojB,cAEL,UAAWa,UAAY,kBAAoBA,UAAY,WAAaA,QAAS,CACzE,OAAOT,WAAWxjB,KAAKkO,EAAEiU,SAAU8B,QAASjkB,KAAKkO,EAAEkU,YAEhD,CACH,OAAO4B,OAAOhkB,KAAKkO,EAAEiU,SAAU8B,WAKvC/B,aAAarY,UAAUuZ,YAAc,WACjC,GAAIpjB,KAAKkO,EAAEmU,YAAa,CACpB,OAGJriB,KAAKkO,EAAEmU,YAAc,KAErB,UAAWriB,KAAKkO,EAAEiU,WAAa,SAAU,CACrC,OAIJ,IAAIA,SAAWniB,KAAKkO,EAAEiU,SAEtB,GAAIA,oBAAoBD,aAAc,CAClCliB,KAAKkO,EAAEiU,SAAWA,SAASgB,iBAExB,UAAWhB,WAAa,SAAU,CACrC,GAAIA,SAASjb,MAAM,2BAA4B,CAC3ClH,KAAKkO,EAAEiU,SAAWxX,SAASwX,SAAShX,YAEjC,CACH,IAAI2P,IAAM,EACNqJ,KAEJA,KAAOhC,SAAShb,QAAQ8a,MAAMK,SAASuB,KAAKO,kBAAkBpkB,KAAKkO,EAAEkU,QAAS,SAAUlU,EAAGyV,KAAM3f,EAAGqgB,EAAGne,EAAGoe,EAAG/iB,EAAGgL,EAAGxK,EAAGkF,EAAGlC,GACrH4e,KAAOA,OAAS,KAAO,EAAI,EAE3B3f,EAAI2G,SAAS3G,GAAK2f,KAElBU,IAAMrgB,GAAKye,gBAAgBC,MAC3Bxc,IAAMlC,GAAKye,gBAAgBE,OAC3B2B,IAAMtgB,GAAKye,gBAAgBG,MAC3BrhB,IAAMyC,GAAKye,gBAAgBI,KAC3BtW,IAAMvI,GAAKye,gBAAgBK,MAC3B/gB,IAAMiC,GAAKye,gBAAgBM,QAC3B9b,IAAMjD,GAAKye,gBAAgBO,QAC3Bje,IAAMf,GAAKye,gBAAgBQ,aAE3BnI,KAAO9W,EAEP,MAAO,KAIX,GAAImgB,KAAKjiB,OAAQ,CACb,MAAM,IAAIwD,MAAM,mCAAqCyc,SAAW,0BAA4BgC,KAAO,KAIvGnkB,KAAKkO,EAAEiU,SAAWrH,SAGnB,CACH,MAAM,IAAIpV,MAAM,wFAKxBnC,SAAS4F,SAAS+Y,aAAc;AC5PpC3e,SAASiF,OAAO,QAAS,SAAS8B,QAAS4C,OAAQgV,aAAc9f,WAEhE,IAAIkgB,SAAW,SAAS/gB,EAAG6gB,QAC1BpiB,KAAKkO,EAAI,CACRmU,YAAa,MACbkC,KAAMhjB,GAAK,IAAIijB,KACNpC,OAAQA,QAAUE,SAASC,gBAItCD,SAASC,cAAgB,KAEzBD,SAAShU,KAAO,SAASrH,EAAGmb,QAC3B,OAAO,IAAIE,SAASrb,EAAGmb,SAIxBE,SAASmC,IAAM,WACd,OAAO,IAAInC,UAGZA,SAASoC,aAAe,SAASnf,GAChC,cAAcA,IAAM,UAAYA,GAAKA,EAAEgf,OAASniB,WAAamD,EAAEof,WAAaviB,WAAamD,EAAEqf,gBAAkBxiB,WAI9GkgB,SAASuC,WAAa,SAASR,GAC9B,OAAOA,EAAI,IAAM,GAAKA,EAAI,MAAQ,GAAKA,EAAI,MAAQ,GAIjD/B,SAASwC,eAAiB,SAAUrJ,IAAK2G,QACrC,OAAOE,SAASuB,KAAKkB,UAAU3C,QAAUE,SAASC,eAAevb,KAAKyU,MAG7E6G,SAAS0C,eAAiB,SAAS9e,EAAGme,GAClC,MAAOne,EAAI,EAAG,CAAEA,GAAK,GAAIme,IACzB,MAAOne,EAAI,GAAI,CAAEA,GAAK,GAAIme,IAC7B,OAAOne,IAAM,EAAKoc,SAASuC,WAAWR,GAAK,GAAK,GAAOne,IAAK,CAAC+e,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,GAAG,GAAK,GAAK,IAIvF,IAAIC,GAAK,WAAa,MAAM,IAAI3f,MAAM,qBACrCwe,IAAM,SAASlgB,GACd,OAAQA,EAAI,GAAM,IAAMA,EAAIA,GAG9B,IAAIshB,SAAW,SAAUC,QACxB,WAAYA,SAAW,UAAYA,kBAAkBxY,SAAWwY,OAAOre,MAAM,mBAAoB,CAChG,OAAOqe,OAIR,UAAWA,SAAW,SAAU,CAC/BA,OAAS5a,SAAS4a,QAInB,OAAQA,OAAS,EAAI,IAAM,KAAOrB,IAAIvZ,SAASyB,KAAKU,IAAIyY,QAAU,KAAO,IAAMrB,IAAI9X,KAAKU,IAAIyY,QAAU,KAIvGjD,SAASkD,iBAAmB,WAC3B,OAAOF,UAAS,IAAId,MAAOiB,sBAI5BnD,SAASoD,gBAAkB,CAC1BnkB,EAAG,SAASA,EAAGwD,GAAK,OAAOmf,IAAInf,EAAIxD,EAAEokB,aAAepkB,EAAEqkB,YACtDC,EAAG,SAAStkB,EAAGwD,EAAGQ,GAAK,OAAO+c,SAASuB,KAAKiC,WAAWvgB,EAAGR,EAAIxD,EAAEwkB,YAAcxkB,EAAEykB,SAAU,OAC1FhJ,EAAG,SAASzb,EAAGwD,GAAK,OAAOA,EAAIxD,EAAEokB,aAAepkB,EAAEqkB,WAClD5Z,EAAG,SAASzK,EAAGwD,EAAGQ,GAAK,OAAO+c,SAASuB,KAAKiC,WAAWvgB,EAAGR,EAAIxD,EAAEwkB,YAAcxkB,EAAEykB,WAChFC,EAAG,SAAS1kB,EAAGwD,EAAGf,GAAKA,EAAIe,EAAIxD,EAAEwkB,YAAcxkB,EAAEykB,SAAU,OAAOhiB,IAAM,EAAI,EAAIA,GAChFkiB,EAAG,SAAS3kB,EAAGwD,EAAGf,GAAKA,EAAIe,EAAIxD,EAAEokB,aAAepkB,EAAEqkB,UAAW5hB,GAAK,GAAI,OAAOA,IAAM,GAAKA,EAAI,EAAI,KAAO,CAAC,KAAM,KAAM,MAAMA,EAAI,IAC9HsgB,EAAG,SAAS/iB,EAAGwD,GAAK,OAAOA,EAAIxD,EAAEwkB,YAAcxkB,EAAEykB,UACjDG,EAAG,SAAS5kB,EAAGwD,EAAGf,EAAGkC,EAAGme,EAAG+B,GAAKpiB,EAAIe,EAAIxD,EAAEokB,aAAepkB,EAAEqkB,UAAW5hB,IAAKqgB,EAAItf,EAAIxD,EAAE8kB,iBAAmB9kB,EAAE+kB,cAAepgB,EAAI,EAAGkgB,EAAIrhB,EAAIxD,EAAEglB,cAAgBhlB,EAAEilB,WAAY,MAAOtgB,EAAIkgB,EAAGpiB,GAAKse,SAAS0C,eAAe9e,IAAKme,GAAI,OAAOrgB,GACnOyiB,EAAGpB,GACHqB,EAAG,SAASnlB,EAAGwD,EAAGQ,GAAK,OAAO+c,SAASuB,KAAK2C,SAASjhB,EAAGR,EAAIxD,EAAEglB,cAAgBhlB,EAAEilB,aAChFtgB,EAAG,SAAS3E,EAAGwD,GAAK,OAAOmf,KAAKnf,EAAIxD,EAAEglB,cAAgBhlB,EAAEilB,YAAc,IACtEJ,EAAG,SAAS7kB,EAAGwD,EAAGQ,GAAK,OAAO+c,SAASuB,KAAK2C,SAASjhB,EAAGR,EAAIxD,EAAEglB,cAAgBhlB,EAAEilB,WAAY,OAC5FxiB,EAAG,SAASzC,EAAGwD,GAAK,OAAQA,EAAIxD,EAAEglB,cAAgBhlB,EAAEilB,YAAc,GAClEhjB,EAAG,SAASjC,EAAGwD,GAAK,OAAOud,SAAS0C,eAAejgB,EAAIxD,EAAEglB,cAAgBhlB,EAAEilB,WAAYzhB,EAAIxD,EAAE8kB,iBAAmB9kB,EAAE+kB,gBAClHK,EAAG,SAASplB,EAAGwD,GAAK,OAAOud,SAASuC,WAAW9f,EAAIxD,EAAE8kB,iBAAmB9kB,EAAE+kB,eAAiB,EAAI,GAC/F/gB,EAAG8f,GACHuB,EAAG,SAASrlB,EAAGwD,GAAK,OAAOA,EAAIxD,EAAE8kB,iBAAmB9kB,EAAE+kB,eACtDjC,EAAG,SAAS9iB,EAAGwD,GAAK,OAAQA,EAAIxD,EAAE8kB,iBAAmB9kB,EAAE+kB,eAAetd,WAAW5D,QAAQ,IACzFkD,EAAG,SAAS/G,EAAGwD,EAAGwH,GAAKA,EAAIxH,EAAIxD,EAAEslB,cAAgBtlB,EAAEulB,WAAY,OAAOva,GAAK,GAAKA,EAAI,GAAK,KAAO,MAChGwa,EAAG,SAASxlB,EAAGwD,GAAK,OAAOud,SAASoD,gBAAgBpd,EAAE/G,EAAGwD,GAAGmH,eAC5D8a,EAAG,SAASzlB,EAAGwD,EAAGwH,GAAKA,EAAIxH,EAAIxD,EAAEslB,cAAgBtlB,EAAEulB,WAAY,OAAOva,IAAM,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAKA,GACxG0a,EAAG,SAAS1lB,EAAGwD,GAAK,OAAOA,EAAIxD,EAAEslB,cAAgBtlB,EAAEulB,YACnDva,EAAG,SAAShL,EAAGwD,GAAK,OAAOmf,IAAI5B,SAASoD,gBAAgBsB,EAAEzlB,EAAGwD,KAC7DmiB,EAAG,SAAS3lB,EAAGwD,GAAK,OAAOmf,IAAInf,EAAIxD,EAAEslB,cAAgBtlB,EAAEulB,aACvD/kB,EAAG,SAASR,EAAGwD,GAAK,OAAOmf,IAAInf,EAAIxD,EAAE4lB,gBAAkB5lB,EAAE6lB,eACzDngB,EAAG,SAAS1F,EAAGwD,GAAK,OAAOmf,IAAInf,EAAIxD,EAAE8lB,gBAAkB9lB,EAAE+lB,eACzDviB,EAAG,SAASxD,EAAGwD,GAAK,OAAQA,EAAIxD,EAAEgmB,qBAAuBhmB,EAAEimB,mBAAqB,KAChFlnB,EAAG+kB,GACHoC,EAAGpC,GACHqC,EAAG,SAAUnmB,EAAGwD,GAAK,OAAOud,SAASoD,gBAAgBiC,EAAEpmB,EAAGwD,GAAGoC,QAAQ,IAAK,KAC1EwgB,EAAG,SAAUpmB,EAAGwD,GAAK,OAAOA,EAAI,SAAWugB,SAAS/jB,EAAEkkB,sBACtDmC,EAAGvC,GACHwC,EAAG,SAAUtmB,EAAGwD,GAAK,OAAOA,EAAI,EAAIxD,EAAEkkB,qBAAuB,IAC7DnhB,EAAG,SAAU/C,EAAGwD,GAAK,OAAOud,SAAShU,KAAK/M,GAAGyiB,OAAO,iBAAkBjf,IACtE/C,EAAG,SAAUT,EAAGwD,GAAK,OAAOud,SAAShU,KAAK/M,GAAGyiB,OAAO,mBAAoBjf,IACxE+iB,EAAG,SAASvmB,GAAK,OAAO6K,KAAKa,MAAM1L,EAAEwmB,UAAY,OAGlDzF,SAASzY,UAAUma,OAAS,SAASxe,EAAGwiB,KACvChoB,KAAKojB,cAEL,IAAImB,KAAOvkB,KAAKkO,EAAEqW,KACRnC,OAASpiB,KAAKkO,EAAEkU,OACzB6B,QAAU/W,OAAOI,QAAQgV,SAASoD,iBAAiB5jB,IAAIwI,QAAQY,aAAa3B,KAAK,KACjF6B,GAAK,IAAIH,OAAO,WAAagZ,QAAU,IAAK,KAE7C,OAAOze,EAAE2B,QAAQiE,GAAI,SAASnE,EAAG3C,EAAG4B,GACnC,GAAI5B,EAAEpC,OAAS,EAAG,CACjB,OAAOoC,EAAEc,OAAO,GAAKc,EAItB,OAAO5B,EAAI,GAAMge,SAASoD,gBAAgBxf,GAAGqe,KAAMyD,IAAK5F,WAK1DE,SAASzY,UAAUoe,UAAY,WACxB,OAAOjoB,KAAKkO,EAAEkU,QAGrBE,SAASzY,UAAUqe,UAAY,SAAU9F,QACrC,IAAKE,SAASuB,KAAKsE,UAAU/F,QAAS,CAClC,MAAM,IAAI1c,MAAM,mBAAqB0c,QAGtCpiB,KAAKkO,EAAEkU,OAASA,OAChB,OAAOpiB,MAId,CACO,UACA,UAAW,SAAU,WAAY,cACjC,WAAY,aAAc,aAAc,kBAAmB,oBAC3D,aAAc,YAAa,cAAe,iBAC1C,cAAe,gBAAiB,gBAAiB,qBACjD,eAAgB,cAAe,SAC/B,qBAAsB,iBAAkB,qBACxC,WAAY,eAAgB,eAC9B2O,QAAQ,SAAUyZ,QAChB9F,SAASzY,UAAUue,QAAU,WACzBpoB,KAAKojB,cACL,OAAOpjB,KAAKkO,EAAEqW,KAAK6D,QAAQlf,MAAMlJ,KAAKkO,EAAEqW,KAAMhc,cAKtD,CACI,UACA,UAAW,WAAY,cACvB,WAAY,aAAc,aAAc,kBACxC,aAAc,cAAe,iBAC7B,cAAe,gBAAiB,gBAAiB,sBACnDoG,QAAQ,SAAUyZ,QAChB9F,SAASzY,UAAUue,QAAU,WACzBpoB,KAAKojB,cACLpjB,KAAKkO,EAAEqW,KAAK6D,QAAQlf,MAAMlJ,KAAKkO,EAAEqW,KAAMhc,WACvC,OAAOvI,QAKlBsiB,SAASzY,UAAUwe,aAAe,WACjCroB,KAAKojB,cACL,OAAOhX,KAAKa,MAAMjN,KAAKkO,EAAEqW,KAAKwD,UAAY,MAI3CzF,SAASzY,UAAUye,cAAgB,WAClCtoB,KAAKojB,cACL,OAAOpjB,KAAKkO,EAAEqW,MAIfjC,SAASzY,UAAU0Z,QAAU,WAC5B,OAAOvjB,KAAKqoB,gBAIb/F,SAASzY,UAAU0e,OAAS,SAASthB,GACpCjH,KAAKojB,cAEC,IAAI5f,EAAIxD,KAAKkO,EAAEqW,KAAKwD,UAChBpI,MAAO6I,GAAIzmB,EAAGwD,EAElB,GAAI0B,aAAaib,aAAc,CAC3BliB,KAAKkO,EAAEqW,KAAO,IAAIC,KAAKhhB,EAAIyD,EAAEkc,aAC7B,OAAOnjB,KAIX2f,MAAQ2C,SAASuB,KAAKkB,UAAU/kB,KAAKkO,EAAEkU,QAAQjd,KAAK8B,EAAEG,eAEtD,IAAKuY,MAAO,CACR,MAAM,IAAIja,MAAM,gCAAkCuB,GA4BtD,GAAI0Y,MAAM,GAAI,CACVnc,EAAIghB,KAAKC,WAEN,GAAI9E,MAAM,GAAI,CACjBnc,GAAK,WAEF,GAAImc,MAAM,GAAI,CACjB6I,GAAK,IAAIhE,KACTgE,GAAGC,SAASzoB,KAAKkO,EAAEqW,KAAKuC,WAAY9mB,KAAKkO,EAAEqW,KAAK6C,aAAcpnB,KAAKkO,EAAEqW,KAAK+C,aAActnB,KAAKkO,EAAEqW,KAAKiD,mBACpGhkB,EAAIglB,GAAGT,eAEJ,GAAIpI,MAAM,GAAI,CACjBnc,GAAK,WAEF,GAAImc,MAAM,IAAMA,MAAM,GAAI,CAC7B6I,GAAK,IAAIhE,KAAKhhB,GACd+B,EAAIoa,MAAM,IAAM,EAAKA,MAAM,GAAK,EAAI,EAEpC,GAAIA,MAAM,IAAK,CACX6I,GAAGE,YAAYF,GAAGlC,cAAgB/gB,EAAGoa,MAAM,GAAK,EAAI,GAAIA,MAAM,GAAK,EAAI,SAEpE,GAAIA,MAAM,IAAK,CAClB6I,GAAGG,SAASH,GAAGhC,WAAajhB,EAAGoa,MAAM,GAAK,EAAI2C,SAAS0C,eAAewD,GAAGhC,WAAajhB,EAAGijB,GAAGlC,oBAEzF,CACHkC,GAAGI,QAAQJ,GAAG5C,UAAY4C,GAAGxC,SAAW1D,SAASuB,KAAKgF,aAAa7oB,KAAKkO,EAAEkU,QAAU7c,EAAI,GAAKoa,MAAM,GAAK,EAAI,IAIhHnc,EAAIglB,GAAGT,eAEJ,GAAIpI,MAAM,KAAOA,MAAM,KAAOA,MAAM,IAAK,CAC5C6I,GAAK,IAAIhE,KAAKhhB,GACd+B,EAAIoa,MAAM,KAAO,EAAKA,MAAM,IAAM,EAAI,EAEtC,IAAK5d,EAAI,GAAIA,EAAI,GAAIA,IAAK,CACtB,GAAI4d,MAAM5d,GAAI,CACV,OAIR,GAAIA,EAAI,GAAI,CACRA,GAAK,GACLymB,GAAGG,SAASpjB,EAAI,GAAKxD,EAAG,OAErB,CACHA,GAAK,GAEL,GAAIA,EAAIugB,SAASuB,KAAKgF,aAAa7oB,KAAKkO,EAAEkU,QAAS,CAC/CrgB,GAAK,EAGTymB,GAAGI,QAAQJ,GAAG5C,UAAY4C,GAAGxC,SAAWzgB,EAAI,EAAIxD,GAIpDyB,EAAIglB,GAAGT,UAIX,GAAIpI,MAAM,KAAOA,MAAM,IAAK,CACxB6I,GAAK,IAAIhE,KAAKhhB,GACdglB,GAAGC,SAAS9I,MAAM,IAAM,EAAI,GAAI,EAAG,EAAG,GACtCnc,EAAIglB,GAAGT,eAEJ,GAAIpI,MAAM,IAAK,CAClB6I,GAAK,IAAIhE,KAAKhhB,GACd+B,EAAIoa,MAAM,IAAIzY,MAAM,4CACpB3B,EAAE,GAAKoF,SAASpF,EAAE,GAAG4B,QAAQ,UAAW,OAExC,GAAI5B,EAAE,KAAO,IAAMA,EAAE,KAAO,KAAM,CAC9BA,EAAE,GAAK,OACJ,GAAIA,EAAE,GAAK,IAAMA,EAAE,KAAO,KAAM,CACnCA,EAAE,IAAM,GAGZA,EAAE,GAAKA,EAAE,KAAOnD,UAAYuI,SAASpF,EAAE,GAAG4B,QAAQ,UAAW,OAAS,EACtE5B,EAAE,GAAKA,EAAE,KAAOnD,UAAYuI,SAASpF,EAAE,GAAG4B,QAAQ,UAAW,OAAS,EACtEqhB,GAAGC,SAASljB,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAI,GAC9B/B,EAAIglB,GAAGT,UAIX,GAAIpI,MAAM,IAAK,CACXnc,GAAK0e,aAAa5T,KAAKqR,MAAM,IAAK3f,KAAKkO,EAAEkU,QAAQe,YAGrDnjB,KAAKkO,EAAEqW,KAAO,IAAIC,KAAKhhB,GACvB,OAAOxD,MAIdsiB,SAASzY,UAAUif,YAAc,SAAS7hB,GACzC,OAAOqb,SAAShU,KAAKtO,MAAMuoB,OAAOthB,IAInCqb,SAASzY,UAAUuZ,YAAc,WAChC,GAAIpjB,KAAKkO,EAAEmU,YAAa,CACvB,OAIDriB,KAAKkO,EAAEmU,YAAc,KAEf,IAAInc,EAAGe,EAEb,UAAWjH,KAAKkO,EAAEqW,OAAS,SAAU,CACpC,GAAIre,EAAIlG,KAAKkO,EAAEqW,KAAKrd,MAAM,YAAa,CACtClH,KAAKkO,EAAEqW,KAAO,IAAIC,KAAKte,EAAE,GAAK,UAExB,GAAIA,EAAIlG,KAAKkO,EAAEqW,KAAKrd,MAAM,8EAA+E,CAC/GlH,KAAKkO,EAAEqW,KAAO,IAAIC,KAAKte,EAAE,GAAK,IAAMA,EAAE,IAAMA,EAAE,IAAM,UAE9C,GAAIoc,SAASwC,eAAe9kB,KAAKkO,EAAEqW,KAAMvkB,KAAKkO,EAAEkU,QAAS,CAC/Dnb,EAAIjH,KAAKkO,EAAEqW,KACXvkB,KAAKkO,EAAEqW,KAAO,IAAIC,KAClBxkB,KAAKuoB,OAAOthB,OAEN,CACNjH,KAAKkO,EAAEqW,KAAO,IAAIC,KAAKxkB,KAAKkO,EAAEqW,YAGzB,UAAWvkB,KAAKkO,EAAEqW,OAAS,SAAU,CAC3CvkB,KAAKkO,EAAEqW,KAAO,IAAIC,KAAKxkB,KAAKkO,EAAEqW,WAExB,GAAIjC,SAASoC,aAAa1kB,KAAKkO,EAAEqW,MAAO,CAC9Ctd,EAAIjH,KAAKkO,EAAEqW,KAAKA,KAEhB,GAAIvkB,KAAKkO,EAAEqW,KAAKK,gBAAkB,GAAK5kB,KAAKkO,EAAEqW,KAAKI,WAAa,MAAO,CACtE1d,GAAK,IAAMjH,KAAKkO,EAAEqW,KAAKI,SAIxB3kB,KAAKkO,EAAEqW,KAAO,IAAIC,KAAKvd,QAEjB,GAAIjH,KAAKkO,EAAEqW,gBAAgBjC,SAAU,CACxCtiB,KAAKkO,EAAEkU,OAASpiB,KAAKkO,EAAEqW,KAAK0D,YAC/BjoB,KAAKkO,EAAEqW,KAAO,IAAIC,KAAKxkB,KAAKkO,EAAEqW,KAAKwD,aAKlCxkB,SAAS4F,SAASmZ,SAAU;ACtXhC/e,SAASiF,OAAO,QAAS,SAAS8Z,SAAUhY,SAExC,SAASye,YAAY3G,QACjB,IAAIrgB,EAEJ,KAAM,WAAYqgB,OAAO4G,SAAU,CAC/B5G,OAAO4G,QAAQC,OAAS,GAExB,IAAKlnB,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACrBqgB,OAAO4G,QAAQC,OAAOpmB,KAAKyH,QAAQY,YAAYkX,OAAO8G,SAASD,OAAOE,KAAKpnB,IAAM,IAAMuI,QAAQY,YAAYkX,OAAO8G,SAASD,OAAOG,OAAOrnB,MAIjJ,KAAM,aAAcqgB,OAAO4G,SAAU,CACjC5G,OAAO4G,QAAQK,SAAW,GAE1B,IAAKtnB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpBqgB,OAAO4G,QAAQK,SAASxmB,KAAKyH,QAAQY,YAAYkX,OAAO8G,SAASG,SAASF,KAAKpnB,IAAM,IAAMuI,QAAQY,YAAYkX,OAAO8G,SAASG,SAASD,OAAOrnB,MAIvJ,IAAI4d,MAAQ,CACR,IACA,MACI,MACI,IAAKyC,OAAO4G,QAAQvE,IAAK,KACzB,IAAKrC,OAAO4G,QAAQM,UAAW,KAC/B,IAAKlH,OAAO4G,QAAQO,MAAO,KAC3B,IAAKnH,OAAO4G,QAAQQ,SAAU,KAC9B,MACI,IAAKpH,OAAO4G,QAAQS,QAAS,KAC7B,IAAKrH,OAAO4G,QAAQU,OAAQ,IAChC,WACI,IAAKtH,OAAO4G,QAAQtF,KAAM,KAC1B,IAAKtB,OAAO4G,QAAQ,QAAS,KAC7B,IAAK5G,OAAO4G,QAAQxmB,KAAM,IAC9B,WACI,IAAK4f,OAAO4G,QAAQtG,KAAM,KAC1B,IAAKN,OAAO4G,QAAQrG,MAAO,KAC3B,IAAKP,OAAO4G,QAAQpG,KAAM,IAC9B,IACA,IACA,MACI,IAAKR,OAAO4G,QAAQtF,KAAM,KAC1B,IAAKtB,OAAO4G,QAAQ,QAAS,KAC7B,IAAK5G,OAAO4G,QAAQxmB,KAAM,IAC9B,WACI,IAAK4f,OAAO4G,QAAQC,OAAO1f,KAAK,OAAQ,IACxC,IACA,IAAK6Y,OAAO4G,QAAQK,SAAS9f,KAAK,OAAQ,IAC9C,IACJ,cACJ,KACA,MACI,MAAO6Y,OAAO4G,QAAQW,GAAI,SAC1B,MACI,IAAKvH,OAAO4G,QAAQY,KAAM,KAC1B,IAAKxH,OAAO4G,QAAQa,SAAU,KAC9B,wDACJ,IACA,iBACJ,KACA,IACI,MACI,wBACA,MACIzH,OAAO4G,QAAQxG,UAAUE,KAAM,IAC/BN,OAAO4G,QAAQxG,UAAUG,MAAO,IAChCP,OAAO4G,QAAQxG,UAAUI,KAAM,IAC/BR,OAAO4G,QAAQxG,UAAUK,IAAK,IAC9BT,OAAO4G,QAAQxG,UAAUM,KAAM,IAC/BV,OAAO4G,QAAQxG,UAAUO,OAAQ,IACjCX,OAAO4G,QAAQxG,UAAUQ,OAAQ,IACjCZ,OAAO4G,QAAQxG,UAAUS,YAC7B,IACA,iBACJ,KACJ,IACA,KAGJ,OAAO,IAAIhY,OAAO0U,MAAMpW,KAAK,IAAK,KAItC,SAASugB,oBAAoB1H,QACzB,IAAIzC,MAAQ,CACR,4BACA,MACI,IAAKyC,OAAO4G,QAAQxG,UAAUE,KAAM,KACpC,IAAKN,OAAO4G,QAAQxG,UAAUG,MAAO,KACrC,IAAKP,OAAO4G,QAAQxG,UAAUI,KAAM,KACpC,IAAKR,OAAO4G,QAAQxG,UAAUK,IAAK,KACnC,IAAKT,OAAO4G,QAAQxG,UAAUM,KAAM,KACpC,IAAKV,OAAO4G,QAAQxG,UAAUO,OAAQ,KACtC,IAAKX,OAAO4G,QAAQxG,UAAUQ,OAAQ,KACtC,IAAKZ,OAAO4G,QAAQxG,UAAUS,YAAa,IAC/C,SAGJ,OAAO,IAAIhY,OAAO0U,MAAMpW,KAAK,IAAK,MAItC,IAAIsa,KAAOvB,SAASuB,KAAO,CACvBkG,QAAS,GAET5B,UAAW,SAAS/F,QAChB,OAAOA,UAAUyB,KAAKkG,SAG1B9B,UAAW,SAAS7F,QAChB,IAAKyB,KAAKsE,UAAU/F,QAAS,CACzB,MAAM,IAAI1c,MAAM,mBAAqB0c,QAGzC,OAAOyB,KAAKkG,QAAQ3H,SAIxBoE,SAAU,SAASpE,OAAQlc,EAAGkjB,QAC1B,OAAOvF,KAAKoE,UAAU7F,QAAQ8G,SAASD,OAAOG,OAAS,SAAW,QAAQljB,IAG9E4f,WAAY,SAAS1D,OAAQ7gB,EAAG6nB,QAC5B,OAAOvF,KAAKoE,UAAU7F,QAAQ8G,SAASG,SAASD,OAAS,SAAW,QAAQ7nB,IAGhFwiB,cAAe,SAAS3B,QACpB,OAAOyB,KAAKoE,UAAU7F,QAAQ8G,SAASc,YAG3ClG,YAAa,SAAS1B,OAAQ6H,KAAMjmB,GAChCoe,OAASyB,KAAKoE,UAAU7F,QACxBpe,EAAIoe,OAAO8H,UAAUlmB,GACrB,OAAOoe,OAAO8G,SAAS1G,UAAUyH,MAAMjmB,IAI3C6kB,aAAc,SAASzG,QACnB,OAAOyB,KAAKoE,UAAU7F,QAAQ+H,WAGlCpF,UAAW,SAAU3C,QACjBA,OAASyB,KAAKoE,UAAU7F,QAExB,IAAKA,OAAOgI,OAAQ,CAChBhI,OAAOgI,OAASrB,YAAY3G,QAGhC,OAAOA,OAAOgI,QAIlBhG,kBAAmB,SAAShC,QACxBA,OAASyB,KAAKoE,UAAU7F,QAExB,IAAKA,OAAOiI,eAAgB,CACxBjI,OAAOiI,eAAiBP,oBAAoB1H,QAGhD,OAAOA,OAAOiI;ACjK1B9mB,SAASiF,OAAO,QAAS,SAAU8Z,UAE/BA,SAASuB,KAAKkG,QAAQ/V,GAAK,CACvBkW,UAAW,SAASlmB,GAAK,OAAOA,IAAM,EAAI,EAAI,GAC9CmmB,UAAW,EACXjB,SAAU,CACNG,SAAU,CACND,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACnDD,KAAM,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aAE7EF,OAAQ,CACJG,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACtFD,KAAM,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,aAEzH3G,UAAW,CACPE,KAAM,CAAC,OAAQ,SACfC,MAAO,CAAC,QAAS,UACjBC,KAAM,CAAC,OAAQ,SACfC,IAAK,CAAC,MAAO,QACbC,KAAM,CAAC,OAAQ,SACfC,OAAQ,CAAC,SAAU,WACnBC,OAAQ,CAAC,SAAU,WACnBC,YAAa,CAAC,cAAe,iBAEjC+G,WAAY,OAEhBhB,QAAS,CACLvE,IAAK,MACL8E,MAAO,QACPC,SAAU,WACVF,UAAW,YACXK,GAAI,KACJC,KAAM,OACNC,SAAU,WACVnG,KAAM,OACN1jB,KAAQ,OACRwC,KAAM,OACNinB,QAAS,0BACTC,OAAQ,yBACRhH,KAAM,OACNC,MAAO,QACPC,KAAM,OACNJ,UAAW,CACPE,KAAM,cACNC,MAAO,eACPC,KAAM,cACNC,IAAK,aACLC,KAAM,cACNC,OAAQ,gBACRC,OAAQ,qBACRC,YAAa;AClD7B1f,SAASiF,OAAO,eAAgB,SAAS8hB,OAAQhgB,QAAS4C,OAAQc,QAAS5L,WAEvE,IAAImoB,UAAYhnB,SAASkG,OAAO,SAAS+gB,SAAUC,WAC/C,IAAIC,MAAQ,MAEZ,IAAKppB,MAAMmM,QAAQ+c,UAAW,CAC1B,GAAIA,oBAAoBxc,QAAS,CAC7B0c,MAAQF,SAASld,UACjBkd,SAAWA,SAAS5c,gBAEjB,CACH,IAAIhE,IAAM4gB,SAAUznB,KACpB2nB,MAAQ,GACRF,SAAW,GAEX,IAAKznB,QAAQ6G,IAAK,CACd,GAAIA,IAAIG,eAAehH,MAAO,CAC1B2nB,MAAM7nB,KAAKE,MACXynB,SAAS3nB,KAAK+G,IAAI7G,UAOlC/C,KAAKkO,EAAI,CACL+V,QAAS,IAAMuG,SAASjhB,KAAK,OAAS,IACtCmhB,MAAOA,MACPD,UAAWA,YAEhB,CACCzgB,OAAQ,CACJ2gB,eAAgB,SAAS/iB,KAAM2d,QAC3B3d,KAAOA,KAAKxC,OAAO,EAAGmgB,QACtB,IAAIrf,EAAI0B,KAAKV,MAAM,OAEnB,MAAO,EAAEhB,EAAIA,EAAEhE,OAAS,GAAK,EAAGqjB,QAAU,KAAO3d,MAAMgjB,YAAY,MAAQ,KAKnFC,SAAU,SAASC,OACf,IAAI1f,GAAI2f,OAAQC,IAAKhnB,EAErB,GAAIhE,KAAKkO,EAAEwc,MAAO,CACdtf,GAAK,IAAIH,OAAOjL,KAAKkO,EAAE+V,QAAS,MAAQjkB,KAAKkO,EAAEuc,UAAY,GAAK,MAChEM,OAAS,GACTC,IAAM,EACNhnB,EAAIhE,KAAKkO,EAAEwc,MAAMxoB,OAEjB4oB,MAAM3jB,QAAQiE,GAAI,WACd,IAAIO,IAAMpD,UAAUvE,EAAI,GACpBjC,EAEJ,GAAI4J,IAAMqf,IAAK,CACXD,OAAOloB,KAAK,CAACioB,MAAM1lB,OAAO4lB,IAAKrf,IAAMqf,KAAMA,IAAK,OAIpD,IAAKjpB,EAAI,EAAGA,GAAKiC,EAAGjC,IAAK,CACrB,GAAIwG,UAAUxG,KAAOK,UAAW,CAC5B2oB,OAAOloB,KAAK,CAAC0F,UAAUxG,GAAI4J,IAAK3L,KAAKkO,EAAEwc,MAAM3oB,EAAI,KACjDipB,IAAMrf,IAAMpD,UAAU,GAAGrG,OACzB,QAKR,MAAM,IAAIwD,MAAM,uBAAyB6C,UAAU,KAErD0iB,KAAKjrB,OAEP,GAAIgrB,IAAM,EAAIF,MAAM5oB,OAAQ,CACxB6oB,OAAOloB,KAAK,CAACioB,MAAM1lB,OAAO4lB,KAAMA,IAAK,YAGtC,CACHD,OAASzgB,QAAQrC,MAAM6iB,MAAO,IAAI7f,OAAOjL,KAAKkO,EAAE+V,QAAS,KAAOjkB,KAAKkO,EAAEuc,UAAY,GAAK,MAAO,KAAM,KAAM,MAI/G,OAAOM,UAKfxnB,SAAS4F,SAASohB,UAAW,cAE9B,CACCjgB,QAAS,gBACT4C,OAAQ,eACRc,QAAS;AC3FbzK,SAASiF,OAAO,cAAe,SAAS8hB,OAAQtc,QAASuc,UAAWjgB,QAAS4C,OAAQoV,SAAUlgB,WAE3F,IAAI8oB,KAAO3nB,SAASkG,OAAO,WACvBzJ,KAAKmrB,OAASnrB,KAAKmrB,OAAOF,KAAKjrB,OAEhC,CACCgK,OAAQ,CACJwgB,SAAU,CACN,yCACA,qHACA,iBACA,QACA,aACA,aAGJY,SAAU,CACNC,IAAM,IACNC,IAAM,IACNC,IAAM,KAGVC,OAAQ,CACJC,KAAQ,KAAMC,KAAQ,KAAMC,KAAQ,KAAMC,IAAO,KAAMC,IAAO,KAAMC,IAAO,KAAM3K,GAAM,KAAM4K,GAAM,KAAMC,GAAM,KAC/GC,MAAS,MAAOC,MAAS,MAAOC,MAAS,MAAOC,GAAM,MAAOC,GAAM,MAAOC,GAAM,MAAOjL,IAAO,MAAOkL,IAAO,MAAOC,IAAO,MAC1HC,KAAQ,KAAMC,KAAQ,KAAMC,KAAQ,MAGxCC,OAAQ,OAERC,MAAO,EAEPC,OAAQ,SAASrsB,KAAMssB,SACnB,IAAInjB,IAAK3C,EAAGwH,OAEZ,GAAIhO,gBAAgB6hB,SAAU,CAC1B,OAAO7hB,KAAKujB,OAAO,sBAEhB,GAAIvjB,gBAAgBusB,WAAY,CACnCpjB,IAAMshB,KAAK4B,OAAOrsB,KAAK8a,YACvB,OAAO2P,KAAK4B,OAAOrsB,KAAKO,OAAS,IAAM4I,IAAIxE,OAAO,EAAGwE,IAAI1H,OAAS,GAAK,IAI3E,GAAIzB,aAAeA,OAAS,SAAU,CAClCwG,EAAI,GACJwH,OAASnN,MAAMmM,QAAQhN,MAEvB,GAAIssB,QAAU7B,KAAK2B,MAAO,CACtB3f,OAAOa,KAAKtN,KAAM,SAAS+M,EAAG/L,GAC1BA,EAAIypB,KAAK4B,OAAOrrB,EAAGypB,KAAK2B,OACxB5lB,EAAEpE,KAAK4L,OAAS,IAAOyc,KAAK4B,OAAOtf,GAAK,IAAMlD,QAAQgC,SAAS7K,EAAG,MAAQ,KAAOypB,KAAK0B,OAASnrB,EAAE0F,QAAQ,MAAO,KAAO+jB,KAAK0B,QAAW,IAAMnrB,EAAI,QAIrJ,OAAOwF,EAAE/E,OAAS+E,EAAEsC,KAAK,IAAM,SAE5B,CACH2D,OAAOa,KAAKtN,KAAM,SAAS+M,EAAG/L,GAC1BwF,EAAEpE,KAAK4L,OAAS,GAAMyc,KAAK4B,OAAOtf,GAAK,KAAO0d,KAAK4B,OAAOrrB,GAAI,QAIlEwF,EAAEqC,MACF,OAAQmF,OAAS,IAAM,KAAOxH,EAAEsC,KAAK,KAAOkF,OAAS,IAAM,WAG5D,UAAWhO,OAAS,WAAa6J,QAAQkC,UAAU/L,QAClDA,KAAKyG,MAAM,0DACZzG,KAAKyG,MAAM,IAAI+D,OAAO,IAAMigB,KAAKV,SAAS,GAAK,MAAO,CAEzD,OAAO/pB,SAEJ,CACH,OAAO2U,KAAKiI,UAAU5c,QAK9BwsB,OAAQ,SAASnC,OACb,UAAWA,QAAU,SAAU,CAC3B,MAAM,IAAIplB,MAAM,sCAIpB,IAAKwlB,KAAKgC,UAAW,CACjBhC,KAAKgC,UAAY,IAAI3C,UAAUW,KAAKV,UAIxCM,MAAQA,MAAM3jB,QAAQ,MAAO,IAE7B,IAAIijB,OAAS,IAAIc,KACbpQ,IAEJsP,OAAOU,MAAQA,MACfV,OAAOW,OAASG,KAAKgC,UAAUrC,SAASC,OAExChQ,IAAMsP,OAAO/U,MAAM,EAAG,IAAIrH,SAE1B,MAAOoc,OAAOW,OAAOX,OAAOpmB,KAAO5B,UAAW,CAC1C,GAAIgoB,OAAOW,OAAOX,OAAOpmB,GAAG,GAAGiR,OAAO,KAAO,KAAM,CAC/CmV,OAAOpmB,QAEJ,CACHomB,OAAO+C,SAKf,OAAOrS,MAKfgQ,MAAO,KACPC,OAAQ,KACR/mB,EAAG,EACHopB,WAAY,KAEZ/X,MAAO,SAASuX,OAAQS,QACpBT,SAAWxqB,YAAcwqB,OAAS,MAClCS,SAAWjrB,YAAcirB,OAAS,IAAIrf,SAEtC,IAAIsf,aAAgBV,SAAW,KAC3B5rB,MAAQ,KAAMqI,IAAM,KAAMkkB,OAAS,KACnCC,SAAW,MAAOC,OAAS,MAC3BjqB,EAEJ,KAAOxD,KAAKgE,EAAIhE,KAAK+qB,OAAO7oB,OAAQlC,KAAKgE,IAAK,CAC1CR,EAAIxD,KAAK+qB,OAAO/qB,KAAKgE,GAAG,GAExB,GAAIR,IAAM,IAAK,CACX,IAAMiqB,SAAWD,WAAcF,aAAc,CACzCttB,KAAKmtB,QAITntB,KAAK0tB,SAASL,OAAQI,OAAQpkB,IAAKmkB,SAAWxsB,MAAQ,MACtDysB,OAASD,SAAW,WAEjB,GAAIhqB,IAAM,KAAOA,IAAM,IAAK,CAC/B,GAAIiqB,SAAWD,SAAU,CACrBxtB,KAAKmtB,QAIT,UAAWnsB,QAAU,iBAAmBA,QAAU,SAAU,CACxDhB,KAAKmtB,MAAM,oBAIf9jB,IAAMiB,QAAQtB,SAAShI,OACvBysB,OAAS,KACTD,SAAW,WAER,GAAIhqB,IAAM,IAAK,CAClB,GAAIiqB,QAAUD,UAAYF,aAAc,CACpCttB,KAAKmtB,QAIT9jB,IAAM,KACNokB,OAAS,UAEN,GAAIvC,KAAKE,SAAS5nB,KAAOpB,UAAW,CACvC,GAAIorB,SAAU,CACV,GAAIhqB,IAAM,IAAK,CACXxD,KAAKmtB,QAITntB,KAAKgE,IAELupB,OAAS,IAAIP,WACbO,OAAOvsB,MAAQA,MACfusB,OAAOhS,WAAavb,KAAKqV,MAAM,KAAM,IAAIrH,SACzChN,MAAQusB,WAEL,CACHvtB,KAAKgE,IACLhD,MAAQhB,KAAKqV,MAAM,KAAM,IAAIrH,SAIjCwf,SAAW,KAEX,GAAIxtB,KAAK+qB,OAAO/qB,KAAKgE,KAAO5B,WAAapC,KAAK+qB,OAAO/qB,KAAKgE,GAAG,KAAOknB,KAAKE,SAAS5nB,GAAI,CAClFxD,KAAKmtB,cAIN,GAAI3pB,IAAM,KAAOA,IAAM,KAAOA,IAAM,IAAK,CAC5C,IAAK8pB,aAAc,CACfttB,KAAKmtB,QAIT,WAEG,GAAI3pB,EAAEyR,OAAO,KAAO,KAAM,CAC7B,GAAIqY,aAAc,CACd,GAAIG,QAAUD,SAAU,CACpBxtB,KAAK0tB,SAASL,OAAQI,OAAQpkB,IAAKmkB,SAAWxsB,MAAQ,MACtDysB,OAASD,SAAW,WAGrB,CACH,MAAOxtB,KAAK+qB,OAAO/qB,KAAKgE,EAAI,KAAO5B,WAAapC,KAAK+qB,OAAO/qB,KAAKgE,EAAI,GAAG,GAAGiR,OAAO,KAAO,KAAM,CAC3FjV,KAAKgE,IAIT,GAAIhE,KAAK+qB,OAAO/qB,KAAKgE,EAAI,KAAO5B,UAAW,CACvC,MAIJ,IAAIurB,UAAY3tB,KAAK+qB,OAAO/qB,KAAKgE,GAAG,GAAG9B,OAAS,EAChD,GAAI0qB,SAAW,KAAM,CACjBA,OAASe,UAIb,GAAIA,UAAW,CACX,GAAI3tB,KAAKotB,aAAe,KAAM,CAC1BptB,KAAKotB,WAAaptB,KAAK+qB,OAAO/qB,KAAKgE,GAAG,GAAGiR,OAAO,KAAO,KAI3D,GAAI3K,QAAQgC,SAAStM,KAAK+qB,OAAO/qB,KAAKgE,GAAG,GAAIhE,KAAKotB,WAAa,IAAM,MAAO,CACxEptB,KAAKgE,IACLhE,KAAKmtB,MAAM,gEAKnB,GAAIQ,UAAYf,OAAQ,CACpB,GAAIY,WAAaC,OAAQ,CACrBztB,KAAKgE,IACLhE,KAAKmtB,MAAM,8BAER,CACHntB,KAAK0tB,SAASL,OAAQhkB,MAAQ,KAAMA,IAAKrJ,KAAKqV,MAAMsY,UAAW,IAAI3f,UAIvE2f,UAAY3tB,KAAK+qB,OAAO/qB,KAAKgE,KAAO5B,UAAYpC,KAAK+qB,OAAO/qB,KAAKgE,GAAG,GAAG9B,OAAS,EAAI,EACpFurB,OAAS,UAEN,CACH,GAAID,WAAaC,OAAQ,CACrB,WAEG,GAAIA,OAAQ,CACfztB,KAAK0tB,SAASL,OAAQhkB,MAAQ,KAAMA,IAAKmkB,SAAWxsB,MAAQ,MAC5DysB,OAASD,SAAW,OAK5B,GAAIG,UAAYf,OAAQ,CACpB,OAAOS,aAIZ,CACH,GAAIG,SAAU,CACVxtB,KAAKmtB,QAIT,GAAI3pB,EAAEyR,OAAO,KAAO,IAAK,CACrBjU,MAAQwC,EAAE4B,OAAO,EAAG5B,EAAEtB,OAAS,GAAGiF,QAAQ,sCAAuCnH,KAAKmrB,aAEnF,GAAI3nB,EAAEyR,OAAO,KAAO,IAAK,CAC5BjU,MAAQwC,EAAE4B,OAAO,EAAG5B,EAAEtB,OAAS,QAE5B,GAAIgpB,KAAKM,OAAOhoB,KAAOpB,UAAW,CACrCpB,MAAQkqB,KAAKM,OAAOhoB,QAEjB,GAAI8G,QAAQkC,UAAUhJ,GAAI,CAC7BxC,MAAQ4J,WAAWpH,QAEhB,GAAIA,EAAE0D,MAAM,qGAAsG,CACrHlG,MAAQshB,SAAShU,KAAK9K,OAEnB,CACHxC,MAAQwC,EAIZgqB,SAAW,MAKnB,GAAIF,aAAc,CACd,GAAIG,QAAUD,SAAU,CACpBxtB,KAAK0tB,SAASL,OAAQI,OAAQpkB,IAAKmkB,SAAWxsB,MAAQ,WAGvD,CACH,GAAIwsB,WAAaC,OAAQ,CACrB,IAAKJ,OAAOnrB,OAAQ,CAChBmrB,OAASrsB,UAEN,CACHhB,KAAKmtB,cAGN,GAAIM,OAAQ,CACfztB,KAAK0tB,SAASL,OAAQhkB,MAAQ,KAAMA,IAAKmkB,SAAWxsB,MAAQ,OAKpE,OAAOqsB,QAIXK,SAAU,SAASL,OAAQI,OAAQpkB,IAAKrI,OACpC,GAAIysB,OAAQ,CACR,GAAIJ,QAAUA,OAAOhe,IAAIhG,KAAM,CAC3BrJ,KAAKmtB,MAAM,kBAAoB9jB,KAInCgkB,OAAO7e,IAAInF,IAAKrI,WAEb,CACHqsB,OAAOxqB,KAAK7B,SAKpBmqB,OAAQ,SAASjlB,GACb,IAAI0nB,QAAU,CAACpqB,EAAG,KAAMQ,EAAG,KAAMhC,EAAG,KAAMwD,EAAG,KAAQ6E,EAAG,KAAQwjB,IAAK,IAAKC,KAAM,KAAMC,IAAK,IAAK7f,EAAK,MAErG,GAAI0f,QAAQ1nB,EAAE+O,OAAO,MAAQ7S,UAAW,CACpC,OAAOwrB,QAAQ1nB,EAAE+O,OAAO,SAErB,GAAI/O,EAAE+O,OAAO,KAAO,KAAO/O,EAAEhE,SAAW,EAAG,CAC9C,OAAO6K,OAAOC,aAAarC,SAASzE,EAAEd,OAAO,GAAI,UAE9C,GAAIc,EAAE+O,OAAO,KAAO,KAAO/O,EAAEhE,SAAW,EAAG,CAC9C,OAAO6K,OAAOC,aAAarC,SAASzE,EAAEd,OAAO,GAAI,SAE9C,CACHpF,KAAKmtB,MAAM,2BAA6BjnB,KAKhDinB,MAAO,SAASa,KACZ,IAAItK,KAAO1jB,KAAK+qB,OAAO/qB,KAAKgE,KAAO5B,UAAYpC,KAAK+qB,OAAO/qB,KAAKgE,GAAK,KACjEgnB,IAAMT,UAAUI,eAAe3qB,KAAK8qB,MAAOpH,KAAOA,KAAK,GAAK1jB,KAAK8qB,MAAM5oB,QACvE+rB,MAAQvK,KAAOA,KAAK,GAAGte,OAAO,EAAG,IAAI+B,QAAQ,MAAO,cAAgB,MAExE,MAAM,IAAIzB,OAAOsoB,KAAO,iBAAiB7mB,QAAQ,MAAO8mB,OAAS,YAAcjD,IAAI,GAAK,YAAcA,IAAI,OAMlH,IAAIgC,WAAa,SAAShsB,MAAOua,YAC7Bvb,KAAKgB,MAAQA,OAAS,KACtBhB,KAAKub,WAAaA,YAAc,MAIpChY,SAAS4F,SAAS+hB,KAAM,QACxB3nB,SAAS4F,SAAS6jB,WAAY,eAE/B,CACChf,QAAS,gBACT1D,QAAS,gBACT4C,OAAQ,eACRoV,SAAU,iBACViI,UAAW;AC3XfhnB,SAASiF,OAAO,YAAa,SAASpG,WAElC,IAAI8rB,kBAAoB3qB,SAASkG,OAAO,SAAS0kB,QAASllB,KAAMmlB,MAAO7P,KACnEve,KAAKkO,EAAI,CACLigB,QAASA,QACTllB,KAAMA,MAAQ,GACdmlB,MAAOA,OAAS,GAChB7P,MAAOA,MAEZ,CACC8P,WAAY,WACR,OAAOruB,KAAKkO,EAAEigB,SAGlBG,WAAY,SAASH,QAASllB,MAC1BjJ,KAAKkO,EAAEigB,QAAUA,QAEjB,GAAIllB,OAAS7G,UAAW,CACpBpC,KAAKkO,EAAEjF,KAAOA,KAGlB,OAAOjJ,MAGXuuB,aAAc,WACV,OAAOvuB,KAAKkO,EAAEjF,MAGlBulB,aAAc,SAASvlB,MACnBjJ,KAAKkO,EAAEjF,KAAOA,KACd,OAAOjJ,MAGXyuB,SAAU,WACN,OAAOzuB,KAAKkO,EAAEkgB,OAGlBM,SAAU,WACN,OAAO1uB,KAAKkO,EAAEkgB,MAAMlsB,OAAS,GAGjCysB,SAAU,SAASnf,UACfxP,KAAKkO,EAAEkgB,MAAMvrB,KAAK2M,UAClB,OAAOxP,MAGX4uB,OAAQ,SAAStsB,OACbtC,KAAKkO,EAAEqQ,IAAMjc,QAAUF,aAAeE,MACtC,OAAOtC,MAGX6uB,MAAO,WACH,OAAO7uB,KAAKkO,EAAEqQ,OAItBhb,SAAS4F,SAAS+kB,kBAAmB;ACxDzC3qB,SAASiF,OAAO,YAAa,SAAS8hB,OAAQxL,gBAAiBU,mBAAoBtS,OAAQ5C,QAAS0D,QAASkd,KAAM8B,WAAYkB,kBAAmB9rB,WAE9I,IAAIsb,QAAU,SAAUrb,MACpB,IAAKA,KAAK6L,EAAG,CACT7L,KAAK6L,EAAI,GAGb,IAAK7L,KAAK6L,EAAE4gB,SAAU,CAClBzsB,KAAK6L,EAAE4gB,SAAW,GAClBzsB,KAAK6L,EAAE6gB,YAAc,KAK7B,IAAIC,eAAiB,CACjBC,WAAY,SAAU7lB,KAAM8lB,SACxBxR,QAAQ1d,MAER,GAAIA,KAAKkO,EAAE4gB,SAAS1lB,OAASpJ,KAAKkO,EAAE6gB,YAAY3lB,MAAO,CACnD,MAAM,IAAI1D,MAAM,0CAA4C0D,KAAO,KAIvEpJ,KAAKkO,EAAE4gB,SAAS1lB,MAAQ8lB,QAExB,OAAOlvB,MAIXmvB,qBAAsB,SAAU/lB,KAAMgmB,WAAYC,UAC9C3R,QAAQ1d,MAER,IAAKqvB,WAAarvB,KAAKkO,EAAE4gB,SAAS1lB,OAASpJ,KAAKkO,EAAE6gB,YAAY3lB,OAAQ,CACnE,MAAM,IAAI1D,MAAM,0CAA4C0D,KAAO,KAItEpJ,KAAKkO,EAAE6gB,YAAY3lB,MAAQgmB,WAE3B,OAAOpvB,MAIXsvB,qBAAsB,SAASlmB,MAC3BsU,QAAQ1d,MACR,OAAOA,KAAKkO,EAAE6gB,YAAY3lB,QAAUhH,WAGxCmtB,qBAAsB,SAASnmB,MAC3BsU,QAAQ1d,MAER,IAAKA,KAAKkO,EAAE6gB,YAAY3lB,MAAO,CAC3B,MAAM,IAAI1D,MAAM,6BAA+B0D,KAAO,KAI1D,UAAWpJ,KAAKkO,EAAE6gB,YAAY3lB,QAAU,SAAU,CAC9CpJ,KAAKkO,EAAE6gB,YAAY3lB,MAAQ,IAAI8kB,kBAC3BluB,KAAKkO,EAAE6gB,YAAY3lB,MAAMjC,QAAQ,KAAM,IACvC,KACA,OACEnH,KAAKkO,EAAE6gB,YAAY3lB,MAAMlC,MAAM,YAElC,UAAWlH,KAAKkO,EAAE6gB,YAAY3lB,QAAU,WAAY,CACvDpJ,KAAKkO,EAAE6gB,YAAY3lB,MAAQ,IAAI8kB,kBAC3BluB,KAAKkO,EAAE6gB,YAAY3lB,YAEpB,KAAMpJ,KAAKkO,EAAE6gB,YAAY3lB,gBAAiB8kB,mBAAoB,CACjEluB,KAAKkO,EAAE6gB,YAAY3lB,MAAQ,IAAI8kB,kBAC3BluB,KAAKkO,EAAE6gB,YAAY3lB,MAAM+kB,QACzBnuB,KAAKkO,EAAE6gB,YAAY3lB,MAAMH,KACzBjJ,KAAKkO,EAAE6gB,YAAY3lB,MAAMglB,MACzBpuB,KAAKkO,EAAE6gB,YAAY3lB,MAAMmV,KAIjC,OAAOve,KAAKkO,EAAE6gB,YAAY3lB,OAI9BomB,WAAY,SAAUpmB,MAClBsU,QAAQ1d,MAER,GAAIoJ,OAAS,YAAa,CACtB,OAAOpJ,UAEJ,GAAIA,KAAKkO,EAAE4gB,SAAS1lB,QAAUhH,UAAW,CAC5C,GAAIpC,KAAKkO,EAAE6gB,YAAY3lB,MAAO,CAC1BpJ,KAAKyvB,eAAermB,UAEjB,CACH,MAAM,IAAI1D,MAAM,mCAAqC0D,KAAO,MAKpE,OAAOpJ,KAAKkO,EAAE4gB,SAAS1lB,OAI3BsmB,WAAY,SAAUtmB,MAClBsU,QAAQ1d,MACR,OAAOoJ,OAAS,aAAepJ,KAAKkO,EAAE4gB,SAAS1lB,QAAUhH,WAAapC,KAAKkO,EAAE6gB,YAAY3lB,QAAUhH,WAIvGutB,iBAAkB,SAAUvmB,MACxB,IAAKpJ,KAAK0vB,WAAWtmB,MAAO,CACxB,MAAM,IAAI1D,MAAM,mCAAqC0D,KAAO,KAIhE,QAASpJ,KAAKkO,EAAE4gB,SAAS1lB,OAI7BwmB,YAAa,WACTlS,QAAQ1d,MAER,IAAIoJ,KAAM8T,IAEV,IAAK9T,QAAQpJ,KAAKkO,EAAE6gB,YAAa,CAC7B7R,IAAMld,KAAKuvB,qBAAqBnmB,MAEhC,GAAI8T,IAAI2R,QAAS,CACb7uB,KAAKwvB,WAAWpmB,SAM5BZ,OAAQ,SAAUgH,SAAUvG,KAAMwG,SAC9BiO,QAAQ1d,MACRiJ,KAAOjJ,KAAK6vB,mBAAmBrgB,SAAUvG,MACzC,OAAOuG,SAAStG,MAAMuG,SAAW,KAAMzP,KAAK8vB,iBAAiB7mB,QAIjEwmB,eAAgB,SAAUrmB,MACtB,IAAI8T,IAAMld,KAAKuvB,qBAAqBnmB,MAChC+kB,QAAUjR,IAAImR,aACdnP,IACAgQ,QACAd,MAEJ,UAAWD,UAAY,WAAY,CAC/Be,QAAUlvB,KAAKwI,OAAO2lB,QAASjR,IAAIqR,gBAEnC,IAAKW,QAAS,CACV,MAAM,IAAIxpB,MAAM,qCAAuC0D,KAAO,UAG/D,CACH+kB,QAAUnuB,KAAK+vB,UAAU5B,SACzBe,QAAUlvB,KAAKgwB,cAAc7B,QAAS,KAAMjR,IAAIqR,gBAEhD,GAAIW,UAAYf,QAAS,CACrB,MAAM,IAAIzoB,MAAM,gCAAkC0D,KAAO,MAKjEpJ,KAAKkO,EAAE4gB,SAAS1lB,MAAQ8lB,QAExB,GAAIhS,IAAIwR,WAAY,CAChBN,MAAQlR,IAAIuR,WAEZ,IAAK,IAAI1sB,EAAI,EAAGA,EAAIqsB,MAAMlsB,OAAQH,IAAK,CACnC,UAAWqsB,MAAMrsB,KAAO,WAAY,CAChC/B,KAAKwI,OAAO4lB,MAAMrsB,GAAI,KAAMmtB,aAEzB,CACHhQ,IAAMlf,KAAK+vB,UAAU3B,MAAMrsB,IAC3B/B,KAAKgwB,cAAc9Q,IAAKgQ,WAMpC,OAAOA,SAIXW,mBAAoB,SAAUrgB,UAC1B,IAAIygB,QAAUzQ,mBAAmBlR,KAAKkB,UAAUqQ,UAEhD,IAAI5W,KAAOiE,OAAOG,WAAW9E,UAAW,GACnCmD,OAAO,SAASwkB,KAAO,QAASA,MAChCpuB,IAAI,SAAUouB,KACX,GAAIA,eAAeliB,QAAS,CACxB,GAAIkiB,IAAIzhB,SAAU,CACdyhB,IAAMliB,QAAQM,KAAK4hB,IAAItiB,YAAaqiB,cAGrC,CACHC,IAAMliB,QAAQM,KAAK4hB,IAAKD,SAI5B,OAAOC,MAIf,IAAInuB,EAAGuG,EAEP6nB,UACA,IAAKpuB,EAAI,EAAGA,EAAIkuB,QAAQ/tB,OAAQH,IAAK,CACjC,IAAKuG,EAAIW,KAAK/G,OAAS,EAAGoG,GAAK,EAAGA,IAAK,CACnC,GAAIW,KAAKX,GAAG+G,IAAI4gB,QAAQluB,IAAK,CACzBkuB,QAAQluB,GAAKkH,KAAKX,GAAG4G,IAAI+gB,QAAQluB,IACjC,SAASouB,eAEN,GAAIlnB,KAAKX,GAAG+G,IAAItN,GAAI,CACvBkuB,QAAQluB,GAAKkH,KAAKX,GAAG4G,IAAInN,GACzB,SAASouB,WAKjB,GAAInwB,KAAK0vB,WAAWO,QAAQluB,IAAK,CAC7BkuB,QAAQluB,GAAK/B,KAAKwvB,WAAWS,QAAQluB,IACrC,SAIJ,MAAM,IAAI2D,MAAM,6BAA+BuqB,QAAQluB,GAAK,iBAIhE,OAAOkuB,SAIXH,iBAAkB,SAAU7mB,MACxB,IAAK,IAAIlH,EAAI,EAAGA,EAAIkH,KAAK/G,OAAQH,IAAK,CAClCkH,KAAKlH,GAAK/B,KAAKowB,WAAWnnB,KAAKlH,IAInC,OAAOkH,MAIXmnB,WAAY,SAAUF,KAClB,GAAIA,eAAelD,WAAY,CAC3B,OAAOhtB,KAAKgwB,cAAcE,UAEvB,UAAWA,MAAQ,UAAYA,IAAIhpB,MAAM,UAAW,CACvD,OAAOlH,KAAKwvB,WAAWU,IAAI9qB,OAAO,QAE/B,CACH,OAAO8qB,MAKfH,UAAW,SAAUtU,KACjB,IAAIvV,EAAIuV,IAAIvU,MAAM,sBAElB,GAAIhB,EAAG,CACH,OAAO,IAAI8mB,WAAW9mB,EAAE,GAAIglB,KAAK+B,OAAO,IAAM/mB,EAAE,GAAK,UAElD,CACH,OAAO,IAAI8mB,WAAWvR,IAAK,IAAIzN,WAKvCgiB,cAAe,SAAUzC,OAAQ/T,QAAS6W,WACtC,IAAInqB,EAAGgZ,IAAKkJ,OAAQnf,KAEpB,GAAI/C,EAAIqnB,OAAOvsB,MAAMkG,MAAM,mCAAoC,CAC3D,GAAIhB,EAAE,GAAI,CACNgZ,IAAMhZ,EAAE,GAAKlG,KAAKwvB,WAAWtpB,EAAE,IAAM4Y,gBAAgBE,SAAS9Y,EAAE,SAE7D,GAAIsT,QAAS,CAChB0F,IAAM1F,YAEH,CACH,MAAM,IAAI9T,MAAM,0BAA4B6nB,OAAOvsB,MAAQ,UAI/D,GAAIkF,EAAE,KAAO9D,UAAW,CACpBgmB,OAASliB,EAAE,GACX+C,KAAOjJ,KAAK6vB,mBAAmB3Q,IAAIkJ,QAASmF,OAAOhS,WAAY8U,WAC/D,OAAOnR,IAAIkJ,QAAQlf,MAAMgW,IAAKlf,KAAK8vB,iBAAiB7mB,YAEjD,IAAK/C,EAAE,GAAI,CACd+C,KAAOjJ,KAAK6vB,mBAAmB3Q,IAAKqO,OAAOhS,WAAY8U,WACvD,OAAOvR,gBAAgBxQ,KAAK4Q,KAAKI,gBAAgBtf,KAAK8vB,iBAAiB7mB,YAEpE,GAAIskB,OAAOhS,WAAWrZ,OAAQ,CACjC,MAAM,IAAIwD,MAAM,mBAAqB6nB,OAAOvsB,MAAQ,SAEjD,CACH,OAAOke,SAGR,CACH,OAAOqO,UAMnBhqB,SAAS4F,SAAS6lB,eAAgB,mBAEnC,CACClQ,gBAAiB,wBACjBU,mBAAoB,2BACpBtS,OAAQ,eACR5C,QAAS,gBACT0D,QAAS,gBACTkd,KAAM,mBACN8B,WAAY;AC3ThBzpB,SAASiF,OAAO,YAAa,SAASwmB,eAAgB9hB,OAAQc,QAAS8Q,gBAAiBkO,WAAY5qB,WAEhG,SAASkuB,SAASC,OAAQhgB,KAAM0F,QAC5B,UAAW1F,OAAS,SAAU,CAC1BA,KAAOA,KAAKtI,MAAM,OAItB,IAAIlG,EAAGiB,EAAGgB,EAAIuM,KAAKrO,OAEnB,IAAKH,EAAI,EAAGA,EAAIiC,EAAGjC,IAAK,CACpBiB,EAAIuN,KAAKxO,GAET,GAAIT,MAAMmM,QAAQ8iB,SAAWvtB,EAAEkE,MAAM,SAAU,CAC3ClE,EAAI2H,SAAS3H,GAIjB,GAAIutB,OAAOvtB,KAAOZ,UAAW,CACzB,GAAI6T,OAAQ,CACRsa,OAAOvtB,GAAK,OAET,CACH,OAAOZ,WAKfmuB,OAASA,OAAOvtB,GAIpB,OAAOutB,OAIX,IAAIC,UAAYjtB,SAASkG,OAAO,SAASgnB,QACrCA,SAAWA,OAAS,IAEpBzwB,KAAKkO,EAAI,CACLnF,OAAQmE,OAAOW,UAAU,GAAI4iB,OAAO1nB,QAAU,MAC9CgmB,YAAa7hB,OAAOW,UAAU,GAAI4iB,OAAO3B,UAAY,MACrDA,SAAU,GACV4B,UAAWxjB,OAAOW,UAAU,GAAI4iB,OAAOC,WAAa,QAGzD,CACC7e,SAAU,SAASzI,MACf,OAAOknB,SAAStwB,KAAKkO,EAAEnF,OAAQK,QAAUhH,WAI7CwP,SAAU,SAASxI,KAAM8T,KACrB,IAAIlc,MAAQsvB,SAAStwB,KAAKkO,EAAEnF,OAAQK,MACpC,OAAOpI,QAAUoB,UAAYpB,MAASkc,MAAQ9a,UAAY8a,IAAM,MAIpE1K,SAAU,SAASpJ,KAAMpI,OACrBoI,KAAOA,KAAKnB,MAAM,OAElB,IAAIjF,EAAIoG,KAAKE,MACTinB,OAASvwB,KAAKkO,EAAEnF,OAEpB,GAAIK,KAAKlH,OAAQ,CACbquB,OAASD,SAASC,OAAQnnB,KAAM,MAIpC,GAAI9H,MAAMmM,QAAQ8iB,SAAWvtB,EAAEkE,MAAM,SAAU,CAC3ClE,EAAI2H,SAAS3H,GAIjButB,OAAOvtB,GAAKhC,MAEZ,OAAOhB,MAIX2wB,WAAY,SAASvnB,MACjB,OAAOpJ,KAAKkO,EAAEwiB,UAAUtnB,QAAUhH,WAItCwuB,WAAY,SAASxnB,KAAM+kB,QAASplB,QAChC,UAAWolB,UAAY,SAAU,CAC7BnuB,KAAKkO,EAAEwiB,UAAUtnB,MAAQ+kB,YAEtB,CACHnuB,KAAKkO,EAAEwiB,UAAUtnB,MAAQ,CACrBoG,SAAU2e,QACVplB,OAAQA,QAAU,MAI1B,OAAO/I,MAIXiW,OAAQ,SAAS7M,KAAMH,MACnB,IAAKjJ,KAAK2wB,WAAWvnB,MAAO,CACxB,MAAM,IAAI1D,MAAM,qBAAuB0D,KAAO,yBAIlD,IAAI+kB,QAAUnuB,KAAKkO,EAAEwiB,UAAUtnB,MAE/B,UAAW+kB,UAAY,SAAU,CAC7BnuB,KAAKkO,EAAEwiB,UAAUtnB,MAAQ+kB,QAAUnuB,KAAK+vB,UAAU5B,cAE/C,KAAMA,QAAQplB,kBAAkBiF,SAAU,CAC7CmgB,QAAQplB,OAAS,IAAIiF,QAAQmgB,QAAQplB,QAIzC,GAAIolB,mBAAmBnB,WAAY,CAC/B,OAAOhtB,KAAKgwB,cAAc7B,QAAS,KAAMllB,UAEtC,CACHA,KAAOjJ,KAAK6vB,mBAAmB1B,QAAQ3e,SAAU2e,QAAQplB,OAAQE,MACjE,OAAOklB,QAAQ3e,SAAStG,MAAM,KAAMlJ,KAAK8vB,iBAAiB7mB,SAKlEmnB,WAAY,SAAUF,KAClB,UAAWA,MAAQ,UAAYA,IAAIloB,QAAQ,MAAQ,EAAG,CAClD,GAAIkoB,IAAIhpB,MAAM,aAAc,CACxB,OAAOlH,KAAK4R,SAASse,IAAI/oB,QAAQ,SAAU,SAExC,CACH,OAAO+oB,IAAI/oB,QAAQ,qBAAsB,WACrC,OAAOnH,KAAK4R,SAASrJ,UAAU,KAEjC0iB,KAAKjrB,YAER,CACH,OAAOA,KAAK6wB,YAAYX,SAMpC3sB,SAAS2G,MAAMsmB,UAAWxB,eAAgB,CACtCoB,WAAY,gBAGhB7sB,SAAS4F,SAASqnB,UAAW,cAE9B,CACCtjB,OAAQ,eACRc,QAAS,gBACT8Q,gBAAiB,wBACjBkO,WAAY;AC1JhBzpB,SAASiF,OAAO,YAAa,SAAU0E,QAEnC,IAAI4jB,iBAAmBvtB,SAASkG,OAAO,SAASsnB,iBAAkBN,QAC9DzwB,KAAKkO,EAAI,CACL6iB,iBAAkBA,iBAClBN,OAAQA,SAEb,CACCpoB,KAAM,aAIN+lB,MAAO,aAIP4C,WAAY,SAAUC,UAClB,GAAIA,SAAU,CACVjxB,KAAKkO,EAAEuiB,OAASvjB,OAAOW,UAAU,GAAIojB,SAAUjxB,KAAKkO,EAAEuiB,QAG1D,OAAOzwB,KAAKkO,EAAEuiB,QAIlBS,qBAAsB,WAClB,OAAOlxB,KAAKkO,EAAE6iB,oBAItBxtB,SAAS4F,SAAS2nB,iBAAkB,qBAErC,CACC5jB,OAAQ;ACjCZ3J,SAASiF,OAAO,YAAa,SAASgoB,UAAWM,iBAAkB1uB,WAE/D,IAAI+uB,iBAAmB5tB,SAASkG,OAAO+mB,UAAW,SAASC,QACvDA,SAAWA,OAAS,IAEpBU,iBAAiBrnB,MAAMxG,KAAKtD,KAAMywB,QAClCzwB,KAAKkO,EAAEkjB,WAAaX,OAAOW,YAAc,IAE1C,CACCC,aAAc,SAASjoB,KAAMkoB,WACzB,GAAItxB,KAAKkO,EAAEkjB,WAAWhoB,QAAUhH,UAAW,CACvC,MAAM,IAAIsD,MAAM,sDAAwD0D,KAAO,KAGnFpJ,KAAKkO,EAAEkjB,WAAWhoB,MAAQkoB,UAE1B,OAAOtxB,MAGXuxB,gBAAiB,WACbvxB,KAAKwxB,qBACLxxB,KAAKyxB,kBACLzxB,KAAK0xB,mBAEL,OAAO,IAAIlB,UAAU,CACjBznB,OAAQ/I,KAAKkO,EAAEnF,OACf+lB,SAAU9uB,KAAKkO,EAAE6gB,YACjB2B,UAAW1wB,KAAKkO,EAAEwiB,aAI1Bc,mBAAoB,WAChB,IAAIpoB,KAAMkoB,UAEV,IAAKloB,QAAQpJ,KAAKkO,EAAEkjB,WAAY,CAC5BE,UAAYtxB,KAAKkO,EAAEkjB,WAAWhoB,MAE9B,UAAWkoB,YAAc,WAAY,CACjCA,UAAYtxB,KAAKwI,OAAO8oB,UAAW,CAACP,iBAAkB/wB,KAAMywB,OAAQzwB,KAAKkO,EAAEnF,OAAOK,OAAS,UAExF,UAAWkoB,YAAc,SAAU,CACtCA,UAAYtxB,KAAKgwB,cAAchwB,KAAK+vB,UAAUuB,WAAY,KAAM,CAACP,iBAAkB/wB,KAAMywB,OAAQzwB,KAAKkO,EAAEnF,OAAOK,OAAS,KAI5H,KAAMkoB,qBAAqBR,kBAAmB,CAC1C,MAAM,IAAIprB,MAAM,cAAgB0D,KAAO,sDAI3CpJ,KAAKkO,EAAEkjB,WAAWhoB,MAAQkoB,YAKlCG,gBAAiB,WACb,IAAK,IAAIroB,QAAQpJ,KAAKkO,EAAEkjB,WAAY,CAChCpxB,KAAKkO,EAAEkjB,WAAWhoB,MAAMf,SAKhCqpB,iBAAkB,WACd,IAAK,IAAItoB,QAAQpJ,KAAKkO,EAAEkjB,WAAY,CAChCpxB,KAAKkO,EAAEkjB,WAAWhoB,MAAMglB,YAMpC7qB,SAAS4F,SAASgoB,iBAAkB;ACtExC5tB,SAASiF,OAAO,cAAe,SAAU8hB,OAAQna,IAAK/N,WAElD,IAAIuvB,QAAUpuB,SAASkG,OAAO,gBAAiB,SAAS6K,IAAK8T,OAAQ3nB,MACjET,KAAKkO,EAAI,CACLoG,IAAKnE,IAAI7B,KAAKgG,KACd8T,QAASA,QAAU,OAAOlc,cAC1BzL,KAAMA,MAAQ,GACdmxB,QAAS,GACTC,WAAY,MACZC,WAAY,MACZC,SAAU,CACN/rB,QAAS,KACT7E,OAAQ,KACRqD,QAAS,MAEbmC,MAAO,KACPqrB,QAAS,MACTC,SAAU,MAGdjyB,KAAKkO,EAAE6jB,SAASvtB,QAAU,IAAIC,QAAQ,SAAUuB,QAAS7E,QACrDnB,KAAKkO,EAAE6jB,SAAS/rB,QAAUA,QAC1BhG,KAAKkO,EAAE6jB,SAAS5wB,OAASA,QAC3B8pB,KAAKjrB,QACR,CACCkyB,OAAQ,WACJlyB,KAAKmyB,aACL,OAAOnyB,KAAKkO,EAAEoG,KAGlB8d,UAAW,WACP,OAAOpyB,KAAKkO,EAAEka,QAGlBiK,MAAO,WACH,OAAOryB,KAAKkO,EAAEka,SAAW,OAG7BkK,OAAQ,WACJ,OAAOtyB,KAAKkO,EAAEka,SAAW,QAG7BmK,SAAU,SAAUnK,QAChB,OAAOA,OAAOlc,gBAAkBlM,KAAKkO,EAAEka,QAG3CnL,QAAS,WACLjd,KAAKmyB,aACL,OAAOnyB,KAAKkO,EAAEzN,MAGlB+xB,WAAY,WACR,OAAOxyB,KAAKkO,EAAE0jB,SAGlBa,OAAQ,SAAUne,KACdtU,KAAKgiB,UAAU,OACfhiB,KAAKkO,EAAEoG,IAAMnE,IAAI7B,KAAKgG,KACtB,OAAOtU,MAGX0yB,UAAW,SAAUtK,QACjBpoB,KAAKgiB,UAAU,UACfhiB,KAAKkO,EAAEka,OAASA,OAAOhhB,cACvB,OAAOpH,MAGXod,QAAS,SAAU5P,EAAG/L,GAClBzB,KAAKgiB,UAAU,QAEf,GAAIxU,IAAM,KAAM,CACZxN,KAAKkO,EAAEzN,KAAO,QAEX,GAAIgB,IAAMW,kBAAoBoL,IAAM,SAAU,CACjD,IAAK/L,KAAK+L,EAAG,CACT,GAAIA,EAAEzD,eAAetI,GAAI,CACrBzB,KAAKkO,EAAEzN,KAAKgB,GAAK+L,EAAE/L,SAIxB,CACHzB,KAAKkO,EAAEzN,KAAK+M,GAAK/L,EAIrB,OAAOzB,MAGX2yB,UAAW,SAAUC,OAAQ5xB,OACzBhB,KAAKgiB,UAAU,WACfhiB,KAAKkO,EAAE0jB,QAAQgB,QAAU5xB,MACzB,OAAOhB,MAGX6yB,WAAY,SAAUjB,SAClB5xB,KAAKgiB,UAAU,WAEf,IAAK,IAAI4Q,UAAUhB,QAAS,CACxB,GAAIA,QAAQ7nB,eAAe6oB,QAAS,CAChC5yB,KAAKkO,EAAE0jB,QAAQgB,QAAUhB,QAAQgB,SAKzC,OAAO5yB,MAGX8yB,cAAe,SAASnsB,OACpB,GAAI3G,KAAKkO,EAAE4jB,WAAY,CACnB,MAAM,IAAIpsB,MAAM,4CACb,UAAWiB,QAAU,WAAY,CACpC,MAAM,IAAIjB,MAAM,8BAGpB1F,KAAKkO,EAAE4jB,WAAa,KACpB9xB,KAAKkO,EAAEvH,MAAQA,MACf,OAAO3G,MAGX+yB,aAAc,WACV,OAAO/yB,KAAKkO,EAAE4jB,YAGlBkB,aAAc,SAAUf,UACpB,GAAIA,SAAU,CACVjyB,KAAKizB,YAAYhB,UAGrBjyB,KAAKkO,EAAE6jB,SAAS/rB,QAAQhG,KAAKkzB,eAC7B,OAAOlzB,MAGXmzB,YAAa,SAAUC,QACnBpzB,KAAKkO,EAAE6jB,SAAS5wB,OAAOiyB,QACvB,OAAOpzB,MAGX6B,KAAM,SAAU6f,YAAaC,YACzB,OAAO3hB,KAAKkO,EAAE6jB,SAASvtB,QAAQ3C,KAAK6f,YAAaC,aAGrDhb,MAAO,WACH,GAAI3G,KAAKkO,EAAEvH,QAAU3G,KAAKkO,EAAE8jB,QAAS,CACjChyB,KAAKkO,EAAEvH,QAGX3G,KAAKkO,EAAE8jB,QAAU,KACjB,OAAOhyB,MAIXqzB,UAAW,WACP,OAAOrzB,KAAKkO,EAAE8jB,SAGlBiB,YAAa,SAAShB,UAClBjyB,KAAKkO,EAAE+jB,SAAWA,SAClB,OAAOjyB,MAGXkzB,YAAa,WACT,OAAOlzB,KAAKkO,EAAE+jB,UAGlBE,WAAY,WACR,GAAInyB,KAAKkO,EAAE2jB,aAAe7xB,KAAK+hB,WAAY,CACvC,OAGJ/hB,KAAKkO,EAAE2jB,WAAa,KAEpB,GAAI7xB,KAAKkO,EAAEka,SAAW,OAASpoB,KAAKkO,EAAEka,SAAW,OAAQ,CACrDpoB,KAAKkO,EAAEoG,IAAI7B,UAAU6X,OAAOgJ,OAAShJ,OAAOgJ,MAAMC,UAAYvzB,KAAKkO,EAAEzN,gBAAgB6pB,OAAOgJ,MAAMC,SAAWvzB,KAAKkO,EAAEzN,KAAKuP,WAAW,MAAQhQ,KAAKkO,EAAEzN,MACnJT,KAAKkO,EAAEzN,KAAO,OAK1B8C,SAAS2G,MAAMynB,QAAS,oBACxBpuB,SAAS4F,SAASwoB,QAAS,YAE5B,CACCxhB,IAAK;ACtLT5M,SAASiF,OAAO,cAAe,WAE3B,IAAIgrB,SAAWjwB,SAASkG,OAAO,SAAShD,OAAQgtB,QAAS7B,SACrD5xB,KAAKkO,EAAI,CACLzH,OAAQA,OACRgtB,QAASA,QACT7B,QAASA,UAEd,CACC8B,UAAW,WACP,OAAO1zB,KAAKkO,EAAEzH,QAIlBktB,WAAY,WACR,OAAO3zB,KAAKkO,EAAEulB,SAIlBG,UAAW,SAAUxqB,MACjB,OAAOpJ,KAAKkO,EAAE0jB,QAAQxoB,KAAKhC,gBAI/BysB,cAAe,WACX,OAAO7zB,KAAKkO,EAAE0jB,WAKtBruB,SAAS4F,SAASqqB,SAAU;AC9BhCjwB,SAASiF,OAAO,cAAe,SAAUmpB,QAASzkB,OAAQiD,KAEtD,IAAI2jB,QAAUvwB,SAASkG,OAAO,gBAAiB,SAAUsjB,SACrD+G,QAAQhqB,MAAMxG,KAAKtD,MAEnBA,KAAKkO,EAAE6e,QAAU7f,OAAOW,UAAU,GAAIimB,QAAQ7C,SAAUlE,SACxD/sB,KAAKkO,EAAE6lB,UAAY,KAEnB,IAAK/zB,KAAKkO,EAAE6e,QAAQiH,aAAc,CAC9Bh0B,KAAKkO,EAAE6e,QAAQiH,aAAe,QAC3B,IAAK1yB,MAAMmM,QAAQzN,KAAKkO,EAAE6e,QAAQiH,cAAe,CACpDh0B,KAAKkO,EAAE6e,QAAQiH,aAAeh0B,KAAKkO,EAAE6e,QAAQiH,aAAa/rB,MAAM,YAGpEjI,KAAKkO,EAAE6e,QAAQiH,aAAanxB,KAAKsN,IAAIiD,cAAc5B,cACpD,CACCxH,OAAQ,CACJinB,SAAU,CACN+C,aAAc,OAItBC,aAAc,SAAUF,WACpB/zB,KAAKkO,EAAE6lB,UAAYA,UACnB,OAAO/zB,MAGXk0B,aAAc,SAAUH,WACpBI,QAAQC,IAAI,gGACZ,OAAOp0B,KAAKi0B,aAAaF,YAG7BM,SAAU,SAAU/f,IAAK8T,OAAQ3nB,MAC7B,OAAOT,KAAKkO,EAAE6lB,UAAUM,SAAS/f,IAAK8T,OAAQ3nB,OAGlD6zB,gBAAiB,SAAShgB,KACtB,OAAOtU,KAAKkO,EAAE6e,QAAQiH,aAAahsB,QAAQmI,IAAI7B,KAAKgG,KAAK9C,cAAgB,GAG7EtC,IAAO,SAAUoF,IAAK7T,MAClB,OAAOT,KAAKu0B,SAASv0B,KAAKw0B,cAAclgB,IAAK,MAAO7T,QAGxDg0B,KAAM,SAAUngB,IAAK7T,MACjB,OAAOT,KAAKu0B,SAASv0B,KAAKw0B,cAAclgB,IAAK,OAAQ7T,QAGzD+zB,cAAe,SAAUlgB,IAAK8T,OAAQ3nB,MAClC,IAAKT,KAAKs0B,gBAAgBhgB,KAAM,CAC5B,MAAM,IAAI5O,MAAM,0BAA4B4O,IAAM,gDAC/C,IAAKtU,KAAKq0B,SAAS/f,IAAK8T,OAAQ3nB,MAAO,CAC1C,MAAM,IAAIiF,MAAM,6FAGpB,IAAIgvB,QAAU,IAAI/C,QAAQrd,IAAK8T,OAAQ3nB,MACvCT,KAAK0c,QAAQ,kBAAmB,CAACgY,QAASA,UAC1C,OAAOA,SAGXH,SAAU,SAAUG,SAChBA,QAAQ5S,SACR,OAAO9hB,KAAKkO,EAAE6lB,UAAUQ,SAASG,YAIzCnxB,SAAS4F,SAAS2qB,QAAS,YAE5B,CACC5mB,OAAQ,eACRiD,IAAK;ACtET5M,SAASiF,OAAO,wBAAyB,SAAU8hB,OAAQkJ,SAAUrjB,KAEjE,IAAIwkB,OAASpxB,SAASkG,OAAO,aAE1B,CACCO,OAAQ,CACJ4qB,UAAW,WACP,GAAIh1B,OAAO+F,eAAgB,CACvB,OAAO,IAAIA,oBACR,GAAI/F,OAAOgG,cAAe,CAC7B,IACI,OAAO,IAAIA,cAAc,kBAC3B,MAAOtF,GACL,OAAO,IAAIsF,cAAc,yBAMzCyuB,SAAU,SAAU/f,IAAK8T,OAAQ3nB,MAC7B,GAAIA,MAAQ6pB,OAAOgJ,OAAS7yB,gBAAgB6pB,OAAOgJ,MAAMC,UAAY9yB,KAAKo0B,aAAej1B,OAAO2zB,SAAU,CACtG,OAAO,MAGX,KAAM3zB,OAAO+F,kBAAoB,oBAAqBA,eAAekE,aAAesG,IAAIiD,cAAcjH,QAAQmI,MAAQnE,IAAIkD,KAAKC,KAAM,CACjI,OAAO,MAGX,OAAO,MAGXihB,SAAU,SAAUG,SAChB,IAAI3uB,IAAM4uB,OAAOC,YACbE,IAAM90B,KAAK+0B,cAAcL,QAAS3uB,KAClCY,MAAQZ,IAAIY,MAAMskB,KAAKllB,KAE3B,GAAI2uB,QAAQrB,YAAa,CACrBqB,QAAQvB,YAAYnzB,KAAKg1B,aAAaN,QAAS3uB,IAAK,CAAChD,KAAM,WAC3D,OAAO2xB,QAGX10B,KAAKi1B,YAAYP,QAAS3uB,IAAK+uB,KAE/B/uB,IAAII,KAAKuuB,QAAQtC,YAAasC,QAAQxC,SAASrf,aAAc,MAE7D,IAAIpS,KAAOT,KAAKk1B,YAAYR,QAAS3uB,KACrC/F,KAAKm1B,YAAYT,QAAS3uB,KAC1BA,IAAIW,KAAKjG,MAETi0B,QAAQ5B,cAAcnsB,OAEtB,OAAO+tB,SAIXK,cAAe,SAAUL,QAAS3uB,KAC9B,IAAI+uB,IAEJ,KAAMA,IAAM,qBAAsB/uB,QAAU,uBAAwBA,KAAM,CACtE,MAAM,IAAIL,MAAM,kCAGpB,OAAOovB,KAIXG,YAAa,SAAUP,QAAS3uB,IAAK+uB,KACjC,IAAIzyB,KAAOrC,KACPwB,KAAO,MAEX,SAAS4zB,OAAOzf,KACZ,GAAInU,KAAM,OACVA,KAAO,KAEP,GAAIuE,IAAIU,QAAU,KAAOV,IAAIU,OAAS,IAAK,CACvCiuB,QAAQ1B,aAAa3wB,KAAKgzB,gBAAgBtvB,UACvC,CACH2uB,QAAQvB,YAAY9wB,KAAK2yB,aAAaN,QAAS3uB,IAAK4P,OAI5D,SAAS2f,QAAQ3f,KACb,GAAInU,KAAM,OACVA,KAAO,KAEPkzB,QAAQvB,YAAY9wB,KAAK2yB,aAAaN,QAAS3uB,IAAK4P,MAGxD,SAAS4f,WAAW5f,KAChB+e,QAAQhY,QAAQ,WAAY,CACxB8Y,iBAAkB7f,IAAI6f,iBACtB9xB,OAAQiS,IAAIjS,OACZ+xB,MAAO9f,IAAI8f,QAInB,GAAIX,IAAK,CACL/uB,IAAI1F,iBAAiB,OAAQ+0B,OAAQ,OACrCrvB,IAAI1F,iBAAiB,QAASi1B,QAAS,OACvCvvB,IAAI1F,iBAAiB,QAASi1B,QAAS,OAEvC,GAAI,WAAYvvB,IAAK,CACjBA,IAAI2vB,OAAOr1B,iBAAiB,WAAYk1B,WAAY,YAErD,CACHxvB,IAAIQ,mBAAqB,WACrB,GAAIR,IAAIS,aAAe,EAAG,CACtB,GAAIT,IAAIU,QAAU,KAAOV,IAAIU,OAAS,IAAK,CACvC2uB,aACG,CACHE,aAKZ,GAAI,cAAevvB,IAAK,CACpBA,IAAI4vB,UAAYL,QAGpB,GAAI,YAAavvB,IAAK,CAClBA,IAAIM,QAAUivB,QAGlB,GAAI,WAAYvvB,IAAK,CACjBA,IAAIO,OAAS8uB,UAKzBD,YAAa,SAAUT,QAAS3uB,KAC5B,IAAI6rB,QAAU8C,QAAQlC,aAClBjmB,EAEJ,IAAKA,KAAKqlB,QAAS,CACf,GAAIA,QAAQ7nB,eAAewC,GAAI,CAC3BxG,IAAI6vB,iBAAiBrpB,EAAGqlB,QAAQrlB,KAIxC,IAAKqlB,QAAQ7nB,eAAe,oBAAqB,CAC7ChE,IAAI6vB,iBAAiB,mBAAoB,oBAIjDV,YAAa,SAAUR,QAAS3uB,KAC5B,IAAItF,KAAOi0B,QAAQzX,UAEnB,GAAIqN,OAAOgJ,OAAS7yB,gBAAgB6pB,OAAOgJ,MAAMC,SAAU,CACvD9yB,KAAOA,KAAKuP,WAAW0kB,QAAQrC,SAAWqC,QAAQnC,SAAS,SAE3D,IAAK3yB,OAAO2zB,YAAc9yB,gBAAgBb,OAAO2zB,UAAW,CACxD9yB,KAAO0P,IAAIwB,WAAWlR,KAAM,MAC5BsF,IAAI6vB,iBAAiB,eAAgB,0CAEtC,CACHn1B,KAAO0P,IAAIwB,WAAWlR,MACtBsF,IAAI6vB,iBAAiB,eAAgB,qCAGzC,OAAOn1B,MAGX40B,gBAAiB,SAAUtvB,KACvB,IAAI0tB,QACA7B,QAAU,IAEb7rB,IAAI8vB,yBAA2B,IAAI1qB,OAAOlD,MAAM,SAAS0G,QAAQ,SAASikB,QACvE,GAAIA,SAAWA,OAAO1rB,MAAM,SAAU,CAClC0rB,OAASA,OAAO1rB,MAAM,4BACtB0qB,QAAQgB,OAAO,GAAGxrB,eAAiBwrB,OAAO,MAIlD,GAAIhB,QAAQ,iBAAmBA,QAAQ,gBAAgB3pB,MAAM,KAAK,KAAO,mBAAoB,CACzFwrB,QAAUre,KAAKC,MAAMtP,IAAI0C,cAAgB,UACtC,CACHgrB,QAAU1tB,IAAI0C,aAGlB,OAAO,IAAI+qB,SAASztB,IAAIU,OAAQgtB,QAAS7B,UAG7CoD,aAAc,SAAUN,QAAS3uB,IAAK4P,KAClC,GAAI5P,IAAIS,aAAe,GAAKT,IAAIU,SAAW,EAAG,CAC1CiuB,QAAQzB,YAAYjzB,KAAKq1B,gBAAgBtvB,MAG7C,GAAI4P,KAAOA,IAAI5S,OAAS,QAAS,CAC7B,MAAO,CACHA,KAAM,QACN0D,OAAQ,KACRiuB,QAASA,cAEV,GAAI3uB,IAAIU,SAAW,EAAG,CACzB,MAAO,CACH1D,KAAM,aACN0D,OAAQ,KACRiuB,QAASA,cAEV,GAAI3uB,IAAIU,OAAS,KAAOV,IAAIU,QAAU,IAAK,CAC9C,MAAO,CACH1D,KAAM,WACN0D,OAAQV,IAAIU,OACZiuB,QAASA,SAIjB,MAAO,CACH3xB,KAAM,UACN0D,OAAQV,IAAIU,OACZiuB,QAASA,YAKrBnxB,SAAS4F,SAASwrB,OAAQ,WAE3B,CACCxkB,IAAK,YACLqjB,SAAU;CCpNb,SAASzzB,OAAQouB,SACjB,IAAKpuB,OAAOqV,KAAM,CACjB,OAGD,UAAW0gB,SAAW,YAAcA,OAAOC,IAAK,CAC/CD,OAAO,WACN,OAAO3H,QAAQpuB,eAEV,UAAWL,SAAW,iBAAmBA,OAAOC,UAAY,SAAU,CAC5ED,OAAOC,QAAUwuB,QAAQpuB,YACnB,CACN,IAAIoW,MAAQpW,OAAOF,QAAUE,OAAOF,MAAMC,OAC1CC,OAAOF,MAAQsuB,QAAQpuB,QACvB,GAAIoW,KAAM,CACTpW,OAAOF,MAAMm2B,gBAfhB,QAmBSp2B,SAAW,YAAcA,OAASI,KAAM,SAASJ,qBAIzD,IAAIC,MAAQ,GACZ,IAAIo2B,iBAAmB,GACvB,IAAIC,YAAc,GAClB,IAAIC,gBAAkB,IAAIv2B,OAAOw2B,QAEjCv2B,MAAMw2B,WAAa,GACnBx2B,MAAMy2B,QAAU,MAChBz2B,MAAM02B,qBAAuB,8BAO7B12B,MAAM22B,gBAAkB,SAAShnB,UAChC,GAAI1L,SAAS0C,aAAe,UAAW,CACtCgJ,SAASlM,KAAKtD,UACR,CACN8D,SAASzD,iBAAiB,mBAAoBmP,YAQhD3P,MAAMqjB,SAAW,SAASnf,MACzB,IAAIhC,EACJ,IAAKgC,KAAM,CACV,OAAO,UAED,IAAKA,KAAK0yB,QAAS,CACzB,OAAO1yB,KAAK,GAAKlE,MAAMqjB,SAASnf,KAAK,IAAM,UAErC,GAAIA,KAAKhB,OAAS,QAAS,CACjC,IAAIob,SAAWpa,KAAK2yB,KAAKvY,SACzB,IAAKpc,EAAI,EAAGA,EAAIoc,SAASjc,OAAQH,IAAK,CACrC,GAAIoc,SAASpc,GAAGqH,OAASrF,KAAKqF,MAAQ+U,SAASpc,GAAG40B,QAAS,CAC1D,OAAOxY,SAASpc,GAAGf,OAGrB,OAAO,UAED,GAAI+C,KAAKhB,OAAS,OAAQ,CAChC,OAAOgB,KAAK6yB,OAAS7yB,KAAK/C,WAEpB,GAAI+C,KAAK0yB,QAAQrvB,gBAAkB,SAAU,CACnD,IAAIkI,MAAQvL,KAAK8yB,cAChB9J,QAAUhpB,KAAKgpB,QACf5e,OAAS,GAEV,GAAIpK,KAAKhB,OAAS,aAAc,CAC/B,OAAOuM,MAAQ,EAAI,KAAOyd,QAAQzd,OAAOtO,MAG1C,IAAKe,EAAI,EAAGA,EAAIgrB,QAAQ7qB,OAAQH,IAAK,CACpC,GAAIgrB,QAAQhrB,GAAG+0B,SAAU,CACxB3oB,OAAOtL,KAAKkqB,QAAQhrB,GAAGf,QAGzB,OAAOmN,YAED,GAAIpK,KAAKqF,MAAQrF,KAAKqF,KAAKhE,QAAQ,KAAO,KAAM,CACtD+Y,SAAWpa,KAAK2yB,KAAKvY,SAASpa,KAAKqF,MAAMqtB,QAAU,CAAC1yB,MAAQA,KAAK2yB,KAAKvY,SAASpa,KAAKqF,MACpF+E,OAAS,GAET,IAAKpM,EAAI,EAAGA,EAAIoc,SAASjc,OAAQH,IAAK,CACrC,GAAIoc,SAASpc,GAAGgB,OAAS,YAAcob,SAASpc,GAAG40B,QAAS,CAC3DxoB,OAAOtL,KAAKsb,SAASpc,GAAGf,QAG1B,OAAOmN,YAED,GAAIpK,KAAKhB,OAAS,WAAY,CACpC,OAAOgB,KAAK4yB,aAEN,GAAI5yB,KAAK0yB,QAAQrvB,gBAAkB,WAAY,CACrD,OAAOrD,KAAK/C,MAAMmG,QAAQ,KAAM,QAE1B,CACN,OAAOpD,KAAK/C,MAAMmG,QAAQ,KAAM,IAAIA,QAAQ,aAAc,MAQ5DtH,MAAMk3B,kBAAoB,SAAShzB,KAAM2H,QACxC,IAAInJ,IAAM1C,MAAMqjB,SAASnf,MACzB,GAAIA,KAAKoZ,aAAc,CACtB,GAAI5a,MAAQwB,KAAKoZ,aAAa,0BAA2B,CACxD5a,IAAM,IAGR,GAAImJ,QAAUuqB,iBAAiBlyB,KAAKqF,QAAUhH,UAAW,CACxD6zB,iBAAiBlyB,KAAKqF,MAAQ,KAC9B,IAAIlG,IAAM,CAAClC,MAAOuB,KAClB1C,MAAMm3B,gBAAgBjzB,KAAM,KAAM,KAAMb,KACxCX,IAAMW,IAAIlC,aACHi1B,iBAAiBlyB,KAAKqF,MAE9B,OAAO7G,KAOR1C,MAAMm3B,gBAAkB,SAASjzB,KAAMkzB,MAAOC,UAAWl2B,MAAOm2B,eAC/D,IAAIC,KAAOH,MACXlzB,KAAOA,KAAK0yB,QAAU1yB,KAAOA,KAAK,GAClCkzB,MAAQA,OAAS7hB,KAAKC,MAAMtR,KAAKoZ,aAAa,qBAAuB,MACrEnc,MAAQA,QAAUoB,UAAY,CAACpB,MAAOnB,MAAMk3B,kBAAkBhzB,OAAS/C,MACvEm2B,cAAgBA,gBAAkB/0B,WAAavC,MAAMw3B,aAAatzB,KAAM,UAAW,KAAM/C,OAASm2B,cAElG,IAAK,IAAIzd,GAAK,EAAGxU,IAAM+xB,MAAM/0B,OAAQwX,GAAKxU,IAAKwU,KAAM,CACpD,IAAI4d,KAAOL,MAAMvd,IAChB8G,GAAK8W,KAAK9W,GAAGtZ,MAAM,eACnBqwB,QAAUD,KAAKE,QAAUzzB,KAAK2yB,KAAKvY,SAASsZ,UAAUH,KAAKE,SAAWzzB,KAEvEuzB,KAAKI,IAAMlX,GAAG,GACd8W,KAAK9W,GAAKA,GAAG,GACb8W,KAAKK,YAAcL,KAAKL,MAExB,IAAKM,QAAS,CACb,cACM,GAAIJ,gBAAkBG,KAAKK,WAAaL,KAAK9W,KAAO,UAAW,CACrE,SAGD+W,QAAUA,QAAQd,QAAUc,QAAUA,QAAQ,GAC9C,IAAIK,QAAU/3B,MAAMw3B,aAAaE,QAASD,KAAK9W,GAAI8W,KAAKpH,IAAKnsB,OAASwzB,QAAUv2B,MAAQoB,WAExF,GAAIw1B,UAAY,KAAM,CACrB,cACM,GAAIN,KAAKI,IAAK,CACpBE,SAAWA,QAGZ,GAAIN,KAAKK,WAAaC,QAAS,CAC9B,IAAK/3B,MAAMm3B,gBAAgBjzB,KAAMuzB,KAAKL,MAAOC,UAAWl2B,MAAOs2B,KAAK9W,KAAO,SAAW,MAAQ2W,eAAgB,CAC7G,OAAO,YAEF,IAAKG,KAAKK,YAAcC,QAAS,CACvC,GAAI/3B,MAAMg4B,WAAWN,SAAU,CAC9B,SAED,IAAKL,UAAW,CACf,IAAI71B,IAAMC,MAAMmM,QAAQ6pB,KAAKpH,KAAOoH,KAAKpH,IAAM,CAACoH,KAAKpH,KACpD4H,QAAUR,KAAKtJ,IAAI7mB,QAAQ,gBAAiB,SAASuX,IAAKxY,GACzD,OAAOrG,MAAMqjB,SAAShd,IAAM,QAAUqxB,QAAUxzB,KAAK2yB,KAAKvY,SAASsZ,UAAUp2B,IAAI6E,GAAGsxB,YAEtF33B,MAAMk4B,SAASR,QAASO,SAEzB,OAAO,OAIT,GAAI/zB,KAAKhB,OAAS,WAAagB,KAAKi0B,SAASC,MAAO,CACnD,GAAIb,MAAQF,UAAW,CACtBr3B,MAAMk4B,SAASh0B,KAAMlE,MAAM02B,sBAE5B,OAAO,MAGR,OAAO,MAOR12B,MAAMq4B,aAAe,SAASC,OAAQjB,WACrC,IAAIR,KAAOyB,OAAOzB,MAAQyB,OACzBC,MAAQ,MAETv4B,MAAMw2B,WAAa,GAEnB,GAAIK,KAAK,sBAAwBA,KAAK,qBAAqBvZ,aAAa,oBAAsB,KAAM,CACnG,IAAIkb,SAAWjjB,KAAKC,MAAMqhB,KAAK,qBAAqBvZ,aAAa,gCAAkC,MACnG,GAAIkb,SAASn2B,OAAQ,CACpBk2B,MAAQ,IAAIntB,OAAO,KAAOotB,SAAS9uB,KAAK,MAAQ,UAC1C,CACN1J,MAAMy4B,eAAe5B,KAAM,IAC3B,OAAO,MAIT,IAAI6B,OAAS,GAAIx2B,EAAGgC,KAEpB,IAAKhC,EAAI,EAAGA,EAAI20B,KAAKvY,SAASjc,OAAQH,IAAK,CAC1CgC,KAAO2yB,KAAKvY,SAASpc,GAErB,GAAIgC,KAAK0yB,WAAa1yB,KAAK0yB,QAAQrvB,eAAiB,CAAC0jB,MAAO,EAAG0N,OAAQ,EAAGC,SAAU,EAAG5hB,OAAQ,IAAK,CACnG,cAEM,GAAI9S,KAAKhB,OAAS,QAAS,CACjC,GAAIw1B,OAAOx0B,KAAKqF,MAAO,CACtB,SAEDmvB,OAAOx0B,KAAKqF,MAAQ,KAGrB,GAAKgvB,QAAUr0B,KAAKqF,KAAKjC,QAAQ,cAAe,KAAKD,MAAMkxB,QAAWv4B,MAAMg4B,WAAW9zB,MAAO,CAC7F,SAGD,IAAKlE,MAAMm3B,gBAAgBjzB,KAAM,KAAMmzB,aAAer3B,MAAMw2B,WAAWn0B,OAAQ,CAC9E,OAAO,OAGT,IAAI01B,SAAW/3B,MAAMw2B,WAAWn0B,OAChCrC,MAAMy4B,eAAe5B,KAAM72B,MAAMw2B,YACjC,OAAOuB,SAOR/3B,MAAMg4B,WAAa,SAAS9zB,MAC3B,GAAIA,KAAKhB,OAAS,QAAS,CAC1B,IAAK,IAAIhB,EAAI,EAAGoc,SAAWpa,KAAK2yB,KAAKvY,SAAUpc,EAAIoc,SAASjc,OAAQH,IAAK,CACxE,GAAIoc,SAASpc,GAAGqH,OAASrF,KAAKqF,OAAS+U,SAASpc,GAAG22B,SAAU,CAC5D,OAAO,OAGT,OAAO,KAER,OAAO30B,KAAK20B,UAOb74B,MAAMk4B,SAAW,SAASh0B,KAAM+zB,SAC/Bj4B,MAAMw2B,WAAWxzB,KAAK,CACrB81B,QAAS50B,KACT+zB,QAASA,WAQXj4B,MAAMy4B,eAAiB,SAAS5B,KAAMkC,QACrC,IAAIC,SAAW,GACdC,UAED,IAAK,IAAI/2B,EAAI,EAAGA,EAAI62B,OAAO12B,OAAQH,IAAK,CACvC,IAAIgC,KAAO60B,OAAO72B,GAAG42B,QACpBb,QAAUc,OAAO72B,GAAG+1B,QAErB,GAAIe,SAAS7wB,QAAQ8vB,SAAW,EAAG,CAClCe,SAASh2B,KAAKi1B,SAEd,IAAKgB,WAAa/0B,KAAKqU,MAAO,CAC7B0gB,UAAY/0B,OAKf,GAAI80B,SAAS32B,OAAQ,CACpB62B,MAAMF,SAAStvB,KAAK,OAEpB,GAAIuvB,UAAW,CACdA,UAAU1gB,WASbvY,MAAMw3B,aAAe,SAAStzB,KAAMyc,GAAI0P,IAAKlvB,OAC5CA,MAAQA,QAAUoB,UAAY,CAACpB,MAAOnB,MAAMk3B,kBAAkBhzB,KAAM,OAAS/C,MAE7E,GAAIwf,GAAGvL,OAAO,KAAO,IAAK,CACzBuL,GAAKA,GAAGpb,OAAO,GAEhBob,GAAKA,GAAGrZ,QAAQ,KAAM,KACtBqZ,GAAKA,GAAGrZ,QAAQ,MAAO,IAEvB,IAAI9F,IAAMC,MAAMmM,QAAQyiB,KAAOA,IAAI1lB,MAAM,GAAK,CAAC0lB,KAC/C,IAAK,IAAInuB,EAAI,EAAGmD,IAAM7D,IAAIa,OAAQH,EAAImD,IAAKnD,IAAK,CAC/C,GAAIV,IAAIU,IAAMV,IAAIU,GAAGy1B,QAAS,CAC7B,IAAIA,QAAUzzB,KAAK2yB,KAAKvY,SAASsZ,UAAUp2B,IAAIU,GAAGy1B,SAClDn2B,IAAIU,GAAKy1B,UAAYzzB,KAAO/C,MAAMA,MAAQnB,MAAMk3B,kBAAkBS,QAAS,OAI7E,OAAO33B,MAAMm5B,WAAWxY,IACrB3gB,MAAMm5B,WAAWxY,IAAIzc,KAAMzC,MAAMmM,QAAQyiB,KAAO7uB,IAAMA,IAAI,GAAIL,MAAMA,MAAOA,OAC3E,MAIJnB,MAAMm5B,WAAa,CAClBC,OAAQ,SAASl1B,KAAMmsB,IAAK3tB,KAC3B,GAAIwB,KAAKhB,OAAS,UAAYgB,KAAKi0B,SAASkB,SAAU,CACrD,OAAO,KAER,OAAO32B,MAAQ,IAAMA,MAAQ,OAASA,MAAQ,QACxCjB,MAAMmM,QAAQlL,QAAUA,IAAIL,WAC5BtC,OAAOu5B,YAAc52B,eAAe3C,OAAOu5B,WAAa52B,IAAIL,SAGnEk3B,MAAO,SAASr1B,KAAMmsB,IAAK3tB,KAC1B,OAAQ1C,MAAMm5B,WAAWC,OAAOl1B,KAAMmsB,IAAK3tB,MAG5C01B,MAAO,SAASl0B,MACf,OAAOlE,MAAMm3B,gBAAgBjzB,KAAM,KAAM,OAG1Cs1B,MAAO,SAASt1B,KAAMmsB,IAAK3tB,KAC1B,GAAI2tB,MAAQ9tB,UAAW,CACtB,OAAO,KAGR,SAAS4G,SAASzG,KACjB,UAAWA,MAAQ,iBAAmBA,MAAQ,SAAU,CACvD,MAAO,GAAKA,QACN,CACN,OAAOA,MAAQ,KAAO,IAAM,IAI9BA,IAAMjB,MAAMmM,QAAQlL,KAAOA,IAAM,CAACA,KAClC2tB,IAAM5uB,MAAMmM,QAAQyiB,KAAOA,IAAM,CAACA,KAClCoJ,KACA,IAAK,IAAIC,GAAK,EAAGC,KAAOj3B,IAAIL,OAAQq3B,GAAKC,KAAMD,KAAM,CACpD,IAAK,IAAIE,GAAK,EAAGC,KAAOxJ,IAAIhuB,OAAQu3B,GAAKC,KAAMD,KAAM,CACpD,GAAIzwB,SAASzG,IAAIg3B,OAASvwB,SAASknB,IAAIuJ,KAAM,CAC5C,SAASH,MAGX,OAAO,MAER,OAAO/2B,IAAIL,OAAS,GAGrBy3B,SAAU,SAAS51B,KAAMmsB,IAAK3tB,KAC7B,OAAO2tB,MAAQ9tB,UAAY,MAAQvC,MAAMm5B,WAAWK,MAAMt1B,KAAMmsB,IAAK3tB,MAGtEq3B,UAAW,SAAS71B,KAAMmsB,IAAK3tB,KAC9B,GAAIwB,KAAKhB,OAAS,SAAU,CAC3B,GAAIgB,KAAKi0B,SAAS6B,SAAU,CAC3B,OAAO,WACD,GAAI91B,KAAKi0B,SAASkB,SAAU,CAClC,OAAO,MAGT,OAAO32B,IAAIL,QAAUguB,KAGtB4J,UAAW,SAAS/1B,KAAMmsB,IAAK3tB,KAC9B,GAAIwB,KAAKhB,OAAS,SAAU,CAC3B,GAAIgB,KAAKi0B,SAAS+B,QAAS,CAC1B,OAAO,WACD,GAAIh2B,KAAKi0B,SAASkB,SAAU,CAClC,OAAO,MAGT,OAAO32B,IAAIL,QAAUguB,KAGtBhuB,OAAQ,SAAS6B,KAAMmsB,IAAK3tB,KAC3B,GAAIwB,KAAKhB,OAAS,SAAU,CAC3B,GAAIgB,KAAKi0B,SAAS6B,UAAY91B,KAAKi0B,SAAS+B,QAAS,CACpD,OAAO,WACD,GAAIh2B,KAAKi0B,SAASkB,SAAU,CAClC,OAAO,MAGThJ,IAAM5uB,MAAMmM,QAAQyiB,KAAOA,IAAM,CAACA,IAAKA,KACvC,OAAQA,IAAI,KAAO,MAAQ3tB,IAAIL,QAAUguB,IAAI,MAAQA,IAAI,KAAO,MAAQ3tB,IAAIL,QAAUguB,IAAI,KAG3F8J,MAAO,SAASj2B,KAAMmsB,IAAK3tB,KAC1B,MAAO,8TAAgUyE,KAAKzE,MAG7U+R,IAAK,SAASvQ,KAAMmsB,IAAK3tB,IAAKvB,OAC7B,IAAK,gBAAkBgG,KAAKzE,KAAM,CACjCA,IAAM,WAAaA,IAEpB,GAAI,sWAAwWyE,KAAKzE,KAAM,CACtXvB,MAAMA,MAAQuB,IACd,OAAO,KAER,OAAO,OAGR03B,OAAQ,SAASl2B,KAAMmsB,IAAK3tB,KAC3B,IAAIod,aAAeuQ,MAAQ,SAAWA,IAAIhpB,MAAM,sBAAwB,MACxE,IACC,OAAOyY,OAAS,IAAK1U,OAAO0U,MAAM,GAAIA,MAAM,GAAGxY,QAAQ,IAAK,KAAMH,KAAKzE,KACtE,MAAOjC,MAGV2jB,QAAS,SAASlgB,KAAMmsB,IAAK3tB,IAAKvB,MAAOk5B,iBACxC,UAAWhK,MAAQ,SAAU,CAC5B,OAAO,KAGR,IACC,IACC,IAAIiK,OAAS,IAAIlvB,OAAO,OAASilB,IAAM,KAAMgK,gBAAkB,KAAO,KACrE,MAAO55B,GACR65B,OAAS,IAAIlvB,OAAO,OAASilB,IAAM,KAAMgK,gBAAkB,IAAM,IAGlE,GAAIt6B,OAAOu5B,UAAY52B,eAAe42B,SAAU,CAC/C,IAAK,IAAIp3B,EAAI,EAAGA,EAAIQ,IAAIL,OAAQH,IAAK,CACpC,IAAKo4B,OAAOnzB,KAAKzE,IAAIR,GAAGqH,MAAO,CAC9B,OAAO,OAIT,OAAO,KAGR,OAAO+wB,OAAOnzB,KAAKzE,KAClB,MAAOjC,MAGV85B,uBAAwB,SAASr2B,KAAMmsB,IAAK3tB,KAC3C,OAAO1C,MAAMm5B,WAAW/U,QAAQlgB,KAAMmsB,IAAK3tB,IAAK,KAAM,OAGvD83B,QAAS,SAASt2B,KAAMmsB,IAAK3tB,KAC5B,GAAIwB,KAAKhB,OAAS,UAAYgB,KAAKi0B,SAASkB,SAAU,CACrD,OAAO,MAER,MAAO,WAAalyB,KAAKzE,MAG1B+3B,QAAS,SAASv2B,KAAMmsB,IAAK3tB,KAC5B,GAAIwB,KAAKhB,OAAS,UAAYgB,KAAKi0B,SAASkB,SAAU,CACrD,OAAO,MAER,MAAO,aAAelyB,KAAKzE,MAG5Bg4B,MAAS,SAASx2B,KAAMmsB,IAAK3tB,IAAKvB,OACjC,GAAI+C,KAAKhB,OAAS,UAAYgB,KAAKi0B,SAASkB,SAAU,CACrD,OAAO,MAER32B,IAAMA,IAAI4E,QAAQ,MAAO,IAAIA,QAAQ,KAAM,KAC3C,GAAI,sBAAwBH,KAAKzE,KAAM,CACtCvB,MAAMA,MAAQuB,IACd,OAAO,KAER,OAAO,OAGR8J,IAAK,SAAStI,KAAMmsB,IAAK3tB,KACxB,GAAIwB,KAAKhB,OAAS,SAAU,CAC3B,GAAIgB,KAAKi0B,SAASwC,eAAgB,CACjC,OAAO,WACD,GAAIz2B,KAAKi0B,SAASkB,SAAU,CAClC,OAAO,MAGT,OAAOhJ,MAAQ,MAAQtlB,WAAWrI,MAAQ2tB,KAG3C5R,IAAK,SAASva,KAAMmsB,IAAK3tB,KACxB,GAAIwB,KAAKhB,OAAS,SAAU,CAC3B,GAAIgB,KAAKi0B,SAASyC,cAAe,CAChC,OAAO,WACD,GAAI12B,KAAKi0B,SAASkB,SAAU,CAClC,OAAO,MAGT,OAAOhJ,MAAQ,MAAQtlB,WAAWrI,MAAQ2tB,KAG3CwK,MAAO,SAAS32B,KAAMmsB,IAAK3tB,KAC1B,GAAIwB,KAAKhB,OAAS,SAAU,CAC3B,GAAIgB,KAAKi0B,SAASwC,gBAAkBz2B,KAAKi0B,SAASyC,cAAe,CAChE,OAAO,WACD,GAAI12B,KAAKi0B,SAASkB,SAAU,CAClC,OAAO,MAGT,OAAO53B,MAAMmM,QAAQyiB,MAClBA,IAAI,KAAO,MAAQtlB,WAAWrI,MAAQ2tB,IAAI,MAAQA,IAAI,KAAO,MAAQtlB,WAAWrI,MAAQ2tB,IAAI,IAAO,MAGvGyK,UAAW,SAAS52B,MACnB,OAAOA,KAAK2yB,KAAK,uBAAyB3yB,MAG3C62B,SAAU,SAAS72B,KAAMmsB,IAAK3tB,KAC7B,GAAI3C,OAAOu5B,SAAU,CACpB,IAAK,IAAIp3B,EAAI,EAAGA,EAAIQ,IAAIL,OAAQH,IAAK,CACpC,GAAIQ,IAAIR,GAAG84B,KAAO3K,IAAK,CACtB,OAAO,QAIV,OAAO,MAGR4K,SAAU,SAAU/2B,KAAMmsB,IAAK3tB,KAC9B2tB,IAAM5uB,MAAMmM,QAAQyiB,KAAOA,IAAM,CAACA,KAClC,IAAK,IAAInuB,EAAI,EAAGmD,IAAMgrB,IAAIhuB,OAAQkJ,GAAK,GAAIrJ,EAAImD,IAAKnD,IAAK,CACxDqJ,GAAGvI,KAAK,IAAMqtB,IAAInuB,GAAGoF,QAAQ,WAAY,QAAQA,QAAQ,MAAO,MAAQ,KAEzEiE,GAAK,IAAIH,OAAOG,GAAG7B,KAAK,MAExB,GAAI3J,OAAOu5B,UAAY52B,eAAe42B,SAAU,CAC/C,IAAKp3B,EAAI,EAAGA,EAAIQ,IAAIL,OAAQH,IAAK,CAChC,GAAIQ,IAAIR,GAAGgB,OAASqI,GAAGpE,KAAKzE,IAAIR,GAAGgB,MAAO,CACzC,OAAO,WACD,GAAIgB,KAAKi0B,SAASkB,SAAU,CAClC,OAAO,OAIV,OAAO,MAGR6B,MAAO,SAAUh3B,KAAMmsB,IAAK3tB,KAC3B,OAAO1C,MAAMm5B,WAAW8B,SAAS/2B,KAAM,CAAC,YAAa,YAAa,aAAc,cAAexB,MAGhGy4B,OAAU,SAAUj3B,KAAMmsB,KACzB,OAAOA,MAQTrwB,MAAMo7B,WAAa,SAASvE,KAAMnhB,OACjC,IAAIxT,EACJm0B,YAAc,GACd,IAAKn0B,EAAI,EAAGA,EAAI20B,KAAKvY,SAASjc,OAAQH,IAAK,CAC1C,GAAI20B,KAAKvY,SAASpc,GAAG00B,QAAQrvB,eAAiB,CAAC0jB,MAAO,EAAG0N,OAAQ,EAAGC,SAAU,EAAG5hB,OAAQ,GAAI,CAC5FhX,MAAMq7B,cAAcxE,KAAKvY,SAASpc,GAAI,KAAM,MAAOwT,QAIrD,IAAKxT,KAAKm0B,YAAa,CACtBr2B,MAAMie,OAAO/b,EAAGm0B,YAAYn0B,GAAGO,MAAO4zB,YAAYn0B,GAAGgC,KAAMwR,SAQ7D1V,MAAMq7B,cAAgB,SAASn3B,KAAMkzB,MAAOW,QAASuD,UAAWn6B,MAAOm2B,eACtEF,MAAQA,OAAS7hB,KAAKC,MAAMtR,KAAKoZ,aAAa,qBAAuB,MACrEnc,MAAQA,QAAUoB,UAAY,CAACpB,MAAOnB,MAAMk3B,kBAAkBhzB,OAAS/C,MACvEm2B,cAAgBA,gBAAkB/0B,WAAavC,MAAMw3B,aAAatzB,KAAM,UAAW,KAAM/C,OAASm2B,cAElG,IAAI9nB,IAAM,MACTwN,QAAU,SAAUvc,GACnBT,MAAMo7B,WAAWl3B,KAAK2yB,KAAMp2B,IAE7B86B,WAED,IAAK,IAAI1hB,GAAK,EAAGxU,IAAM+xB,MAAM/0B,OAAQwX,GAAKxU,IAAKwU,KAAM,CACpD,IAAI4d,KAAOL,MAAMvd,IAChB8G,GAAK8W,KAAK9W,GAAGtZ,MAAM,eACnBqwB,QAAUD,KAAKE,QAAUzzB,KAAK2yB,KAAKvY,SAASsZ,UAAUH,KAAKE,SAAWzzB,KAEvEuzB,KAAKI,IAAMlX,GAAG,GACd8W,KAAK9W,GAAKA,GAAG,GACb8W,KAAKK,YAAcL,KAAKL,MAExB,IAAKM,QAAS,CACb,cACM,GAAIJ,gBAAkBG,KAAKK,WAAaL,KAAK9W,KAAO,UAAW,CACrE,SAGD4a,WAAaxD,QACb,GAAIA,UAAY,MAAO,CACtBwD,WAAav7B,MAAMw3B,aAAaE,QAASD,KAAK9W,GAAI8W,KAAKpH,IAAKnsB,OAASwzB,QAAUv2B,MAAQoB,WACvF,GAAIg5B,aAAe,KAAM,CACxB,cAEM,GAAI9D,KAAKI,IAAK,CACpB0D,YAAcA,WAEf,IAAK9D,KAAKK,UAAW,CACpBC,QAAUwD,YAIZ,GAAK9D,KAAKK,WAAa93B,MAAMq7B,cAAcn3B,KAAMuzB,KAAKL,MAAOmE,WAAYD,UAAWn6B,MAAOs2B,KAAK9W,KAAO,SAAW,MAAQ2W,gBAAmBG,KAAKxZ,OAAQ,CACzJzO,IAAM,KACN,GAAI8rB,UAAW,CACd,IAAI/xB,KAAOmuB,QAAQd,QAAUc,QAAQnuB,KAAOmuB,QAAQ,GAAGnuB,KACtDiyB,IAAM9D,QAAQd,QAAUc,QAAQb,KAAKvY,SAAWoZ,QAEjD,IAAK,IAAIx1B,EAAI,EAAGA,EAAIs5B,IAAIn5B,OAAQH,IAAK,CACpC,GAAIs5B,IAAIt5B,GAAGqH,OAASA,OAAS+sB,gBAAgB9mB,IAAIgsB,IAAIt5B,IAAK,CACzDs5B,IAAIt5B,GAAG1B,iBAAiB,SAAUwc,SAClCsZ,gBAAgB3nB,IAAI6sB,IAAIt5B,GAAI,QAI/B,IAAK,IAAIu5B,YAAYhE,KAAKxZ,QAAU,GAAI,CACvCoY,YAAYoF,UAAYpF,YAAYoF,WAAa,CAACv3B,KAAMA,MACxDmyB,YAAYoF,UAAUh5B,MAAQ4zB,YAAYoF,UAAUh5B,QAAUg1B,KAAKxZ,OAAOwd,UAAYF,YAAcA,cAIvG,OAAO/rB,KAORxP,MAAMie,OAAS,SAASyd,SAAUC,QAASC,WAAYlmB,OACtD,GAAI,eAAevO,KAAKu0B,UAAW,CAClCA,SAAW,IAAMA,SAElB,IAAI10B,MAAQ/C,SAAS43B,iBAAiBH,UACtC,IAAK,IAAIx5B,EAAI,EAAGA,EAAI8E,MAAM3E,OAAQH,IAAK,CACtC8E,MAAM9E,GAAG45B,QAAUH,UAQrB37B,MAAM+7B,kBAAoB,SAASlF,MAClC,IAAIttB,KAAMrH,EAAGgC,KAAMoK,OAAS,GAE5B,IAAKpM,EAAI,EAAGA,EAAI20B,KAAKvY,SAASjc,OAAQH,IAAK,CAC1CgC,KAAO2yB,KAAKvY,SAASpc,GACrB,GAAIgC,KAAK0yB,SACL1yB,KAAK0yB,QAAQrvB,gBAAkB,SAC/BrD,KAAKhB,OAAS,WAChB,CACD,GAAIgB,KAAKqF,MACLrF,KAAKqF,KAAKhE,QAAQ,KAAO,KAC3B,CACDgE,KAAOrF,KAAKqF,KAAKhE,OAAO,EAAGrB,KAAKqF,KAAKlH,OAAS,GAC9C6B,KAAK83B,gBAAgB,QACrB93B,KAAKsD,aAAa,kBAAmB+B,MAGtC,GAAIA,KAAOrF,KAAKoZ,aAAa,mBAAoB,CAChDhP,OAAO/E,MAAQ+E,OAAO/E,OAAS,GAC/B,GAAIrF,KAAK4yB,UAAY5yB,KAAK20B,SAAU,CACnCvqB,OAAO/E,MAAMvG,KAAKkB,KAAK/C,UAM3B,IAAKoI,QAAQ+E,OAAQ,CACpB,GAAIuoB,KAAKvY,SAAS/U,QAAUhH,UAAW,CACtC2B,KAAOD,SAASG,cAAc,SAC9BF,KAAKsD,aAAa,OAAQ+B,MAC1BrF,KAAKsD,aAAa,OAAQ,UAC1BqvB,KAAKjvB,YAAY1D,MAElB2yB,KAAKvY,SAAS/U,MAAMpI,MAAQmN,OAAO/E,MAAMG,KAAK,KAC9CmtB,KAAKvY,SAAS/U,MAAMsvB,SAAWvqB,OAAO/E,MAAMlH,SAAW,IAQzDrC,MAAMi8B,SAAW,SAASpF,MACzB,GAAIA,KAAKtO,SAAW,OAASsO,KAAKtb,aAAa,sBAAuB,CACrEsb,KAAKr2B,iBAAiB,SAAU,WAC/BR,MAAM+7B,kBAAkBlF,QAI1BqF,MAAO,CACN,IAAK,IAAIh6B,EAAI,EAAGA,EAAI20B,KAAKvY,SAASjc,OAAQH,IAAK,CAC9C,GAAI20B,KAAKvY,SAASpc,GAAGob,aAAa,oBAAqB,CACtD,MAAM4e,OAGR,OAGDl8B,MAAMo7B,WAAWvE,MAEjB,GAAIA,KAAKsF,WAAY,CACpB,OAEDtF,KAAKsF,WAAa,KAElBtF,KAAKr2B,iBAAiB,SAAU,SAASC,GACxC,IAAKT,MAAMq4B,aAAaxB,MAAO,CAC9Bp2B,EAAE27B,kBACF37B,EAAEkhB,qBASL3hB,MAAMm2B,WAAa,WAClBn2B,MAAM22B,gBAAgB,WACrB,IAAK,IAAIz0B,EAAI,EAAGA,EAAI+B,SAASo4B,MAAMh6B,OAAQH,IAAK,CAC/ClC,MAAMi8B,SAASh4B,SAASo4B,MAAMn6B,IAG/B+B,SAASq4B,KAAK97B,iBAAiB,QAAS,SAASC,GAChD,IAAI6J,OAAS7J,EAAE6J,OACf,MAAOA,OAAQ,CACd,GAAIA,OAAOusB,MAAQvsB,OAAOpH,OAAQ,CAACwV,OAAQ,EAAGwiB,MAAO,GAAI,CACxD5wB,OAAOusB,KAAK,qBAAuBvsB,OACnC,MAEDA,OAASA,OAAOtC,iBAUpBhI,MAAMiL,SAAW,SAAS7D,GACzBA,EAAIA,EAAEG,cACN,IAAI0T,IAAM,GAAI/Y,EAAGq6B,GACjB,IAAKr6B,EAAI,EAAGA,EAAIkF,EAAE/E,OAAQH,IAAK,CAC9Bq6B,GAAKv8B,MAAMw8B,cAAcp1B,EAAEgO,OAAOlT,IAClC+Y,KAAOshB,GAAKA,GAAKn1B,EAAEgO,OAAOlT,GAE3B,OAAO+Y,IAAI3T,QAAQ,cAAe,KAAKA,QAAQ,SAAU,KAG1DtH,MAAMw8B,cAAgB,CAACC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,IAAKC,IAAQ,KAE5P,OAAO19B;AC/wBR0D,SAASiF,OAAO,eAAgB,WAC5B,IAAI3I,MAEJ,UAAWH,SAAW,iBAAmBA,OAAOC,UAAY,SAAU,CAClEE,MAAQ29B,QAAQ,mBACb,CACH39B,MAAQD,OAAOC,MAGnB,IAAKA,QAAUA,MAAMm5B,WAAY,CAC7B,MAAM,IAAItzB,MAAM,4DAGpBnC,SAAS4F,SAAStJ,MAAO;ACb7B0D,SAASiF,OAAO,eAAgB,SAASpG,WAErC,IAAImxB,SAAWhwB,SAASkG,OAAO,WAC3BzJ,KAAKkO,EAAI,CACLuvB,YAAa,GACb/H,OAAQ,QAEb,CACC9mB,OAAQ,SAASxF,KAAMpI,OACnB,GAAIA,QAAUoB,WAAapB,QAAU,KAAM,CACvC,OAAOhB,KAIX,GAAIA,KAAK09B,QAAQ18B,OAAQ,CACrBhB,KAAKkO,EAAEwnB,OAAS,UAEb,UAAW10B,QAAU,UAAY,YAAaA,OAAS,wBAAwBgG,YAAYhG,MAAMuiB,aAAehb,UAAU,GAAI,CACjI,OAAOvI,KAAK4O,OAAOxF,KAAMpI,MAAMuiB,UAAW,WAEvC,IAAK,wBAAwBvc,YAAYhG,OAAQ,CACpD,MAAM,IAAI0E,MAAM,gFAAmF1E,MAAS,UAIhHhB,KAAKkO,EAAEuvB,YAAY56B,KAAK,CAAEuG,KAAMA,KAAMpI,MAAOA,QAE7C,OAAOhB,MAIX60B,SAAU,WACN,OAAO70B,KAAKkO,EAAEwnB,QAIlBgI,QAAS,SAAS18B,OACd,OAAOpB,OAAO+9B,OAASv7B,WAAapB,iBAAiBpB,OAAO+9B,MAAQ/9B,OAAOg+B,OAASx7B,WAAapB,iBAAiBpB,OAAOg+B,MAI7HC,UAAW,SAASp9B,MAChB,IAAK,IAAIsB,EAAI,EAAGA,EAAItB,KAAKyB,OAAQH,IAAK,CAClC/B,KAAK4O,OAAOnO,KAAKsB,GAAGqH,KAAM3I,KAAKsB,GAAGf,OAItC,OAAOhB,MAIXgQ,WAAY,SAAS8tB,YACjB,IAAKA,YAAc99B,KAAK60B,YAAcj1B,OAAO2zB,WAAanxB,UAAW,CACjE,IAAI27B,GAAK,IAAIn+B,OAAO2zB,SAChBxxB,EAEJ,IAAKA,EAAI,EAAGA,EAAI/B,KAAKkO,EAAEuvB,YAAYv7B,OAAQH,IAAK,CAC5C,UAAW/B,KAAKkO,EAAEuvB,YAAY17B,GAAGf,QAAU,UAAW,CAClD+8B,GAAGnvB,OAAO5O,KAAKkO,EAAEuvB,YAAY17B,GAAGqH,KAAMpJ,KAAKkO,EAAEuvB,YAAY17B,GAAGf,MAAQ,EAAI,OACrE,CACH+8B,GAAGnvB,OAAO5O,KAAKkO,EAAEuvB,YAAY17B,GAAGqH,KAAMpJ,KAAKkO,EAAEuvB,YAAY17B,GAAGf,QAIpE,OAAO+8B,OAEJ,CACH,OAAO/9B,KAAKkO,EAAEuvB,YAAY/xB,OAAO,SAASpL,GACtC,OAAQN,KAAK09B,QAAQp9B,EAAEU,QAExBhB,UAMfuD,SAAS4F,SAASoqB,SAAU;AC5EhChwB,SAASiF,OAAO,eAAgB,SAAUoM,IAAK1H,OAAQoV,SAAUiR,SAAUyK,OAAQ57B,WAE/E,IAAI+2B,SAAWv5B,OAAOu5B,UAAY,aAElC,IAAI8E,KAAO16B,SAASkG,OAAO,gBAAiB,SAAUitB,MAClDuH,KAAKn0B,MAAMxG,KAAKtD,MAEhBA,KAAKkO,EAAEgwB,YAAc,KACrBl+B,KAAKkO,EAAEiwB,iBAAmB,MAC1Bn+B,KAAKkO,EAAEkwB,cAAgB,KACvBp+B,KAAKq+B,cAAgBr+B,KAAKq+B,cAAcpT,KAAKjrB,MAC7CA,KAAKs+B,aAAet+B,KAAKs+B,aAAarT,KAAKjrB,MAE3CA,KAAKu+B,WAAW7H,MAEhB12B,KAAKmhB,GAAG,gBAAiBnhB,KAAKw+B,aAAavT,KAAKjrB,OAChDA,KAAKmhB,GAAG,eAAgBnhB,KAAKy+B,YAAYxT,KAAKjrB,QAE/C,CACC0+B,iBAAkB,SAAUC,UACxB3+B,KAAKkO,EAAEkwB,cAAgBO,UAG3BJ,WAAY,SAAU7H,MAClB,UAAWA,OAAS,SAAU,CAC1BA,KAAO9hB,IAAIC,QAAQ6hB,MAGvB,IAAKA,QAAUA,gBAAgBkI,iBAAkB,CAC7C,MAAM,IAAI19B,UAAU,+CAGxBlB,KAAKkO,EAAEwoB,KAAOA,KACd12B,KAAKkO,EAAEwoB,KAAKsF,WAAa,aACzBh8B,KAAKkO,EAAE2wB,eAAiBjqB,IAAIqI,QAAQyZ,KAAM,mBAE1C,GAAI12B,KAAKkO,EAAEgwB,YAAa,CACpBl+B,KAAKkO,EAAEwoB,KAAK,qBAAuB12B,KAAK8+B,WAAW9+B,KAAKkO,EAAEgwB,aAG9DtpB,IAAIyH,YAAYrc,KAAKkO,EAAEwoB,KAAM,SAAU12B,KAAKq+B,eAC5CzpB,IAAIyH,YAAYrc,KAAKkO,EAAEwoB,KAAM,QAAS12B,KAAKs+B,cAE3C,OAAOt+B,MAGX8+B,WAAY,SAAU11B,MAClB,OAAOA,KAAOpJ,KAAKkO,EAAEwoB,KAAKvY,SAASsZ,UAAUruB,MAAQpJ,KAAKkO,EAAEwoB,MAGhEqI,YAAa,WACT,OAAO/+B,KAAKkO,EAAEwoB,KAAKvY,UAGvB6gB,eAAgB,SAAUh+B,OACtB,GAAIA,MAAO,CACPhB,KAAKkO,EAAEgwB,YAAcl9B,MACrBhB,KAAKkO,EAAEwoB,KAAK,qBAAuB12B,KAAK8+B,WAAW99B,WAChD,CACHhB,KAAKkO,EAAEgwB,YAAcl+B,KAAKkO,EAAEwoB,KAAK,qBAAuB,KAG5D,OAAO12B,MAGXi/B,SAAU,SAAU9G,QAChB,GAAIn4B,KAAKkO,EAAEkwB,cAAe,CACtBp+B,KAAKkO,EAAEkwB,cAAcc,cAAcl/B,KAAKkO,EAAEwoB,MAG9C,IAAKsH,OAAO9F,aAAaC,QAAUn4B,KAAKkO,EAAEwoB,MAAO,CAC7C,OAAO,MAGX,IAAI/gB,IAAM3V,KAAK0c,QAAQ,WAAY,CAC/Byb,OAAQA,SAGZ,OAAQxiB,IAAIsL,sBAGhBke,UAAW,SAAUhxB,OAAQqK,OACzB,IAAI5T,MAAQ5E,KAAKo/B,iBACbh2B,KAAMpI,MAAOe,EAEjBoM,SAAWA,OAAS,IAEpB,IAAKpM,EAAI,EAAGA,EAAI6C,MAAM1C,OAAQH,IAAK,CAC/BqH,KAAOxE,MAAM7C,GACbf,MAAQoB,UAER,GAAIgH,KAAKpB,QAAQ,MAAQ,EAAG,CACxBhH,MAAQmN,OAER/E,KAAKjC,QAAQ,KAAM,IAAIc,MAAM,OAAO8H,KAAK,SAAU1G,KAC/C,GAAIA,MAAQ,GAAI,CACZ,OAAO,UACJ,KAAMA,OAAOrI,OAAQ,CACxBA,MAAQoB,UACR,OAAO,SACJ,CACHpB,MAAQA,MAAMqI,KACd,OAAO,cAGZ,GAAID,QAAQ+E,OAAQ,CACvBnN,MAAQmN,OAAO/E,MAGnB,GAAIpI,QAAUoB,UAAW,CACrB,GAAIoW,MAAO,CACPxX,MAAQ,SACL,CACH,UAIRhB,KAAKq/B,SAASj2B,KAAMpI,SAI5Bq+B,SAAU,SAAUt7B,KAAM/C,OACtB,UAAW+C,OAAS,SAAU,CAC1BA,KAAO/D,KAAKkO,EAAEwoB,KAAKvY,SAASsZ,UAAU1zB,MAG1C,IAAIhC,EACAu9B,MAAQ,SAAS79B,GAAK,MAAO,GAAKA,GAEtC,IAAKsC,KAAM,CACP,MAAM,IAAI7C,UAAU,uFACjB,IAAK6C,KAAK0yB,QAAS,CACtB,GAAI,WAAY1yB,KAAM,CAClB,IAAKhC,EAAI,EAAGA,EAAIgC,KAAK7B,OAAQH,IAAK,CAC9B/B,KAAKq/B,SAASt7B,KAAKhC,GAAIf,cAG5B,GAAI+C,KAAKhB,OAAS,QAAS,CAC9BgB,KAAK4yB,QAAU31B,QAAU,MAAQ+C,KAAK/C,QAAUs+B,MAAMt+B,YACnD,GAAI+C,KAAKhB,OAAS,OAAQ,CAC7B,GAAI/B,QAAU,KAAM,CAChBA,MAAQ+C,KAAK8D,WAAWsT,UACxBvG,IAAI2F,KAAKxW,KAAK8D,WAAY7G,aAE3B,GAAI+C,KAAK0yB,QAAQrvB,gBAAkB,SAAU,CAChD,IAAIm4B,OAASx7B,KAAKhB,OAAS,aACvB1B,IAAMC,MAAMmM,QAAQzM,OACpBS,EAEJ,GAAIJ,IAAK,CACLL,MAAQA,MAAMc,IAAIw9B,WACf,CACHt+B,MAAQs+B,MAAMt+B,OAGlB,IAAKe,EAAI,EAAGA,EAAIgC,KAAKgpB,QAAQ7qB,OAAQH,IAAK,CACtCN,EAAIJ,IAAML,MAAMgH,QAAQjE,KAAKgpB,QAAQhmB,KAAKhF,GAAGf,QAAU,EAAIA,QAAU+C,KAAKgpB,QAAQhmB,KAAKhF,GAAGf,MAC1F+C,KAAKgpB,QAAQhmB,KAAKhF,GAAG+0B,SAAWr1B,EAEhC,GAAIA,GAAK89B,OAAQ,CACb,aAGL,GAAIx7B,KAAKhB,OAAS,WAAY,CACjCgB,KAAK4yB,QAAUr1B,MAAMmM,QAAQzM,OAASA,MAAMc,IAAIw9B,OAAOt3B,QAAQjE,KAAK/C,QAAU,IAAMA,WACjF,GAAI+C,KAAKhB,OAAS,OAAQ,CAC7BgB,KAAK/C,MAAQA,MAAQshB,SAAShU,KAAKtN,OAAOgjB,OAAO,SAAW,QACzD,GAAIjgB,KAAKhB,OAAS,kBAAoBgB,KAAKhB,OAAS,WAAY,CACnEgB,KAAK/C,MAAQA,MAAQshB,SAAShU,KAAKtN,OAAOgjB,OAAO,iBAAmB,OACjE,CACHjgB,KAAK/C,MAAQA,QAAU,KAAOs+B,MAAMt+B,OAAS,GAGjD,OAAOhB,MAGXkjB,SAAU,SAAU9Z,MAChB,OAAO40B,OAAOjH,kBAAkB/2B,KAAK8+B,WAAW11B,QAGpDo2B,UAAW,WACP,IAAIz7B,KAAMhC,EACNtB,KAAO,IAAI8yB,SACX3uB,MAAQ5E,KAAKo/B,eAAe,MAC5Bp+B,MAEJ,GAAIhB,KAAKkO,EAAEgwB,YAAa,CACpBt5B,MAAM/B,KAAK7C,KAAKkO,EAAEgwB,aAGtB,IAAKn8B,EAAI,EAAGA,EAAI6C,MAAM1C,OAAQH,IAAK,CAC/BgC,KAAO/D,KAAKkO,EAAEwoB,KAAKvY,SAASsZ,UAAU7yB,MAAM7C,IAC5Cf,MAAQg9B,OAAOjH,kBAAkBhzB,MAEjC,GAAIzC,MAAMmM,QAAQzM,QAAUA,iBAAiBm4B,SAAU,CACnD,IAAK,IAAInc,EAAI,EAAGA,EAAIhc,MAAMkB,OAAQ8a,IAAK,CACnCvc,KAAKmO,OAAOhK,MAAM7C,GAAIf,MAAMgc,SAE7B,CACHvc,KAAKmO,OAAOhK,MAAM7C,GAAIf,QAI9BhB,KAAK0c,QAAQ,YAAajc,MAE1B,OAAOA,MAGX8X,OAAQ,SAAUknB,IACd,GAAIA,GAAI,CACJ,IAAIC,IAAM1/B,KAAKkO,EAAEwoB,KAAKvY,SAASsZ,UAAUgI,IAEzC,GAAIC,KAAOA,IAAI38B,OAAS,SAAU,CAC9B6R,IAAI8H,QAAQgjB,IAAK,aACd,CACH,MAAM,IAAIx+B,UAAU,2CAA6Cu+B,SAElE,CACH7qB,IAAI8H,QAAQ1c,KAAKkO,EAAEwoB,KAAM,UAG7B,OAAO12B,MAGXwY,MAAO,WACHxY,KAAKkO,EAAEwoB,KAAKle,QACZ,OAAOxY,MAGX2/B,QAAS,WACL3/B,KAAK0c,QAAQ,WACb1c,KAAKqhB,MACLzM,IAAI4H,eAAexc,KAAKkO,EAAEwoB,KAAM,SAAU12B,KAAKq+B,eAC/CzpB,IAAI4H,eAAexc,KAAKkO,EAAEwoB,KAAM,QAAS12B,KAAKs+B,cAC9Ct+B,KAAKkO,EAAEwoB,KAAO,MAGlB2H,cAAe,SAAU1oB,KACrB,GAAI3V,KAAK0c,QAAQ,UAAUuE,qBAAsB,CAC7CtL,IAAI6L,iBACJ,OAGJ,IAAI2W,OAASn4B,KAAKkO,EAAEgwB,YAAcl+B,KAAK8+B,WAAW9+B,KAAKkO,EAAEgwB,aAAe,KAExE,IAAKl+B,KAAKi/B,SAAS9G,QAAS,CACxBxiB,IAAI6L,mBAIZ8c,aAAc,SAAU3oB,KACpB,GAAIA,IAAIxL,SAAWnK,KAAKkO,EAAEwoB,KAAM,CAC5B,OAGJ,IAAI3yB,KAAMhC,EAEV,IAAKA,EAAI,EAAGA,EAAI/B,KAAKkO,EAAEwoB,KAAKvY,SAASjc,OAAQH,IAAK,CAC9CgC,KAAO/D,KAAKkO,EAAEwoB,KAAKvY,SAASpX,KAAKhF,GAEjC,GAAIgC,KAAKhB,OAAS,UAAYgB,KAAKqX,aAAa,sBAAuB,CACnEpb,KAAKq/B,SAASt7B,KAAM6Q,IAAIqI,QAAQlZ,KAAM,uBACnC,GAAIA,KAAKhB,OAAS,OAAQ,CAC7B/C,KAAKq/B,SAASt7B,KAAM,OAI5B/D,KAAKkO,EAAEgwB,YAAcl+B,KAAKkO,EAAEwoB,KAAK,qBAAuB,KAExD12B,KAAK0c,QAAQ,UAGjB8hB,aAAc,SAAU7oB,KACpB,GAAI3V,KAAKkO,EAAEkwB,cAAe,CACtBp+B,KAAKkO,EAAEkwB,cAAcrG,SAAS/3B,KAAKkO,EAAEwoB,KAAM/gB,IAAIlV,KAAKk4B,QAAShjB,IAAIlV,KAAKq3B,SAG1E,IAAK93B,KAAKkO,EAAEiwB,kBAAoBxoB,IAAIlV,KAAKk4B,gBAAkBhjB,IAAIlV,KAAKk4B,QAAQvgB,QAAU,WAAY,CAC9FzC,IAAIlV,KAAKk4B,QAAQvgB,UAIzBqmB,YAAa,SAAU9oB,KACnB,GAAI3V,KAAKkO,EAAEkwB,cAAe,CACtBp+B,KAAKkO,EAAEkwB,cAAcc,cAAcl/B,KAAKkO,EAAEwoB,KAAM/gB,IAAIlV,KAAKk4B,SAG7D,GAAI/jB,IAAIqI,QAAQtH,IAAIlV,KAAKk4B,QAAS,kBAAmB34B,KAAKkO,EAAE2wB,kBAAoB,OAAQ,CACpF7+B,KAAKkO,EAAEiwB,iBAAmB,KAC1BH,OAAOhH,gBAAgBrhB,IAAIlV,KAAKk4B,SAChC34B,KAAKkO,EAAEiwB,iBAAmB,QAIlCiB,eAAgB,SAAUQ,aACtB,IAAI77B,KAAMhC,EACN6C,MAAQ,GAEZ,IAAK7C,EAAI,EAAGA,EAAI/B,KAAKkO,EAAEwoB,KAAKvY,SAASjc,OAAQH,IAAK,CAC9CgC,KAAO/D,KAAKkO,EAAEwoB,KAAKvY,SAASpX,KAAKhF,GAEjC,GAAIgC,KAAKqF,QAAUw2B,cAAgB77B,KAAK20B,WAAa9zB,MAAMoD,QAAQjE,KAAKqF,SAAW,KAAOrF,KAAKhB,OAAQ,CAACwV,OAAQ,EAAG1B,OAAQ,EAAG2B,MAAO,IAAK,CACtI5T,MAAM/B,KAAKkB,KAAKqF,OAIxB,OAAOxE,SAIfrB,SAAS4F,SAAS80B,KAAM,SAEzB,CACCrpB,IAAK,YACL1H,OAAQ,eACRoV,SAAU;AC3Td/e,SAASiF,OAAO,eAAgB,SAAUy1B,KAAMD,OAAQppB,IAAK1H,QAEzD,IAAI2yB,OAAS,EAEb,IAAIC,QAAUv8B,SAASkG,OAAO,gBAAiB,SAAUs2B,mBACrD//B,KAAKkO,EAAI,CACLkwB,cAAe2B,mBAAqB,KACpCC,SAAU,IAGdhC,OAAOjG,SAAW/3B,KAAKigC,cAAchV,KAAKjrB,MAC1C4U,IAAIyH,YAAYvY,SAAU,OAAQ9D,KAAKy+B,YAAYxT,KAAKjrB,MAAO,OAEhE,CACCkgC,QAAS,SAAUxmB,IACf,IAAI3V,KAEJ,UAAW2V,KAAO,SAAU,CACxB3V,KAAO2V,GAEP,IAAK3V,KAAKoZ,aAAa,MAAO,CAC1BpZ,KAAKsD,aAAa,KAAM,mBAAqBw4B,QAGjDnmB,GAAK3V,KAAKoZ,aAAa,MAI3B,KAAMzD,MAAM1Z,KAAKkO,EAAE8xB,UAAW,CAC1BhgC,KAAKkO,EAAE8xB,SAAStmB,IAAM,IAAIukB,KAAKl6B,MAAQ2V,IACvC1Z,KAAKkO,EAAE8xB,SAAStmB,IAAIglB,iBAAiB1+B,KAAKkO,EAAEkwB,eAC5Cp+B,KAAK0c,QAAQ,aAAc,CAAEga,KAAM12B,KAAKkO,EAAE8xB,SAAStmB,MAGvD,OAAO1Z,KAAKkO,EAAE8xB,SAAStmB,KAI3BymB,WAAY,SAAUzmB,IAClB,UAAWA,KAAO,SAAU,CACxBA,GAAKA,GAAGyD,aAAa,MAGzB,GAAIzD,MAAM1Z,KAAKkO,EAAE8xB,SAAU,CACvBhgC,KAAK0c,QAAQ,eAAgB,CAAEga,KAAM12B,KAAKkO,EAAE8xB,SAAStmB,MACrD1Z,KAAKkO,EAAE8xB,SAAStmB,IAAIimB,iBACb3/B,KAAKkO,EAAE8xB,SAAStmB,MAI/B0mB,aAAc,WACV,IAAIr8B,KAAM2V,GAEV,IAAKA,MAAM1Z,KAAKkO,EAAE8xB,SAAU,CACxB,GAAIhgC,KAAKkO,EAAE8xB,SAASj2B,eAAe2P,IAAK,CACpC3V,KAAO6Q,IAAIC,QAAQ6E,IAEnB,GAAI3V,KAAM,CACN,GAAIA,OAAS/D,KAAKkO,EAAE8xB,SAAStmB,IAAIolB,aAAc,CAC3C9+B,KAAKkO,EAAE8xB,SAAStmB,IAAI6kB,WAAWx6B,WAEhC,CACH/D,KAAKmgC,WAAWzmB,MAK5BxM,OAAOG,WAAWvJ,SAASgD,qBAAqB,SAC3C6H,QAAQ3O,KAAKkgC,QAAQjV,KAAKjrB,QAGnCigC,cAAe,SAAUl8B,KAAMiqB,KAC3BhuB,KAAKkgC,QAAQn8B,KAAK2yB,MAAMha,QAAQ,QAAS,CAACic,QAAS50B,KAAM+zB,QAAS9J,OAGtEyQ,YAAa,SAAU9oB,KACnB,GAAIA,IAAIxL,OAAOusB,MAAQ/gB,IAAIxL,OAAOusB,gBAAgBkI,gBAAiB,CAC/D5+B,KAAKkgC,QAAQvqB,IAAIxL,OAAOusB,MAAMha,QAAQ,OAAQ,CAAEic,QAAShjB,IAAIxL,aAKzE5G,SAAS4F,SAAS22B,QAAS,YAE5B,CACClrB,IAAK,YACL1H,OAAQ;ACtFZ3J,SAASiF,OAAO,eAAgB,SAAUoM,KAEtC,IAAIyrB,qBAAuB98B,SAASkG,OAAO,aAExC,CACCsuB,SAAU,SAAUrB,KAAMiC,QAASb,SAC/B,IAAItd,UAAYxa,KAAKsgC,mBAAmB5J,KAAMiC,SAC1C50B,KAEJ,GAAIyW,UAAW,CACX,GAAIme,SAAWA,QAAQ9wB,aAAe2S,UAAW,CAC7CzW,KAAO6Q,IAAIqB,OAAO,OAAQ,CAACsqB,MAAS,cACjC,CACHx8B,KAAO6Q,IAAIqB,OAAOuE,UAAUic,QAAQvvB,MAAM,cAAgB,KAAO,IAAK,CAACq5B,MAAS,UAGpFx8B,KAAKsX,YAAcyc,QACnBtd,UAAU/S,YAAY1D,QAI9Bm7B,cAAe,SAAUxI,KAAMiC,SAC3B,IAAIne,UAAYme,QAAU34B,KAAKsgC,mBAAmB5J,KAAMiC,SAAWjC,KAEnE,GAAIlc,UAAW,CACX5F,IAAI0E,eAAe,QAASkB,WACvB7L,QAAQ,SAAU5K,MACfA,KAAK8D,WAAWC,YAAY/D,UAK5Cu8B,mBAAoB,SAAU5J,KAAM3yB,MAChC,IAAIyW,UAAYzW,MAAQA,KAAK2V,GAAK9E,IAAIC,QAAQ9Q,KAAK2V,GAAK,WAAa,KACrE,OAAOc,WAAa5F,IAAIC,QAAQ6hB,KAAKhd,GAAK,aAAe3V,KAAOA,KAAK8D,WAAa,SAI1FtE,SAAS4F,SAASk3B,qBAAsB,yBAEzC,CACCzrB,IAAK;ACzCTrR,SAASiF,OAAO,cAAe,SAAUoM,IAAKxS,WAE1C,IAAIo+B,QAAUj9B,SAASkG,OAAO,SAAUiQ,GAAI+mB,OACxCzgC,KAAKkO,EAAI,CACLwL,GAAIA,GACJc,UAAW,MACXimB,aAAcA,QAAU,SAAWA,MAAQD,QAAQE,SACnDjgC,KAAM,GACNkgC,SAAU,CACN,GAAI,GAAI,GAAI,MAGrB,CACC32B,OAAQ,CACJ02B,UAAW,EACXE,cAAe,EACfC,UAAW,EACXC,iBAAkB,EAClBC,aAAc,GAGlBC,MAAO,WACH,OAAOhhC,KAAKkO,EAAEwL,IAIlB0U,MAAO,SAAU1Q,QAASa,KACtB,GAAIb,UAAYa,IAAK,CACjBA,IAAMb,QACNA,QAAU,KAId,GAAIA,QAAS,CACT,GAAI1d,KAAKkO,EAAEuyB,QAAUD,QAAQI,cAAe,CACxCljB,QAAQ1d,KAAK8+B,kBAEV,CACH9+B,KAAKkO,EAAEyyB,SAASH,QAAQI,eAAe/9B,KAAK6a,UAKpD,GAAIa,IAAK,CACL,GAAIve,KAAKkO,EAAEuyB,QAAUD,QAAQK,UAAW,CACpCtiB,IAAIve,KAAK8+B,kBAEN,CACH9+B,KAAKkO,EAAEyyB,SAASH,QAAQK,WAAWh+B,KAAK0b,MAKhD,OAAOve,MAIXihC,SAAU,SAAUvjB,QAASa,KACzB,GAAIb,UAAYa,IAAK,CACjBA,IAAMb,QACNA,QAAU,KAId,GAAIA,QAAS,CACT,GAAI1d,KAAKkO,EAAEuyB,QAAUD,QAAQM,iBAAkB,CAC3CpjB,QAAQ1d,KAAK8+B,kBAEV,CACH9+B,KAAKkO,EAAEyyB,SAASH,QAAQM,kBAAkBj+B,KAAK6a,UAKvD,GAAIa,IAAK,CACL,GAAIve,KAAKkO,EAAEuyB,QAAUD,QAAQO,aAAc,CACvCxiB,IAAIve,KAAK8+B,kBAEN,CACH9+B,KAAKkO,EAAEyyB,SAASH,QAAQO,cAAcl+B,KAAK0b,MAKnD,OAAOve,MAIXkhC,SAAU,SAAUT,OAChB,GAAIA,QAAUD,QAAQE,SAAU,CAC5B1gC,KAAKkO,EAAEuyB,MAAQA,MAEfzgC,KAAKkO,EAAEyyB,SAAShyB,QAAQ,SAAUzO,OAC9BA,MAAM4O,OAAO,EAAG5O,MAAMgC,eAIvB,GAAIu+B,MAAQ,IAAMzgC,KAAKkO,EAAEuyB,MAAO,CACnCzgC,KAAKkO,EAAEuyB,MAAQA,MAEf,IAAIU,IAAMnhC,KAAK8+B,aAEf9+B,KAAKkO,EAAEyyB,SAAS3gC,KAAKkO,EAAEuyB,OAAO9xB,QAAQ,SAAUkO,SAC5CA,QAAQskB,OAIZnhC,KAAKkO,EAAEyyB,SAAS3gC,KAAKkO,EAAEuyB,OAAO3xB,OAAO,EAAG9O,KAAKkO,EAAEyyB,SAAS3gC,KAAKkO,EAAEuyB,OAAOv+B,QAI1E,OAAOlC,MAIXohC,SAAU,WACN,OAAOphC,KAAKkO,EAAEuyB,OAIlBxjB,QAAS,SAAU5T,IAAK6T,KACpB,OAAO7T,OAAOrJ,KAAKkO,EAAEzN,KAAOT,KAAKkO,EAAEzN,KAAK4I,KAAQ6T,MAAQ9a,UAAY,KAAO8a,KAI/EE,QAAS,SAAU/T,IAAKrI,OACpBhB,KAAKkO,EAAEzN,KAAK4I,KAAOrI,MACnB,OAAOhB,MAIXqhC,aAAc,WACVrhC,KAAKkO,EAAEsM,UAAY,KACnB,OAAOxa,MAIXshC,YAAa,WACT,OAAOthC,KAAKkO,EAAEsM,WAIlBskB,WAAY,WACR,OAAOlqB,IAAIC,QAAQ7U,KAAKkO,EAAEwL,OAKlCnW,SAAS4F,SAASq3B,QAAS,YAE5B,CACC5rB,IAAK;ACvJTrR,SAASiF,OAAO,cAAe,SAASoM,KAEpC,IAAI2sB,QAAU,CACVC,aAAc,SAASz9B,KAAMwW,MACzBxW,KAAOA,KAAKkE,MAAM,OAClBlE,KAAK,GAAK6Q,IAAIqB,OAAOlS,KAAK,IAE1B,GAAIA,KAAK7B,OAAS,EAAG,CACjB0S,IAAI0I,SAASpU,MAAM0L,IAAK7Q,MAG5BA,KAAOA,KAAK,GACZ6Q,IAAI2F,KAAKxW,KAAMwW,MAEf,OAAOxW,MAIX09B,wBAAyB,SAAUC,SAC/B,IAAI39B,KAAO29B,QAAQ5C,aACf/1B,OAAS,CACL2Q,GAAIgoB,QAAQV,QACZW,KAAM,IAAI12B,OAAO,IAAM2J,IAAIqI,QAAQlZ,KAAM,gBAAkB,KAC3D40B,QAAS/jB,IAAIqI,QAAQlZ,KAAM,oBAAsB,MACjD6c,KAAMhM,IAAIqI,QAAQlZ,KAAM,iBAAmB,SAC3C69B,UAAWhtB,IAAIqI,QAAQlZ,KAAM,wBAA0B,MAAQ,MAAQ,MAG/E29B,QAAQL,eACRK,QAAQtkB,QAAQ,qBAAsBrU,QACtC,OAAOA,QAIX84B,sBAAuB,SAAUrnB,UAAWsnB,SAAUC,WAClD,IAAIC,SAAWT,QAAQU,aAAaznB,UAAUyC,QAAQ,sBAAuBzC,UAAUskB,aAAciD,WACrGR,QAAQW,eAAeF,SAAUF,UACjC,OAAOP,QAAQY,eAAeH,WAGlCI,oBAAqB,SAAU5nB,UAAWsC,IAAKglB,UAC3C,IAAI//B,EAAI,EAAGiC,EAAI8Y,IAAI5a,OAAQ0H,IAE3BA,IAAM4Q,UAAU6nB,kBAEhB,MAAOtgC,EAAIiC,GAAK8Y,IAAI/a,KAAM+/B,WAAaA,SAAShlB,IAAI/a,IAAI42B,QAAS,CAC7Dne,UAAUgB,aAAasmB,SAAShlB,IAAI/a,IAAIugC,QAAS14B,KACjD7H,IAIJ,MAAOiC,EAAIjC,GAAK+a,IAAI9Y,EAAI,KAAM89B,WAAaA,SAAShlB,IAAI9Y,EAAI,IAAI20B,QAAS,CACrE30B,IAIJ,KAAOjC,EAAIiC,EAAGjC,IAAK,CACf,GAAI+a,IAAI/a,KAAM+/B,SAAU,CACpB,GAAIA,SAAShlB,IAAI/a,IAAI42B,QAAS,CAC1B,GAAImJ,SAAShlB,IAAI/a,IAAI42B,QAAQ4J,0BAA4BxgC,EAAI,EAAI6S,IAAIC,QAAQiI,IAAI/a,EAAI,IAAM,MAAO,CAC9FyY,UAAUgB,aAAasmB,SAAShlB,IAAI/a,IAAI42B,QAAS52B,EAAI,EAAI6S,IAAIC,QAAQiI,IAAI/a,EAAI,IAAIygC,mBAAqBhoB,UAAU6nB,wBAGjH,CACH7nB,UAAUgB,aAAasmB,SAAShlB,IAAI/a,IAAIugC,QAAS1tB,IAAIC,QAAQiI,IAAI/a,EAAI,IAAIygC,sBAMrF,MAAOx+B,EAAI8Y,IAAI5a,OAAQ,CACnBsY,UAAU/S,YAAYq6B,SAAShlB,IAAI9Y,IAAIs+B,SACvCt+B,MAKRm+B,eAAgB,SAAUH,UACtB,IAAIS,OAAS,GACT/oB,GAEJ,IAAKA,MAAMsoB,SAASF,SAAU,CAC1B,GAAIE,SAASF,SAAS/3B,eAAe2P,IAAK,CACtC+oB,OAAO5/B,KAAK,CAAC6W,GAAIA,GAAIvL,OAAQ6zB,SAASF,SAASpoB,OAKvD+oB,OAAO7hB,KAAK2gB,QAAQmB,iBAAiBzX,KAAK,KAAM+W,SAASW,aACzD,OAAOF,OAAO3gC,IAAI,SAAS4/B,SAAW,OAAOA,QAAQhoB,MAIzDgpB,iBAAkB,SAAUC,WAAYr6B,EAAG+B,GACvC,IAAItI,EAAGiC,EAAGvC,EAEV,IAAKM,EAAI,EAAGiC,EAAI2+B,WAAWzgC,OAAQH,EAAIiC,EAAGjC,IAAK,CAC3CN,EAAI6G,EAAE6F,OAAOpM,GAAKsI,EAAE8D,OAAOpM,IAAM,EAAKuG,EAAE6F,OAAOpM,GAAKsI,EAAE8D,OAAOpM,GAAK,EAAI,EAEtE,GAAIN,IAAM,EAAG,CACT,OAAOA,GAAKkhC,WAAW5gC,GAAG6gC,IAAM,GAAK,IAK7C,OAAO,GAIXX,aAAc,SAAUl5B,OAAQhF,KAAMg+B,WAClC,IAAIC,SAAWj5B,OAAO64B,UAEtB,IAAKI,SAAU,CACXA,SAAWT,QAAQsB,eAAe95B,OAAQhF,KAAMg+B,WAEhD,GAAIh5B,OAAO64B,YAAc,MAAO,CAC5B74B,OAAO64B,UAAYI,cAGpB,CACH,IAAK,IAAItoB,MAAMsoB,SAASF,SAAU,CAC9B,GAAIE,SAASF,SAAS/3B,eAAe2P,MAAQA,MAAMqoB,UAAU/yB,SAAW4F,IAAIC,QAAQ6E,KAAM,QAC/EsoB,SAASF,SAASpoB,MAMrC,OAAOsoB,UAIXa,eAAgB,SAAU95B,OAAQhF,KAAMg+B,WACpC,IAAIC,SAAW,CACXW,WAAY55B,OAAO6X,KAAKzV,OAAOlD,MAAM,YAAYnG,IAAIy/B,QAAQuB,iBAAiB7X,KAAK,KAAMliB,OAAO2Q,KAChGooB,SAAU,IAGd,IAAIlmB,SAAW,GAEfhH,IAAIiF,YAAY9V,MAAM4K,QAAQ,SAASkN,OACnC,KAAMA,MAAMnC,MAAMqoB,UAAU/yB,QAAU6M,MAAMnC,MAAMqoB,UAAUgB,QAAS,CACjEnnB,SAASC,MAAMnC,IAAM,CACjB4oB,QAASzmB,UAKrB0lB,QAAQW,eAAeF,SAAUpmB,UAEjC,OAAOomB,UAIXE,eAAgB,SAAUF,SAAUF,UAChC,IAAK,IAAIpoB,MAAMooB,SAAU,CACrB,GAAIA,SAAS/3B,eAAe2P,IAAK,CAC7BsoB,SAASF,SAASpoB,IAAM6nB,QAAQyB,iBAAiBlB,SAASpoB,IAAI4oB,QAASN,SAASW,eAM5FK,iBAAkB,SAAUj/B,KAAM4+B,YAC9B,OAAOA,WAAW7gC,IAAI,SAAUmhC,OAC5B,OAAOA,MAAMC,UAAUn/B,SAK/B++B,iBAAkB,SAAUppB,GAAIipB,YAC5B,IAAIz8B,EAAIy8B,WAAWz7B,MAAM,oDACrB0S,IAAKupB,KAAMpuB,KAAM6tB,IAErB,IAAK18B,EAAG,CACJ,MAAM,IAAIR,MAAM,4BAA8Bi9B,YAIlD/oB,IAAM1T,EAAE,GACRi9B,KAAOj9B,EAAE,GACT6O,KAAO7O,EAAE,GACT08B,IAAM18B,EAAE,GAER,GAAI0T,IAAI1S,MAAM,oBAAqB,CAC/B,MAAM,IAAIhG,UAAU,yDAA2DwY,IAInFE,IAAMA,IAAIxU,OAAO,GACjBw9B,IAAMA,IAAM,WAAW57B,KAAK47B,KAAO,KAEnC,GAAIO,KAAM,CACN,MAAO,CAACD,UAAW3B,QAAQ6B,kBAAkBxpB,IAAKupB,MAAOP,IAAKA,UAE3D,GAAI7tB,KAAM,CACb,MAAO,CAACmuB,UAAW3B,QAAQ8B,kBAAkBzpB,IAAK7E,MAAO6tB,IAAKA,SAE3D,CACH,MAAO,CAACM,UAAW3B,QAAQ+B,kBAAkB1pB,KAAMgpB,IAAKA,OAKhEQ,kBAAmB,SAAUxpB,IAAKupB,MAC9B,OAAO,SAAUp/B,MACbA,KAAOA,KAAK0V,uBAAuBG,KACnC,OAAO7V,KAAK7B,OAAS6B,KAAK,GAAGoZ,aAAagmB,OAAS,KAAO,OAIlEE,kBAAmB,SAAUzpB,IAAK7E,MAC9B,OAAO,SAAUhR,MACbA,KAAOA,KAAK0V,uBAAuBG,KACnC,OAAO7V,KAAK7B,OAAS0S,IAAIqI,QAAQlZ,KAAK,GAAIgR,KAAM,MAAQ,OAIhEuuB,kBAAmB,SAAU1pB,KACzB,OAAO,SAAU7V,MACbA,KAAOA,KAAK0V,uBAAuBG,KACnC,OAAO7V,KAAK7B,OAAS6B,KAAK,GAAGsX,YAAc,QAKvD9X,SAAS4F,SAASo4B,QAAS,0BAE5B,CACC3sB,IAAK;ACrOTrR,SAASiF,OAAO,cAAe,SAAU+4B,QAASf,QAAS5rB,IAAK1H,OAAQ9K,WAEpE,IAAImhC,eAAiBhgC,SAASkG,OAAO,gBAAiB,WAClD85B,eAAez5B,MAAMxG,KAAKtD,MAE1BA,KAAKkO,EAAE4zB,SAAW,GAClB9hC,KAAKkO,EAAEs1B,eAAiB,KACxBxjC,KAAKkO,EAAEu1B,aAAejD,QAAQE,UAE/B,CACCgD,WAAY,SAAUhqB,IAClB,IAAK1Z,KAAKkO,EAAE4zB,SAASpoB,IAAK,CACtB1Z,KAAKkO,EAAE4zB,SAASpoB,IAAM,IAAI8mB,QAAQ9mB,GAAI1Z,KAAKkO,EAAEu1B,cAIjD,OAAOzjC,KAAKkO,EAAE4zB,SAASpoB,KAI3BiqB,UAAW,SAAU5/B,MACjB,cAAeA,OAAS,SAAWA,KAAOA,KAAK2V,MAAO1Z,KAAKkO,EAAE4zB,UAIjE1T,MAAO,WACHpuB,KAAK0c,QAAQ,gBACb1c,KAAK4jC,kBAAkB5jC,KAAKkO,EAAE4zB,SAAUtB,QAAQI,eAChD5gC,KAAK4jC,kBAAkB5jC,KAAKkO,EAAE4zB,SAAUtB,QAAQK,YAGpDgD,iBAAkB,SAAU9/B,MACxB,IAAI6V,IAAMhF,IAAIqI,QAAQlZ,KAAM,kBAC5B,OAAO6V,IAAMhF,IAAIjF,KAAKiK,KAAO,IAIjCkqB,eAAgB,SAAUhC,SAAUiC,eAChC/jC,KAAKgkC,8BAEL,IAAIjC,UAAY,CACZ/yB,OAAQ,GACR+zB,OAAQ,GACRllB,IAAK,GACLpF,WAAY,IAGhBzY,KAAKikC,iBAAiBF,cAAehC,WACrC/hC,KAAKkkC,gBAAgBpC,SAAUC,WAC/B/hC,KAAKmkC,wBAAwBpC,WAE7B,OAAOA,WAIXqC,aAAc,SAAUrC,WACpB,IAAId,SAAW/zB,OAAOW,UAAU,GAAIk0B,UAAU/yB,OAAQ+yB,UAAUgB,QAEhE/iC,KAAK4jC,kBAAkB3C,SAAUT,QAAQM,kBACzC9gC,KAAK4jC,kBAAkB3C,SAAUT,QAAQO,cACzC/gC,KAAK4jC,kBAAkB3C,SAAUT,QAAQE,UAEzC1gC,KAAK0c,QAAQ,gBAAiBqlB,WAE9B/hC,KAAKqkC,aAAatC,UAAU/yB,QAC5BhP,KAAKskC,aAAavC,UAAUgB,QAC5B/iC,KAAKukC,UAAUxC,UAAUlkB,IAAKkkB,UAAUtpB,YACxCzY,KAAKwkC,cAAczC,UAAUtpB,WAAYvL,OAAOW,UAAU,GAAIk0B,UAAUgB,OAAQhB,UAAUlkB,MAE1F7d,KAAK0c,QAAQ,eAAgBqlB,WAE7B,OAAO/hC,KAAKykC,6BAA6BzkC,KAAKkO,EAAE4zB,SAAUtB,QAAQI,eAC7D/+B,KAAK,WACF7B,KAAK4jC,kBAAkB5jC,KAAKkO,EAAE4zB,SAAUtB,QAAQK,YAElD5V,KAAKjrB,QAGf0kC,mBAAoB,SAAS3gC,KAAMg+B,WAC/B,IAAIroB,GAAIgoB,QACJI,SAAWC,UAAYA,UAAU/yB,OAAS,GAE9C,IAAK0K,MAAM1Z,KAAKkO,EAAE4zB,SAAU,CACxB,GAAI9hC,KAAKkO,EAAE4zB,SAAS/3B,eAAe2P,OAASA,MAAMooB,UAAW,CACzDJ,QAAU1hC,KAAKkO,EAAE4zB,SAASpoB,IAAIolB,aAE9B,GAAI4C,UAAY39B,MAAQ6Q,IAAItI,SAASvI,KAAM29B,SAAU,CACjDI,SAASpoB,IAAM,CACXif,QAAS+I,QACTiD,aAAc,QAM9B,IAAK5C,UAAW,CACZ/hC,KAAK4jC,kBAAkB9B,SAAUtB,QAAQM,kBACzC9gC,KAAK4jC,kBAAkB9B,SAAUtB,QAAQO,cACzC/gC,KAAK4jC,kBAAkB9B,SAAUtB,QAAQE,YAIjDuD,iBAAkB,SAASF,cAAehC,WACtCgC,cAAcp1B,QAAQ,SAAS5K,MAC3Bg+B,UAAU/yB,OAAOjL,KAAK2V,IAAM,CACxBif,QAAS50B,MAGb/D,KAAK0kC,mBAAmB3gC,KAAMg+B,YAEhC9W,KAAKjrB,QAGXkkC,gBAAiB,SAASpC,SAAUC,WAChC,IAAIroB,GAAI3V,KAAMgF,OAEd,IAAK2Q,MAAMooB,SAAU,CACjB,GAAIA,SAAS/3B,eAAe2P,IAAK,CAC7B3V,KAAO6Q,IAAIC,QAAQ6E,IAEnB,GAAI3V,KAAM,CACN/D,KAAK0kC,mBAAmB3gC,KAAMg+B,WAE9B,GAAIroB,MAAMqoB,UAAU/yB,SAAWjG,OAAS/I,KAAK4kC,iBAAiBlrB,GAAIooB,SAASpoB,MAAO,CAC9EqoB,UAAUlkB,IAAInE,IAAM3Q,WAEjB,CACHg5B,UAAUgB,OAAOrpB,IAAM1Z,KAAK6kC,eAAe9gC,KAAM+9B,SAASpoB,WAG3D,GAAI3Q,OAAS/I,KAAK4kC,iBAAiBlrB,GAAIooB,SAASpoB,KAAM,CACzDqoB,UAAUlkB,IAAInE,IAAM3Q,WAOpCo7B,wBAAyB,SAASpC,WAC9B,IAAIroB,GAAI3W,KAAM+hC,IAAK/7B,OAEnB,IAAKhG,OAAQ,CAACggC,OAAQ,EAAGllB,IAAK,GAAI,CAC9B,IAAKnE,MAAMqoB,UAAUh/B,MAAO,CACxB,GAAIg/B,UAAUh/B,MAAMgH,eAAe2P,MAAQorB,IAAM/C,UAAUh/B,MAAM2W,IAAIc,WAAY,CAC7EzR,OAAS/I,KAAK+kC,2BAA2BD,KAEzC,GAAI/7B,OAAO6X,OAAS,WAAa7X,OAAO6X,OAAS,SAAU,CACvDmhB,UAAUtpB,WAAWqsB,OAAS/C,UAAUtpB,WAAWqsB,KAAO,IAC1D/C,UAAUtpB,WAAWqsB,KAAKprB,IAAMqoB,UAAUh/B,MAAM2W,QAE7C,CACHqoB,UAAUh/B,MAAM2W,IAAIsrB,OAASj8B,OAAO6X,QAOpD,IAAKkkB,OAAO/C,UAAUtpB,WAAY,CAC9B,GAAIspB,UAAUtpB,WAAW1O,eAAe+6B,KAAM,CAC1C/C,UAAUtpB,WAAWqsB,KAAOvD,QAAQM,sBAAsB7hC,KAAK0jC,WAAWoB,KAAM/C,UAAUtpB,WAAWqsB,KAAM/C,cAMvH8C,eAAgB,SAAS9gC,KAAMu+B,SAC3B,MAAO,CACH3J,QAAS50B,KACTu+B,QAASf,QAAQC,aAAaz9B,KAAK0yB,QAAS6L,SAC5C9nB,UAAW5F,IAAIuF,SAASpW,KAAK8D,WAAY,4BAA8B9D,KAAK8D,WAAW6R,GAAK,OAIpGkrB,iBAAkB,SAASlrB,GAAI4oB,SAC3B,IAAIv5B,OAAS/I,KAAKilC,gCAAgCvrB,IAC9C3V,KAEJ,IAAKgF,OAAQ,CACT,OAAO,KAGXhF,KAAOw9B,QAAQC,aAAaz4B,OAAO4vB,QAAS2J,SAC5Cv+B,KAAK2V,GAAKA,GAEV,MAAO,CACH4oB,QAASv+B,KACTyW,UAAWzR,OAAO2Q,KAI1BkqB,kBAAmB,SAAU9B,SAAUrB,OACnCzgC,KAAKkO,EAAEu1B,aAAehD,MAEtB,IAAK,IAAI/mB,MAAMooB,SAAU,CACrB,GAAIA,SAAS/3B,eAAe2P,IAAK,CAC7B1Z,KAAK0jC,WAAWhqB,IAAIwnB,SAAST,UAMzCgE,6BAA8B,SAAS3C,SAAUrB,OAC7C,OAAO,IAAIh8B,QAAQ,SAASuB,SACxBpG,OAAOslC,sBAAsB,WACzBllC,KAAK4jC,kBAAkB9B,SAAUrB,OACjCz6B,WAEFilB,KAAKjrB,QACTirB,KAAKjrB,QAGXqkC,aAAc,SAASvC,UACnB,IAAK,IAAIpoB,MAAMooB,SAAU,CACrB,GAAIA,SAAS/3B,eAAe2P,IAAK,CAC7B,IAAKooB,SAASpoB,IAAIirB,cAAgB7C,SAASpoB,IAAIif,QAAQ9wB,WAAY,CAC/Di6B,SAASpoB,IAAIif,QAAQ9wB,WAAWC,YAAYg6B,SAASpoB,IAAIif,SAG7D,GAAIjf,MAAM1Z,KAAKkO,EAAE4zB,SAAU,QAChB9hC,KAAKkO,EAAE4zB,SAASpoB,QAMvC4qB,aAAc,SAASxC,UACnB,IAAK,IAAIpoB,MAAMooB,SAAU,CACrB,GAAIA,SAAS/3B,eAAe2P,IAAK,CAC7B9E,IAAI8G,MAAMomB,SAASpoB,IAAIif,SACvB/jB,IAAIhG,OAAOkzB,SAASpoB,IAAIif,QAASzrB,OAAOG,WAAWy0B,SAASpoB,IAAI4oB,QAAQxoB,gBAMpFyqB,UAAW,SAASzC,SAAUrpB,YAC1B,IAAK,IAAIiB,MAAMooB,SAAU,CACrB,GAAIA,SAAS/3B,eAAe2P,OAASooB,SAASpoB,IAAIc,aAAa/B,YAAa,CACxE,GAAIqpB,SAASpoB,IAAIsrB,SAAW,UAAW,CACnCpwB,IAAIkH,QAAQgmB,SAASpoB,IAAIc,UAAWsnB,SAASpoB,IAAI4oB,aAE9C,CACH1tB,IAAIhG,OAAOkzB,SAASpoB,IAAIc,UAAWsnB,SAASpoB,IAAI4oB,aAOhEkC,cAAe,SAAS/rB,WAAYqpB,UAChC,IAAK,IAAIgD,OAAOrsB,WAAY,CACxB,GAAIA,WAAW1O,eAAe+6B,KAAM,CAChCvD,QAAQa,oBAAoBpiC,KAAK0jC,WAAWoB,KAAKhG,aAAcrmB,WAAWqsB,KAAMhD,aAM5FqD,0BAA2B,WACvB,GAAInlC,KAAKkO,EAAEs1B,iBAAmB,KAAM,CAChCxjC,KAAKkO,EAAEs1B,eAAiB5uB,IAAI0E,eAAe,4BACtCxX,IAAI,SAAUiC,MACX,OAAOA,KAAK2V,KAIxB,OAAO1Z,KAAKkO,EAAEs1B,gBAIlBQ,4BAA6B,WACzBhkC,KAAKkO,EAAEs1B,eAAiB,MAI5BuB,2BAA4B,SAAUrrB,IAClC,IAAIc,UAAYxa,KAAK0jC,WAAWhqB,IAC5B3Q,OAASyR,UAAU8mB,cAAgB9mB,UAAUyC,QAAQ,sBAAwB,KAEjF,IAAKlU,QAAUA,OAAO64B,YAAc,MAAO,CACvC,OAAOL,QAAQE,wBAAwBjnB,eACpC,CACH,OAAOzR,SAIfk8B,gCAAiC,SAAUvrB,IACvC,IAAI0rB,MAAQplC,KAAKmlC,4BACbpjC,EAAGiC,EAAG+E,OAEV,IAAKhH,EAAI,EAAGiC,EAAIohC,MAAMljC,OAAQH,EAAIiC,EAAGjC,IAAK,CACtCgH,OAAS/I,KAAK+kC,2BAA2BK,MAAMrjC,IAE/C,GAAIgH,OAAO44B,KAAK36B,KAAK0S,IAAK,CACtB,OAAO3Q,QAKf,GAAInJ,OAAOu0B,QAAS,CAChBA,QAAQhH,MAAM,oBAAsBzT,GAAK,qBAG7C,OAAO,QAIfnW,SAAS4F,SAASo6B,eAAgB,mBAEnC,CACChC,QAAS,oCACT3sB,IAAK,YACL1H,OAAQ;ACzTZ3J,SAASiF,OAAO,cAAe,WAE3B,IAAI68B,aAAe9hC,SAASkG,OAAO,SAAS67B,KAAMC,gBAC9CvlC,KAAKkO,EAAI,CACLo3B,KAAMA,KACNC,eAAgBA,gBAGpBvlC,KAAKkO,EAAEo3B,KAAKnkB,GAAG,sBAAuBnhB,KAAKwlC,iBAAiBva,KAAKjrB,QAClE,CACCwlC,iBAAkB,SAAS7vB,KACvB,IAAIlV,KAAO,CACPsjC,cAAe,WAAYpuB,IAAIlV,KAAK+Y,QAC9B7D,IAAIlV,KAAK+Y,QAAQxK,QAAU,GAC1B2G,IAAIlV,KAAK+Y,QAAQmf,QAAU34B,KAAKkO,EAAEq3B,eAAe1B,iBAAiBluB,IAAIlV,KAAK+Y,QAAQmf,SAAW,IAGzGhjB,IAAIlV,KAAKglC,YAAYtkB,GAAG,gBAAiBnhB,KAAK0lC,gBAAgBza,KAAKjrB,KAAMS,QAG7EilC,gBAAiB,SAASjlC,KAAMkV,KAC5B,IAAI8d,QAAU9d,IAAIlV,KAAKwxB,SAAS0B,aAC5BoO,UAEJ,GAAItO,QAAQqO,UAAYrhC,KAAKsjC,cAAc7hC,OAAQ,CAC/C6/B,UAAY/hC,KAAKkO,EAAEq3B,eAAezB,eAAerQ,QAAQqO,UAAY,GAAIrhC,KAAKsjC,eAC9EpuB,IAAI8L,QAAQzhB,KAAK2lC,gBAAgBhwB,IAAIxL,OAAQ43B,cAIrD4D,gBAAiB,SAAUF,YAAa1D,WACpC,OAAOt9B,QAAQ1D,UAAUc,KAAK7B,KAAK4lC,kBAAkB3a,KAAKjrB,KAAMylC,YAAa1D,aAGjF6D,kBAAmB,SAAUH,YAAa1D,WACtC,OAAO0D,YAAY/oB,QAAQ,iBAAkB,CAAEqlB,UAAWA,YACrDlgC,KAAK,WACF7B,KAAKkO,EAAEq3B,eAAenB,aAAarC,YACrC9W,KAAKjrB,UAInBuD,SAAS4F,SAASk8B,aAAc;AC1CpC9hC,SAASiF,OAAO,cAAe,SAAS0E,QAEpC,IAAI24B,UAAYtiC,SAASkG,OAAO,SAAS67B,KAAMQ,KAAM/Y,SACjD/sB,KAAKkO,EAAI,CACLo3B,KAAMA,KACNQ,KAAMA,KACN/Y,QAAS7f,OAAOW,UAAU,GAAIg4B,UAAU5U,SAAUlE,UAGtD/sB,KAAKkO,EAAEo3B,KAAKnkB,GAAG,qBAAsBnhB,KAAK+lC,kBAAkB9a,KAAKjrB,OACjEA,KAAKkO,EAAEo3B,KAAKnkB,GAAG,sBAAuBnhB,KAAKwlC,iBAAiBva,KAAKjrB,QAClE,CACCgK,OAAQ,CACJinB,SAAU,CACN+U,mBAAoB,QAI5BD,kBAAmB,SAAUpwB,KACzB,IAAK3V,KAAKkO,EAAE43B,KAAKxR,gBAAgB3e,IAAIlV,KAAK6T,OAAStU,KAAKkO,EAAE43B,KAAKzR,SAAS1e,IAAIlV,KAAK6T,IAAKqB,IAAIlV,KAAK+Y,QAAQ4O,OAAQzS,IAAIlV,KAAK+Y,QAAQ/Y,MAAO,CACnIkV,IAAI6L,mBAIZgkB,iBAAkB,SAAS7vB,KACvB,IAAIlV,KAAO,CACPi0B,QAAS10B,KAAKkO,EAAE43B,KAAKtR,cAAc7e,IAAIlV,KAAKglC,YAAYvT,SAAUvc,IAAIlV,KAAK+Y,QAAQ4O,OAAQzS,IAAIlV,KAAK+Y,QAAQ/Y,OAGhHkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,WAAYnhB,KAAKimC,UAAUhb,KAAKjrB,KAAMS,OAC9DkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,QAASnhB,KAAKkmC,OAAOjb,KAAKjrB,KAAMS,QAG5DwlC,UAAW,SAASxlC,KAAMkV,KACtBA,IAAI8L,QAAQhd,QAAQ1D,UAAUc,KAAK7B,KAAKmmC,YAAYlb,KAAKjrB,KAAM2V,IAAIxL,OAAQ1J,SAG/E0lC,YAAa,SAAUV,YAAahlC,MAChC,OAAOglC,YAAY/oB,QAAQ,eAAgB,CAAEgY,QAASj0B,KAAKi0B,UACtD7yB,KAAK7B,KAAKkO,EAAE43B,KAAKvR,SAAStJ,KAAKjrB,KAAKkO,EAAE43B,KAAMrlC,KAAKi0B,UACjD7yB,KAAK7B,KAAK0lC,gBAAgBza,KAAKjrB,KAAMylC,YAAahlC,QAG3DylC,OAAQ,SAASzlC,MACbA,KAAKi0B,QAAQ/tB,SAGjB++B,gBAAiB,SAAUD,YAAahlC,KAAMwxB,UAC1C,OAAOxtB,QAAQ1D,UAAUc,KAAK7B,KAAKomC,kBAAkBnb,KAAKjrB,KAAMylC,YAAahlC,KAAMwxB,YAGvFmU,kBAAmB,SAASX,YAAahlC,KAAMwxB,UAC3C,OAAOwT,YAAY/oB,QAAQ,gBAAiB,CAAEuV,SAAUA,WACnDpwB,KAAK,WACF,IAAI4xB,QAAUxB,SAAS0B,aAEvB,GAAIF,QAAQ4S,QAAS,CACjBZ,YAAYhT,OAAOgB,QAAQnf,KAG/B,GAAI,aAAcmf,QAAS,CACvB,KAAMzzB,KAAKkO,EAAE6e,QAAQiZ,mBAAqBvS,QAAQ6S,YAAc,MAAQ7S,QAAQ6S,YAActmC,KAAKkO,EAAE43B,KAAKxR,gBAAgBb,QAAQ8S,UAAW,CACzId,YAAYhT,OAAOgB,QAAQ8S,UAC3B9lC,KAAKi0B,QAAU10B,KAAKkO,EAAE43B,KAAKtR,cAAcf,QAAQ8S,UACjD,OAAOvmC,KAAKmmC,YAAYV,YAAahlC,UAElC,CACHqD,SAASO,SAASW,KAAOyuB,QAAQ8S,SACjC,OAAO,IAAI9hC,QAAQ,mBAEpB,CACH,OAAOhE,KAAKi0B,UAElBzJ,KAAKjrB,UAInBuD,SAAS4F,SAAS08B,UAAW,cAE9B,CACC34B,OAAQ;AChFZ3J,SAASiF,OAAO,cAAe,SAAS0E,OAAQ0H,IAAKzE,KAEjD,IAAIq2B,aAAejjC,SAASkG,OAAO,SAAS67B,KAAMlhC,QAAS2oB,SACvD/sB,KAAKkO,EAAI,CACLo3B,KAAMA,KACNlhC,QAASA,QACT2oB,QAAS7f,OAAOW,UAAU,GAAI24B,aAAavV,SAAUlE,UAGzD/sB,KAAKkO,EAAEo3B,KAAKnkB,GAAG,sBAAuBnhB,KAAKwlC,iBAAiBva,KAAKjrB,QAClE,CACCgK,OAAQ,CACJinB,SAAU,CACNwV,iBAAkB,QAI1BjB,iBAAkB,SAAU7vB,KACxB,GAAIA,IAAIlV,KAAK+Y,QAAQktB,YAAa,CAC9B/wB,IAAIlV,KAAKglC,YAAYkB,wBAClB,GAAI,YAAahxB,IAAIlV,KAAK+Y,QAAS,CACtC7D,IAAIlV,KAAKglC,YAAYmB,kBAAkBjxB,IAAIlV,KAAK+Y,QAAQpV,cACrD,GAAIuR,IAAIlV,KAAK+Y,QAAQmf,QAAS,CACjChjB,IAAIlV,KAAKglC,YAAYmB,kBAAkBhyB,IAAIqI,QAAQtH,IAAIlV,KAAK+Y,QAAQmf,QAAS,WAAY34B,KAAKkO,EAAE6e,QAAQ0Z,uBACrG,CACH9wB,IAAIlV,KAAKglC,YAAYmB,mBAAmB5mC,KAAKkO,EAAE6e,QAAQ0Z,kBAG3D,IAAIhmC,KAAO,CACPomC,MAAO/iC,SAAS+iC,OAGpBlxB,IAAIlV,KAAKglC,YAAYtkB,GAAG,WAAYnhB,KAAKimC,UAAUhb,KAAKjrB,KAAMS,OAC9DkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,gBAAiBnhB,KAAK0lC,gBAAgBza,KAAKjrB,KAAMS,QAG7EwlC,UAAW,SAAUxlC,KAAMkV,KACvBA,IAAIxL,OAAOtI,KAAK7B,KAAK8mC,WAAW7b,KAAKjrB,KAAM2V,IAAIxL,OAAQ1J,MAAO,eAGlEilC,gBAAiB,SAAUjlC,KAAMkV,KAC7B,IAAI8d,QAAU9d,IAAIlV,KAAKwxB,SAAS0B,aAEhC,GAAIF,QAAQoT,MAAO,CACfpmC,KAAKomC,MAAQpT,QAAQoT,QAI7BC,WAAY,SAAUrB,YAAahlC,MAC/B,GAAIglC,YAAYvT,SAAS1gB,cAAgBrB,IAAIiD,cAAc5B,aAAei0B,YAAYsB,eAAgB,CAClGtB,YAAYmB,kBAAkB,YAC3B,GAAInB,YAAYuB,iBAAkB,CACrCvmC,KAAK6B,MAAQ,GAEb,IAAKmjC,YAAY/oB,QAAQ,eAAgBjc,MAAMwgB,qBAAsB,CACjEjhB,KAAKkO,EAAE9J,QAAQvB,KAAK4iC,YAAYvT,SAASrf,aAAcpS,KAAKomC,MAAOpmC,KAAK6B,QAIhF,GAAI7B,KAAKomC,MAAO,CACZ/iC,SAAS+iC,MAAQpmC,KAAKomC,UAKlCtjC,SAAS4F,SAASq9B,aAAc,iBAEjC,CACCt5B,OAAQ,eACR0H,IAAK,YACLzE,IAAK;ACtET5M,SAASiF,OAAO,cAAe,SAAUoM,IAAK1H,QAE1C,IAAI7I,SAAWzE,OAAOwE,QAAQC,UAAYzE,OAAOyE,SAEjD,IAAI4iC,QAAU1jC,SAASkG,OAAO,gBAAiB,WAC3Cw9B,QAAQn9B,MAAMxG,KAAKtD,MACnBA,KAAKkO,EAAE5L,MAAQ,KACfsS,IAAIyH,YAAYzc,OAAQ,WAAYI,KAAKknC,aAAajc,KAAKjrB,QAC5D,CACCmW,KAAM,WACF,GAAIvW,OAAOwE,QAAQ9B,OAAS1C,OAAOwE,QAAQ9B,MAAM6kC,QAAS,CACtDnnC,KAAKkO,EAAE5L,MAAQ1C,OAAOwE,QAAQ9B,MAAM7B,SACjC,CACHT,KAAKkO,EAAE5L,MAAQ,GACftC,KAAK+iC,WAIblgC,KAAM,SAAUyR,IAAKuyB,MAAOpmC,MACxBT,KAAK8mC,WAAWxyB,IAAKuyB,MAAOpmC,KAAM,QAGtC0G,QAAS,SAAUmN,IAAKuyB,MAAOpmC,MAC3BT,KAAK8mC,WAAWxyB,IAAKuyB,MAAOpmC,KAAM,OAGtCsiC,OAAQ,SAAUtiC,MACdyM,OAAOW,UAAU7N,KAAKkO,EAAE5L,MAAO7B,MAC/Bb,OAAOwE,QAAQgjC,aAAa,CAACD,QAAS,KAAM1mC,KAAMT,KAAKkO,EAAE5L,OAAQwB,SAAS+iC,MAAOxiC,SAASW,OAG9FqiC,SAAU,WACN,OAAOrnC,KAAKkO,EAAE5L,OAGlBwkC,WAAY,SAAUxyB,IAAKuyB,MAAOpmC,KAAM0G,SACpC1G,KAAOA,MAAQ,GACfT,KAAK0c,QAAQ,mBAAoBjc,MAEjCT,KAAKkO,EAAE5L,MAAQ7B,KAEf,GAAI0G,QAAS,CACTvH,OAAOwE,QAAQgjC,aAAa,CAACD,QAAS,KAAM1mC,KAAMA,MAAOomC,OAAS/iC,SAAS+iC,MAAOvyB,SAC/E,CACH1U,OAAOwE,QAAQkjC,UAAU,CAACH,QAAS,KAAM1mC,KAAMA,MAAOomC,OAAS/iC,SAAS+iC,MAAOvyB,KAGnFuyB,QAAU/iC,SAAS+iC,MAAQA,OAE3B7mC,KAAK0c,QAAQ,YAAa,CACtBmqB,MAAOA,MACPvyB,IAAKA,IACL7T,KAAMA,KACN0G,QAASA,WAIjB+/B,aAAc,SAAUvxB,KACpB,IAAKA,IAAIrT,QAAUqT,IAAIrT,MAAM6kC,QAAS,CAClC,OAGJnnC,KAAKkO,EAAE5L,MAAQqT,IAAIrT,MAAM7B,KAEzBT,KAAK0c,QAAQ,WAAY,CACrBmqB,MAAO/iC,SAAS+iC,MAChBvyB,IAAKjQ,SAASW,KACdvE,KAAMkV,IAAIrT,MAAM7B,UAK5B8C,SAAS4F,SAAS89B,QAAS,YAE5B,CACCryB,IAAK,YACL1H,OAAQ;AC5EZ3J,SAASiF,OAAO,cAAe,SAAUoM,IAAK1H,OAAQ8Q,eAAgB5b,WAElE,IAAImlC,gBAAkBhkC,SAASkG,OAAO,gBAAiB,SAAS67B,KAAMvY,SAClEwa,gBAAgBz9B,MAAMxG,KAAKtD,MAE3BA,KAAKkO,EAAEo3B,KAAOA,KACdtlC,KAAKkO,EAAE6e,QAAU7f,OAAOW,UAAU,GAAI05B,gBAAgBtW,SAAUlE,SAEhE/sB,KAAKkO,EAAEo3B,KAAKnkB,GAAG,sBAAuBnhB,KAAKwlC,iBAAiBva,KAAKjrB,QAClE,CACCgK,OAAQ,CACJinB,SAAU,CACNuW,gBAAiB,4BAIzBhC,iBAAkB,SAAS7vB,KACvB,IAAIlV,KAAO,CACP0d,SAAUne,KAAKynC,sBAAsB9xB,IAAIlV,KAAK+Y,SAC9CuqB,cAAe/jC,KAAK0nC,kBAAkB/xB,IAAIlV,KAAK+Y,UAGnD7D,IAAIlV,KAAKglC,YAAYtkB,GAAG,WAAYnhB,KAAKimC,UAAUhb,KAAKjrB,KAAMS,OAC9DkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,QAASnhB,KAAKkmC,OAAOjb,KAAKjrB,KAAMS,OACxDkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,iBAAkBnhB,KAAK2nC,gBAAgB1c,KAAKjrB,KAAMS,QAG9EwlC,UAAW,SAASxlC,KAAMkV,KACtBA,IAAIxL,OAAOgX,GAAG,QAASnhB,KAAKw+B,aAAavT,KAAKjrB,KAAMS,OACpDkV,IAAIxL,OAAOtI,KAAK7B,KAAK4nC,cAAc3c,KAAKjrB,KAAMS,KAAM,OAAQT,KAAK4nC,cAAc3c,KAAKjrB,KAAMS,KAAM,OAEhG,GAAIA,KAAK0d,SAASjc,QAAUzB,KAAKsjC,cAAc7hC,OAAQ,CACnD0S,IAAI0I,SAAS7c,KAAKsjC,cAAe,yBACjCtjC,KAAKonC,cAAgB7nC,KAAK8nC,eAAernC,MACzCkV,IAAI8L,QAAQhhB,KAAKonC,iBAIzB3B,OAAQ,SAASzlC,MACb,GAAIA,KAAK0d,SAASjc,QAAUzB,KAAKsjC,cAAc7hC,OAAQ,CACnDlC,KAAK4nC,cAAcnnC,KAAM,QAIjCknC,gBAAiB,SAASlnC,KAAMkV,KAC5B,IAAIosB,UAAYpsB,IAAIlV,KAAKshC,UACrBroB,GAEJ,IAAKA,MAAMqoB,UAAUlkB,IAAK,CACtB,GAAIkkB,UAAUlkB,IAAI9T,eAAe2P,IAAK,CAClC9E,IAAI0I,SAASykB,UAAUlkB,IAAInE,IAAI4oB,QAAS,qBAAsB,4BAC9D7hC,KAAK0d,SAAStb,KAAKk/B,UAAUlkB,IAAInE,IAAI4oB,UAI7C,GAAI7hC,KAAKonC,cAAe,CACpBlyB,IAAI8L,QAAQhhB,KAAKonC,iBAIzBrJ,aAAc,SAAU/9B,KAAMkV,KAC1B,GAAIlV,KAAKonC,cAAe,CACpBlyB,IAAI8L,QAAQhhB,KAAKonC,iBAIzBC,eAAgB,SAAUrnC,MACtB,OAAOT,KAAK+nC,YAAYtnC,KAAK0d,SAASE,OAAO5d,KAAKsjC,eAAgB,QAGtE6D,cAAe,SAAUnnC,KAAMunC,UAC3B,IAAI7pB,SAAW6pB,SAAWvnC,KAAK0d,SAASE,OAAO5d,KAAKsjC,eAAiBtjC,KAAK0d,SAE1E,GAAIA,SAASjc,OAAQ,CACjB,OAAOlC,KAAK+nC,YAAY5pB,SAAU,MAC7Btc,KAAK,WACF+S,IAAI2I,YAAYY,SAAU,qBAAsB,6BAMhE4pB,YAAa,SAAS5pB,SAAU8pB,KAC5B,OAAOjqB,eAAeO,IAAIJ,SAAU,CAC5BN,IAAK,8CAAgDoqB,IACrDj5B,OAAQ,2BACR6P,MAAOopB,MAAQ,MAAQ,2BAA6B,MACrDA,MAAQ,OAGnBR,sBAAuB,SAASjuB,SAC5B,IAAII,IAAKsuB,QAET,GAAI1uB,QAAQ2uB,aAAe/lC,UAAW,CAClCwX,IAAMJ,QAAQ2uB,eACX,CACHvuB,IAAMJ,QAAQmf,QAAU/jB,IAAIqI,QAAQzD,QAAQmf,QAAS,cAAgBv2B,UAGzE,GAAIwX,MAAQxX,aAAeoX,QAAQmf,UAAY/jB,IAAIqI,QAAQzD,QAAQmf,QAAS,mBAAoB,CAC5F/e,IAAM5Z,KAAKkO,EAAE6e,QAAQya,gBAGzBU,QAAUtuB,IAAMhF,IAAIjF,KAAKiK,KAAO,GAEhC5Z,KAAK0c,QAAQ,6BAA8B,CACvCic,QAASnf,QAAQmf,QACjBuP,QAASA,UAGb,OAAOA,SAIXR,kBAAmB,SAAUluB,SACzB,IAAKA,QAAQmf,QAAS,CAClB,MAAO,GAGX,IAAI/e,IAAMhF,IAAIqI,QAAQzD,QAAQmf,QAAS,kBACnCuP,QAAUtuB,IAAMhF,IAAIjF,KAAKiK,KAAO,GAEpC,GAAIsuB,QAAQhmC,OAAQ,CAChBlC,KAAK0c,QAAQ,yBAA0B,CACnCwrB,QAASA,QAAQ19B,UAIzB,OAAO09B,WAKf3kC,SAAS4F,SAASo+B,gBAAiB,oBAEpC,CACC3yB,IAAK,YACL1H,OAAQ,eACR8Q,eAAgB;AC1IpBza,SAASiF,OAAO,cAAe,SAAUoM,IAAK1H,QAE1C,IAAI7I,SAAWzE,OAAOwE,QAAQC,UAAYzE,OAAOyE,SAEjD,IAAI+jC,YAAc7kC,SAASkG,OAAO,SAAU67B,KAAMlhC,QAAS2oB,SACvD/sB,KAAKkO,EAAI,CACLo3B,KAAMA,KACNlhC,QAASA,QACTikC,OAAQzzB,IAAIqB,OAAO,OACnB8W,QAAS7f,OAAOW,UAAU,GAAIu6B,YAAYnX,SAAUlE,UAGxD/sB,KAAKkO,EAAEm6B,OAAOrzB,MAAMszB,SAAW,WAC/BtoC,KAAKkO,EAAEm6B,OAAOrzB,MAAMuzB,KAAO,EAC3BvoC,KAAKkO,EAAEm6B,OAAOrzB,MAAMoiB,IAAM,EAC1Bp3B,KAAKkO,EAAEm6B,OAAOrzB,MAAMwzB,MAAQ,OAC5BxoC,KAAKkO,EAAEm6B,OAAOrzB,MAAMyzB,OAAS,MAC7BzoC,KAAKkO,EAAEm6B,OAAOrzB,MAAM0zB,UAAY,OAEhC,GAAI,sBAAuB9oC,OAAOwE,QAAS,CACvCxE,OAAOwE,QAAQukC,kBAAoB,SAEvC3oC,KAAKkO,EAAEo3B,KAAKnkB,GAAG,QAASnhB,KAAK4oC,MAAM3d,KAAKjrB,OACxCA,KAAKkO,EAAEo3B,KAAKnkB,GAAG,sBAAuBnhB,KAAKwlC,iBAAiBva,KAAKjrB,QAClE,CACCgK,OAAQ,CACJinB,SAAU,CACN9mB,OAAQ,KACR0+B,OAAQ,GACRC,WAAY,MACZlqB,SAAU,MAIlBgqB,MAAO,WACH,IAAItmC,MAAQtC,KAAKkO,EAAE9J,QAAQijC,WACvBl9B,OAEJ,GAAI,gBAAiB7H,MAAO,CACxB6H,OAAS7H,MAAMymC,YAAY5+B,YACxB,GAAI9F,SAASsM,KAAKzJ,MAAM,oBAAqB,CAChDiD,OAASnK,KAAKgpC,qBAAqB3kC,SAASsM,MAGhD,UAAWxG,SAAW,SAAU,CAC5BnK,KAAKipC,UAAU9+B,OAAQ,KAAM,QAIrCq7B,iBAAkB,SAAU7vB,KACxB,GAAIA,IAAIlV,KAAKglC,YAAYsB,eAAgB,CACrC,OAGJ,IAAImC,KAAOplC,SAASq4B,KAAKgN,wBACrB1oC,KAAO,CACH2oC,SAAUxpC,OAAOypC,YACjBl/B,OAAQnK,KAAKkO,EAAE6e,QAAQ5iB,QAG/BnK,KAAKkO,EAAEm6B,OAAOrzB,MAAMoiB,IAAM32B,KAAK2oC,SAAWF,KAAKI,OAAS,KACxDxlC,SAASq4B,KAAK10B,YAAYzH,KAAKkO,EAAEm6B,QACjC1yB,IAAIlV,KAAKglC,YAAYtkB,GAAG,WAAYnhB,KAAKimC,UAAUhb,KAAKjrB,KAAMS,OAC9DkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,cAAenhB,KAAKupC,SAASte,KAAKjrB,OAC1D2V,IAAIlV,KAAKglC,YAAYtkB,GAAG,gBAAiBnhB,KAAK0lC,gBAAgBza,KAAKjrB,KAAMS,OACzEkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,iBAAkBnhB,KAAK2nC,gBAAgB1c,KAAKjrB,KAAMS,OAC1EkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,eAAgBnhB,KAAKwpC,eAAeve,KAAKjrB,KAAMS,OAEvE,GAAI,aAAckV,IAAIlV,KAAK+Y,QAAS,CAChC/Y,KAAK0J,OAASwL,IAAIlV,KAAK+Y,QAAQiwB,cAC5B,GAAI9zB,IAAIlV,KAAK+Y,QAAQmf,SAAWhjB,IAAIlV,KAAK+Y,QAAQmf,QAAQvd,aAAa,kBAAmB,CAC5F3a,KAAK0J,OAASyK,IAAIqI,QAAQtH,IAAIlV,KAAK+Y,QAAQmf,QAAS,YAAa,QAIzEsN,UAAW,SAAUxlC,KAAMkV,KACvB,IAAIrT,MAAQtC,KAAKkO,EAAE9J,QAAQijC,WAE3B,GAAI5mC,KAAK0J,SAAW,MAAQwL,IAAIxL,OAAOu/B,iBAAmBpnC,OAAS,gBAAiBA,MAAO,CACvF7B,KAAK0J,OAAS7H,MAAMymC,YAAY5+B,OAGpCwL,IAAIxL,OAAOtI,KAAK7B,KAAK2pC,OAAO1e,KAAKjrB,KAAMS,KAAMkV,IAAIxL,QAASnK,KAAKupC,SAASte,KAAKjrB,QAGjFupC,SAAU,WACN,GAAIvpC,KAAKkO,EAAEm6B,OAAOxgC,WAAY,CAC1B7H,KAAKkO,EAAEm6B,OAAOxgC,WAAWC,YAAY9H,KAAKkO,EAAEm6B,QAC5CroC,KAAKkO,EAAEm6B,OAAOrzB,MAAMoiB,IAAM,IAIlCsO,gBAAiB,SAAUjlC,KAAMkV,KAC7B,IAAI8d,QAAU9d,IAAIlV,KAAKwxB,SAAS0B,aAEhC,GAAI,aAAcF,QAAS,CACvBhzB,KAAK0J,OAASspB,QAAQgW,WAI9B9B,gBAAiB,SAAUlnC,KAAMkV,KAC7B,GAAIlV,KAAK0J,SAAW,KAAM,CACtB1J,KAAK0J,OAAS,GAEd,IAAIuP,GAAI3Q,OAER,IAAK2Q,MAAM/D,IAAIlV,KAAKshC,UAAUlkB,IAAK,GAAIlI,IAAIlV,KAAKshC,UAAUlkB,IAAI9T,eAAe2P,IAAK,CAC9E3Q,OAAS4M,IAAIlV,KAAKshC,UAAUlkB,IAAInE,IAEhC,IAAK9E,IAAIqI,QAAQlU,OAAOyR,UAAW,iBAAkB,CACjD/Z,KAAK0J,OAAOtH,KAAK,IAAM6W,KAI/B,IAAKA,MAAM/D,IAAIlV,KAAKshC,UAAUgB,OAAQ,GAAIptB,IAAIlV,KAAKshC,UAAUgB,OAAOh5B,eAAe2P,IAAK,CACpF,IAAK9E,IAAIqI,QAAQvD,GAAI,iBAAkB,CACnCjZ,KAAK0J,OAAOtH,KAAK,IAAM6W,QAMvCiwB,OAAQ,SAAUlpC,KAAMglC,aACpB,GAAIzlC,KAAK4pC,eAAenpC,MAAO,CAC3BT,KAAKipC,UAAUxoC,KAAK0J,OAAQs7B,YAAYiE,qBACrC,CACH1pC,KAAKupC,aAIbN,UAAW,SAAUl6B,GAAI86B,MAAOC,SAC5B,IAAIC,GAAKnqC,OAAOypC,YACZW,GAAKj7B,GAAKg7B,GACVE,GAAKzlB,KAAKC,MACV+D,GAAKxoB,KAAKkO,EAAE6e,QAAQnO,SACpBtW,EAAItI,KAAKkO,EAAEm6B,OAEf,GAAIwB,OAAS7pC,KAAKkO,EAAE6e,QAAQ+b,YAAckB,GAAK,EAAG,CAC9C,GAAIF,QAAS,CACTlqC,OAAO6pC,SAAS,KAAM16B,QACnB,CACHnP,OAAOslC,sBAAsBgF,WAE9B,CACHlqC,KAAKupC,WAGT,SAASW,OACL,IAAIC,GAAK3lB,KAAKC,MAAQwlB,IAAMzhB,GACxBnE,EAEJ,GAAI8lB,GAAK,EAAG,CACRvqC,OAAOslC,sBAAsBgF,MAE7B7lB,EAAI0lB,GAAKC,KAAO,GAAM59B,KAAKg+B,IAAIh+B,KAAKi+B,GAAKF,GAAK,IAC9CvqC,OAAO6pC,SAAS,KAAMplB,QACnB,GAAI/b,EAAET,WAAY,CACrBS,EAAET,WAAWC,YAAYQ,GACzBA,EAAE0M,MAAMoiB,IAAM,KAK1BoS,eAAgB,SAAU/oC,KAAMkV,KAC5B3V,KAAKkO,EAAE9J,QAAQ2+B,OAAO,CAClBgG,YAAa,CACT5+B,OAAQ1J,KAAK2oC,YAIrBppC,KAAK4pC,eAAenpC,MAEpBkV,IAAIlV,KAAK6B,MAAMymC,YAAc,CACzB5+B,OAAQ1J,KAAK0J,SAIrB6+B,qBAAsB,SAAS7+B,QAC3B,GAAIA,SAAW,MAAO,CAClB,OAAO,WACJ,GAAIA,SAAW,KAAM,CACxB,OAAO,OACJ,UAAWA,SAAW,SAAU,CACnC,GAAIA,OAASyK,IAAIjF,KAAKxF,QAAQ,GAAI,CAC9B,OAAOA,OAAOg/B,wBAAwB/R,IAAMx3B,OAAOypC,YAAcrpC,KAAKkO,EAAE6e,QAAQ8b,WAC7E,CACH,OAAO,QAER,UAAW1+B,SAAW,SAAU,CACnC,OAAOA,WACJ,CACH,OAAO,QAIfy/B,eAAgB,SAASnpC,MACrB,GAAIA,KAAK0J,SAAW,MAAO,CACvB,OAAO,WACJ,GAAI1J,KAAK0J,SAAW,KAAM,CAC7B1J,KAAK0J,OAAS,OACX,UAAW1J,KAAK0J,SAAW,SAAU,CACxC,GAAI7I,MAAMmM,QAAQhN,KAAK0J,QAAS,CAC5B1J,KAAK0J,OAAS1J,KAAK0J,OAAOZ,KAAK,KAGnC9I,KAAK0J,OAASyK,IAAIjF,KAAKlP,KAAK0J,QAAQrI,IAAI,SAAUiC,MAC9C,OAAOA,KAAKolC,wBAAwB/R,MAGxC32B,KAAK0J,OAAS1J,KAAK0J,OAAOjI,OACpBkK,KAAKC,IAAInD,MAAM,KAAMzI,KAAK0J,QAAUvK,OAAOypC,YAAcrpC,KAAKkO,EAAE6e,QAAQ8b,OACxE,EAGV,OAAO,QAIftlC,SAAS4F,SAASi/B,YAAa,gBAEhC,CACCxzB,IAAK,YACL1H,OAAQ;AC9NZ3J,SAASiF,OAAO,cAAe,SAAS2H,KAEpC,IAAIm6B,YAAc/mC,SAASkG,OAAO,gBAAiB,SAAU6K,KACzDg2B,YAAYxgC,MAAMxG,KAAKtD,MAEvBA,KAAKkO,EAAEoG,IAAMnE,IAAI7B,KAAKgG,KACtBtU,KAAKkO,EAAE9J,QAAU,KACjBpE,KAAKkO,EAAEw4B,YAAc,MACrB1mC,KAAKkO,EAAEq8B,WAAa,MAEpBvqC,KAAKkO,EAAE1J,QAAU,IAAIC,QAAQ,SAASuB,QAAS7E,QAC3CnB,KAAKkO,EAAElI,QAAUA,QACjBhG,KAAKkO,EAAE/M,OAASA,QAClB8pB,KAAKjrB,QACR,CACCgK,OAAQ,CACJwgC,eAAgB,SAAUl2B,IAAK8e,QAC3B,IAAI/wB,KAAO,IAAIioC,YAAYh2B,KAC3BjS,KAAK6L,EAAE/M,OAAOiyB,QACd,OAAO/wB,OAIf6vB,OAAQ,WACJ,OAAOlyB,KAAKkO,EAAEoG,KAGlBme,OAAQ,SAASne,KACbtU,KAAKkO,EAAEoG,IAAMnE,IAAI7B,KAAKgG,KACtB,OAAOtU,MAGXgnC,eAAgB,WACZ,OAAOhnC,KAAKkO,EAAE9J,SAGlBwiC,kBAAmB,SAAS5lC,OACxBhB,KAAKkO,EAAE9J,QAAUpD,MACjB,OAAOhB,MAGX0pC,cAAe,WACX,OAAO1pC,KAAKkO,EAAEw4B,aAGlBC,iBAAkB,WACd3mC,KAAKkO,EAAEw4B,YAAc,KACrB1mC,KAAKkO,EAAE9J,QAAU,OAGrB2iC,aAAc,WACV,OAAO/mC,KAAKkO,EAAEq8B,YAGlBE,gBAAiB,SAASzpC,OACtBhB,KAAKkO,EAAEq8B,WAAavpC,MACpB,OAAOhB,MAGXu0B,SAAU,WACNv0B,KAAK0c,QAAQ,YACR7a,KAAK7B,KAAKkO,EAAElI,QAAShG,KAAKw+B,aAAavT,KAAKjrB,OAEjD,OAAOA,MAGX2G,MAAO,WACH3G,KAAKkO,EAAE/M,OAAO,CAAC4B,KAAM,UACrB/C,KAAK0c,QAAQ,SACb,OAAO1c,MAGX6B,KAAM,SAAS6f,YAAaC,YACxB,OAAO3hB,KAAKkO,EAAE1J,QAAQ3C,KAAK6f,YAAaC,aAG5C6c,aAAc,SAAUn5B,KACpBrF,KAAK0c,QAAQ,SACR7a,KAAK,WACF7B,KAAKkO,EAAE/M,OAAOkE,MAChB4lB,KAAKjrB,UAInBuD,SAAS4F,SAASmhC,YAAa,gBAEhC,CACCn6B,IAAK;ACvFT5M,SAASiF,OAAO,cAAe,WAE3B,IAAIkiC,SAAWnnC,SAASkG,OAAO,SAAS67B,KAAM3gC,OAC1C3E,KAAKkO,EAAI,CACLo3B,KAAMA,KACN3gC,MAAOA,OAGX3E,KAAKkO,EAAEo3B,KAAKnkB,GAAG,sBAAuBnhB,KAAKwlC,iBAAiBva,KAAKjrB,QAClE,CACCwlC,iBAAkB,SAAU7vB,KACxB,IAAIlV,KAAO,CACPkE,MAAO,KACPgmC,QAAS,MAGbh1B,IAAIlV,KAAKglC,YAAYtkB,GAAG,gBAAiBnhB,KAAK0lC,gBAAgBza,KAAKjrB,KAAMS,OACzEkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,iBAAkBnhB,KAAK2nC,gBAAgB1c,KAAKjrB,KAAMS,QAG9EilC,gBAAiB,SAAUjlC,KAAMkV,KAC7B,GAAI,aAAcA,IAAIlV,KAAKwxB,SAAS0B,aAAc,CAC9C,OAGJ,IAAIpnB,EAAIoJ,IAAIlV,KAAKwxB,SAAS2B,UAAU,4BAA8Bje,IAAIlV,KAAKwxB,SAAS2B,UAAU,wCAA0C,GACpI1tB,EAAI,6CAA6Cf,KAAKoH,GAE1D,GAAIrG,EAAG,CACHzF,KAAKkE,MAAQuB,EAAE,OACZ,CACHzF,KAAKkE,MAAQ,QAIrBgjC,gBAAiB,SAAUlnC,KAAMkV,KAC7B3V,KAAK4qC,iBAAiBj1B,IAAIlV,KAAKshC,UAAWthC,KAAKkE,QAGnDimC,iBAAkB,SAAU7I,UAAWp9B,OACnC,IAAKA,MAAO,CACR,OAGJ,IAAI+U,GAEJ,IAAKA,MAAMqoB,UAAUlkB,IAAK,CACtB,GAAIkkB,UAAUlkB,IAAI9T,eAAe2P,IAAK,CAClC1Z,KAAK6qC,UAAU9I,UAAUlkB,IAAInE,IAAI4oB,QAAS39B,QAIlD,IAAK+U,MAAMqoB,UAAUgB,OAAQ,CACzB,GAAIhB,UAAUgB,OAAOh5B,eAAe2P,IAAK,CACrC1Z,KAAK6qC,UAAU9I,UAAUgB,OAAOrpB,IAAI4oB,QAAS39B,UAKzDkmC,UAAW,SAAU9mC,KAAMY,OACvB,IAAImmC,QAAU/mC,KAAK+C,qBAAqB,UACpC/E,EAEJ,IAAKA,EAAI,EAAGA,EAAI+oC,QAAQ5oC,OAAQH,IAAK,CACjC,GAAI+oC,QAAQ/jC,KAAKhF,GAAG4C,QAAUA,MAAO,CACjCmmC,QAAQ/jC,KAAKhF,GAAGsF,aAAa,QAASrH,KAAKkO,EAAEvJ,OAAS,SAMtEpB,SAAS4F,SAASuhC,SAAU;ACvEhCnnC,SAASiF,OAAO,cAAe,SAAU2H,KAErC,IAAI46B,sBAAwBxnC,SAASkG,OAAO,SAAUrF,SAClDpE,KAAKkO,EAAI,CACL9J,QAASA,SAGbpE,KAAKkO,EAAE9J,QAAQ+c,GAAG,qBAAsBnhB,KAAKknC,aAAajc,KAAKjrB,QAChE,CACCknC,aAAc,SAAUvxB,KACpB,UAAW/V,OAAOorC,KAAO,aAAer1B,IAAIlV,KAAK0G,QAAS,CACtDvH,OAAOorC,GAAG,MAAO,CACb1F,KAAMn1B,IAAI7B,KAAKqH,IAAIlV,KAAK6T,KAAK1B,QAAQ,MAAME,UAC3C+zB,MAAOlxB,IAAIlV,KAAKomC,QAGpBjnC,OAAOorC,GAAG,OAAQ,gBAK9BznC,SAAS4F,SAAS4hC,sBAAuB,0BAE1C,CACC56B,IAAK;ACxBT5M,SAASiF,OAAO,cAAe,SAAU8hC,YAAa11B,IAAK1H,OAAQiD,KAE/D,IAAI2jB,QAAUvwB,SAASkG,OAAO,gBAAiB,SAAU87B,eAAgBnhC,QAAS2oB,SAC9E+G,QAAQhqB,MAAMxG,KAAKtD,MAEnBA,KAAKkO,EAAEq3B,eAAiBA,eACxBvlC,KAAKkO,EAAE9J,QAAUA,QACjBpE,KAAKkO,EAAE6e,QAAU7f,OAAOW,UAAU,GAAIimB,QAAQ7C,SAAUlE,SACxD/sB,KAAKkO,EAAEkgB,MAAQ,MACfpuB,KAAKkO,EAAE+8B,mBAAqB,KAC5BjrC,KAAKkO,EAAEg9B,WAAa/6B,IAAIiD,cAExBpT,KAAKkO,EAAE9J,QAAQ+c,GAAG,WAAYnhB,KAAKknC,aAAajc,KAAKjrB,OACrD4U,IAAIyH,YAAYvY,SAAU,QAAS9D,KAAKmrC,iBAAiBlgB,KAAKjrB,OAE9DA,KAAKorC,eAEN,CACCphC,OAAQ,CACJinB,SAAU,CACNoa,eAAgB,MAChBC,iBAAkB,QAI1BnlC,KAAM,SAAUmO,IAAK8T,OAAQ3nB,KAAM+Y,SAC/B,IACIA,UAAYA,QAAU,IACtBA,QAAQ4O,OAASA,OACjB5O,QAAQ/Y,KAAOA,KAEf,IAAIkV,IAAM3V,KAAK0c,QAAQ,qBAAsB,CACzCpI,IAAKA,IACLkF,QAASA,UAGb,GAAI7D,IAAIsL,qBAAsB,CAC1B,OAAOjhB,KAAKurC,2BAA2Bj3B,IAAK,CAACvR,KAAM,UAGvDyW,QAAQjE,OAASiE,QAAQjE,MAAMiM,iBAE/B,OAAO7L,IAAI9T,KAAK,WACZ,GAAI8T,IAAIsL,qBAAsB,CAC1B,OAAOjhB,KAAKurC,2BAA2Bj3B,IAAK,CAACvR,KAAM,cAChD,CACH,OAAO/C,KAAKwrC,mBAAmBl3B,IAAKkF,WAE1CyR,KAAKjrB,OACT,MAAOM,GACL,OAAON,KAAKurC,2BAA2Bj3B,IAAKhU,KAIpDmrC,SAAU,SAAUC,KAAM/1B,KACtB,OAAO3V,KAAKmG,KAAKulC,KAAK1mC,KAAM,MAAO,KAAM,CACrCuQ,MAAOI,IACPgjB,QAAS+S,QAIjBhI,WAAY,SAAUhqB,IAClB,OAAO1Z,KAAKkO,EAAEq3B,eAAe7B,WAAWhqB,KAG5CiqB,UAAW,SAAU5/B,MACjB,OAAO/D,KAAKkO,EAAEq3B,eAAe5B,UAAU5/B,OAG3CmjC,aAAc,SAAUvxB,KACpB,IAAK3V,KAAK2rC,UAAU,KAAM3rC,KAAKkO,EAAEg9B,YAAa,CAC1C,OAGJ,IAAI52B,IAAMnE,IAAI7B,KAAKqH,IAAIlV,KAAK6T,KAC5BtU,KAAKkO,EAAEg9B,WAAa52B,IAEpBtU,KAAKmG,KAAKmO,IAAK,MAAO,KAAM,CAACoyB,YAAa,OACrC7kC,KAAK,KAAM,WACRiC,SAASO,SAASW,KAAOsP,IAAIzB,gBAIzCu4B,YAAa,WACT,GAAItnC,SAAS0C,aAAe,UAAW,CACnCoO,IAAIyH,YAAYvY,SAAU,mBAAoB9D,KAAKorC,YAAYngB,KAAKjrB,OACpE,OAGJ,IAAKA,KAAKkO,EAAEkgB,MAAO,CACfpuB,KAAKkO,EAAEkgB,MAAQ,KAEf3pB,QAAQ1D,UAAUc,KAAK,WACnB7B,KAAKkO,EAAE9J,QAAQ+R,OACfnW,KAAKkO,EAAEq3B,eAAenX,QACtBpuB,KAAK0c,QAAQ,UACfuO,KAAKjrB,SAIfmrC,iBAAkB,SAASx1B,KACvB,GAAIA,IAAI2L,kBAAoB3L,IAAIc,SAAWd,IAAIgB,UAAYhB,IAAIe,QAAUf,IAAIiB,SAAWjB,IAAIkB,OAAS,EAAG,CACpG,OAGJ,IAAI60B,KAAO92B,IAAIqF,QAAQtE,IAAIxL,OAAQ,KAEnC,IAAKuhC,OAAS1rC,KAAK4rC,WAAWF,QAAU1rC,KAAK2rC,UAAUD,KAAK1mC,MAAO,CAC/D,OAGJhF,KAAKyrC,SAASC,KAAM/1B,MAGxB61B,mBAAoB,SAASl3B,IAAKkF,SAC9B,IAAIisB,YAAc,IAAI6E,YAAYh2B,KAElCtU,KAAKwlC,iBAAiBC,YAAajsB,SAEnCxZ,KAAK0c,QAAQ,sBAAuB,CAChC+oB,YAAaA,YACbjsB,QAASA,UAGb,OAAOxZ,KAAK6rC,qBAAqBpG,cAGrC8F,2BAA4B,SAAUj3B,IAAK8e,QACvC,IAAIqS,YAAc6E,YAAYE,eAAel2B,IAAK8e,QAClD,OAAOqS,YAAY5jC,KAAK,KAAM7B,KAAKw+B,aAAavT,KAAKjrB,KAAMylC,eAG/DD,iBAAkB,SAAUC,YAAajsB,SACrC,GAAI,eAAgBA,QAAS,CACzBisB,YAAYgF,gBAAgBjxB,QAAQ+wB,iBACjC,GAAI/wB,QAAQmf,QAAS,CACxB8M,YAAYgF,gBAAgB71B,IAAIqI,QAAQzD,QAAQmf,QAAS,aAAc,UAI/EkT,qBAAsB,SAASpG,aAC3B,IAAKA,YAAYsB,eAAgB,CAC7B,GAAI/mC,KAAKkO,EAAE+8B,mBAAoB,CAC3BjrC,KAAKkO,EAAE+8B,mBAAmBtkC,QAG9B3G,KAAKkO,EAAE+8B,mBAAqBxF,YAGhC,OAAOA,YAAYlR,WAAW1yB,KAC1B7B,KAAK8rC,eAAe7gB,KAAKjrB,KAAMylC,aAC/BzlC,KAAKw+B,aAAavT,KAAKjrB,KAAMylC,eAIrCkG,UAAW,SAASr3B,IAAKyJ,SACrBzJ,IAAMA,IAAMnE,IAAI7B,KAAKgG,KAAOnE,IAAIiD,cAChC2K,QAAUA,QAAU5N,IAAI7B,KAAKyP,SAAW5N,IAAIiD,cAC5C,OAAOkB,IAAInI,QAAQ4R,WAAa5N,IAAIkD,KAAKQ,MAG7C+3B,WAAY,SAAUF,MAClB,OAAQA,KAAKtwB,aAAa,WAAaswB,KAAKtwB,aAAa,SAAWxG,IAAIqI,QAAQyuB,KAAM,QAAS1rC,KAAKkO,EAAE6e,QAAQse,iBAGlHS,eAAgB,SAASrG,aACrB,IAAKA,YAAYsB,eAAgB,CAC7B/mC,KAAKkO,EAAE+8B,mBAAqB,KAGhC,GAAIxF,YAAYuB,iBAAkB,CAC9BhnC,KAAKkO,EAAEg9B,WAAazF,YAAYvT,WAIxCsM,aAAc,SAAUiH,YAAapgC,KACjC,GAAIogC,cAAgBzlC,KAAKkO,EAAE+8B,mBAAoB,CAC3CjrC,KAAKkO,EAAE+8B,mBAAqB,KAGhC,IAAKxF,YAAYsB,gBAAkB/mC,KAAKkO,EAAE6e,QAAQue,iBAAkB,CAChEtrC,KAAK0c,QAAQ,QAASrX,SAKlC9B,SAAS4F,SAAS2qB,QAAS,YAE5B,CACClf,IAAK,YACL1H,OAAQ,eACRiD,IAAK;AC/LT5M,SAASiF,OAAO,iBAAkB,SAAUoM,KAExC,IAAI2sB,QAAU,CACVwK,eAAgB,SAAUhoC,MACtB,EAAG,CACC,GAAI6Q,IAAI+F,SAAS5W,KAAM,WAAY,SAAW,QAAS,OAAO,KAC9DA,KAAOA,KAAKioC,mBAEPjoC,MAAQA,OAASD,SAASoY,iBAAmBnY,OAASD,SAASq4B,MAExE,OAAO,OAIX8P,QAAS,SAAUloC,MACf,IAAImlC,KAAOnlC,KAAKolC,wBAEhB,MAAO,CACHZ,KAAMW,KAAKX,KACXnR,IAAK8R,KAAK9R,IACV8U,MAAOhD,KAAKgD,MACZ5C,OAAQJ,KAAKI,OACbd,MAAO,UAAWU,KAAOA,KAAKV,MAASU,KAAKgD,MAAQhD,KAAKX,KACzDE,OAAQ,WAAYS,KAAOA,KAAKT,OAAUS,KAAKI,OAASJ,KAAK9R,MAIrE+U,oBAAqB,SAAUpoC,KAAMoG,OAAQiiC,UAAWC,YACpDz3B,IAAI0I,SAASvZ,KAAM,yBACnB6Q,IAAI6F,SAAS1W,KAAM,CACfukC,SAAU,WACVgE,QAAS,IAGb,IAAIC,MAAQhL,QAAQwK,eAAe5hC,QAC/BqiC,SAAWjL,QAAQ0K,QAAQloC,MAC3B0oC,WAAalL,QAAQ0K,QAAQ9hC,QAC7B6K,MAAQ,GACR03B,MAAQL,WAAWM,kBACnB9C,MAAQ,MACRvB,SAEJ,GAAIiE,MAAO,CACPv3B,MAAMszB,SAAW,QAIrB,GAAI8D,UAAW,CACX,IAAIlmC,EAAIkmC,UAAUllC,MAAM,mBAExB,IAAKmlC,WAAWhY,SAASnuB,EAAE,IAAK,CAC5B,MAAM,IAAIR,MAAM,cAAgBQ,EAAE,GAAK,qBAG3C2jC,QAAU3jC,EAAE,GACZwmC,MAAQxmC,EAAE,GAAK,CAACA,EAAE,IAAM,CAACA,EAAE,IAAImY,OAAOquB,OAG1C,IAAK,IAAI3qC,EAAI,EAAGA,EAAI2qC,MAAMxqC,OAAQH,IAAK,CACnCqqC,UAAYM,MAAM3qC,GAElB,GAAIumC,SAAW+D,WAAWD,WAAW9oC,KAAK+oC,WAAYI,WAAYD,SAAU3C,OAAQ,CAChF,OAIR,GAAIvB,SAAU,CACVtzB,MAAMuzB,KAAOD,SAASC,KACtBvzB,MAAMoiB,IAAMkR,SAASlR,IAErB,IAAKmV,MAAO,CACRv3B,MAAMuzB,MAAQ3oC,OAAO+e,YACrB3J,MAAMoiB,KAAOx3B,OAAOypC,YAGxBr0B,MAAMuzB,MAAQ,KACdvzB,MAAMoiB,KAAO,KACbpiB,MAAMs3B,QAAU,GAEhB13B,IAAI6F,SAAS1W,KAAMiR,OACnB,OAAOo3B,cAEJ,CACHx3B,IAAI2I,YAAYxZ,KAAM,yBACtB6Q,IAAI6F,SAAS1W,KAAM,CACfukC,SAAU,GACVgE,QAAS,KAGb,OAAO,QAKnB/oC,SAAS4F,SAASo4B,QAAS,YAE5B,CACC3sB,IAAK;ACjGTrR,SAASiF,OAAO,iBAAkB,SAAUoM,IAAK1H,OAAQ8Q,eAAgBujB,SAErE,IAAIqL,QAAUrpC,SAASkG,OAAO,gBAAiB,SAAUylB,QAASoT,QAASvV,SACvE6f,QAAQ9iC,MAAMxG,KAAKtD,MAEnBA,KAAK6sC,WAAa7sC,KAAK6sC,WAAW5hB,KAAKjrB,MAEvCA,KAAKkO,EAAEghB,QAAUA,QACjBlvB,KAAKkO,EAAE6e,QAAU7f,OAAOW,UAAU,GAAI++B,QAAQ3b,SAAUlE,SACxD/sB,KAAKkO,EAAEstB,QAAU,MAEjB,GAAIx7B,KAAKkO,EAAEghB,UAAY,KAAM,CACzBlvB,KAAKkO,EAAEnK,KAAOu+B,QACdtiC,KAAKkO,EAAEstB,QAAU,KACjBx7B,KAAK8sC,wBACL9sC,KAAK+sC,mBACL,OAGJ,IAAI5iC,OAASnK,KAAKgtC,aACdC,IAAM,MAEV,GAAI9iC,OAAQ,CACRnK,KAAKkO,EAAE6e,QAAQloB,UAAY,OAAS7E,KAAKkO,EAAE6e,QAAQloB,QAAU+P,IAAIqI,QAAQ9S,OAAQ,kBACjFnK,KAAKkO,EAAE6e,QAAQmgB,SAAW,OAASltC,KAAKkO,EAAE6e,QAAQmgB,OAASt4B,IAAIqI,QAAQ9S,OAAQ,iBAC/EnK,KAAKkO,EAAE6e,QAAQogB,OAAS,OAASntC,KAAKkO,EAAE6e,QAAQogB,KAAOv4B,IAAIqI,QAAQ9S,OAAQ,eAE3E,GAAInK,KAAKkO,EAAE6e,QAAQmgB,OAAQ,CACvBD,IAAM9iC,OAAOssB,QAAQvvB,MAAM,gBAAkB,KAAO,SAErD,CACHlH,KAAKkO,EAAE6e,QAAQmgB,OAAS,MAG5BltC,KAAKkO,EAAEnK,KAAO6Q,IAAIqB,OAAOg3B,IAAK,CAC1B1M,MAAS,6BAA+BvgC,KAAKkO,EAAE6e,QAAQhqB,KACvDqqC,qBAAsB,SAG1B,GAAIptC,KAAKkO,EAAE6e,QAAQloB,QAAS,CACxB+P,IAAI0I,SAAStd,KAAKkO,EAAEnK,KAAM/D,KAAKkO,EAAE6e,QAAQloB,QAAQsC,QAAQ,UAAWnH,KAAKkO,EAAE6e,QAAQhqB,OAGvF,GAAI/C,KAAKkO,EAAE6e,QAAQogB,KAAM,CACrBv4B,IAAI2F,KAAKva,KAAKkO,EAAEnK,KAAMu+B,aACnB,CACH1tB,IAAI0I,SAAStd,KAAKkO,EAAEnK,KAAM,sBAC1B/D,KAAKkO,EAAEnK,KAAKsX,YAAcinB,QAG9BtiC,KAAK8sC,yBACN,CACC9iC,OAAQ,CACJqjC,KAAM,SAAUtpC,MACZ,OAAO,IAAI6oC,QAAQ,KAAM7oC,OAE7BktB,SAAU,CACNluB,KAAM,OACNoH,OAAQ,KACRtF,QAAS,KACTqoC,OAAQ,KACRd,UAAW,KACXe,KAAM,KACNG,QAAS,OAIjBxO,WAAY,WACR,OAAO9+B,KAAKkO,EAAEnK,MAGlBwpC,KAAM,WACF,GAAIvtC,KAAKkO,EAAEstB,UAAY,MAAO,CAC1B,OAAO/2B,QAAQ1D,QAAQf,MAG3BA,KAAKkO,EAAEstB,QAAU,KAEjB,IAAIrxB,OAASnK,KAAKgtC,aAElB,GAAI7iC,OAAQ,CACR,GAAInK,KAAKkO,EAAE6e,QAAQmgB,OAAQ,CACvB/iC,OAAO1C,YAAYzH,KAAKkO,EAAEnK,MAC1B,OAAO/D,KAAKwtC,MAAM,cACf,CACHxtC,KAAKkO,EAAEghB,QAAQue,WAAWhmC,YAAYzH,KAAKkO,EAAEnK,MAE7C,IAAIqoC,UAAY7K,QAAQ4K,oBAAoBnsC,KAAKkO,EAAEnK,KAAMoG,OAAQnK,KAAKkO,EAAE6e,QAAQqf,UAAWpsC,KAAKkO,EAAEghB,QAAQwe,iBAE1G,GAAItB,UAAW,CACX,OAAOpsC,KAAKwtC,MAAMpB,aAK9BpsC,KAAKkO,EAAEghB,QAAQye,kBAAkBlmC,YAAYzH,KAAKkO,EAAEnK,MACpD,OAAO/D,KAAKwtC,MAAM,WAGtBI,KAAM,WACF,GAAI5tC,KAAKkO,EAAEstB,UAAY,KAAM,CACzB,OAAO/2B,QAAQ1D,QAAQf,MAG3BA,KAAKkO,EAAEstB,QAAU,KAEjB5mB,IAAI0I,SAAStd,KAAKkO,EAAEnK,KAAM,qBAC1B/D,KAAK0c,QAAQ,QAEb,OAAOsB,eAAeO,IAAIve,KAAKkO,EAAEnK,MAAMlC,KAAK,WACxC7B,KAAKkO,EAAEstB,QAAU,MACjBx7B,KAAKkO,EAAEnK,KAAK8D,WAAWC,YAAY9H,KAAKkO,EAAEnK,MAC1C6Q,IAAI2I,YAAYvd,KAAKkO,EAAEnK,KAAM,qBAC7B/D,KAAK0c,QAAQ,UACb,OAAO1c,MACTirB,KAAKjrB,QAGXstC,QAAS,WACL,OAAOttC,KAAK4tC,OAAO/rC,KAAK,WACpB7B,KAAKqhB,MACLrhB,KAAKkO,EAAEnK,KAAO/D,KAAKkO,EAAE6e,QAAU/sB,KAAKkO,EAAEghB,QAAU,MAClDjE,KAAKjrB,QAGXwtC,MAAO,SAAUpB,WACbx3B,IAAI4I,YAAYxd,KAAKkO,EAAEnK,KAAM,qCAAuCqoC,UAAW,MAC/EpsC,KAAK0c,QAAQ,QACb1c,KAAKohB,IAAI,SAAU,WAAaxM,IAAI4I,YAAYxd,KAAKkO,EAAEnK,KAAM,gBAAkBqoC,UAAW,SAE1F,OAAOpuB,eAAeO,IAAIve,KAAKkO,EAAEnK,KAAM,CAACiL,OAAQ,wBAAyB,MAAMnN,KAAK,WAChF7B,KAAKkO,EAAEstB,QAAU,KACjBx7B,KAAK0c,QAAQ,SACb1c,KAAK+sC,mBACL,OAAO/sC,MACTirB,KAAKjrB,QAGX8sC,sBAAuB,WACnB,GAAI9sC,KAAKkO,EAAE6e,QAAQugB,UAAY,MAAO,CAClC,UAAWttC,KAAKkO,EAAE6e,QAAQugB,UAAY,SAAU,CAC5CttC,KAAKkO,EAAE6e,QAAQugB,QAAUlhC,KAAKkS,IAAI,IAAMlS,KAAKa,MAAMjN,KAAKkO,EAAEnK,KAAKsX,YAAYpT,MAAM,OAAO/F,OAAS,UAK7G6qC,iBAAkB,WACd,GAAI/sC,KAAKkO,EAAE6e,QAAQugB,UAAY,MAAO,CAClC,OAGJ14B,IAAIyH,YAAYvY,SAAU,YAAa9D,KAAK6sC,YAC5Cj4B,IAAIyH,YAAYvY,SAAU,YAAa9D,KAAK6sC,YAC5Cj4B,IAAIyH,YAAYvY,SAAU,UAAW9D,KAAK6sC,YAC1Cj4B,IAAIyH,YAAYvY,SAAU,aAAc9D,KAAK6sC,aAGjDA,WAAY,WACRj4B,IAAI4H,eAAe1Y,SAAU,YAAa9D,KAAK6sC,YAC/Cj4B,IAAI4H,eAAe1Y,SAAU,YAAa9D,KAAK6sC,YAC/Cj4B,IAAI4H,eAAe1Y,SAAU,UAAW9D,KAAK6sC,YAC7Cj4B,IAAI4H,eAAe1Y,SAAU,aAAc9D,KAAK6sC,YAEhDjtC,OAAOgB,WAAWZ,KAAKstC,QAAQriB,KAAKjrB,MAAOA,KAAKkO,EAAE6e,QAAQugB,UAG9DN,WAAY,WACR,cAAchtC,KAAKkO,EAAE6e,QAAQ5iB,SAAW,SAAWyK,IAAIC,QAAQ7U,KAAKkO,EAAE6e,QAAQ5iB,QAAUnK,KAAKkO,EAAE6e,QAAQ5iB,UAI/G5G,SAAS4F,SAASyjC,QAAS,YAE5B,CACCh4B,IAAK,YACL1H,OAAQ,eACR8Q,eAAgB;AChLpBza,SAASiF,OAAO,iBAAkB,WAE9B,IAAIqlC,kBAAoBtqC,SAASkG,OAAO,SAAUo/B,OAAQiF,cACtD9tC,KAAKkO,EAAI,CACL26B,cAAeA,SAAW,SAAWA,OAAS,GAC9CiF,aAAcA,cAAgB,8BAGlC,UAAW9tC,KAAKkO,EAAE4/B,eAAiB,SAAU,CACzC9tC,KAAKkO,EAAE4/B,aAAe9tC,KAAKkO,EAAE4/B,aAAa7lC,MAAM,cAErD,CACCosB,SAAU,SAAU+X,WAChB,OAAOA,YAAc,SAAWA,YAAc,SAAWA,YAAc,UAAYA,YAAc,WAGrGO,gBAAiB,WACb,OAAO3sC,KAAKkO,EAAE4/B,cAGlBC,MAAO,SAAU5jC,OAAQpG,KAAM8lC,OAC3B,IAAI/uB,IAAM,CACNytB,KAAMp+B,OAAOo+B,MAAQp+B,OAAOq+B,MAAQzkC,KAAKykC,OAAS,EAClDpR,IAAKjtB,OAAOitB,IAAMrzB,KAAK0kC,QAG3B,GAAIoB,OAAS/uB,IAAIytB,KAAOvoC,KAAKkO,EAAE26B,QAAU/tB,IAAIytB,KAAOxkC,KAAKykC,MAAQ5oC,OAAOouC,WAAahuC,KAAKkO,EAAE26B,QAAU/tB,IAAIsc,IAAMp3B,KAAKkO,EAAE26B,QAAU/tB,IAAIsc,IAAMrzB,KAAK0kC,OAAS7oC,OAAOquC,YAAcjuC,KAAKkO,EAAE26B,OAAQ,CACzL,OAAO/tB,MAIfozB,MAAO,SAAS/jC,OAAQpG,KAAM8lC,OAC1B,IAAI/uB,IAAM,CACNytB,KAAMp+B,OAAOo+B,MAAQp+B,OAAOq+B,MAAQzkC,KAAKykC,OAAS,EAClDpR,IAAKjtB,OAAOm/B,QAGhB,GAAIO,OAAS/uB,IAAIytB,KAAOvoC,KAAKkO,EAAE26B,QAAU/tB,IAAIytB,KAAOxkC,KAAKykC,MAAQ5oC,OAAOouC,WAAahuC,KAAKkO,EAAE26B,QAAU/tB,IAAIsc,IAAMrzB,KAAK0kC,OAAS7oC,OAAOquC,YAAcjuC,KAAKkO,EAAE26B,QAAU/tB,IAAIsc,IAAMp3B,KAAKkO,EAAE26B,OAAQ,CACzL,OAAO/tB,MAIfqzB,OAAQ,SAAUhkC,OAAQpG,KAAM8lC,OAC5B,IAAI/uB,IAAM,CACNytB,KAAMp+B,OAAOo+B,KAAOxkC,KAAKykC,MACzBpR,IAAKjtB,OAAOitB,KAAOjtB,OAAOs+B,OAAS1kC,KAAK0kC,QAAU,GAGtD,GAAIoB,OAAS/uB,IAAIsc,IAAMp3B,KAAKkO,EAAE26B,QAAU/tB,IAAIsc,IAAMrzB,KAAK0kC,OAAS7oC,OAAOquC,YAAcjuC,KAAKkO,EAAE26B,QAAU/tB,IAAIytB,KAAOvoC,KAAKkO,EAAE26B,QAAU/tB,IAAIytB,KAAOxkC,KAAKykC,MAAQ5oC,OAAOouC,WAAahuC,KAAKkO,EAAE26B,OAAQ,CACzL,OAAO/tB,MAIfszB,QAAS,SAAUjkC,OAAQpG,KAAM8lC,OAC7B,IAAI/uB,IAAM,CACNytB,KAAMp+B,OAAO+hC,MACb9U,IAAKjtB,OAAOitB,KAAOjtB,OAAOs+B,OAAS1kC,KAAK0kC,QAAU,GAGtD,GAAIoB,OAAS/uB,IAAIsc,IAAMp3B,KAAKkO,EAAE26B,QAAU/tB,IAAIsc,IAAMrzB,KAAK0kC,OAAS7oC,OAAOquC,YAAcjuC,KAAKkO,EAAE26B,QAAU/tB,IAAIytB,KAAOxkC,KAAKykC,MAAQ5oC,OAAOouC,WAAahuC,KAAKkO,EAAE26B,QAAU/tB,IAAIytB,KAAOvoC,KAAKkO,EAAE26B,OAAQ,CACzL,OAAO/tB,QAOnBvX,SAAS4F,SAAS0kC,kBAAmB;ACnEzCtqC,SAASiF,OAAO,iBAAkB,SAAUokC,QAASh4B,IAAK1H,QAEtD,IAAI4mB,QAAUvwB,SAASkG,OAAO,SAAU4iC,WAAYtf,SAChD/sB,KAAKkO,EAAI,CACLm+B,WAAYA,WACZtf,QAAS7f,OAAOW,UAAU,GAAIimB,QAAQ7C,SAAUlE,SAChDshB,aAAcz5B,IAAIqB,OAAO,MAAO,CAACsqB,MAAS,gCAG9C,UAAWvgC,KAAKkO,EAAE6e,QAAQuhB,QAAU,SAAU,CAC1CtuC,KAAKkO,EAAE6e,QAAQuhB,MAAQ15B,IAAIC,QAAQ7U,KAAKkO,EAAE6e,QAAQuhB,YAC/C,IAAKtuC,KAAKkO,EAAE6e,QAAQuhB,MAAO,CAC9BtuC,KAAKkO,EAAE6e,QAAQuhB,MAAQxqC,SAASq4B,KAGpCn8B,KAAKkO,EAAE6e,QAAQuhB,MAAM7mC,YAAYzH,KAAKkO,EAAEmgC,cAExC,IAAKruC,KAAKkO,EAAE6e,QAAQloB,QAAS,CACzB7E,KAAKkO,EAAE6e,QAAQloB,QAAU+P,IAAIqI,QAAQjd,KAAKkO,EAAE6e,QAAQuhB,MAAO,iBAG/D1B,QAAQ3b,SAASpsB,QAAU7E,KAAKkO,EAAE6e,QAAQloB,QAE1C7E,KAAKuuC,iBACN,CACCvkC,OAAQ,CACJinB,SAAU,CACNqd,MAAO,KACPzpC,QAAS,OAIjBoR,OAAQ,SAAUqsB,QAASvV,SACvB,OAAO,IAAI6f,QAAQ5sC,KAAMsiC,QAASvV,UAGtClP,IAAK,SAAUykB,QAASv/B,KAAMoH,OAAQgjC,MAClC,IAAIpgB,QAEJ,GAAIhqB,aAAeA,OAAS,SAAU,CAClCgqB,QAAUhqB,SACP,CACHgqB,QAAU,CACNhqB,KAAMA,MAAQ,OACdoH,OAAQA,OACRgjC,KAAMA,MAId,OAAOntC,KAAKiW,OAAOqsB,QAASvV,SAASwgB,QAGzCI,gBAAiB,WACb,OAAO3tC,KAAKkO,EAAEmgC,cAGlBZ,SAAU,WACN,OAAOztC,KAAKkO,EAAE6e,QAAQuhB,OAG1BZ,cAAe,WACX,OAAO1tC,KAAKkO,EAAEm+B,YAGlBkC,cAAe,WACX35B,IAAI0E,eAAe,gBACd3K,QAAQ,SAAU5K,MACf,IAAK6Q,IAAIqI,QAAQlZ,KAAM,iBAAkB,CACrC6oC,QAAQS,KAAKtpC,QAEnBknB,KAAKjrB,UAInBuD,SAAS4F,SAAS2qB,QAAS,YAE5B,CACClf,IAAK,YACL1H,OAAQ,eACR8Q,eAAgB;AC/EpBza,SAASiF,OAAO,wBAAyB,SAASoM,IAAKoJ,eAAgB9Q,OAAQ4R,iBAE3E,IAAI0vB,OAASjrC,SAASkG,OAAO,gBAAiB,SAASL,KAAM2jB,SACzDyhB,OAAO1kC,MAAMxG,KAAKtD,MAElBA,KAAKkO,EAAE9E,KAAOA,KACdpJ,KAAKkO,EAAE6e,QAAU7f,OAAOW,UAAU,GAAI2gC,OAAOC,YAAYzuC,KAAKmI,aAAc4kB,SAE5E/sB,KAAKkO,EAAE5L,MAAQ,CACXk5B,QAAS,MACTkT,WAAY,MACZ3wB,QAAS,SACT4wB,WAAY,MACZnsC,KAAM,KACNgC,QAAS,KACToqC,OAAQ,MAGZ5uC,KAAKkO,EAAE2gC,eAAiB,KACxB7uC,KAAKkO,EAAE4gC,OAAS,KAChB9uC,KAAKkO,EAAE6gC,WAAa,KACpB/uC,KAAKkO,EAAE8gC,gBAAkB,KACzBhvC,KAAKkO,EAAE+gC,IAAM,oBAAoBjoC,KAAKkoC,UAAUC,WAEhDnvC,KAAKkO,EAAEkhC,KAAO,CACVC,OAASz6B,IAAI0F,eAAeta,KAAKkO,EAAE6e,QAAQuiB,UAAUD,QACrDE,QAAU36B,IAAI0F,eAAeta,KAAKkO,EAAE6e,QAAQuiB,UAAUC,SACtDjN,QAAU,KACVkN,QAAU,MAGdxvC,KAAKkO,EAAEkhC,KAAKC,OAAO5nC,YAAYzH,KAAKkO,EAAEkhC,KAAKG,SAE3C,GAAIvvC,KAAKkO,EAAE+gC,IAAK,CACZr6B,IAAI0I,SAAStd,KAAKkO,EAAEkhC,KAAKC,OAAQ,qBAGrC,GAAIrvC,KAAKkO,EAAE6e,QAAQloB,QAAS,CACxB+P,IAAI0I,SAAStd,KAAKkO,EAAEkhC,KAAKC,OAAQrvC,KAAKkO,EAAE6e,QAAQloB,SAGpD,GAAI7E,KAAKkO,EAAE6e,QAAQuV,QAAS,CACxBtiC,KAAKkO,EAAEkhC,KAAK9M,QAAUtiC,KAAKkO,EAAE6e,QAAQuV,QACrC1tB,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAK9M,QAAS,wBAAyB,MAC9DtiC,KAAKkO,EAAE6e,QAAQuV,QAAU,UAEtB,GAAItiC,KAAKkO,EAAE6e,QAAQnlB,KAAM,CAC5B5H,KAAKkO,EAAEkhC,KAAK9M,QAAU1tB,IAAI0F,eAAeta,KAAKkO,EAAE6e,QAAQuiB,UAAUhN,SAElE,IAAIA,QAAU1tB,IAAIqB,OAAO,KACzBqsB,QAAQjnB,YAAcrb,KAAKkO,EAAE6e,QAAQnlB,KACrC5H,KAAKkO,EAAEkhC,KAAK9M,QAAQ76B,YAAY66B,cAE7B,GAAItiC,KAAKkO,EAAE6e,QAAQxS,KAAM,CAC5Bva,KAAKkO,EAAEkhC,KAAK9M,QAAU1tB,IAAI0F,eAAeta,KAAKkO,EAAE6e,QAAQuiB,UAAUhN,SAClE1tB,IAAI2F,KAAKva,KAAKkO,EAAEkhC,KAAK9M,QAAStiC,KAAKkO,EAAE6e,QAAQxS,MAGjD,GAAIva,KAAKkO,EAAEkhC,KAAK9M,QAAS,CACrBtiC,KAAKkO,EAAEkhC,KAAKG,QAAQ9nC,YAAYzH,KAAKkO,EAAEkhC,KAAK9M,SAGhD,GAAItiC,KAAKkO,EAAE6e,QAAQyiB,QAAS,CACxB,GAAIxvC,KAAKkO,EAAE6e,QAAQyiB,mBAAmBC,YAAa,CAC/CzvC,KAAKkO,EAAEkhC,KAAKI,QAAUxvC,KAAKkO,EAAE6e,QAAQyiB,QACrC56B,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAKI,QAAS,wBAAyB,MAC9DxvC,KAAKkO,EAAE6e,QAAQyiB,QAAU,SACtB,CACHxvC,KAAKkO,EAAEkhC,KAAKI,QAAU56B,IAAI0F,eAAeta,KAAKkO,EAAE6e,QAAQuiB,UAAUE,SAClExvC,KAAK0vC,iBAGT1vC,KAAKkO,EAAEkhC,KAAKG,QAAQ9nC,YAAYzH,KAAKkO,EAAEkhC,KAAKI,SAGhD,IACI,IAAIG,OAAS7wB,gBAAgBxQ,KAAK,+BAC9BygC,WAAajwB,gBAAgBxQ,KAAK,mCAEtCtO,KAAKkO,EAAE4gC,OAASa,OAAOtwB,cACvBrf,KAAKkO,EAAE6gC,WAAaA,WAAW1vB,cACjC,MAAO/e,IAGT,GAAIN,KAAKkO,EAAE4gC,QAAU9uC,KAAKkO,EAAE6e,QAAQ+hB,OAAQ,CACxC9uC,KAAK4vC,WAAa5vC,KAAK4vC,WAAW3kB,KAAKjrB,MAEvC,IAAK,IAAIqJ,OAAOrJ,KAAKkO,EAAE6e,QAAQ+hB,OAAQ,CACnC,GAAI9uC,KAAKkO,EAAE6e,QAAQ+hB,OAAO/kC,eAAeV,KAAM,CAC3CrJ,KAAKkO,EAAE4gC,OAAOjxB,IAAIxU,IAAKrJ,KAAK4vC,cAKxC,GAAI5vC,KAAKkO,EAAE6gC,YAAc/uC,KAAKkO,EAAEkhC,KAAKI,QAAS,CAC1CxvC,KAAKkO,EAAE6gC,WAAWc,iBAAiB7vC,KAAKkO,EAAEkhC,KAAKI,QAAS,MAG5DxvC,KAAKmhB,GAAG,iBAAkBnhB,KAAK4tC,KAAK3iB,KAAKjrB,OACzCA,KAAKmhB,GAAG,OAAQnhB,KAAK8vC,oBAAoB7kB,KAAKjrB,OAC9CA,KAAKmhB,GAAG,OAAQnhB,KAAK+vC,uBAAuB9kB,KAAKjrB,OAEjD4U,IAAIyH,YAAYrc,KAAKkO,EAAEkhC,KAAKG,QAAS,QAASvvC,KAAKgwC,aAAa/kB,KAAKjrB,OACrEA,KAAKiwC,cAAgBjwC,KAAKiwC,cAAchlB,KAAKjrB,OAE9C,CACCgK,OAAQ,CACJinB,SAAU,CACNpsB,QAAS,KACTy9B,QAAS,KACT/nB,KAAM,KACN3S,KAAM,KACN4nC,QAAS,KACTV,OAAQ,CACJoB,OAAU,SAEdZ,UAAW,CACPD,OAAS,2CACTE,QAAU,0CACVjN,QAAU,4CACVkN,QAAU,4CACV34B,OAAS,sBAGjB43B,YAAa,SAAU1rC,MACnB,IAAIkuB,SAAW,GACXzjB,EAEJ,EAAG,CACC,GAAIzK,KAAKkuB,SAAU,CACf,IAAKzjB,KAAKzK,KAAKkuB,SAAU,CACrB,GAAIluB,KAAKkuB,SAASlnB,eAAeyD,KAAOyjB,SAASlnB,eAAeyD,GAAI,CAChEyjB,SAASzjB,GAAKzK,KAAKkuB,SAASzjB,aAIlCzK,KAAOA,KAAK+G,QAAU/G,OAASyrC,OAAO1kC,OAEhD,OAAOmnB,UAEXkf,YAAa,SAASpjB,SAClB7f,OAAOW,UAAU2gC,OAAOvd,SAAUlE,WAI1CnN,QAAS,WACL,OAAO5f,KAAKkO,EAAE9E,MAGlBgnC,UAAW,SAAS5tC,MAChB,OAAOxC,KAAKkO,EAAE5L,MAAMyb,UAAY,YAAc/d,KAAKkO,EAAE5L,MAAME,MACpDA,MAAQxC,KAAKkO,EAAE5L,MAAME,OAAS,WAGzC+qC,KAAM,WACF,OAAOvtC,KAAKqwC,UAAU,UAAW,SAAU7uC,MACvCxB,KAAKswC,iBACLtwC,KAAKuwC,YAAY,MAEjB37B,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAKC,OAAQ,UAAW,MAC/Cz6B,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAKC,OAAQ,OAAQ,OAE5CrxB,eAAeO,IAAIve,KAAKkO,EAAEkhC,KAAKG,SAC1B1tC,KAAKL,KAAKypB,KAAKjrB,KAAM,aAIlC4tC,KAAM,WACF,OAAO5tC,KAAKqwC,UAAU,SAAU,SAAU7uC,MACtCxB,KAAKwwC,mBACLxwC,KAAKuwC,YAAY,OAEjB37B,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAKC,OAAQ,UAAW,OAC/Cz6B,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAKC,OAAQ,OAAQ,OAE5CrxB,eAAeO,IAAIve,KAAKkO,EAAEkhC,KAAKG,SAC1B1tC,KAAKL,KAAKypB,KAAKjrB,KAAM,cAIlCywC,OAAQ,SAAUjuC,MACd,OAAOxC,KAAKkO,EAAE5L,MAAMyb,UAAY,SAAW/d,KAAKkO,EAAE5L,MAAME,MACjDA,MAAQxC,KAAKkO,EAAE5L,MAAME,OAAS,QAGzCkuC,QAAS,WACL,OAAO1wC,KAAKqwC,UAAU,OAAQ,SAAU7uC,MACpCxB,KAAKswC,iBACLtwC,KAAKuwC,YAAY,MAEjB37B,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAKC,OAAQ,UAAW,MAC/Cz6B,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAKC,OAAQ,OAAQ,MAE5CrxB,eAAeO,IAAIve,KAAKkO,EAAEkhC,KAAKG,SAC1B1tC,KAAKL,KAAKypB,KAAKjrB,KAAM,YAIlC8+B,WAAY,WACR,OAAO9+B,KAAKkO,EAAEkhC,KAAKC,QAGvBsB,WAAY,WACR,OAAO3wC,KAAKkO,EAAEkhC,KAAK9M,SAGvBsO,WAAY,WACR,OAAO5wC,KAAKkO,EAAEkhC,KAAKI,SAGvBqB,UAAW,WACP,OAAO7wC,KAAKkO,EAAE4gC,QAGlBgC,cAAe,WACX,OAAO9wC,KAAKkO,EAAE6gC,YAGlBpP,QAAS,WACL,GAAI3/B,KAAKkO,EAAE5L,MAAMosC,WAAY,CACzB,OAAO1uC,KAAKkO,EAAE5L,MAAMkC,SAAWC,QAAQ1D,QAAQ,MAGnDf,KAAKkO,EAAE5L,MAAMosC,WAAa,KAC1B1uC,KAAK0c,QAAQ,WAEb,GAAI1c,KAAKkO,EAAE5L,MAAMyb,UAAY,SAAU,CACnC,OAAO/d,KAAK4tC,OAAO/rC,KAAK7B,KAAK+wC,WAAW9lB,KAAKjrB,WAC1C,CACH,OAAOA,KAAK+wC,eAIpBA,WAAY,WACR,GAAI/wC,KAAKkO,EAAE5L,MAAMssC,OAAQ,CACrB5uC,KAAKkO,EAAE5L,MAAMssC,SAGjB5uC,KAAK0c,QAAQ,aAEb,GAAI1c,KAAKkO,EAAEkhC,KAAKC,OAAOxnC,WAAY,CAC/B7H,KAAKkO,EAAEkhC,KAAKC,OAAOxnC,WAAWC,YAAY9H,KAAKkO,EAAEkhC,KAAKC,QAG1DrvC,KAAKqhB,MAELrhB,KAAKkO,EAAE5L,MAAQ,KAEf,IAAK,IAAIkL,KAAKxN,KAAKkO,EAAEkhC,KAAM,GAAIpvC,KAAKkO,EAAEkhC,KAAKrlC,eAAeyD,GAAI,CAC1DxN,KAAKkO,EAAEkhC,KAAK5hC,GAAK,KAGrB,OAAO/I,QAAQ1D,QAAQ,OAG3BsvC,UAAW,SAAU/tC,MAAO6T,KAAMy4B,QAC9B,IAAK5uC,KAAKkO,EAAE5L,OAAStC,KAAKkO,EAAE5L,MAAMyb,UAAYzb,MAAO,CACjD,OAAOmC,QAAQ1D,eACZ,GAAIf,KAAKkO,EAAE5L,MAAME,OAASF,MAAO,CACpC,OAAOtC,KAAKkO,EAAE5L,MAAMkC,aACjB,GAAIxE,KAAKkO,EAAE5L,MAAMssC,OAAQ,CAC5B5uC,KAAKkO,EAAE5L,MAAMssC,SAGjB5uC,KAAKkO,EAAE5L,MAAME,KAAOF,MAEpB,OAAOtC,KAAKkO,EAAE5L,MAAMkC,QAAU,IAAIC,QAAQ,SAAUuB,SAChD,IAAIgrC,SAAW,KAEfhxC,KAAKkO,EAAE5L,MAAMssC,OAAS,WAClB,GAAIoC,WAAa,KAAM,CACnBA,SAAW,MACXhxC,KAAKkO,EAAE5L,MAAME,KAAO,KACpBxC,KAAKkO,EAAE5L,MAAMkC,QAAU,KACvBxE,KAAKkO,EAAE5L,MAAMssC,OAAS,KACtBA,QAAUA,OAAOtrC,KAAKtD,MACtBgG,YAENilB,KAAKjrB,MAEPmW,KAAK7S,KAAKtD,KAAM,SAAS2V,KACrB,GAAIq7B,WAAa,KAAM,CACnBA,SAAW,KACXhxC,KAAKkO,EAAE5L,MAAMyb,QAAUzb,MACvBtC,KAAKkO,EAAE5L,MAAME,KAAO,KACpBxC,KAAKkO,EAAE5L,MAAMkC,QAAU,KACvBxE,KAAKkO,EAAE5L,MAAMssC,OAAS,KACtBj5B,KAAO3V,KAAK0c,QAAQ/G,KACpB3P,YAENilB,KAAKjrB,QACTirB,KAAKjrB,QAGXuwC,YAAa,SAAUjuC,OACnB,GAAItC,KAAKkO,EAAE5L,MAAMk5B,UAAYl5B,MAAO,CAChCtC,KAAKkO,EAAE5L,MAAMk5B,QAAUl5B,MACvBtC,KAAK0c,QAAQpa,MAAQ,OAAS,UAItCwtC,oBAAqB,WACjB9vC,KAAKkO,EAAE8gC,gBAAkBlrC,SAASmtC,cAClCjxC,KAAKkO,EAAE8gC,iBAAmBhvC,KAAKkO,EAAE8gC,gBAAgB32B,MAAQrY,KAAKkO,EAAE8gC,gBAAgB32B,QAGpF03B,uBAAwB,WACpB/vC,KAAKkO,EAAE8gC,iBAAmBp6B,IAAItI,SAASxI,SAAU9D,KAAKkO,EAAE8gC,kBAAoBhvC,KAAKkO,EAAE8gC,gBAAgB52B,QACnGpY,KAAKkO,EAAE8gC,gBAAkB,MAG7BsB,eAAgB,WACZ,GAAItwC,KAAKkO,EAAE5L,MAAMqsC,WAAY,CACzB,OAGJ3uC,KAAKkO,EAAE5L,MAAMqsC,WAAa,KAE1B,GAAI3uC,KAAKkO,EAAE+gC,IAAK,CACZjvC,KAAKkO,EAAE2gC,eAAiBjvC,OAAOypC,YAC/BzpC,OAAO6pC,SAAS,EAAG,OAChB,CACHzpC,KAAKkO,EAAEygC,WAAa,CAChBpG,KAAM3oC,OAAO+e,YACbyY,IAAKx3B,OAAOypC,aAGhBz0B,IAAIyH,YAAYzc,OAAQ,SAAUI,KAAKiwC,iBAI/CO,iBAAkB,WACd,IAAKxwC,KAAKkO,EAAE5L,MAAMqsC,WAAY,CAC1B,OAGJ3uC,KAAKkO,EAAE5L,MAAMqsC,WAAa,MAE1B,GAAI3uC,KAAKkO,EAAE+gC,IAAK,CACZrvC,OAAO6pC,SAAS,EAAGzpC,KAAKkO,EAAE2gC,gBAC1B7uC,KAAKkO,EAAE2gC,eAAiB,SACrB,CACHj6B,IAAI4H,eAAe5c,OAAQ,SAAUI,KAAKiwC,eAC1CjwC,KAAKkO,EAAEygC,WAAa,OAI5Be,eAAgB,WACZ,IAAI1K,OAAQtF,IAAKxiB,IAEjB,IAAK8nB,UAAUhlC,KAAKkO,EAAE6e,QAAQyiB,QAAS,CACnC,GAAIxvC,KAAKkO,EAAE6e,QAAQyiB,QAAQzlC,eAAei7B,QAAS,CAC/CtF,IAAM9qB,IAAI0F,eAAeta,KAAKkO,EAAE6e,QAAQuiB,UAAUz4B,QAElDqG,IAAMld,KAAKkO,EAAE6e,QAAQyiB,QAAQxK,QAE7B,UAAW9nB,MAAQ,SAAU,CACzBA,IAAM,CAACg0B,MAAOh0B,IAAKna,KAAM,UAG7B6R,IAAIwI,QAAQsiB,IAAK,SAAUsF,QAC3BpwB,IAAI0I,SAASoiB,IAAK,uBAAwBxiB,IAAIna,MAAQma,IAAIna,OAAS,SAAW,wBAA0Bma,IAAIna,KAAO,IACnH28B,IAAIrkB,YAAc6B,IAAIg0B,MAEtBlxC,KAAKkO,EAAEkhC,KAAKI,QAAQ/nC,YAAYi4B,QAK5CsQ,aAAc,SAAUr6B,KACpB,IAAIqvB,OAASpwB,IAAIqI,QAAQtH,IAAIxL,OAAQ,UAErC,GAAI66B,OAAQ,CACRrvB,IAAI6L,iBAEJxhB,KAAK0c,QAAQ,SAAU,CACnBsoB,OAAQA,WAKpB4K,WAAY,SAAUvmC,IAAKsM,KACvB,GAAIA,IAAIxL,QAAUwL,IAAIxL,OAAOssB,SAAW9gB,IAAIxL,OAAOssB,QAAQvvB,MAAM,sCAAwC0N,IAAItI,SAAStM,KAAKkO,EAAEkhC,KAAKG,QAAS55B,IAAIxL,QAAS,CACpJ,OAAO,UACJ,CACHnK,KAAK0c,QAAQ,SAAU,CACnBsoB,OAAQhlC,KAAKkO,EAAE6e,QAAQ+hB,OAAOzlC,SAK1C4mC,cAAe,SAAUt6B,KACrB,GAAIA,IAAIxL,SAAWvK,QAAU+V,IAAIxL,SAAWrG,SAAU,CAClDlE,OAAO6pC,SAASzpC,KAAKkO,EAAEygC,WAAWpG,KAAMvoC,KAAKkO,EAAEygC,WAAWvX,SAKtE7zB,SAAS4F,SAASqlC,OAAQ,WAE3B,CACC55B,IAAK,YACLoJ,eAAgB,uBAChB9Q,OAAQ,eACR4R,gBAAiB;ACpZrBvb,SAASiF,OAAO,wBAAyB,SAAUgmC,OAAQ55B,IAAK1H,OAAQiD,KAEpE,IAAIghC,aAAe5tC,SAASkG,OAAO+kC,OAAQ,SAAUplC,KAAMkL,IAAKyY,SAC5DokB,aAAarnC,MAAMxG,KAAKtD,KAAMoJ,KAAM2jB,SAEpC/sB,KAAKkO,EAAE6P,QAAU,KAEjBnJ,IAAI0I,SAAStd,KAAKkO,EAAEkhC,KAAKC,OAAQ,wBACjCrvC,KAAKkO,EAAEkhC,KAAK9M,QAAUx+B,SAASG,cAAc,UAC7CjE,KAAKkO,EAAEkhC,KAAK9M,QAAQl5B,KAAOA,KAC3BwL,IAAI0I,SAAStd,KAAKkO,EAAEkhC,KAAK9M,QAAS,yBAClC1tB,IAAIyH,YAAYrc,KAAKkO,EAAEkhC,KAAK9M,QAAS,OAAQtiC,KAAKoxC,YAAYnmB,KAAKjrB,OACnEA,KAAKkO,EAAEkhC,KAAKG,QAAQ/zB,aAAaxb,KAAKkO,EAAEkhC,KAAK9M,QAAStiC,KAAKkO,EAAEkhC,KAAKG,QAAQ5zB,YAE1E,GAAIrH,IAAK,CACLtU,KAAKyyB,OAAOne,OAEjB,CACCtK,OAAQ,CACJinB,SAAU,CACNogB,gBAAiB,KACjBC,oBAAqB,KACrBC,WAAY,KACZC,KAAM,KACNhC,QAAS,CACLiC,MAAS,UAGjBtB,YAAa,SAASlf,UAClB/jB,OAAOW,UAAUsjC,aAAalgB,SAAUA,YAIhDygB,mBAAoB,WAChB,OAAO1xC,KAAKkO,EAAEkhC,KAAK9M,QAAQqP,iBAG/Blf,OAAQ,SAAUne,IAAKs9B,UACnB,IAAIrsC,EAAIvF,KAAKkO,EAAE6e,QACfzY,IAAMnE,IAAI7B,KAAKgG,KAEftU,KAAKkO,EAAE6P,QAAU,CACbzJ,IAAKA,IACL+8B,gBAAiB9rC,EAAE8rC,kBAAoB,KAAO/8B,IAAInB,UAAY5N,EAAE8rC,gBAChEC,oBAAqB/rC,EAAE+rC,sBAAwB,KAAOh9B,IAAInB,UAAY5N,EAAE+rC,oBACxEC,WAAYhsC,EAAEgsC,aAAe,OAASj9B,IAAInB,UAC1C0+B,MAAO,MACPD,SAAUA,SACVtrC,OAAQ,MAGZ,IAAI9B,QAASstC,KAEb,IAAKA,KAAO9xC,KAAKywC,OAAO,QAAUzwC,KAAKowC,UAAU,MAAO,CACpD5rC,QAAUxE,KAAK0wC,UACV7uC,KAAK7B,KAAK+xC,MAAM9mB,KAAKjrB,OAE1B,OAAO8xC,KAAOttC,QAAUA,QAAQ3C,KAAK7B,KAAKutC,KAAKtiB,KAAKjrB,YACjD,IAAKA,KAAKkO,EAAE6e,QAAQykB,KAAM,CAC7B,OAAOxxC,KAAK+xC,YACT,CACH,OAAOttC,QAAQ1D,YAIvBmxB,OAAQ,WACJ,OAAOlyB,KAAKkO,EAAE6P,QAAU5N,IAAI7B,KAAKtO,KAAKkO,EAAE6P,QAAQzJ,KAAO,MAG3D09B,UAAW,SAAU19B,IAAK29B,YACtB,OAAOjyC,KAAKkO,EAAE6P,UAAY,MAAQ/d,KAAKkO,EAAE6P,QAAQzJ,IAAInI,QAAQmI,MAAQ29B,aAAe,MAAQ9hC,IAAIkD,KAAKQ,KAAO1D,IAAIkD,KAAKO,QAGzH25B,KAAM,WACF,IAAKvtC,KAAKkO,EAAE6P,SAAW/d,KAAKkO,EAAE6P,QAAQ8zB,MAAO,CACzC,OAAOV,aAAarnC,MAAMD,UAAU0jC,KAAKjqC,KAAKtD,MAGlD,IAAKA,KAAKywC,SAAU,CAChB,OAAOzwC,KAAK0wC,UACP7uC,KAAK7B,KAAK+xC,MAAM9mB,KAAKjrB,OACrB6B,KAAK7B,KAAKutC,KAAKtiB,KAAKjrB,WACtB,CACH,OAAOA,KAAK+xC,QACPlwC,KAAK7B,KAAKutC,KAAKtiB,KAAKjrB,SAIjC+xC,MAAO,WACH,OAAO/xC,KAAKqwC,UAAU,SAAU,SAAU7uC,MACtCxB,KAAKkO,EAAE6P,QAAQzX,OAAS,WACpBtG,KAAKkO,EAAE6P,QAAQzX,OAAS,KACxB9E,KAAK,WACPypB,KAAKjrB,MAEP,IAAKA,KAAKkO,EAAE6P,QAAQ6zB,SAAU,CAC1B5xC,KAAKkO,EAAEkhC,KAAK9M,QAAQr0B,IAAMjO,KAAKkO,EAAE6P,QAAQzJ,IAAIzB,aAGjD7S,KAAKkO,EAAEkhC,KAAK9M,QAAQ+O,gBAAkBrxC,KAAKkO,EAAE6P,QAAQszB,gBACrDrxC,KAAKkO,EAAEkhC,KAAK9M,QAAQgP,oBAAsBtxC,KAAKkO,EAAE6P,QAAQuzB,qBAC1D,WACCtxC,KAAKkO,EAAE6P,QAAQzX,OAAS,OACzBzE,KAAK7B,KAAKkyC,iBAAiBjnB,KAAKjrB,QAGvCkyC,iBAAkB,WACd,IAAIzJ,OAAS,KAEb,IACIA,OAASzoC,KAAK0xC,qBAAqBx1B,gBAAgBi2B,aACrD,MAAO7xC,GACLmoC,OAAS,KACX,QACE,IAAKA,OAAQ,CACTzoC,KAAKkO,EAAE6P,QAAQwzB,WAAa,MAGhC38B,IAAI4I,YAAYxd,KAAKkO,EAAEkhC,KAAKC,OAAQ,4BAA6BrvC,KAAKkO,EAAE6P,QAAQwzB,YAChFvxC,KAAKkO,EAAEkhC,KAAK9M,QAAQttB,MAAMyzB,OAASzoC,KAAKkO,EAAE6P,QAAQwzB,WAC5C9I,OAAS,KACT,KAId2I,YAAa,WACT,GAAIpxC,KAAKkO,EAAE6P,UAAY/d,KAAKkO,EAAE6P,QAAQ8zB,OAAS7xC,KAAKgyC,UAAUhyC,KAAKkO,EAAEkhC,KAAK9M,QAAQr0B,KAAM,CACpFjO,KAAKkO,EAAE6P,QAAQ8zB,MAAQ,KACvB7xC,KAAKkO,EAAE6P,QAAQzX,QAAUtG,KAAKkO,EAAE6P,QAAQzX,aAKpD/C,SAAS4F,SAASgoC,aAAc,iBAEjC,CACCv8B,IAAK,YACL1H,OAAQ,eACRiD,IAAK;AC1IT5M,SAASiF,OAAO,wBAAyB,SAAUgmC,OAAQ2C,aAAcv8B,KAErE,IAAIw9B,QAAU7uC,SAASkG,OAAO,gBAAiB,SAAS4oC,OACpDD,QAAQtoC,MAAMxG,KAAKtD,MAEnBA,KAAKkO,EAAE8xB,SAAW,GAClBhgC,KAAKkO,EAAEokC,MAAQ,GACftyC,KAAKkO,EAAEqkC,OAASF,OAAS,IAEzBryC,KAAKwyC,YAAcxyC,KAAKwyC,YAAYvnB,KAAKjrB,MACzCA,KAAKyyC,YAAczyC,KAAKyyC,YAAYxnB,KAAKjrB,MACzCA,KAAK0yC,eAAiB1yC,KAAK0yC,eAAeznB,KAAKjrB,OAEhD,CACC2yC,aAAc,SAAUvpC,KAAM2jB,SAC1B,IAAI6lB,IAAM,IAAIpE,OAAOplC,KAAM2jB,SAC3B/sB,KAAK6yC,OAAOD,KACZ,OAAOA,KAGXE,mBAAoB,SAAU1pC,KAAMkL,IAAKyY,SACrC,IAAI6lB,IAAM,IAAIzB,aAAa/nC,KAAMkL,IAAKyY,SACtC/sB,KAAK6yC,OAAOD,KACZ,OAAOA,KAGXG,cAAe,WACX,OAAO/yC,KAAKkO,EAAEokC,MAAMpwC,OAAS,GAGjC8wC,qBAAsB,WAClB,OAAOhzC,KAAKkO,EAAEokC,MAAMpwC,OAASlC,KAAKkO,EAAEokC,MAAM,GAAK,MAGnDW,eAAgB,WACZ,OAAOjzC,KAAKkO,EAAEokC,MAAM9nC,SAGxB0oC,UAAW,SAAU9pC,MACjB,OAAOpJ,KAAKkO,EAAE8xB,SAAS52B,OAAS,MAGpC+pC,eAAgB,SAAUC,QACtB,GAAIA,OAAOxzB,YAAa5f,KAAKkO,EAAE8xB,SAAU,CACrC,MAAM,IAAIt6B,MAAM,mBAAqB0tC,OAAOxzB,UAAY,oBAG5D5f,KAAKkO,EAAE8xB,SAASoT,OAAOxzB,WAAawzB,OACpC,OAAOpzC,MAGXqzC,iBAAkB,SAAUjqC,MACxB,GAAIA,QAAQpJ,KAAKkO,EAAE8xB,SAAU,QAClBhgC,KAAKkO,EAAE8xB,SAAS52B,MAG3B,OAAOpJ,MAGX6yC,OAAQ,SAAUO,QACdpzC,KAAKmzC,eAAeC,QACpBA,OAAOjyB,GAAG,OAAQnhB,KAAKwyC,aACvBY,OAAOjyB,GAAG,OAAQnhB,KAAKyyC,aACvBW,OAAOjyB,GAAG,UAAWnhB,KAAK0yC,gBAC1B1yC,KAAK0c,QAAQ,QAAS,CAAC02B,OAAQA,SAC/BtvC,SAASq4B,KAAK10B,YAAY2rC,OAAOtU,eAGrC0T,YAAa,SAAU78B,KACnB,GAAI3V,KAAKkO,EAAEokC,MAAMpwC,OAAQ,CACrB0S,IAAI4I,YAAYxd,KAAKkO,EAAEokC,MAAM,GAAGxT,aAAc,UAAW,OAG7DlqB,IAAI4I,YAAY7H,IAAIxL,OAAO20B,aAAc,UAAW,MACpDnpB,IAAIxL,OAAO20B,aAAa9pB,MAAMu9B,OAASvyC,KAAKkO,EAAEqkC,OAASvyC,KAAKkO,EAAEokC,MAAMpwC,OACpElC,KAAKkO,EAAEokC,MAAMxpC,QAAQ6M,IAAIxL,SAG7BsoC,YAAa,SAAU98B,KACnBf,IAAI4I,YAAY7H,IAAIxL,OAAO20B,aAAc,UAAW,OAEpD,IAAIxvB,MAAQtP,KAAKkO,EAAEokC,MAAMtqC,QAAQ2N,IAAIxL,QAErC,GAAImF,OAAS,EAAG,CACZtP,KAAKkO,EAAEokC,MAAMxjC,OAAOQ,MAAO,GAG/B,GAAItP,KAAKkO,EAAEokC,MAAMpwC,OAAQ,CACrB0S,IAAI4I,YAAYxd,KAAKkO,EAAEokC,MAAM,GAAGxT,aAAc,UAAW,QAIjE4T,eAAgB,SAAU/8B,KACtB3V,KAAKqzC,iBAAiB19B,IAAIxL,OAAOyV,cAIzCrc,SAAS4F,SAASipC,QAAS,YAE5B,CACCx9B,IAAK;ACpGTrR,SAASiF,OAAO,wBAAyB,SAAUgmC,OAAQthC,OAAQ4R,iBAE/D,IAAIpF,GAAK,EAEZ,IAAI45B,QAAU/vC,SAASkG,OAAO+kC,OAAQ,SAAUzhB,SAC/C,KAAM/sB,gBAAgBszC,SAAU,CAC/B,IAAIV,IAAM9zB,gBAAgBxQ,KAAKglC,SAASh0B,gBAAgB/W,WACxD3I,OAAOgB,WAAW,WAAagyC,IAAIrF,QAAW,GAC9C,OAAOqF,IAGRU,QAAQxpC,MAAMxG,KAAKtD,KAAM,qBAAuB0Z,GAAK1Z,KAAKuzC,gBAAgBhrC,YAE1EvI,KAAKkO,EAAE1J,QAAU,IAAIC,QAAQ,SAAUuB,SAC7BhG,KAAKmhB,GAAG,SAAU,SAASxL,KACvB3V,KAAK2/B,UACL35B,QAAQ2P,IAAIlV,KAAKukC,SAAW,cAElC/Z,KAAKjrB,QAEX,CACIgK,OAAQ,CACJinB,SAAU,CACNpsB,QAAS,wBACT2qC,QAAS,CACLgE,QAAS,KACT5E,OAAQ,CAACsC,MAAO,SAAUnuC,KAAM,SAEpC+rC,OAAQ,CACJ2E,MAAS,UACTvD,OAAU,WAGlBC,YAAa,SAASlf,UAClB/jB,OAAOW,UAAUylC,QAAQriB,SAAUA,YAIjDsiB,gBAAiB,SAAUtqC,MAC1B,IAAI8jB,QAAU9jB,KAAK,GAEnB,UAAW8jB,UAAY,SAAU,CAChCA,QAAU,CACTnlB,KAAMmlB,SAGP,GAAI9jB,KAAK/G,OAAS,EAAG,CACpB6qB,QAAQyiB,QAAU,CACjBgE,QAASvqC,KAAK,IAGf,GAAIA,KAAK/G,OAAS,EAAG,CACpB,UAAW+G,KAAK,KAAO,SAAU,CAChC8jB,QAAQyiB,QAAQZ,OAAS,CAACsC,MAAOjoC,KAAK,GAAIlG,KAAM,YAC1C,CACNgqB,QAAQyiB,QAAQZ,OAAS3lC,KAAK,QAEzB,CACN8jB,QAAQyiB,QAAQZ,OAAS,CAACsC,MAAO,SAAUnuC,KAAM,UAKpD,OAAOgqB,SAGRlrB,KAAM,SAAU6xC,UAAWC,UACjB,OAAO3zC,KAAKkO,EAAE1J,QAAQ3C,KAAK6xC,UAAWC,aAI9CpwC,SAAS4F,SAASmqC,QAAS,YAE5B,CACC9E,OAAQ,+BACX1vB,gBAAiB,wBACd5R,OAAQ;AC5EZ3J,SAASiF,OAAO,wBAAyB,SAAU4pC,QAASkB,SAExD,IAAIM,aAAe,CACfC,cAAe,SAAU9mB,SACrB,IAAI6lB,IAAMU,QAAQpqC,MAAM,KAAMX,WAC9BvI,KAAK6yC,OAAOD,KACZ,OAAOA,MAIfrvC,SAAS2G,MAAMkoC,QAASwB,eAEzB,CACCxB,QAAS;ACbb7uC,SAASiF,OAAO,6BAA8B,SAAS8hB,QAEnD,IAAIwpB,cAAgBvwC,SAASkG,OAAO,6BAA8B,SAASsnB,iBAAkBN,QACzFqjB,cAAchqC,MAAMxG,KAAKtD,KAAM+wB,iBAAkBN,SAClD,CACCzmB,OAAQ,CACJinB,SAAU,CACN+C,aAAc,OAGtB3rB,KAAM,WACF,IAAI0rC,QAAU/zC,KAAKkxB,uBACfT,OAASzwB,KAAKgxB,WAAW8iB,cAAc7iB,UAE3C8iB,QAAQ5kB,qBAAqB,OAAQ,CACjChB,QAAS,wBACTllB,KAAM,CACF8jB,QAAS0D,QAEblS,IAAK,KACL6P,MAAO,CACH,uDAMhB7qB,SAAS4F,SAAS2qC,cAAe;AC3BrCvwC,SAASiF,OAAO,+BAAgC,SAAS8hB,QAErD,IAAI0pB,eAAiBzwC,SAASkG,OAAO,6BAA8B,SAASsnB,iBAAkBN,QAC1FujB,eAAelqC,MAAMxG,KAAKtD,KAAM+wB,iBAAkBN,SACnD,CACCzmB,OAAQ,CACJinB,SAAU,CACNgjB,eAAgB,MAChBC,eAAgB,OAIxB7rC,KAAM,WACF,IAAI0rC,QAAU/zC,KAAKkxB,uBACnB6iB,QAAQ5kB,qBAAqB,cAAe,2BAIhDf,MAAO,WACH,IAAI2lB,QAAU/zC,KAAKkxB,uBACfT,OAASzwB,KAAKgxB,WAAWgjB,eAAe/iB,UAE5C,GAAI8iB,QAAQzkB,qBAAqB,QAAS,CACtCykB,QAAQxkB,qBAAqB,QACxBZ,SAAS,SAAUwlB,aAChBn0C,KAAKo0C,UAAUD,YAAa1jB,UAIxC,IAAKsjB,QAAQzkB,qBAAqB,qBAAsB,CACpDykB,QAAQ5kB,qBAAqB,oBAAqB,2CAK9D5rB,SAAS4F,SAAS6qC,eAAgB;ACnCtCzwC,SAASiF,OAAO,iCAAkC,SAASsrB,QAASlf,KAEhE,IAAIy/B,WAAa,CACbD,UAAW,SAAUD,YAAapnB,SAC9B/sB,KAAKkO,EAAEimC,YAAcA,YACrBn0C,KAAKkO,EAAE6e,QAAQknB,eAAiBlnB,QAAQknB,eACxCj0C,KAAKkO,EAAE6e,QAAQmnB,eAAiBnnB,QAAQmnB,eAExCt/B,IAAIyH,YAAYvY,SAAU,SAAU9D,KAAKq+B,cAAcpT,KAAKjrB,OAC5D4U,IAAIyH,YAAYvY,SAAU,QAAS9D,KAAKs0C,mBAAmBrpB,KAAKjrB,OAChEA,KAAKkO,EAAEq3B,eAAepkB,GAAG,eAAgBnhB,KAAKu0C,cAActpB,KAAKjrB,OACjEA,KAAKmhB,GAAG,sBAAuBnhB,KAAKw0C,qBAAqBvpB,KAAKjrB,QAGlEy0C,SAAU,SAAU/d,KAAM/gB,KACtB,IAAI++B,IAAM10C,KAAKkO,EAAEimC,YAAYjU,QAAQxJ,MAErC,OAAO12B,KAAKmG,KAAKuwB,KAAKsO,OAAQtO,KAAKtO,OAAQssB,IAAIlV,YAAa,CACpDjqB,MAAOI,IACPgjB,QAASjC,OAEZ70B,KAAK7B,KAAK20C,mBAAmB1pB,KAAKjrB,KAAM00C,OAGjDF,qBAAsB,SAAU7+B,KAC5B,GAAIA,IAAIlV,KAAK+Y,QAAQmf,SAAWhjB,IAAIlV,KAAK+Y,QAAQmf,mBAAmBiG,gBAAiB,CACjF,IAAIn+B,KAAO,CACPi2B,KAAM12B,KAAKkO,EAAEimC,YAAYjU,QAAQvqB,IAAIlV,KAAK+Y,QAAQmf,SAClDic,WAAY,MAGhBj/B,IAAIlV,KAAKglC,YAAYtkB,GAAG,gBAAiBnhB,KAAK60C,oBAAoB5pB,KAAKjrB,KAAMS,OAC7EkV,IAAIlV,KAAKglC,YAAY5jC,KAAK7B,KAAK20C,mBAAmB1pB,KAAKjrB,KAAMS,MAAO,gBAI5Eo0C,oBAAqB,SAAUp0C,KAAMkV,KACjC,IAAI8d,QAAU9d,IAAIlV,KAAKwxB,SAAS0B,aAEhC,GAAI,eAAgBF,QAAS,CACzBhzB,KAAKm0C,WAAanhB,QAAQmhB,aAIlCD,mBAAoB,SAAUl0C,MAC1B,GAAIA,KAAKm0C,YAAcn0C,KAAKi2B,KAAKoI,cAAgBlqB,IAAIqI,QAAQxc,KAAKi2B,KAAKoI,aAAc,QAAS9+B,KAAKkO,EAAE6e,QAAQmnB,gBAAiB,CAC1HzzC,KAAKi2B,KAAKle,UAIlB6lB,cAAe,SAAU1oB,KACrB,GAAIA,IAAI2L,oBAAsB3L,IAAIxL,kBAAkBy0B,mBAAqB5+B,KAAK80C,WAAWn/B,IAAIxL,QAAS,CAClG,OAGJnK,KAAKy0C,SAAS9+B,IAAIxL,OAAQwL,MAI9B2+B,mBAAoB,SAAU3+B,KAC1B,GAAIA,IAAI2L,kBAAoB3L,IAAIc,SAAWd,IAAIgB,UAAYhB,IAAIe,QAAUf,IAAIiB,SAAWjB,IAAIkB,OAAS,EAAG,CACpG,OAIJ,IAAI6oB,IAAM9qB,IAAIqF,QAAQtE,IAAIxL,OAAQ,WAAayK,IAAIqF,QAAQtE,IAAIxL,OAAQ,SACnEuqC,IAEJ,IAAKhV,KAAOA,IAAI38B,OAAS,WAAa28B,IAAIhJ,OAAS12B,KAAK80C,WAAWpV,IAAIhJ,MAAO,CAC1E,OAIJge,IAAM10C,KAAKkO,EAAEimC,YAAYjU,QAAQR,IAAIhJ,MACrCge,IAAI1V,eAAeU,IAAIt2B,MAAQ,OAInC0rC,WAAY,SAAUpe,MAClB,GAAIA,KAAKvZ,aAAa,UAAW,CAC7B,OAAO,MAGX,OAAOvI,IAAIqI,QAAQyZ,KAAM,QAAS12B,KAAKkO,EAAE6e,QAAQknB,iBAIrDM,cAAe,WACXv0C,KAAKkO,EAAEimC,YAAY/T,iBAI3B78B,SAAS4F,SAASkrC,WAAY,cAC9B9wC,SAAS2G,MAAM4pB,QAASugB,YAExBvgB,QAAQ7C,SAASgjB,eAAiB,MAClCngB,QAAQ7C,SAASijB,eAAiB,MAEnC,CACCpgB,QAAS,sBACTlf,IAAK;ACpGTrR,SAASiF,OAAO,6BAA8B,SAAU8hB,QAEpD,IAAIyqB,cAAgBxxC,SAASkG,OAAO,6BAA8B,SAAUsnB,iBAAkBN,QAC1FskB,cAAcjrC,MAAMxG,KAAKtD,KAAM+wB,iBAAkBN,SAClD,CACCzmB,OAAQ,CACJinB,SAAU,CACNwV,iBAAkB,MAClB4E,eAAgB,MAChBrF,mBAAoB,MACpBsF,iBAAkB,MAClB0J,IAAK,KACLC,YAAa,CACTzN,gBAAiB,2BAErB3jB,KAAM,CACFqxB,gBAAiB,oGACjBC,aAAc,uEAElBC,OAAQ,CACJjrC,OAAQ,KACR0+B,OAAQ,GACRC,WAAY,MACZlqB,SAAU,OAItBvW,KAAM,WACF,IAAI0rC,QAAU/zC,KAAKkxB,uBACfT,OAASzwB,KAAKgxB,WAAW+jB,cAAc9jB,UAE3C8iB,QAAQ5kB,qBAAqB,OAAQ,CACjChB,QAAS,wBACTllB,KAAM,CACF8jB,QAAS,CACLse,eAAgB5a,OAAO4a,eACvBC,iBAAkB7a,OAAO6a,mBAGjC/sB,IAAK,OAGTw1B,QAAQ5kB,qBAAqB,YAAa,CACtChB,QAAS,0BACTllB,KAAM,CACF8jB,QAAS,CACLiZ,mBAAoBvV,OAAOuV,qBAGnCznB,IAAK,OAGTw1B,QAAQ5kB,qBAAqB,eAAgB,CACzChB,QAAS,6BACTllB,KAAM,CACF8jB,QAAS,CACL0Z,iBAAkBhW,OAAOgW,mBAGjCloB,IAAK,OAGTw1B,QAAQ5kB,qBAAqB,cAAe,CACxChB,QAAS,4BACTllB,KAAM,CACF8jB,QAAS0D,OAAO2kB,QAEpB72B,IAAK,OAGTw1B,QAAQ5kB,qBAAqB,eAAgB,+BAC7C4kB,QAAQ5kB,qBAAqB,iBAAkB,gCAC/C4kB,QAAQ5kB,qBAAqB,UAAW,yBAExC,UAAWvvB,OAAOorC,KAAO,WAAY,CACjC+I,QAAQ5kB,qBAAqB,wBAAyB,wCAG1D,GAAIsB,OAAOwkB,YAAa,CACpBlB,QAAQ5kB,qBAAqB,kBAAmB,CAC5ChB,QAAS,gCACTllB,KAAM,CACF8jB,QAAS,CACLya,gBAAiB/W,OAAOwkB,YAAYzN,kBAG5CjpB,IAAK,OAIb,GAAIkS,OAAOukB,MAAQ,MAAO,CACtB,IAAIlK,QAAUhnC,SAASgD,qBAAqB,UACxC/E,EAAGiC,EAAGW,MAAQ,KAElB,IAAK5C,EAAI,EAAGiC,EAAI8mC,QAAQ5oC,OAAQH,EAAIiC,EAAGjC,IAAK,CACxC,GAAI,uCAAuCiF,KAAK8jC,QAAQ/jC,KAAKhF,GAAGgB,OAAS+nC,QAAQ/jC,KAAKhF,GAAG4C,MAAO,CAC5FA,MAAQmmC,QAAQ/jC,KAAKhF,GAAG4C,MACxB,OAIR,GAAI8rB,OAAOukB,KAAOrwC,MAAO,CACrBovC,QAAQ5kB,qBAAqB,WAAY,CACrChB,QAAS,yBACTllB,KAAM,CACFtE,MAAOA,OAEX4Z,IAAK,UAMrB6P,MAAO,WACH,IAAI2lB,QAAU/zC,KAAKkxB,uBACfT,OAASzwB,KAAKgxB,aAElB,GAAI+iB,QAAQzkB,qBAAqB,WAAY,CACzCykB,QAAQ5kB,qBAAqB,aAAc,iDAE3C4kB,QAAQxkB,qBAAqB,QACxBZ,SAAS,SAAS0mB,SACfr1C,KAAKmhB,GAAG,gBAAiB,SAAUxL,KAC/B,GAAIA,IAAIlV,KAAKsC,OAAS,aAAc,CAChCsyC,QAAQx3B,IAAI4S,OAAO5M,KAAKqxB,gBAAiB,cAEtC,GAAIv/B,IAAIlV,KAAKsC,OAAS,QAAS,CAClCsyC,QAAQx3B,IAAI4S,OAAO5M,KAAKsxB,aAAc,kBASlE5xC,SAAS4F,SAAS4rC,cAAe;ACxIrCxxC,SAASiF,OAAO,kCAAmC,WAE/C,IAAI8sC,WAAa/xC,SAASkG,OAAO,SAAS67B,KAAM+P,SAC5Cr1C,KAAKkO,EAAI,CACLo3B,KAAMA,KACN+P,QAASA,SAGbr1C,KAAK0lC,gBAAkB1lC,KAAK0lC,gBAAgBza,KAAKjrB,MACjDA,KAAKkO,EAAEo3B,KAAKnkB,GAAG,sBAAuBnhB,KAAKwlC,iBAAiBva,KAAKjrB,QAClE,CACCwlC,iBAAkB,SAAU7vB,KACxBA,IAAIlV,KAAKglC,YAAYtkB,GAAG,gBAAiBnhB,KAAK0lC,kBAGlDA,gBAAiB,SAAU/vB,KACvB,IAAI8d,QAAU9d,IAAIlV,KAAKwxB,SAAS0B,aAEhC,IAAKF,QAAQ8S,UAAY9S,QAAQ4hB,QAAS,CACtCr1C,KAAKu1C,aAAa9hB,QAAQ4hB,WAIlCE,aAAc,SAAUF,SACpB,IAAI37B,GAAI3X,EAER,IAAK2X,MAAM27B,QAAS,CAChB,GAAIA,QAAQtrC,eAAe2P,KAAO27B,QAAQ37B,IAAK,CAC3C,IAAK3X,EAAI,EAAGA,EAAIszC,QAAQ37B,IAAIxX,OAAQH,IAAK,CACrC/B,KAAKkO,EAAEmnC,QAAQx3B,IAAIw3B,QAAQ37B,IAAI3X,GAAG+1B,QAASud,QAAQ37B,IAAI3X,GAAGgB,KAAM2W,GAAK,YAQzFnW,SAAS4F,SAASmsC,WAAY;ACrClC/xC,SAASiF,OAAO,mCAAoC,SAAS0iB,KAAM8B,WAAYhf,SAE3E,IAAIwnC,iBAAmBjyC,SAASkG,OAAO,6BAA8B,SAASsnB,iBAAkBN,QAC5F+kB,iBAAiB1rC,MAAMxG,KAAKtD,KAAM+wB,iBAAkBN,SAErD,CACCzmB,OAAQ,CACJinB,SAAU,CACNqd,MAAO,KACPzpC,QAAS,KACTwnC,WAAY,CACRyB,aAAc,KACdjF,OAAQ,QAIpBxgC,KAAM,WACF,IAAI0rC,QAAU/zC,KAAKkxB,uBACfT,OAASzwB,KAAKgxB,WAAWwkB,iBAAiBvkB,UAE9C,IAAIob,WAEJ,UAAW5b,OAAO4b,aAAe,SAAU,CACvCA,WAAa5b,OAAO4b,WAAWnlC,MAAM,YAAcupB,OAAO4b,WAAanhB,KAAK+B,OAAO,IAAMwD,OAAO4b,WAAa,KAAK5mC,YAC/G,CACH4mC,WAAa,IAAIrf,WAAW,mCAAoChf,QAAQM,KAAKmiB,OAAO4b,aAGxF0H,QAAQ5kB,qBAAqB,UAAW,CACpChB,QAAS,2BACTllB,KAAM,CACFojC,WAAYA,WACZtf,QAAS,CACLuhB,MAAO7d,OAAO6d,MACdzpC,QAAS4rB,OAAO5rB,UAGxB0Z,IAAK,UAKjBhb,SAAS4F,SAASqsC,iBAAkB,qBAErC,CACCtqB,KAAM,mBACN8B,WAAY,yBACZhf,QAAS;AC/CbzK,SAASiF,OAAO,4CAA6C,SAAUoM,IAAKzE,IAAKjD,OAAQ9K,WAErF,IAAIy9B,OAAS,EAEb,IAAI4V,YAAclyC,SAASkG,OAAO,gBAAiB,SAAU67B,KAAMoQ,cAAenQ,eAAgBxY,SAC9F0oB,YAAY3rC,MAAMxG,KAAKtD,MACvBA,KAAKkO,EAAEo3B,KAAOA,KACdtlC,KAAKkO,EAAEwnC,cAAgBA,cACvB11C,KAAKkO,EAAEq3B,eAAiBA,eACxBvlC,KAAKkO,EAAEimC,YAAc,KACrBn0C,KAAKkO,EAAE6e,QAAU7f,OAAOW,UAAU,GAAI4nC,YAAYxkB,SAAUlE,SAE5D/sB,KAAKkO,EAAEo3B,KAAKnkB,GAAG,qBAAsBnhB,KAAK21C,yBAAyB1qB,KAAKjrB,OACxEA,KAAKkO,EAAEo3B,KAAKnkB,GAAG,sBAAuBnhB,KAAKwlC,iBAAiBva,KAAKjrB,QAClE,CACCgK,OAAQ,CACJinB,SAAU,CACNwV,iBAAkB,KAClBmP,0BAA2B,KAC3BC,qBAAsB,OAI9BC,eAAgB,SAAU3B,aACtBn0C,KAAKkO,EAAEimC,YAAcA,YACrB,OAAOn0C,MAGX21C,yBAA0B,SAAUhgC,KAChC,GAAIA,IAAIsL,qBAAsB,CAC1B,OAGJ,IAAI80B,IAAMpgC,IAAIlV,KAAK+Y,QACf0D,IAAM64B,IAAIpd,QAAU/jB,IAAIqI,QAAQ84B,IAAIpd,QAAS,SAAU,MAAQ,KAC/D5a,QAAU/d,KAAKkO,EAAEwnC,cAAc1C,uBAC/BgD,QAAU,GACVC,OAAQC,OAAQ9sC,KAEpB,GAAI8T,MAAQ,KAAM,CACdld,KAAKm2C,kBAAkBH,QAAS94B,KAGpC,GAAI64B,IAAIC,QAAS,CACbh2C,KAAKm2C,kBAAkBH,QAASD,IAAIC,SAGxC,IAAK5sC,QAAQ4sC,QAAS,GAAIA,QAAQjsC,eAAeX,MAAO,CACpD8T,IAAM84B,QAAQ5sC,MAEd,GAAIA,OAAS,WAAaA,OAAS,OAAQ,QAChC4sC,QAAQ5sC,MAEf,GAAI2U,UAAY3U,OAAS,WAAa2sC,IAAIpd,SAAW/jB,IAAItI,SAASyR,QAAQ4yB,aAAcoF,IAAIpd,UAAW,CACnGvvB,KAAO2U,QAAQ6B,UACfo2B,QAAQ5sC,MAAQ8T,IAEhB,UAAWA,MAAQ,SAAU,CACzBA,IAAI9T,KAAOA,UAEZ,CACH,UAIR,UAAW8T,MAAQ,SAAU,CACzB+4B,OAAS,KAET,GAAI/4B,IAAIna,OAAS,SAAU,CACvBmzC,OAAS9sC,OAKrB,GAAI2U,QAAS,CACT,KAAMA,QAAQ6B,YAAao2B,SAAU,CACjCA,QAAQj4B,QAAQ6B,WAAa,WAC1B,GAAIo2B,QAAQj4B,QAAQ6B,aAAe,KAAM,QACrCo2B,QAAQj4B,QAAQ6B,YAI/Bm2B,IAAIC,QAAUA,QAEd,GAAIC,OAAQ,CACR,GAAIj2C,KAAKkO,EAAE6e,QAAQ0Z,oBAAsB,YAAasP,QAAUA,IAAIpd,UAAYod,IAAIpd,QAAQvd,aAAa,iBAAkB,CACvH26B,IAAI3xC,QAAU,MAGlB,GAAIpE,KAAKkO,EAAE6e,QAAQ6oB,6BAA+B,eAAgBG,QAAUA,IAAIpd,UAAYod,IAAIpd,QAAQvd,aAAa,oBAAqB,CACtI26B,IAAI5N,WAAa,MAGrB,GAAInoC,KAAKkO,EAAE6e,QAAQ8oB,wBAA0B,aAAcE,QAAUA,IAAIpd,UAAYod,IAAIpd,QAAQvd,aAAa,mBAAoB,CAC9H26B,IAAItM,SAAW,OAIvB,GAAIyM,OAAQ,CACRvgC,IAAI6L,iBACJu0B,IAAIxgC,OAASwgC,IAAIxgC,MAAMiM,iBACvBtE,IAAM84B,QAAQE,QACdh5B,IAAI3c,QAAU2c,IAAI3c,SAAW,KAAO2c,IAAI3c,OAASoV,IAAIlV,KAAK6T,KAC1DtU,KAAKo2C,kBAAkBl5B,IAAK64B,IAAIpd,WAIxC6M,iBAAkB,SAAU7vB,KACxB,IAAIlV,KAAO,CACPkqC,QAAS,GACTqL,QAASrgC,IAAIlV,KAAK+Y,QAAQw8B,SAG9BrgC,IAAIlV,KAAKglC,YAAYtkB,GAAG,WAAYnhB,KAAKimC,UAAUhb,KAAKjrB,KAAMS,OAC9DkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,gBAAiBnhB,KAAK0lC,gBAAgBza,KAAKjrB,KAAMS,OACzEkV,IAAIlV,KAAKglC,YAAYtkB,GAAG,iBAAkBnhB,KAAK2nC,gBAAgB1c,KAAKjrB,KAAMS,QAG9E21C,kBAAmB,SAAUl5B,IAAKnZ,MAC9B,IAAI6uC,IAAM5yC,KAAKq2C,cAAcn5B,IAAI9T,KAAM8T,KAEvC,GAAInZ,MAAQ/D,KAAKkO,EAAEimC,aAAepwC,gBAAgB66B,gBAAiB,CAC/D,IAAI8V,IAAM10C,KAAKkO,EAAEimC,YAAYjU,QAAQn8B,MACjC6tC,SAAW,KACXhoC,IAEJ,GAAI,SAAS5C,KAAKjD,KAAKqkB,QAAS,CAC5BlL,IAAI3c,OAAS4P,IAAI7B,KAAK4O,IAAI3c,QACrBkS,UAAUiiC,IAAIlV,YAAYxvB,WAAW,OACrC6C,aAEL++B,SAAW,MAGfgB,IAAIngB,OAAOvV,IAAI3c,OAAQqxC,UAEvB,GAAIA,SAAU,CACVhoC,IAAM7F,KAAKoG,OACXpG,KAAKoG,OAAS+S,IAAI9T,KAClBsrC,IAAIn8B,SACJ3Y,OAAOgB,WAAW,WAAamD,KAAKoG,OAASP,KAAQ,QAEtD,CACHgpC,IAAIngB,OAAOvV,IAAI3c,QAGnBqyC,IAAIrF,QAGRtH,UAAW,SAAUxlC,KAAMkV,KACvB,IAAIvM,KAAM5E,QAEV,IAAK4E,QAAQ3I,KAAKu1C,QAAS,GAAIv1C,KAAKu1C,QAAQjsC,eAAeX,MAAO,CAC9D,GAAI5E,QAAUxE,KAAKs2C,eAAeltC,KAAM3I,KAAKu1C,QAAQ5sC,MAAO3I,KAAMkV,IAAIxL,QAAS,CAC3EwL,IAAI8L,QAAQjd,YAKxBkhC,gBAAiB,SAAUjlC,KAAMkV,KAC7B,IAAI8d,QAAU9d,IAAIlV,KAAKwxB,SAAS0B,aAC5B4iB,OAAQx0C,EAAGiC,EAEf,GAAI,YAAayvB,QAAS,CACtB8iB,OAASv2C,KAAKm2C,kBAAkB11C,KAAKu1C,QAASviB,QAAQuiB,SAEtD,IAAKj0C,EAAI,EAAGiC,EAAIuyC,OAAOr0C,OAAQH,EAAIiC,EAAGjC,IAAK,CACvC/B,KAAKs2C,eAAeC,OAAOx0C,GAAItB,KAAKu1C,QAAQO,OAAOx0C,IAAKtB,KAAMkV,IAAIxL,WAK9Ew9B,gBAAiB,SAAUlnC,KAAMkV,KAC7B,IAAIosB,UAAYpsB,IAAIlV,KAAKshC,UAEzBpsB,IAAI8L,QAAQhd,QAAQrD,IAAIX,KAAKkqC,UAC7BlqC,KAAKkqC,QAAU,GAEf,IAAIvhC,KAAM8T,IAAKxD,GAAIk5B,IAAKlR,QAASY,QAEjC,IAAKl5B,QAAQ3I,KAAKu1C,QAAS,GAAIv1C,KAAKu1C,QAAQjsC,eAAeX,QAAU8T,IAAMzc,KAAKu1C,QAAQ5sC,QAAUpJ,KAAKw2C,eAAet5B,KAAM,CACxH01B,IAAM5yC,KAAKkO,EAAEwnC,cAAcxC,UAAU9pC,MACrCs4B,QAAUK,UAAUgB,OAAO7lB,IAAI3c,QAE/B,GAAImhC,QAAS,CACT,GAAIA,QAAQlnB,UAAW,CACnB,MAAM,IAAI9U,MAAM,kDAGpB,IAAKgU,MAAMqoB,UAAU/yB,OAAQ,GAAI+yB,UAAU/yB,OAAOjF,eAAe2P,IAAK,CAClE,GAAIqoB,UAAU/yB,OAAO0K,IAAIirB,cAAgB/vB,IAAItI,SAASo1B,QAAQ/I,QAASoJ,UAAU/yB,OAAO0K,IAAIif,SAAU,QAC3FoJ,UAAU/yB,OAAO0K,KAIhCA,GAAKwD,IAAI3c,OAAO4G,QAAQ,YAAa,eAC9B46B,UAAUgB,OAAO7lB,IAAI3c,QAE5B,GAAIqyC,IAAK,CACL7Q,UAAUgB,OAAOrpB,IAAMgoB,QACvBY,QAAUsQ,IAAIjC,aACdrO,QAAQ5oB,GAAKA,GACbgoB,QAAQ/I,QAAU2J,QAElB,GAAItiC,KAAKkO,EAAEimC,aAAej3B,IAAIna,OAAS,OAAQ,CAC3C4S,IAAIxL,OAAOtI,KAAK7B,KAAKy2C,YAAYxrB,KAAKjrB,KAAM4yC,MAGhDj9B,IAAIxL,OAAOtI,KAAK+wC,IAAIrF,KAAKtiB,KAAK2nB,WAE/B,CACHA,KAAOj9B,IAAI8L,QAAQmxB,IAAIjT,cAKnC6W,eAAgB,SAAUt5B,KACtB,OAAQA,IAAIna,MAAQma,IAAIna,OAAS,QAGrCozC,kBAAmB,SAAUH,QAASU,MAClC,IAAIH,OAAS,GACTntC,KAAMlD,EAAGgX,IAEb,UAAWw5B,OAAS,SAAU,CAC1BA,KAAO,CAAEC,GAAID,WACV,GAAI,WAAYA,MAAQ,SAAUA,KAAM,CAC3CA,KAAO,CAAEC,GAAID,MAGjB,IAAKttC,QAAQstC,KAAM,GAAIA,KAAK3sC,eAAeX,MAAO,CAC9C8T,IAAMw5B,KAAKttC,MAEX,UAAW8T,MAAQ,SAAU,CACzBhX,EAAI,0BAA0Bf,KAAK+X,KAEnC,GAAIhX,EAAG,CACHgX,IAAMA,IAAI9X,OAAOc,EAAE,GAAGhE,QACtB8zC,QAAQj4B,QAAU,KAGtB,IAAKb,IAAK,CACN,SAGJA,IAAMld,KAAK8iC,iBAAiB5lB,KAGhC,UAAWA,MAAQ,SAAU,CACzB,IAAKA,IAAI9T,MAAQA,KAAM,CACnB8T,IAAI9T,KAAOA,KAGf,IAAK8T,IAAI9T,OAAS8T,IAAI3c,QAAU2c,IAAIna,OAAS,SAAU,CACnD,MAAM,IAAI2C,MAAM,2HAGpBswC,QAAQ94B,IAAI9T,MAAQ8T,IACpBq5B,OAAO1zC,KAAKqa,IAAI9T,WACb,GAAIA,KAAM,CACb4sC,QAAQ5sC,MAAQ8T,IAChBq5B,OAAO1zC,KAAKuG,OAIpB,OAAOmtC,QAGXzT,iBAAkB,SAAUH,YACxB,IAAIz8B,EAAI,0EAA0Ef,KAAKw9B,YAEvF,IAAKz8B,EAAG,CACJtG,OAAOu0B,SAAWA,QAAQyiB,KACtB,0FACE,4FAGN,MAAO,CACHxtC,KAAM,oBAAsBy2B,OAC5Bt/B,OAAQoiC,iBAET,GAAIz8B,EAAE,GAAI,CACb,MAAO,CACHkD,KAAMlD,EAAE,GACR3F,OAAQ2F,EAAE,QAEX,CACH,MAAO,CACHkD,KAAMlD,EAAE,GACRnD,KAAMmD,EAAE,IAAM,KACd3F,OAAQ2F,EAAE,MAKtBowC,eAAgB,SAAUltC,KAAM8T,IAAKzc,KAAMglC,aACvC,IAAImN,IAAM5yC,KAAKkO,EAAEwnC,cAAcxC,UAAU9pC,MACrC5E,QAAU,KAEd,IAAK0Y,IAAK,CACN,GAAI01B,IAAK,CACLpuC,QAAUouC,IAAIjT,eAEf,CACH,IAAKiT,IAAK,CACNA,IAAM5yC,KAAKq2C,cAAcjtC,KAAM8T,KAGnC1Y,QAAUouC,IAAIlC,UAEd,GAAIxzB,IAAIna,OAAS,SAAU,CACvB6vC,IAAIngB,OAAOvV,IAAI3c,QACfklC,YAAY5jC,KAAK+wC,IAAIrF,KAAKtiB,KAAK2nB,OAIvCpuC,SAAW/D,KAAKkqC,QAAQ9nC,KAAK2B,SAC7B,OAAOA,SAGX6xC,cAAe,SAAUjtC,KAAM8T,KAC3BA,IAAI6P,UAAY7P,IAAI6P,QAAU,IAE9B,GAAI/sB,KAAKw2C,eAAet5B,KAAM,CAC1BA,IAAI6P,QAAQuV,QAAU1tB,IAAIqB,OAAO,OACjCiH,IAAI6P,QAAQyiB,QAAU,KAG1B,IAAIoD,IAEJ,GAAI11B,IAAIna,OAAS,QAAU/C,KAAKkO,EAAEimC,YAAa,CAC3CvB,IAAM5yC,KAAKkO,EAAEwnC,cAAcmB,iBAAiBztC,KAAM8T,IAAI6P,cACnD,GAAI7P,IAAIna,OAAS,SAAU,CAC9B6vC,IAAM5yC,KAAKkO,EAAEwnC,cAAc5C,mBAAmB1pC,KAAM,KAAM8T,IAAI6P,aAC3D,CACH6lB,IAAM5yC,KAAKkO,EAAEwnC,cAAc/C,aAAavpC,KAAM8T,IAAI6P,SAGtD6lB,IAAIxxB,IAAI,SAAUwxB,IAAIjT,QAAQ1U,KAAK2nB,MAEnC,GAAI5yC,KAAKw2C,eAAet5B,KAAM,CAC1B01B,IAAIzxB,GAAG,YAAanhB,KAAK82C,eAAe7rB,KAAKjrB,OAGjD,OAAO4yC,KAGX6D,YAAa,SAAU7D,KACnB,IAAI8B,IAAM9B,IAAIjC,aAAa7pC,qBAAqB,QAAQC,KAAK,GAC7D6rC,IAAImE,QAAQrC,IAAM10C,KAAKkO,EAAEimC,YAAYjU,QAAQwU,KAAO,OAGxDoC,eAAgB,SAAUnhC,KACtB3V,KAAKkO,EAAEq3B,eAAeb,mBAAmB/uB,IAAIxL,OAAO20B,iBAI5Dv7B,SAAS4F,SAASssC,YAAa,gBAEhC,CACC7gC,IAAK,YACLzE,IAAK,YACLjD,OAAQ;AC1WZ3J,SAASiF,OAAO,wBAAyB,SAASgmC,OAAQ55B,IAAK1H,QAE3D,IAAI8pC,WAAazzC,SAASkG,OAAO+kC,OAAQ,SAASplC,KAAM2jB,QAAS2J,MAC7DsgB,WAAWltC,MAAMxG,KAAKtD,KAAMoJ,KAAM2jB,SAElC/sB,KAAKkO,EAAEwoB,KAAO,KAEd12B,KAAKmhB,GAAG,SAAUnhB,KAAKi3C,cAAchsB,KAAKjrB,OAE1C,GAAIA,KAAKkO,EAAE6e,QAAQmqB,UAAW,CAC1Bl3C,KAAKmhB,GAAG,QAASnhB,KAAKm3C,WAAWlsB,KAAKjrB,OAG1C,GAAIA,KAAKkO,EAAE6e,QAAQqqB,YAAa,CAC5Bp3C,KAAKmhB,GAAG,SAAUnhB,KAAKq3C,WAAWpsB,KAAKjrB,OAG3C,GAAI02B,KAAM,CACN12B,KAAK+2C,QAAQrgB,QAElB,CACC1sB,OAAQ,CACJinB,SAAU,CACNpsB,QAAS,qBACTuyC,YAAa,KACbF,UAAW,MAEf/G,YAAa,SAASlf,UAClB/jB,OAAOW,UAAUmpC,WAAW/lB,SAAUA,YAI9C8lB,QAAS,SAAUrgB,MACf12B,KAAKkO,EAAEwoB,KAAOA,KAEd,GAAIA,MAAQ12B,KAAKkO,EAAE6gC,WAAY,CAC3B/uC,KAAKkO,EAAE6gC,WAAWuI,QAAQzH,iBAAiBnZ,KAAKoI,aAAc,MAAO,GAGzE,OAAO9+B,MAGXm/B,UAAW,SAAShxB,QAChBnO,KAAKkO,EAAEwoB,KAAKyI,UAAUhxB,QACtB,OAAOnO,MAGXwY,MAAO,WACHxY,KAAKkO,EAAEwoB,MAAQ12B,KAAKkO,EAAEwoB,KAAKle,QAC3B,OAAOxY,MAGXkgC,QAAS,WACL,OAAOlgC,KAAKkO,EAAEwoB,MAGlBugB,cAAe,SAASthC,KACpB,GAAIA,IAAIlV,KAAKukC,SAAW,SAAU,CAC9BrvB,IAAI6L,iBACJxhB,KAAKkO,EAAEwoB,KAAKne,WAIpB4+B,WAAY,WACR,GAAIn3C,KAAKkO,EAAEwoB,KAAM,CACb,IACI,IAAK,IAAI7vB,MAAQ7G,KAAKkO,EAAEwoB,KAAKqI,cAAeh9B,EAAI,EAAGiC,EAAI6C,MAAM3E,OAAQH,EAAIiC,EAAGjC,IAAK,CAC7E,IAAK,oCAAoCiF,KAAKH,MAAME,KAAKhF,GAAGgB,MAAQ,KAAO8D,MAAME,KAAKhF,GAAGw1C,UAAY,EAAG,CACpG1wC,MAAME,KAAKhF,GAAGqW,QACd,QAGV,MAAO9X,OAIjB+2C,WAAY,WACR,GAAIr3C,KAAKkO,EAAEwoB,MAAQ12B,KAAKkO,EAAEwoB,KAAKoI,cAAgBlqB,IAAIqI,QAAQjd,KAAKkO,EAAEwoB,KAAKoI,aAAc,QAAS,MAAO,CACjG9+B,KAAKwY,YAKjBjV,SAAS4F,SAAS6tC,WAAY,eAE/B,CACCpiC,IAAK,YACL1H,OAAQ;ACvFZ3J,SAASiF,OAAO,6CAA8C,SAAU4pC,QAAS4E,YAE7E,IAAIQ,gBAAkB,CAClB1B,eAAgB,SAAU3B,aACtBn0C,KAAKkO,EAAEimC,YAAcA,YACrB,OAAOn0C,MAGX62C,iBAAkB,SAAUztC,KAAM2jB,SAC9B,IAAI6lB,IAAM,IAAIoE,WAAW5tC,KAAM2jB,SAC/B/sB,KAAK6yC,OAAOD,KAEZA,IAAIzxB,GAAG,YAAanhB,KAAKy3C,kBAAkBxsB,KAAKjrB,OAEhD,IAAI00C,IAAM9B,IAAIjC,aAAa7pC,qBAAqB,QAAQC,KAAK,GAC7D6rC,IAAImE,QAAQrC,IAAM10C,KAAKkO,EAAEimC,YAAYjU,QAAQwU,KAAO,MAEpD,OAAO9B,KAGX6E,kBAAmB,SAAU9hC,KACzB,IAAI+gB,KAAO/gB,IAAIxL,OAAO+1B,UAEtB,GAAIxJ,KAAM,CACN,GAAIA,KAAKoI,aAAc,CACnB9+B,KAAKkO,EAAEimC,YAAYhU,WAAWzJ,KAAKoI,cAGvCnpB,IAAIxL,OAAO4sC,QAAQ,SAK/BxzC,SAAS2G,MAAMkoC,QAASoF,kBAEzB,CACCpF,QAAS,gCACT4E,WAAY;ACrChBzzC,SAASiF,OAAO,0CAA2C,WAEvD,IAAIkvC,iBAAmBn0C,SAASkG,OAAO,6BAA8B,SAASsnB,iBAAkBN,QAC5FinB,iBAAiB5tC,MAAMxG,KAAKtD,KAAM+wB,iBAAkBN,SACrD,CACCzmB,OAAQ,CACJinB,SAAU,CACNohB,MAAO,IACP5L,iBAAkB,KAClBmP,0BAA2B,OAInCvtC,KAAM,WACF,IAAI0rC,QAAU/zC,KAAKkxB,uBACfT,OAASzwB,KAAKgxB,WAAW0mB,iBAAiBzmB,UAE9C8iB,QAAQ5kB,qBAAqB,gBAAiB,CAC1ChB,QAAS,kCACTllB,KAAM,CACFopC,MAAO5hB,OAAO4hB,SAItB0B,QAAQnjB,WAAW,SAAU,kCAC7BmjB,QAAQnjB,WAAW,eAAgB,yCAGvCxC,MAAO,WACH,IAAI2lB,QAAU/zC,KAAKkxB,uBACfT,OAASzwB,KAAKgxB,aACd9T,IAAM62B,QAAQxkB,qBAAqB,iBAEvC,GAAIwkB,QAAQzkB,qBAAqB,eAAgB,CAC7CpS,IAAIyR,SAAS,sBACbolB,QAAQnjB,WAAW,aAAc,sCAGrC,GAAImjB,QAAQzkB,qBAAqB,iBAAkB,CAC/CpS,IAAIyR,SAAS,wBAGjB,GAAIolB,QAAQzkB,qBAAqB,QAAS,CACtCykB,QAAQ5kB,qBAAqB,cAAe,CACxChB,QAAS,0DACTllB,KAAM,CACF8jB,QAAS,CACL0Z,iBAAkBhW,OAAOgW,iBACzBmP,0BAA2BnlB,OAAOmlB,4BAG1Cr3B,IAAK,OAGT,GAAIw1B,QAAQzkB,qBAAqB,eAAgB,CAC7CykB,QAAQxkB,qBAAqB,eACxBZ,SAAS,2BAM9BprB,SAAS4F,SAASuuC,iBAAkB;AC9DxCn0C,SAASiF,OAAO,0CAA2C,WAEvD,IAAImvC,iBAAmBp0C,SAASkG,OAAO,6BAA8B,SAASsnB,iBAAkBN,QAC5FknB,iBAAiB7tC,MAAMxG,KAAKtD,KAAM+wB,iBAAkBN,SACrD,CACCrC,MAAO,WACH,IAAI2lB,QAAU/zC,KAAKkxB,uBAEnB,GAAI6iB,QAAQzkB,qBAAqB,iBAAkB,CAC/CykB,QAAQnjB,WAAW,UAAW,mCAGlC,GAAImjB,QAAQzkB,qBAAqB,QAAS,CACtCykB,QAAQ5kB,qBAAqB,cAAe,CACxChB,QAAS,0DACTllB,KAAM,CACF8jB,QAAS/sB,KAAKgxB,cAElBzS,IAAK,OAGTw1B,QAAQxkB,qBAAqB,QACxBZ,SAAS,SAASipB,aACf53C,KAAKmhB,GAAG,qBAAsBy2B,YAAYC,kBAAkB5sB,KAAK2sB,oBAOrFr0C,SAAS4F,SAASwuC,iBAAkB;AC9BxCp0C,SAASiF,OAAO,4CAA6C,SAAUoM,IAAK1H,QAExE,IAAI4qC,YAAcv0C,SAASkG,OAAO,SAASisC,cAAe3oB,SACtD/sB,KAAKkO,EAAI,CACLwnC,cAAeA,cACf3oB,QAAS7f,OAAOW,UAAU,KAAM,GAAIiqC,YAAY7mB,SAAUlE,WAE/D,CACC/iB,OAAQ,CACJinB,SAAU,CACN8mB,OAAQ,gBACRvE,QAAS,MACT5E,OAAQ,OAIhBiJ,kBAAmB,SAAUliC,KACzB,IAAI5R,KAAO4R,IAAIlV,KAAK+Y,QAAQmf,SAAW,KACnCof,OAASh0C,KAAO6Q,IAAIqI,QAAQlZ,KAAM,UAAY,KAElD,IAAKg0C,OAAQ,CACT,OAGJ,UAAWA,SAAW,SAAU,CAC5BA,OAAS/3C,KAAKkO,EAAE6e,QAAQgrB,OAG5B,IAAIvE,QAAU5+B,IAAIqI,QAAQlZ,KAAM,YAAc/D,KAAKkO,EAAE6e,QAAQymB,QACzD5E,OAASh6B,IAAIqI,QAAQlZ,KAAM,WAAa/D,KAAKkO,EAAE6e,QAAQ6hB,OAE3Dj5B,IAAI8L,QACAzhB,KAAKkO,EAAEwnC,cAAc7B,cAAckE,OAAQvE,QAAS5E,QAC/C/sC,KAAK,SAASwrB,QAAUA,QAAU1X,IAAI6L,uBAKvDje,SAAS4F,SAAS2uC,YAAa,gBAEhC,CACCljC,IAAK,YACL1H,OAAQ;AC1CZ3J,SAASiF,OAAO,SAAS8hB,QACrB,IAAIypB,QAAU,IAAIzpB,OAAO0tB,GAAG7mB,iBAAiB,CACzCpoB,OAAU,GACVqoB,WAAc,CACV0U,KAAQ,6CACR5J,MAAS,gDACToJ,KAAQ,6CACR+P,QAAW,sDACXW,QAAW,6DACXxC,QAAW,8DAEf1kB,SAAY,GACZ4B,UAAa,KAGjB1wB,KAAKi4C,GAAKlE,QAAQxiB,kBAClBvxB,KAAKi4C,GAAGroB;AChBZhwB,OAAOs4C,SAAWt4C,OAAOs4C,OAAS,KAElC,SAAU5F,OACN,SAASntC,KAAKK,GACV,UAAWA,IAAM,WAAY,CACzBjC,SAASiF,OAAOhD,QAEb,UAAWA,IAAM,iBAAmBA,EAAE6C,OAAS,YAAa,CAC/D,IAAIf,EAAI/D,SAAS8E,KAAKa,MAAM3F,SAAUiC,EAAE6C,MAExC,UAAW7C,EAAE3D,OAAS,WAAY,CAC9ByF,EAAEzF,KAAK2D,EAAE3D,WAEN,GAAI2D,EAAE3D,MAAQ2D,EAAE3D,gBAAgBP,MAAO,CAC1CgG,EAAEzF,KAAKqH,MAAM3F,SAAUiC,EAAE3D,WAG1B,CACH0B,SAASiF,OAAOU,MAAM3F,SAAUiC,IAKxC,MAAO8sC,MAAMpwC,OAAQ,CACjBiD,KAAKmtC,MAAM7sC,SAIf6sC,MAAMzvC,KAAO,WACT,IAAK,IAAId,EAAI,EAAGA,EAAIwG,UAAUrG,OAAQH,IAAK,CACvCoD,KAAKoD,UAAUxG,OA5B3B,CAgCGnC,OAAOs4C","file":"nittro.min.js","sourcesContent":["if (typeof module !== 'object' || typeof module.exports !== 'object') {\n    window.Nette = {\n        noInit: true\n    };\n}\n","(function () {\n  global = this\n\n  var queueId = 1\n  var queue = {}\n  var isRunningTask = false\n\n  if (!global.setImmediate)\n    global.addEventListener('message', function (e) {\n      if (e.source == global){\n        if (isRunningTask)\n          nextTick(queue[e.data])\n        else {\n          isRunningTask = true\n          try {\n            queue[e.data]()\n          } catch (e) {}\n\n          delete queue[e.data]\n          isRunningTask = false\n        }\n      }\n    })\n\n  function nextTick(fn) {\n    if (global.setImmediate) setImmediate(fn)\n    // if inside of web worker\n    else if (global.importScripts) setTimeout(fn)\n    else {\n      queueId++\n      queue[queueId] = fn\n      global.postMessage(queueId, '*')\n    }\n  }\n\n  Deferred.resolve = function (value) {\n    if (!(this._d == 1))\n      throw TypeError()\n\n    if (value instanceof Deferred)\n      return value\n\n    return new Deferred(function (resolve) {\n        resolve(value)\n    })\n  }\n\n  Deferred.reject = function (value) {\n    if (!(this._d == 1))\n      throw TypeError()\n\n    return new Deferred(function (resolve, reject) {\n        reject(value)\n    })\n  }\n\n  Deferred.all = function (arr) {\n    if (!(this._d == 1))\n      throw TypeError()\n\n    if (!(arr instanceof Array))\n      return Deferred.reject(TypeError())\n\n    var d = new Deferred()\n\n    function done(e, v) {\n      if (v)\n        return d.resolve(v)\n\n      if (e)\n        return d.reject(e)\n\n      var unresolved = arr.reduce(function (cnt, v) {\n        if (v && v.then)\n          return cnt + 1\n        return cnt\n      }, 0)\n\n      if(unresolved == 0)\n        d.resolve(arr)\n\n      arr.map(function (v, i) {\n        if (v && v.then)\n          v.then(function (r) {\n            arr[i] = r\n            done()\n            return r\n          }, done)\n      })\n    }\n\n    done()\n\n    return d\n  }\n\n  Deferred.race = function (arr) {\n    if (!(this._d == 1))\n      throw TypeError()\n\n    if (!(arr instanceof Array))\n      return Deferred.reject(TypeError())\n\n    if (arr.length == 0)\n      return new Deferred()\n\n    var d = new Deferred()\n\n    function done(e, v) {\n      if (v)\n        return d.resolve(v)\n\n      if (e)\n        return d.reject(e)\n\n      var unresolved = arr.reduce(function (cnt, v) {\n        if (v && v.then)\n          return cnt + 1\n        return cnt\n      }, 0)\n\n      if(unresolved == 0)\n        d.resolve(arr)\n\n      arr.map(function (v, i) {\n        if (v && v.then)\n          v.then(function (r) {\n            done(null, r)\n          }, done)\n      })\n    }\n\n    done()\n\n    return d\n  }\n\n  Deferred._d = 1\n\n\n  /**\n   * @constructor\n   */\n  function Deferred(resolver) {\n    'use strict'\n    if (typeof resolver != 'function' && resolver != undefined)\n      throw TypeError()\n\n    if (typeof this != 'object' || (this && this.then))\n      throw TypeError()\n\n    // states\n    // 0: pending\n    // 1: resolving\n    // 2: rejecting\n    // 3: resolved\n    // 4: rejected\n    var self = this,\n      state = 0,\n      val = 0,\n      next = [],\n      fn, er;\n\n    self['promise'] = self\n\n    self['resolve'] = function (v) {\n      fn = self.fn\n      er = self.er\n      if (!state) {\n        val = v\n        state = 1\n\n        nextTick(fire)\n      }\n      return self\n    }\n\n    self['reject'] = function (v) {\n      fn = self.fn\n      er = self.er\n      if (!state) {\n        val = v\n        state = 2\n\n        nextTick(fire)\n\n      }\n      return self\n    }\n\n    self['_d'] = 1\n\n    self['then'] = function (_fn, _er) {\n      if (!(this._d == 1))\n        throw TypeError()\n\n      var d = new Deferred()\n\n      d.fn = _fn\n      d.er = _er\n      if (state == 3) {\n        d.resolve(val)\n      }\n      else if (state == 4) {\n        d.reject(val)\n      }\n      else {\n        next.push(d)\n      }\n\n      return d\n    }\n\n    self['catch'] = function (_er) {\n      return self['then'](null, _er)\n    }\n\n    var finish = function (type) {\n      state = type || 4\n      next.map(function (p) {\n        state == 3 && p.resolve(val) || p.reject(val)\n      })\n    }\n\n    try {\n      if (typeof resolver == 'function')\n        resolver(self['resolve'], self['reject'])\n    } catch (e) {\n      self['reject'](e)\n    }\n\n    return self\n\n    // ref : reference to 'then' function\n    // cb, ec, cn : successCallback, failureCallback, notThennableCallback\n    function thennable (ref, cb, ec, cn) {\n      // Promises can be rejected with other promises, which should pass through\n      if (state == 2) {\n        return cn()\n      }\n      if ((typeof val == 'object' || typeof val == 'function') && typeof ref == 'function') {\n        try {\n\n          // cnt protects against abuse calls from spec checker\n          var cnt = 0\n          ref.call(val, function (v) {\n            if (cnt++) return\n            val = v\n            cb()\n          }, function (v) {\n            if (cnt++) return\n            val = v\n            ec()\n          })\n        } catch (e) {\n          val = e\n          ec()\n        }\n      } else {\n        cn()\n      }\n    };\n\n    function fire() {\n\n      // check if it's a thenable\n      var ref;\n      try {\n        ref = val && val.then\n      } catch (e) {\n        val = e\n        state = 2\n        return fire()\n      }\n\n      thennable(ref, function () {\n        state = 1\n        fire()\n      }, function () {\n        state = 2\n        fire()\n      }, function () {\n        try {\n          if (state == 1 && typeof fn == 'function') {\n            val = fn(val)\n          }\n\n          else if (state == 2 && typeof er == 'function') {\n            val = er(val)\n            state = 1\n          }\n        } catch (e) {\n          val = e\n          return finish()\n        }\n\n        if (val == self) {\n          val = TypeError()\n          finish()\n        } else thennable(ref, function () {\n            finish(3)\n          }, finish, function () {\n            finish(state == 1 && 3)\n          })\n\n      })\n    }\n\n\n  }\n\n  // Export our library object, either for node.js or as a globally scoped variable\n  if (typeof module != 'undefined') {\n    module['exports'] = Deferred\n  } else {\n    global['Promise'] = global['Promise'] || Deferred\n  }\n})()\n","var _context = (function() {\n    var t = {},\n        api,\n        loaded = [],\n        loading = {},\n        REQ_TIMEOUT = 30000,\n        undefined,\n        doc = document,\n        elem = function(n) { return doc.createElement(n); },\n        win = window,\n        loc = win.history.location || win.location, // support for HTML5 history polyfill\n        setTimeout = function(c, t) { return win.setTimeout(c, t); },\n        clearTimeout = function(t) { return win.clearTimeout(t); },\n        promise = Promise,\n        resolver = null,\n        nsStack = [],\n        nonce = null,\n        map = {\n            names: [],\n            classes: []\n        };\n\n    function resolveUrl(u) {\n        resolver || (resolver = elem('a'));\n        resolver.href = u;\n        return resolver.href;\n    }\n\n\n    function isRelative(u) {\n        try {\n            var len = /^https?:\\/\\/.+?(\\/|$)/i.exec(loc.href)[0].length;\n            return u.substr(0, len) === loc.href.substr(0, len);\n\n        } catch (err) {\n            return false;\n\n        }\n    }\n\n    var xhrFactory = (function(o, f) {\n        while(o.length) {\n            try {\n                f = o.shift();\n                f();\n\n                return f;\n\n            } catch (e) {}\n        }\n\n        return function() { throw new Error(); };\n\n    })([\n        function() { return new XMLHttpRequest(); },\n        function() { return new ActiveXObject('Msxml2.XMLHTTP'); },\n        function() { return new ActiveXObject('Msxml3.XMLHTTP'); },\n        function() { return new ActiveXObject('Microsoft.XMLHTTP'); }\n    ]);\n\n    var xdrFactory = (function() {\n        try {\n            if ('withCredentials' in new XMLHttpRequest()) {\n                return function() { return new XMLHttpRequest(); };\n\n            } else if (win.XDomainRequest !== undefined) {\n                return function() { return new win.XDomainRequest(); };\n\n            }\n\n        } catch (err) { }\n\n        return function() { throw new Error(); };\n\n    })();\n\n    function xhr(u) {\n        return new promise(function(fulfill, reject) {\n            var req,\n                m;\n\n            if (isRelative(u)) {\n                req = xhrFactory();\n\n            } else {\n                req = xdrFactory();\n\n            }\n\n            req.open('GET', u, true);\n\n            var f = function () {\n                m && clearTimeout(m);\n                fulfill(req);\n            };\n\n            var r = function () {\n                m && clearTimeout(m);\n                reject(req);\n            };\n\n            if ('onsuccess' in req) {\n                req.onsuccess = f;\n                req.onerror = r;\n\n            } else if (win.XDomainRequest !== undefined && req instanceof win.XDomainRequest) {\n                req.onload = f;\n                req.onerror = r;\n\n            } else {\n                req.onreadystatechange = function() {\n                    if (req.readyState !== 4) {\n                        return;\n\n                    }\n\n                    if (req.status === 200) {\n                        f();\n\n                    } else {\n                        r();\n\n                    }\n                };\n            }\n\n            req.send();\n\n            m = setTimeout(function() {\n                if (req.readyState && req.readyState < 4) try {\n                    req.abort();\n\n                } catch (err) { }\n\n                m = null;\n                r();\n\n            }, REQ_TIMEOUT);\n\n        });\n    }\n\n    function resolveNonce() {\n        if (nonce !== null) {\n            return nonce;\n        }\n\n        var elems = document.getElementsByTagName('script'),\n            i, n, elem;\n\n        for (i = 0, n = elems.length; i < n; i++) {\n            elem = elems.item(i);\n\n            if (/^((application|text)\\/javascript)?$/i.test(elem.type) && elem.nonce) {\n                return nonce = elem.nonce;\n            }\n        }\n\n        return nonce = false;\n    }\n\n    function exec(s, t, u) {\n        var e, o = resolveNonce();\n\n        if (!t) {\n            if (u.match(/\\.(?:less|css)/i)) {\n                t = 'text/css';\n            } else  {\n                t = 'application/javascript';\n            }\n        } else {\n            t = t.replace(/\\s*;.*$/, '').toLowerCase();\n        }\n\n        if (t === 'text/css') {\n            e = elem('style');\n            e.type = t;\n            o && e.setAttribute('nonce', o);\n\n            u = u.replace(/[^\\/]+$/, '');\n            s = s.replace(/url\\s*\\((['\"])?(?:\\.\\/)?(.+?)\\1\\)/, function (m, q, n) {\n                q || (q = '\"');\n\n                if (n.match(/^(?:(?:https?:)?\\/)?\\//)) {\n                    return 'url(' + q + n + q + ')';\n                } else {\n                    return 'url(' + q + resolveUrl(u + n) + q + ')';\n                }\n            });\n\n            if (e.styleSheet) {\n                e.styleSheet.cssText = s;\n            } else {\n                e.appendChild(doc.createTextNode(s));\n            }\n\n            doc.head.appendChild(e);\n\n        } else {\n            e = elem('script');\n            e.type = t;\n            e.text = s;\n            o && e.setAttribute('nonce', o);\n            doc.head.appendChild(e).parentNode.removeChild(e);\n        }\n    }\n\n    function lookup(s, c) {\n        var i = map.names.indexOf(s);\n\n        if (i > -1) {\n            return map.classes[i];\n\n        }\n\n        var r = t,\n            p = s.split('.'),\n            n;\n\n        while (p.length) {\n            n = p.shift();\n            if (r[n] === undefined) {\n                if (c) {\n                    r[n] = {};\n\n                } else {\n                    throw new Error(s + ' not found in context');\n\n                }\n            }\n\n            r = r[n];\n\n        }\n\n        map.names.push(s);\n        map.classes.push(r);\n\n        return r;\n\n    }\n\n    function lookupClass(o) {\n        if (typeof o === 'object' && o.constructor !== Object) {\n            o = o.constructor;\n\n        }\n\n        if (typeof o !== 'function' && typeof o !== 'object') {\n            throw new Error('Cannot lookup class name of non-object');\n\n        }\n\n        var i = map.classes.indexOf(o);\n\n        return i === -1 ? false : map.names[i];\n\n    }\n\n    function load() {\n        var u, a, p = promise.resolve(true);\n\n        for (a = 0; a < arguments.length; a++) {\n            if (typeof arguments[a] === 'function') {\n                p = p.then(function(f) {\n                    return function () {\n                        return invoke(f);\n\n                    };\n                }(arguments[a]));\n\n            } else if (typeof arguments[a] === 'string') {\n                u = resolveUrl(arguments[a]);\n\n                if (loaded.indexOf(u) === -1) {\n                    if (loading[u]) {\n                        p = p.then(function (p) {\n                            return function () {\n                                return p;\n\n                            };\n                        }(loading[u]));\n                    } else {\n                        p = loading[u] = function (p, u) {\n                            return new promise(function (f, r) {\n                                xhr(u).then(function (xhr) {\n                                    p.then(function () {\n                                        exec(xhr.responseText, xhr.getResponseHeader('Content-Type'), u);\n                                        delete loading[u];\n                                        loaded.push(u);\n                                        f();\n\n                                    }, r);\n                                });\n                            });\n\n                        }(p, u);\n                    }\n                }\n            }\n        }\n\n        return a = {\n            then: function (fulfilled, rejected) {\n                p.then(function () {\n                    fulfilled && invoke(fulfilled);\n                }, function () {\n                    rejected && invoke(rejected);\n                });\n\n                return a;\n\n            }\n        };\n    }\n\n\n    function invoke(ns, f, i) {\n        if (i === undefined && typeof ns === 'function') {\n            i = f;\n            f = ns;\n            ns = null;\n\n        }\n\n        if (ns) {\n            nsStack.unshift(ns, ns = lookup(ns, true));\n\n        } else {\n            ns = t;\n            nsStack.unshift(null, ns);\n\n        }\n\n        var params = f.length ? f.toString().match(/^function\\s*\\((.*?)\\)/i)[1].split(/\\s*,\\s*/) : [],\n            args = [],\n            p, c, r;\n\n        for (p = 0; p < params.length; p++) {\n            if (params[p] === 'context') {\n                args.push(api);\n\n            } else if (params[p] === '_NS_') {\n                args.push(ns);\n\n            } else if (params[p] === 'undefined') {\n                args.push(undefined);\n\n            } else if (i !== undefined && params[p] in i) {\n                c = i[params[p]];\n\n                if (typeof c === 'string') {\n                    c = lookup(c);\n\n                }\n\n                args.push(c);\n\n            } else if (ns[params[p]] !== undefined) {\n                args.push(ns[params[p]]);\n\n            } else if (t[params[p]] !== undefined) {\n                args.push(t[params[p]]);\n\n            } else {\n                throw new Error('\"' + params[p] + '\" not found in context');\n\n            }\n        }\n\n        r = f.apply(ns, args);\n\n        nsStack.shift();\n        nsStack.shift();\n        return r;\n\n    }\n\n    function register(constructor, name) {\n        var ns = name.split(/\\./g),\n            key = ns.pop();\n\n        if (ns.length) {\n            ns = lookup(ns.join('.'), true);\n\n        } else {\n            if (nsStack.length && nsStack[0] !== null) {\n                name = nsStack[0] + '.' + name;\n                ns = nsStack[1];\n\n            } else {\n                ns = t;\n\n            }\n        }\n\n        ns[key] = constructor;\n\n        map.names.push(name);\n        map.classes.push(constructor);\n        return api;\n\n    }\n\n    function __ns() {\n        if (arguments.length) {\n            nsStack.unshift(arguments[0], arguments[1]);\n\n        } else {\n            nsStack.shift();\n            nsStack.shift();\n        }\n    }\n\n    function extend(parent, constructor, proto) {\n        if (!proto) {\n            proto = constructor;\n            constructor = parent;\n            parent = null;\n\n        }\n\n        if (!parent) {\n            parent = Object;\n\n        } else if (typeof parent === 'string') {\n            parent = lookup(parent);\n\n        }\n\n        var tmp = function () {};\n        tmp.prototype = parent.prototype;\n        constructor.prototype = new tmp();\n        constructor.prototype.constructor = constructor;\n        constructor.Super = parent;\n\n        if (proto) {\n            if (proto.hasOwnProperty('STATIC') && proto.STATIC) {\n                copyProps(constructor, proto.STATIC);\n\n            }\n\n            copyProps(constructor.prototype, proto);\n\n        }\n\n        return constructor;\n\n    }\n\n    function mixin(target, source, map) {\n        if (typeof target === 'string') {\n            target = lookup(target);\n\n        }\n\n        if (typeof source === 'string') {\n            source = lookup(source);\n\n        }\n\n        if (source.hasOwnProperty('STATIC') && source.STATIC) {\n            merge(target, source.STATIC);\n\n        }\n\n        copyProps(target.prototype, source, map);\n        return target;\n\n    }\n\n    function copyProps(target, source, map) {\n        var key;\n\n        for (key in source) {\n            if (source.hasOwnProperty(key) && key !== 'STATIC') {\n                target[map && key in map ? map[key] : key] = source[key];\n\n            }\n        }\n    }\n\n    function merge(a, b) {\n        for (var key in b) {\n            if (b.hasOwnProperty(key)) {\n                if (!a.hasOwnProperty(key)) {\n                    a[key] = b[key];\n\n                } else if (typeof a[key] === 'object' && typeof b[key] === 'object') {\n                    if (!a[key]) {\n                        a[key] = b[key];\n\n                    } else if (b[key]) {\n                        merge(a[key], b[key]);\n\n                    }\n                } else {\n                    a[key] = b[key];\n\n                }\n            }\n        }\n    }\n\n    return api = {\n        lookup: lookup,\n        lookupClass: lookupClass,\n        invoke: invoke,\n        load: load,\n        extend: extend,\n        mixin: mixin,\n        register: register,\n        __ns: __ns\n    };\n\n})();\n","_context.invoke('Utils', function(undefined) {\n\n    var Strings = {\n        applyModifiers: function(s) {\n            var f = Array.prototype.slice.call(arguments, 1),\n                i = 0,\n                a, m;\n\n            for (; i < f.length; i++) {\n                a = f[i].split(':');\n                m = a.shift();\n                a.unshift(s);\n                s = Strings[m].apply(Strings, a);\n\n            }\n\n            return s;\n\n        },\n\n        toString: function(s) {\n            return s === undefined ? 'undefined' : (typeof s === 'string' ? s : (s.toString !== undefined ? s.toString() : Object.prototype.toString.call(s)));\n\n        },\n\n        sprintf: function(s) {\n            return Strings.vsprintf(s, Array.prototype.slice.call(arguments, 1));\n\n        },\n\n        vsprintf: function(s, args) {\n            var n = 0;\n\n            return s.replace(/%(?:(\\d+)\\$)?(\\.\\d+|\\[.*?:.*?\\])?([idsfa%])/g, function(m, a, p, f) {\n                if (f === '%') {\n                    return f;\n\n                }\n\n                a = a ? parseInt(a) - 1 : n++;\n\n                if (args[a] === undefined) {\n                    throw new Error('Missing parameter #' + (a + 1));\n\n                }\n\n                a = args[a];\n\n                switch (f) {\n                    case 's':\n                        return Strings.toString(a);\n\n                    case 'i':\n                    case 'd':\n                        return parseInt(a);\n\n                    case 'f':\n                        a = parseFloat(a);\n\n                        if (p && p.match(/^\\.\\d+$/)) {\n                            a = a.toFixed(parseInt(p.substr(1)));\n\n                        }\n\n                        return a;\n\n                    case 'a':\n                        p = p && p.match(/^\\[.*:.*\\]$/) ? p.substr(1, p.length - 2).split(':') : [', ', ', '];\n                        return a.length === 0 ? '' : a.slice(0, -1).join(p[0]) + (a.length > 1 ? p[1] : '') + a[a.length - 1];\n\n                }\n\n                return m;\n\n            });\n        },\n\n        webalize: function(s, chars, ws) {\n            if (ws) {\n                s = s.replace(/\\s+/g, '_');\n\n            }\n\n            s = s.replace(new RegExp('[^_A-Za-z\\u00C0-\\u017F' + Strings.escapeRegex(chars || '').replace(/\\\\-/g, '-') + ']+', 'g'), '-');\n\n            return Strings.trim(s, '_-');\n\n        },\n\n        escapeRegex: function(s) {\n            return s.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n\n        },\n\n        split: function(s, re, offsetCapture, noEmpty, delimCapture) {\n            if (re instanceof RegExp) {\n                re = new RegExp(re.source, [re.ignoreCase ? 'i' : '', re.multiline ? 'm' : '', 'g'].filter(function(v) { return !!v; }).join(''))\n\n            } else {\n                re = new RegExp(re, 'g');\n\n            }\n\n            var r = [],\n                len = 0;\n\n            s = s.replace(re, function(m, p, ofs) {\n                ofs = arguments[arguments.length - 2];\n                p = s.substring(len, ofs);\n\n                if (p.length && !p.match(/^[\\t ]+$/) || !noEmpty) {\n                    r.push(offsetCapture ? [p, len] : s.substring(len, ofs));\n\n                }\n\n                if (delimCapture && (m.length && !m.match(/^[\\t ]+$/) || !noEmpty)) {\n                    r.push(offsetCapture ? [m, ofs] : m);\n\n                }\n\n                len = ofs + m.length;\n\n                return m;\n\n            });\n\n            if (len < s.length || !noEmpty) {\n                s = s.substring(len);\n                (!noEmpty || (s.length && !s.match(/^[\\t ]+$/))) && r.push(offsetCapture ? [s, len] : s);\n\n            }\n\n            return r;\n\n        },\n\n        trim: function(s, c) {\n            return Strings._trim(s, c, true, true);\n\n        },\n\n        trimLeft: function(s, c) {\n            return Strings._trim(s, c, true, false);\n\n        },\n\n        trimRight: function(s, c) {\n            return Strings._trim(s, c, false, true);\n\n        },\n\n        _trim: function (s, c, l, r) {\n            if (!c) {\n                c = \" \\t\\n\\r\\0\\x0B\\xC2\\xA0\";\n\n            }\n\n            var re = [];\n            c = '[' + Strings.escapeRegex(c) + ']+';\n            l && re.push('^', c);\n            l && r && re.push('|');\n            r && re.push(c, '$');\n\n            return s.replace(new RegExp(re.join(''), 'ig'), '');\n\n        },\n\n        firstUpper: function(s) {\n            return s.substr(0, 1).toUpperCase() + s.substr(1);\n\n        },\n\n        compare: function(a, b, len) {\n            if (typeof a !== \"string\" || typeof b !== 'string') {\n                return false;\n\n            }\n\n            if (!len) {\n                len = Math.min(a.length, b.length);\n\n            }\n\n            return a.substr(0, len).toLowerCase() === b.substr(0, len).toLowerCase();\n\n        },\n\n        contains: function(h, n) {\n            return h.indexOf(n) !== -1;\n\n        },\n\n        isNumeric: function(s) {\n            return Object.prototype.toString.call(s) !== '[object Array]' && (s - parseFloat(s) + 1) >= 0;\n\n        },\n\n        escapeHtml: function(s) {\n            return s\n                .replace(/&/g, '&amp;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')\n                .replace(/\"/g, '&quot;')\n                .replace(/'/g, '&#039;');\n\n        },\n\n        nl2br: function(s, collapse) {\n            return s.replace(collapse ? /\\n+/g : /\\n/g, '<br />');\n\n        },\n\n        random: function(len, chars) {\n            chars = (chars || 'a-z0-9').replace(/.-./g, function(m, a, b) {\n                a = m.charCodeAt(0);\n                b = m.charCodeAt(2);\n                var n = Math.abs(b - a),\n                    c = new Array(n),\n                    o = Math.min(a, b),\n                    i = 0;\n\n                for (; i <= n; i++) {\n                    c[i] = o + i;\n                }\n\n                return String.fromCharCode.apply(null, c);\n\n            });\n\n            len || (len = 8);\n\n            var s = new Array(len),\n                n = chars.length - 1,\n                i;\n\n            for (i = 0; i < len; i++) {\n                s[i] = chars[Math.round(Math.random() * n)];\n\n            }\n\n            return s.join('');\n\n        }\n    };\n\n    _context.register(Strings, 'Strings');\n\n});\n","_context.invoke('Utils', function(undefined) {\n\n    var Arrays = {\n        isArrayLike: function(a) {\n            return typeof a === 'object' && a.length !== undefined;\n\n        },\n\n        shuffle: function (a) {\n            var c = a.length, t, i;\n\n            // While there are elements in the array\n            while (c--) {\n                // Pick a random index\n                i = (Math.random() * c) | 0;\n\n                // And swap the last element with it\n                t = a[c];\n                a[c] = a[i];\n                a[i] = t;\n            }\n\n            return a;\n\n        },\n\n        createFrom: function(a, s, e) {\n            if (a.length === undefined) {\n                throw new Error('Invalid argument, only array-like objects can be supplied');\n\n            }\n\n            return Array.prototype.slice.call(a, s || 0, e || a.length);\n\n        },\n\n        getKeys: function(a) {\n            var keys = [], k;\n\n            if (Array.isArray(a)) {\n                for (k = 0; k < a.length; k++) {\n                    keys.push(k);\n\n                }\n            } else {\n                for (k in a) {\n                    keys.push(k);\n\n                }\n            }\n\n            return keys;\n\n        },\n\n        filterKeys: function() {\n            var args = Arrays.createFrom(arguments),\n                t = args.shift(),\n                a, i, r = {}, rem;\n\n            rem = function(k) {\n                if (r[k] === undefined) {\n                    r[k] = t[k];\n                    delete t[k];\n\n                }\n            };\n\n            while (args.length) {\n                a = args.shift();\n\n                if (typeof a === 'object') {\n                    if (a instanceof Array) {\n                        for (i = 0; i < a.length; i++) {\n                            rem(a[i]);\n\n                        }\n                    } else {\n                        for (i in a) {\n                            rem(i);\n\n                        }\n                    }\n                } else {\n                    rem(a);\n\n                }\n            }\n        },\n\n        getValues: function(a) {\n            var arr = [], k;\n\n            for (k in a) {\n                arr.push(a[k]);\n\n            }\n\n            return arr;\n\n        },\n\n        merge: function() {\n            var args = Arrays.createFrom(arguments),\n                a = args.shift(),\n                r = false,\n                b, i;\n\n            if (typeof a === 'boolean') {\n                r = a;\n                a = args.shift();\n\n            }\n\n            if (!a) {\n                a = [];\n            }\n\n            while (args.length) {\n                b = args.shift();\n                if (b instanceof Array) {\n                    for (i = 0; i < b.length; i++) {\n                        if (r && typeof b[i] === 'object' && Object.prototype.toString.call(b[i]) === '[object Object]') {\n                            a.push(Arrays.mergeTree(r, {}, b[i]));\n\n                        } else {\n                            a.push(b[i]);\n\n                        }\n                    }\n                }\n            }\n\n            return a;\n\n        },\n\n        mergeTree: function() {\n            var r = false,\n                args = Arrays.createFrom(arguments),\n                ofs = 1,\n                t = args.shift(),\n                props = [];\n\n            if (typeof t === 'boolean') {\n                r = t;\n                t = args.shift();\n                ofs = 2;\n\n            }\n\n            while (args.length) {\n                var o = args.pop(),\n                    p, a, i;\n\n                if (typeof o !== 'object' || o === null) {\n                    continue;\n\n                }\n\n                if (!t) {\n                    t = {};\n\n                }\n\n                for (p in o) {\n                    if (!o.hasOwnProperty(p) || props.indexOf(p) !== -1) {\n                        continue;\n\n                    }\n\n                    if (typeof o[p] === 'object') {\n                        if (r) {\n                            if (o[p] instanceof Array) {\n                                a = [r, t[p] || null];\n\n                                for (i = ofs; i < arguments.length; i++) {\n                                    a.push(arguments[i][p] || null);\n\n                                }\n\n                                t[p] = Arrays.merge.apply(this, a);\n\n                            } else {\n                                a = [r, null];\n\n                                for (i = ofs; i < arguments.length; i++) {\n                                    a.push(arguments[i] ? arguments[i][p] || null : null);\n\n                                }\n\n                                t[p] = Arrays.mergeTree.apply(this, a) || t[p];\n\n                            }\n\n                        } else {\n                            t[p] = t[p] === undefined ? o[p] : (o[p] === null ? t[p] : o[p]);\n\n                        }\n                    } else {\n                        t[p] = o[p];\n\n                    }\n\n                    props.push(p);\n\n                }\n            }\n\n            return t;\n\n        },\n\n        walk: function(r, a, f) {\n            if (typeof r !== \"boolean\") {\n                f = a;\n                a = r;\n                r = false;\n            }\n\n            var i,\n                p = function(k, v) {\n                    if (r && (v instanceof Array || v instanceof Object)) {\n                        Arrays.walk(r, v, f);\n\n                    } else {\n                        f.call(v, k, v);\n\n                    }\n                };\n\n            if (a instanceof Array) {\n                for (i = 0; i < a.length; i++) {\n                    p(i, a[i]);\n\n                }\n            } else if (a instanceof Object) {\n                for (i in a) {\n                    p(i, a[i]);\n\n                }\n            } else {\n                p(null, a);\n\n            }\n        }\n    };\n\n    _context.register(Arrays, 'Arrays');\n\n});\n","_context.invoke('Utils', function (Arrays, undefined) {\n\n    var HashMap = _context.extend(function (src) {\n        this._ = {\n            keys: [],\n            values: [],\n            nonNumeric: 0,\n            nextNumeric: 0\n        };\n\n        if (src) {\n            this.merge(src);\n\n        }\n    }, {\n        STATIC: {\n            from: function (data, keys) {\n                if (!keys) {\n                    return data instanceof HashMap ? data.clone() : new HashMap(data);\n\n                } else if (!Array.isArray(keys)) {\n                    throw new Error('Invalid argument supplied to HashMap.from(): the second argument must be an array');\n\n                }\n\n                var map = new HashMap(),\n                    i, n = keys.length,\n                    k,\n                    arr = Array.isArray(data);\n\n                for (i = 0; i < n; i++) {\n                    k = arr ? i : keys[i];\n\n                    if (data[k] !== undefined) {\n                        map.set(keys[i], data[k]);\n\n                    }\n                }\n\n                return map;\n\n            }\n        },\n\n        length: 0,\n\n        isList: function () {\n            return this._.nonNumeric === 0;\n\n        },\n\n        clone: function (deep) {\n            var o = new HashMap();\n            o._.keys = this._.keys.slice();\n            o._.nextNumeric = this._.nextNumeric;\n            o.length = this.length;\n\n            if (deep) {\n                o._.values = this._.values.map(function (v) {\n                    return v instanceof HashMap ? v.clone(deep) : v;\n                });\n            } else {\n                o._.values = this._.values.slice();\n\n            }\n\n            return o;\n\n        },\n\n        merge: function (src) {\n            if (src instanceof HashMap || Array.isArray(src)) {\n                src.forEach(function(value, key) { this.set(key, value); }, this);\n\n            } else if (typeof src === 'object' && src !== null) {\n                for (var k in src) {\n                    if (src.hasOwnProperty(k)) {\n                        this.set(k, src[k]);\n\n                    }\n                }\n            } else {\n                throw new TypeError('HashMap.merge() expects the first argument to be an array or an object, ' + (typeof src) + ' given');\n\n            }\n\n            return this;\n\n        },\n\n        append: function (src) {\n            if (src instanceof HashMap || Array.isArray(src)) {\n                src.forEach(function (value, key) {\n                    if (typeof key === 'number') {\n                        this.push(value);\n\n                    } else {\n                        this.set(key, value);\n\n                    }\n                }, this);\n            } else {\n                this.merge(src);\n\n            }\n\n            return this;\n\n        },\n\n        push: function (value) {\n            for (var i = 0; i < arguments.length; i++) {\n                this._.keys.push(this._.nextNumeric);\n                this._.values.push(arguments[i]);\n                this._.nextNumeric++;\n                this.length++;\n\n            }\n\n            return this;\n\n        },\n\n        pop: function () {\n            if (!this.length) {\n                return null;\n\n            }\n\n            var k = this._.keys.pop();\n\n            if (typeof k === 'number') {\n                if (k + 1 === this._.nextNumeric) {\n                    this._.nextNumeric--;\n\n                }\n            } else {\n                this._.nonNumeric--;\n\n            }\n\n            this.length--;\n            return this._.values.pop();\n\n        },\n\n        shift: function () {\n            if (!this.length) {\n                return null;\n\n            }\n\n            if (typeof this._.keys[0] === 'number') {\n                this._.nextNumeric--;\n                this._shiftKeys(1, this.length, -1);\n\n            } else {\n                this._.nonNumeric--;\n\n            }\n\n            this.length--;\n            this._.keys.shift();\n            return this._.values.shift();\n\n        },\n\n        unshift: function (value) {\n            var values = Arrays.createFrom(arguments),\n                n = values.length,\n                i = 0,\n                keys = new Array(n);\n\n            while (i < n) {\n                keys[i] = i++;\n            }\n\n            keys.unshift(0, 0);\n            values.unshift(0, 0);\n\n            this._shiftKeys(0, this.length, n);\n            this._.keys.splice.apply(this._.keys, keys);\n            this._.values.splice.apply(this._.values, values);\n            this._.nextNumeric += n;\n            this.length += n;\n            return this;\n\n        },\n\n        slice: function (from, to) {\n            (from === undefined) && (from = 0);\n            (from < 0) && (from += this.length);\n            (to === undefined) && (to = this.length);\n            (to < 0) && (to += this.length);\n\n            var o = new HashMap();\n\n            o._.keys = this._.keys.slice(from, to).map(function(k) {\n                if (typeof k === 'number') {\n                    k = o._.nextNumeric;\n                    o._.nextNumeric++;\n                    return k;\n\n                } else {\n                    o._.nonNumeric++;\n                    return k;\n\n                }\n            });\n\n            o._.values = this._.values.slice(from, to);\n            o.length = o._.keys.length;\n\n            return o;\n\n        },\n\n        splice: function (from, remove) {\n            var values = Arrays.createFrom(arguments),\n                keys = values.slice().map(function() { return -1; }),\n                removed, i;\n\n            keys[0] = values[0];\n            keys[1] = values[1];\n\n            this._.keys.splice.apply(this._.keys, keys);\n            removed = this._.values.splice.apply(this._.values, values);\n\n            this.length = this._.keys.length;\n            this._.nextNumeric = 0;\n            this._.nonNumeric = 0;\n\n            for (i = 0; i < this.length; i++) {\n                if (typeof this._.keys[i] === 'number') {\n                    this._.keys[i] = this._.nextNumeric;\n                    this._.nextNumeric++;\n\n                } else {\n                    this._.nonNumeric++;\n\n                }\n            }\n\n            return removed;\n\n        },\n\n        'set': function (key, value) {\n            var i = this._.keys.indexOf(key);\n\n            if (i === -1) {\n                this._.keys.push(key);\n                this._.values.push(value);\n                this.length++;\n\n                if (typeof key === 'number') {\n                    if (key >= this._.nextNumeric) {\n                        this._.nextNumeric = key + 1;\n\n                    }\n                } else {\n                    this._.nonNumeric++;\n\n                }\n            } else {\n                this._.values[i] = value;\n\n            }\n\n            return this;\n\n        },\n\n        'get': function (key, need) {\n            var i = this._.keys.indexOf(key);\n\n            if (i > -1) {\n                return this._.values[i];\n\n            } else if (need) {\n                throw new RangeError('Key ' + key + ' not present in HashMap');\n\n            }\n\n            return null;\n\n        },\n\n        has: function (key) {\n            var index = this._.keys.indexOf(key);\n            return index > -1 && this._.values[index] !== undefined;\n\n        },\n\n        remove: function (key, strict) {\n            var index = this._.keys.indexOf(key);\n\n            if (index > -1) {\n                this._.keys.splice(index, 1);\n                this._.values.slice(index, 1);\n                this.length--;\n\n                if (typeof key === 'number') {\n                    if (key + 1 === this._.nextNumeric) {\n                        this._.nextNumeric--;\n                    }\n                } else {\n                    this._.nonNumeric--;\n                }\n            } else if (strict) {\n                throw new RangeError('Key ' + key + ' not present in HashMap');\n            }\n\n            return this;\n        },\n\n        forEach: function (callback, thisArg) {\n            for (var i = 0; i < this.length; i++) {\n                callback.call(thisArg || null, this._.values[i], this._.keys[i], this);\n\n            }\n\n            return this;\n\n        },\n\n        map: function (callback, recursive, thisArg) {\n            return this.clone(recursive).walk(callback, recursive, thisArg);\n\n        },\n\n        walk: function (callback, recursive, thisArg) {\n            for (var i = 0; i < this.length; i++) {\n                if (recursive && this._.values[i] instanceof HashMap) {\n                    this._.values[i].walk(callback, recursive, thisArg);\n\n                } else {\n                    this._.values[i] = callback.call(thisArg || null, this._.values[i], this._.keys[i], this);\n\n                }\n            }\n\n            return this;\n\n        },\n\n        find: function (predicate, thisArg) {\n            var i = this._find(predicate, thisArg, true);\n            return i === false ? null : this._.values[i];\n\n        },\n\n        findKey: function (predicate, thisArg) {\n            var i = this._find(predicate, thisArg, true);\n            return i === false ? null : this._.keys[i];\n\n        },\n\n        some: function (predicate, thisArg) {\n            return this._find(predicate, thisArg, true) !== false;\n\n        },\n\n        all: function (predicate, thisArg) {\n            return this._find(predicate, thisArg, false) === false;\n\n        },\n\n        filter: function (predicate, thisArg) {\n            var o = new HashMap(),\n                i;\n\n            for (i = 0; i < this.length; i++) {\n                if (predicate.call(thisArg || null, this._.values[i], this._.keys[i], this)) {\n                    if (typeof this._.keys[i] === 'number') {\n                        o.push(this._.values[i]);\n\n                    } else {\n                        o.set(this._.keys[i], this._.values[i]);\n\n                    }\n                }\n            }\n\n            return o;\n\n        },\n\n        exportData: function () {\n            if (this.isList()) {\n                return this.getValues().map(function(v) {\n                    return v instanceof HashMap ? v.exportData() : v;\n\n                });\n            }\n\n            for (var i = 0, r = {}; i < this.length; i++) {\n                if (this._.values[i] instanceof HashMap) {\n                    r[this._.keys[i]] = this._.values[i].exportData();\n\n                } else {\n                    r[this._.keys[i]] = this._.values[i];\n\n                }\n            }\n\n            return r;\n\n        },\n\n        getKeys: function () {\n            return this._.keys.slice();\n\n        },\n\n        getValues: function () {\n            return this._.values.slice();\n\n        },\n\n        _shiftKeys: function (from, to, diff) {\n            while (from < to) {\n                if (typeof this._.keys[from] === 'number') {\n                    this._.keys[from] += diff;\n\n                }\n\n                from++;\n\n            }\n        },\n\n        _find: function (predicate, thisArg, expect) {\n            for (var i = 0; i < this.length; i++) {\n                if (predicate.call(thisArg || null, this._.values[i], this._.keys[i], this) === expect) {\n                    return i;\n\n                }\n            }\n\n            return false;\n\n        }\n    });\n\n    _context.register(HashMap, 'HashMap');\n\n});\n","_context.invoke('Utils', function(Strings, undefined) {\n\n    var location = window.history.location || window.location; // support for HTML5 history polyfill\n\n    var Url = function(s) {\n        if (s === null || s === '' || s === undefined) {\n            this._ = {\n                protocol: location.protocol,\n                hostname: location.hostname,\n                port: location.port,\n                path: location.pathname,\n                params: Url.parseQuery(location.search),\n                hash: location.hash\n            };\n\n            extractAuthInfo(location.href, this._);\n        } else {\n            s += '';\n\n            var proto = Url.RE_PROTOCOL.exec(s),\n                auth,\n                i;\n\n            this._ = {\n                protocol: proto ? proto[1] || location.protocol : location.protocol\n            };\n\n            if (proto) {\n                if (proto[2] && proto[3] || proto[4]) {\n                    s = s.substr(proto[0].length);\n                    auth = Url.RE_AUTHORITY.exec(s) || [''];\n                    s = s.substr(auth[0].length);\n                    this._.username = auth[1] || '';\n                    this._.password = auth[2] || '';\n                    this._.hostname = auth[3] || '';\n                    this._.port = auth[4] || '';\n                } else {\n                    this._.username\n                        = this._.password\n                        = this._.hostname\n                        = this._.port\n                        = this._.path\n                        = this._.hash\n                        = '';\n\n                    this._.params = {};\n                    return;\n                }\n            } else {\n                this._.username = '';\n                this._.password = '';\n                this._.hostname = location.hostname;\n                this._.port = location.port;\n            }\n\n            if ((i = s.indexOf('#')) > -1) {\n                this._.hash = s.substr(i);\n                s = s.substr(0, i);\n            } else {\n                this._.hash = '';\n            }\n\n            if ((i = s.indexOf('?')) > -1) {\n                this._.params = Url.parseQuery(s.substr(i + 1));\n                s = s.substr(0, i);\n            } else {\n                this._.params = {};\n            }\n\n            this._.path = s || '/';\n        }\n    };\n\n    Url.prototype.getProtocol = function() {\n        return this._.protocol;\n\n    };\n\n    Url.prototype.getUsername = function() {\n        return this._.username;\n\n    };\n\n    Url.prototype.getPassword = function() {\n        return this._.password;\n\n    };\n\n    Url.prototype.getHostname = function() {\n        return this._.hostname;\n\n    };\n\n    Url.prototype.getPort = function() {\n        return this._.port;\n\n    };\n\n    Url.prototype.getAuthority = function() {\n        var a = '';\n\n        if (this._.username) {\n            if (this._.password) {\n                a += this._.username + ':' + this._.password + '@';\n\n            } else {\n                a += this._.username + '@';\n\n            }\n        }\n\n        a += this._.hostname;\n\n        if (this._.port) {\n            a += ':' + this._.port;\n\n        }\n\n        return a;\n\n    };\n\n    Url.prototype.getOrigin = function () {\n        return this._.protocol + '//' + this._.hostname + (this._.port ? ':' + this._.port : '');\n    };\n\n    Url.prototype.getPath = function() {\n        return this._.path;\n\n    };\n\n    Url.prototype.getQuery = function() {\n        var q = Url.buildQuery(this._.params);\n        return q.length ? '?' + q : '';\n\n    };\n\n    Url.prototype.getParam = function(n) {\n        return this._.params[n];\n\n    };\n\n    Url.prototype.hasParam = function(n) {\n        return this._.params[n] !== undefined;\n\n    };\n\n    Url.prototype.getParams = function() {\n        return this._.params;\n\n    };\n\n    Url.prototype.getHash = function() {\n        return this._.hash;\n\n    };\n\n\n    Url.prototype.setProtocol = function(protocol) {\n        this._.protocol = protocol ? Strings.trimRight(protocol, ':') + ':' : '';\n        return this;\n\n    };\n\n    Url.prototype.setUsername = function(username) {\n        this._.username = username;\n        return this;\n\n    };\n\n    Url.prototype.setPassword = function(password) {\n        this._.password = password;\n        return this;\n\n    };\n\n    Url.prototype.setHostname = function(hostname) {\n        this._.hostname = hostname;\n        return this;\n\n    };\n\n    Url.prototype.setPort = function(port) {\n        this._.port = port;\n        return this;\n\n    };\n\n    Url.prototype.setPath = function(path) {\n        this._.path = path ? '/' + Strings.trimLeft(path, '/') : '';\n        return this;\n\n    };\n\n    Url.prototype.setQuery = function(query) {\n        this._.params = Url.parseQuery(query);\n        return this;\n\n    };\n\n    Url.prototype.setParam = function(n, v) {\n        this._.params[n] = v;\n        return this;\n\n    };\n\n    Url.prototype.addParams = function(p) {\n        if (Array.isArray(p) && (p.length && 'name' in p[0] && 'value' in p[0])) {\n            p = Url.parseQuery(Url.buildQuery(p, true));\n        }\n\n        for (var k in p) {\n            if (p[k] !== undefined) {\n                this._.params[k] = p[k];\n            }\n        }\n\n        return this;\n\n    };\n\n    Url.prototype.getParams = function () {\n        return this._.params;\n\n    };\n\n    Url.prototype.setParams = function(p) {\n        this._.params = {};\n        this.addParams(p);\n        return this;\n\n    };\n\n    Url.prototype.removeParam = function(n) {\n        delete this._.params[n];\n        return this;\n\n    };\n\n    Url.prototype.setHash = function(hash) {\n        this._.hash = hash ? '#' + Strings.trimLeft(hash, '#') : '';\n        return this;\n\n    };\n\n\n    Url.prototype.toAbsolute = function() {\n        return this._.protocol + '//' + this.getAuthority() + this._.path + this.getQuery() + this._.hash;\n\n    };\n\n    Url.prototype.toLocal = function () {\n        return this._.path + this.getQuery() + this._.hash;\n\n    };\n\n    Url.prototype.toRelative = function(to) {\n        to = Url.from(to || location.href);\n\n        if (to.getProtocol() !== this.getProtocol()) {\n            return this.toAbsolute();\n\n        }\n\n        if (to.getAuthority() !== this.getAuthority()) {\n            return '//' + this.getAuthority() + this.getPath() + this.getQuery() + this.getHash();\n\n        }\n\n        if (to.getPath() !== this.getPath()) {\n            return Url.getRelativePath(to.getPath(), this.getPath()) + this.getQuery() + this.getHash();\n\n        }\n\n        var qto = to.getQuery(), qthis = this.getQuery();\n        if (qto !== qthis) {\n            return qthis + this.getHash();\n\n        }\n\n        return to.getHash() === this.getHash() ? '' : this.getHash();\n\n    };\n\n    Url.prototype.toString = function() {\n        return this.toAbsolute();\n\n    };\n\n    Url.prototype.isLocal = function() {\n        return this.compare(Url.fromCurrent()) < Url.PART.PORT;\n\n    };\n\n    Url.prototype.compare = function(to) {\n        if (!(to instanceof Url)) {\n            to = Url.from(to);\n\n        }\n\n        var r = 0;\n\n        this.getProtocol() !== to.getProtocol() && (r |= Url.PART.PROTOCOL);\n        this.getUsername() !== to.getUsername() && (r |= Url.PART.USERNAME);\n        this.getPassword() !== to.getPassword() && (r |= Url.PART.PASSWORD);\n        this.getHostname() !== to.getHostname() && (r |= Url.PART.HOSTNAME);\n        this.getPort() !== to.getPort() && (r |= Url.PART.PORT);\n        this.getPath() !== to.getPath() && (r |= Url.PART.PATH);\n        this.getQuery() !== to.getQuery() && (r |= Url.PART.QUERY);\n        this.getHash() !== to.getHash() && (r |= Url.PART.HASH);\n\n        return r;\n\n    };\n\n    Url.RE_PROTOCOL = /^((?:(https?)|[a-z][a-z0-9.+-]*):)(\\/\\/)?|^(\\/\\/)/i;\n    Url.RE_AUTHORITY = /^(?:([^@:]+?)(?::([^@]+))?@)?([^:\\/]+)(?::(\\d+))?/;\n\n    Url.PART = {\n        PROTOCOL: 128,\n        USERNAME: 64,\n        PASSWORD: 32,\n        HOSTNAME: 16,\n        PORT: 8,\n        PATH: 4,\n        QUERY: 2,\n        HASH: 1\n    };\n\n    Url.from = function(s) {\n        return s instanceof Url ? new Url(s.toAbsolute()) : new Url(s);\n    };\n\n    Url.fromCurrent = function() {\n        return new Url();\n    };\n\n    Url.getDirName = function (path) {\n        return path.replace(/(^|\\/)[^\\/]*$/, '');\n\n    };\n\n    Url.getRelativePath = function(from, to) {\n        from = Strings.trimLeft(from, '/').split('/');\n        from.pop(); // last element is either a file or empty because the previous element is a directory\n\n        if (!to.match(/^\\//)) {\n            return to.replace(/^\\.\\//, '');\n\n        }\n\n        to = Strings.trimLeft(to, '/').split('/');\n\n        var e = 0,\n            f,\n            t,\n            o = [],\n            n = Math.min(from.length, to.length);\n\n        for (; e < n; e++) {\n            if (from[e] !== to[e]) {\n                break;\n\n            }\n        }\n\n        for (f = e; f < from.length; f++) {\n            o.push('..');\n\n        }\n\n        for (t = e; t < to.length; t++) {\n            o.push(to[t]);\n\n        }\n\n        return o.join('/');\n\n    };\n\n    Url.buildQuery = function(data, pairs) {\n        var q = [], n;\n\n        function en(v) {\n            return encodeURIComponent(v).replace(/%20/g, '+');\n        }\n\n        function val(v) {\n            if (v === undefined) {\n                return null;\n\n            } else if (typeof v === 'boolean') {\n                return v ? 1 : 0;\n\n            } else {\n                return en('' + v);\n\n            }\n        }\n\n        function flatten(a, n) {\n            var r = [], i;\n\n            if (Array.isArray(a)) {\n                for (i = 0; i < a.length; i++) {\n                    r.push(en(n + '[]') + '=' + val(a[i]));\n\n                }\n            } else {\n                for (i in a) {\n                    if (typeof a[i] === 'object') {\n                        r.push(flatten(a[i], n + '[' + i + ']'));\n\n                    } else {\n                        r.push(en(n + '[' + i + ']') + '=' + val(a[i]));\n\n                    }\n                }\n            }\n\n            return r.length ? r.filter(function(v) { return v !== null }).join('&') : null;\n\n        }\n\n        for (n in data) {\n            if (data[n] === null || data[n] === undefined) {\n                continue;\n\n            } else if (pairs) {\n                q.push(en(data[n].name) + '=' + val(data[n].value));\n\n            } else if (typeof data[n] === 'object') {\n                q.push(flatten(data[n], n));\n\n            } else {\n                q.push(en(n) + '=' + val(data[n]));\n\n            }\n        }\n\n        return q.filter(function(v) { return v !== null; }).join('&');\n\n    };\n\n    Url.parseQuery = function(s) {\n        if (s.match(/^\\??$/)) {\n            return {};\n\n        }\n\n        s = Strings.trimLeft(s, '?').split('&');\n\n        var p = {}, a = false, c, d, k, i, m, n, v;\n\n        function dec(v) {\n            return decodeURIComponent(v.replace(/\\+/g,' '));\n        }\n\n        function convertType(v) {\n            var c;\n\n            if (v.match(/^(?:[1-9]\\d*|0)$/) && (c = parseInt(v)) + '' === v) {\n                return c;\n\n            } else if (v.match(/^\\d*\\.\\d+$/) && (c = parseFloat(v)) + '' === v) {\n                return c;\n\n            }\n\n            return v;\n\n        }\n\n        for (i = 0; i < s.length; i++) {\n            m = s[i].split('=');\n            n = dec(m.shift());\n            v = convertType(dec(m.join('=')));\n\n            if (n.indexOf('[') !== -1) {\n                n = n.replace(/\\]/g, '');\n                d = n.split('[');\n                c = p;\n                a = false;\n\n                if (n.match(/\\[$/)) {\n                    d.pop();\n                    a = true;\n\n                }\n\n                n = d.pop();\n\n                while (d.length) {\n                    k = d.shift();\n\n                    if (c[k] === undefined) {\n                        c[k] = {};\n\n                    }\n\n                    c = c[k];\n\n                }\n\n                if (a) {\n                    if (c[n] === undefined) {\n                        c[n] = [v];\n\n                    } else {\n                        c[n].push(v);\n\n                    }\n                } else {\n                    c[n] = v;\n\n                }\n            } else {\n                p[n] = v;\n\n            }\n        }\n\n        return p;\n\n    };\n\n\n    function extractAuthInfo(url, onto) {\n        url = url.replace(Url.RE_PROTOCOL, '');\n\n        var tmp = url.indexOf('@');\n\n        if (tmp > -1) {\n            tmp = url.substr(0, tmp).split(':', 2);\n            onto.username = tmp[0];\n            onto.password = tmp[1] || '';\n        } else {\n            onto.username = onto.password = '';\n        }\n    }\n\n    _context.register(Url, 'Url');\n\n});\n","_context.invoke('Utils', function (Arrays, Strings, undefined) {\n\n    /****** Utilities *******/\n\n    function map(args, callback) {\n        args = Arrays.createFrom(args);\n\n        if (Array.isArray(args[0])) {\n            for (var i = 0, elems = args[0], ret = []; i < elems.length; i++) {\n                args[0] = getElem(elems[i]);\n\n                if (args[0]) {\n                    ret.push(callback.apply(null, args));\n\n                } else {\n                    ret.push(args[0]);\n\n                }\n            }\n\n            return ret;\n\n        } else {\n            args[0] = getElem(args[0]);\n\n            if (args[0]) {\n                return callback.apply(null, args);\n\n            } else {\n                return args[0];\n\n            }\n        }\n    }\n\n    function getElem(elem) {\n        if (Array.isArray(elem) || elem instanceof HTMLCollection || elem instanceof NodeList) {\n            elem = elem[0];\n\n        }\n\n        return typeof elem === 'string' ? DOM.getById(elem) : elem;\n\n    }\n\n    function getPrefixed(elem, prop) {\n        elem = getElem(elem);\n\n        if (!elem || prop in elem.style) {\n            return prop;\n\n        }\n\n\n        var p = prop.charAt(0).toUpperCase() + prop.substr(1),\n            variants = ['webkit' + p, 'moz' + p, 'o' + p, 'ms' + p],\n            i;\n\n        for (i = 0; i < variants.length; i++) {\n            if (variants[i] in elem.style) {\n                return variants[i];\n\n            }\n        }\n\n        return prop;\n\n    }\n\n    function parseData(value) {\n        if (!value) return null;\n\n        try {\n            return JSON.parse(value);\n\n        } catch (e) {\n            return value;\n\n        }\n    }\n\n\n\n\n    /******* CustomEvent support in IE9+ ******/\n\n    if (typeof window.CustomEvent !== 'function') {\n        window.CustomEvent = function(event, params) {\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        };\n\n        window.CustomEvent.prototype = window.Event.prototype;\n\n    }\n\n    var knownEventModules = {\n        MouseEvent: {\n            create: function(type, params) {\n                params.view || (params.view = window);\n                return new MouseEvent(type, params);\n            },\n            init: function(event, type, params) {\n                event.initMouseEvent(\n                    type,\n                    params.bubbles,\n                    params.cancelable,\n                    params.view || window,\n                    params.detail || 1,\n                    params.screenX || 0,\n                    params.screenY || 0,\n                    params.clientX || 0,\n                    params.clientY || 0,\n                    params.ctrlKey || false,\n                    params.altKey || false,\n                    params.shiftKey || false,\n                    params.metaKey || false,\n                    params.button || 1,\n                    params.relatedTarget\n                );\n            }\n        },\n        KeyboardEvent: {\n            create: function(type, params) { return new KeyboardEvent(type, params); },\n            init: function(event, type, params) {\n                var modifiers = [];\n                params.ctrlKey && modifiers.push('Control');\n                params.shiftKey && modifiers.push('Shift');\n                params.altKey && modifiers.push('Alt');\n                params.metaKey && modifiers.push('Meta');\n                event.initKeyboardEvent(type, params.bubbles, params.cancelable, params.view || window, params.key || '', params.location || 0, modifiers.join(' '));\n            }\n        },\n        FocusEvent: {\n            create: function(type, params) { return new FocusEvent(type, params); },\n            init: function(event, type, params) {\n                event.initUIEvent(type, params.bubbles, params.cancelable, params.view || window, params.detail || 0);\n            },\n            name: 'UIEvent'\n        },\n        HTMLEvents: {\n            create: function(type, params) { return new Event(type, params); },\n            init: function(event, type, params) {\n                event.initEvent(type, params.bubbles, params.cancelable);\n            }\n        },\n        CustomEvent: {\n            create: function(type, params) { return new CustomEvent(type, params); },\n            init: function(event, type, params) {\n                event.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n            }\n        }\n    };\n\n    var knownEvents = {\n        click: 'MouseEvent',\n        dblclick: 'MouseEvent',\n        mousedown: 'MouseEvent',\n        mouseenter: 'MouseEvent',\n        mouseleave: 'MouseEvent',\n        mousemove: 'MouseEvent',\n        mouseout: 'MouseEvent',\n        mouseover: 'MouseEvent',\n        mouseup: 'MouseEvent',\n        contextmenu: 'MouseEvent',\n        keydown: 'KeyboardEvent',\n        keypress: 'KeyboardEvent',\n        keyup: 'KeyboardEvent',\n        focus: 'FocusEvent',\n        blur: 'FocusEvent',\n        change: 'HTMLEvents',\n        submit: 'HTMLEvents',\n        reset: 'HTMLEvents'\n    };\n\n    var containers = {\n        caption: 'table',\n        colgroup: 'table',\n        col: 'colgroup',\n        thead: 'table',\n        tbody: 'table',\n        tfoot: 'table',\n        tr: 'tbody',\n        th: 'tr',\n        td: 'tr',\n        li: 'ul',\n        optgroup: 'select',\n        option: 'select'\n    };\n\n\n\n    /******* Public interface *******/\n\n    var DOM = {\n        getByClassName: function (className, context) {\n            return Arrays.createFrom((context || document).getElementsByClassName(className));\n\n        },\n\n        getById: function (id) {\n            return document.getElementById(id);\n\n        },\n\n        find: function (sel, context) {\n            var elems = [];\n            sel = sel.trim().split(/\\s*,\\s*/g);\n\n            sel.forEach(function (s) {\n                var m = s.match(/^#([^\\s\\[>+:.]+)\\s+\\.([^\\s\\[>+:]+)$/);\n\n                if (m) {\n                    elems.push.apply(elems, DOM.getByClassName(m[2], DOM.getById(m[1])));\n                    return;\n\n                } else if (s.match(/^[^.#]|[\\s\\[>+:]/)) {\n                    throw new TypeError('Invalid selector \"' + s + '\", only single-level .class and #id or \"#id .class\" are allowed');\n\n                }\n\n                if (s.charAt(0) === '#') {\n                    m = DOM.getById(s.substr(1));\n\n                    if (m) {\n                        elems.push(m);\n\n                    }\n                } else {\n                    m = DOM.getByClassName(s.substr(1), context);\n                    elems.push.apply(elems, m);\n\n                }\n            });\n\n            return elems;\n\n        },\n\n        getChildren: function (elem) {\n            return Arrays.createFrom(elem.childNodes || '').filter(function (node) {\n                return node.nodeType === 1;\n\n            });\n        },\n\n        closest: function (elem, nodeName, className) {\n            return map(arguments, function (elem, nodeName, className) {\n                while (elem) {\n                    if (elem.nodeType === 1 && (!nodeName || elem.nodeName.toLowerCase() === nodeName) && (!className || DOM.hasClass(elem, className))) {\n                        return elem;\n\n                    }\n\n                    elem = elem.parentNode;\n\n                }\n\n                return null;\n            });\n        },\n\n        create: function (elem, attrs) {\n            elem = document.createElement(elem);\n\n            if (attrs) {\n                DOM.setAttributes(elem, attrs);\n\n            }\n\n            return elem;\n\n        },\n\n        createFromHtml: function (html) {\n            var container,\n                elems;\n\n            if (container = html.match(/^\\s*<(caption|colgroup|col|thead|tbody|tfoot|tr|th|td|li|optgroup|option)[\\s>]/i)) {\n                container = containers[container[1].toLowerCase()];\n            }\n\n            container = DOM.create(container || 'div');\n            DOM.html(container, html);\n            elems = DOM.getChildren(container);\n\n            elems.forEach(function (e) {\n                container.removeChild(e);\n            });\n\n            container = null;\n\n            return elems.length > 1 ? elems : elems[0];\n\n        },\n\n        setAttributes: function (elem, attrs) {\n            return map([elem], function (elem) {\n                for (var a in attrs) {\n                    if (attrs.hasOwnProperty(a)) {\n                        elem.setAttribute(a, attrs[a]);\n\n                    }\n                }\n\n                return elem;\n\n            });\n        },\n\n        setStyle: function (elem, prop, value, prefix) {\n            if (prop && typeof prop === 'object') {\n                prefix = value;\n                value = prop;\n\n                for (prop in value) {\n                    if (value.hasOwnProperty(prop)) {\n                        DOM.setStyle(elem, prop, value[prop], prefix);\n\n                    }\n                }\n\n                return elem;\n\n            }\n\n            if (prefix !== false) {\n                prop = getPrefixed(elem, prop);\n\n            }\n\n            return map([elem], function (elem) {\n                elem.style[prop] = value;\n\n            });\n        },\n\n        getStyle: function(elem, props, prefix) {\n            if (!Array.isArray(props)) {\n                props = props.split(/\\s+/g);\n            }\n\n            var prefixed = props;\n\n            if (prefix !== false) {\n                prefixed = props.map(function(prop) {\n                    return getPrefixed(elem, prop);\n                });\n            }\n\n            return map([elem], function(elem) {\n                var style = window.getComputedStyle(elem);\n\n                if (props.length === 1) {\n                    return style[prefixed[0]];\n\n                } else {\n                    var res = {};\n\n                    props.forEach(function(prop, i) {\n                        res[prop] = style[prefixed[i]];\n\n                    });\n\n                    return res;\n\n                }\n            });\n        },\n\n        getStyleFloat: function(elem, props, prefix) {\n            if (!Array.isArray(props)) {\n                props = props.split(/\\s+/g);\n            }\n\n            var style = DOM.getStyle(elem, props, prefix),\n                refloat = /^(\\d+|\\d*\\.\\d+)(px|m?s)?$/;\n\n            function normalizeValue(v) {\n                var m = refloat.exec(v);\n\n                if (m) {\n                    v = parseFloat(m[1]);\n\n                    if (m[2] === 's') {\n                        v *= 1000;\n\n                    }\n                }\n\n                return v;\n\n            }\n\n            function stylePropsToFloat(style) {\n                if (props.length === 1) {\n                    return normalizeValue(style);\n\n                } else {\n                    props.forEach(function(prop) {\n                        style[prop] = normalizeValue(style[prop]);\n\n                    });\n\n                    return style;\n\n                }\n            }\n\n            if (Array.isArray(style)) {\n                return style.map(stylePropsToFloat);\n\n            } else {\n                return stylePropsToFloat(style);\n\n            }\n        },\n\n        html: function (elem, html) {\n            return map([elem], function (elem) {\n                elem.innerHTML = html;\n\n                Arrays.createFrom(elem.getElementsByTagName('script')).forEach(function (elem) {\n                    var type = elem.type ? elem.type.toLowerCase() : null;\n\n                    if (!type || type === 'text/javascript' || type === 'application/javascript') {\n                        var load = elem.hasAttribute('src'),\n                            src = load ? elem.src : (elem.text || elem.textContent || elem.innerHTML || ''),\n                            attrs = {}, i,\n                            script;\n\n                        for (i = 0; i < elem.attributes.length; i++) {\n                            if (elem.attributes.item(i).name !== 'src') {\n                                attrs[elem.attributes.item(i).name] = elem.attributes.item(i).value;\n                            }\n                        }\n\n                        script = DOM.create('script', attrs);\n\n                        if (load) {\n                            script.src = src;\n\n                        } else {\n                            try {\n                                script.appendChild(document.createTextNode(src));\n\n                            } catch (e) {\n                                script.text = src;\n\n                            }\n                        }\n\n                        elem.parentNode.insertBefore(script, elem);\n                        elem.parentNode.removeChild(elem);\n\n                    }\n                });\n            });\n        },\n\n        text: function (str) {\n            if (arguments.length > 1) {\n                if (Array.isArray(arguments[1])) {\n                    str = Strings.vsprintf(str, arguments[1]);\n                } else {\n                    str = Arrays.createFrom(arguments).join(' ');\n                }\n            }\n\n            return document.createTextNode(str);\n        },\n\n        empty: function(elem) {\n            return map(arguments, function (elem) {\n                while (elem.firstChild) {\n                    elem.removeChild(elem.firstChild);\n                }\n            });\n        },\n\n        append: function (elem, children) {\n            elem = getElem(elem);\n            children = Array.isArray(children) ? children : Arrays.createFrom(arguments, 1);\n\n            children.forEach(function(child) {\n                elem.appendChild(child);\n            });\n\n            return elem;\n\n        },\n\n        prepend: function (elem, children) {\n            elem = getElem(elem);\n            children = Array.isArray(children) ? children : Arrays.createFrom(arguments, 1);\n\n            var first = elem.firstChild;\n\n            children.forEach(function(child) {\n                elem.insertBefore(child, first);\n            });\n\n            return elem;\n\n        },\n\n        insertBefore: function(before, elem) {\n            var elems = Array.isArray(elem) ? elem : Arrays.createFrom(arguments, 1),\n                parent;\n\n            before = getElem(before);\n            parent = before.parentNode;\n\n            elems.forEach(function(elem) {\n                parent.insertBefore(elem, before);\n            });\n\n            return before;\n\n        },\n\n        contains: function( a, b ) {\n            var adown = a.nodeType === 9 ? a.documentElement : a,\n                bup = b && b.parentNode;\n\n            return a === bup || !!( bup && bup.nodeType === 1 && (\n                    adown.contains\n                        ? adown.contains( bup )\n                        : a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n                ));\n        },\n\n        addListener: function (elem, evt, listener, capture) {\n            return map(arguments, function (elem, evt, listener, capture) {\n                elem.addEventListener(evt, listener, !!capture);\n                return elem;\n\n            });\n        },\n        removeListener: function (elem, evt, listener, capture) {\n            return map(arguments, function (elem, evt, listener, capture) {\n                elem.removeEventListener(evt, listener, !!capture);\n                return elem;\n\n            });\n        },\n\n        trigger: function (elem, evt, params) {\n            if (!(elem = getElem(elem))) {\n                return;\n            }\n\n            var module = knownEvents[evt] || 'CustomEvent',\n                event;\n\n            params || (params = {});\n            'bubbles' in params || (params.bubbles = true);\n            'cancelable' in params || (params.cancelable = true);\n\n            try {\n                event = knownEventModules[module].create(evt, params);\n            } catch (e) {\n                event = document.createEvent(knownEventModules[module].name || module);\n                knownEventModules[module].init(event, evt, params);\n            }\n\n            return elem.dispatchEvent(event);\n        },\n\n        delegate: function(sel, handler) {\n            sel = sel\n                .trim()\n                .split(/\\s*,\\s*/g)\n                .map(function(s) {\n                    var m = s.match(/^(?:(?:#([^\\s\\[>+:.]+)\\s+)?\\.([^\\s\\[>+:]+)|#([^\\s\\[>+:.]+))$/);\n                    return [m[1] || m[3], m[2]];\n                });\n\n            return function(evt) {\n                if (!evt.target) {\n                    return;\n                }\n\n                var elems = [],\n                    ids = [],\n                    classes = [],\n                    found = [],\n                    elem = evt.target,\n                    i, j;\n\n                do {\n                    elems.push(elem);\n                    ids.push(elem.id);\n                    classes.push(((elem.className || '') + '').trim().split(/\\s+/g));\n                } while (elem = elem.parentNode);\n\n                for (i = 0; i < elems.length; i++) {\n                    for (j = 0; j < sel.length; j++) {\n                        if ((!sel[j][1] || classes[i].indexOf(sel[j][1]) > -1) && (!sel[j][0] || (!sel[j][1] ? ids[i] === sel[j][0] : ids.indexOf(sel[j][0]) > i))) {\n                            found.push(elems[i]);\n                        }\n                    }\n                }\n\n                for (i = 0; i < found.length; i++) {\n                    handler.call(found[i], evt, found[i]);\n                }\n            };\n        },\n\n        getData: function (elem, key, def) {\n            elem = getElem(elem);\n            key = 'data-' + key;\n\n            if (!elem.hasAttribute(key)) {\n                return def;\n            }\n\n            return parseData(elem.getAttribute(key));\n\n        },\n        setData: function (elem, key, value) {\n            return map([elem], function (elem) {\n                elem.setAttribute('data-' + key, JSON.stringify(value));\n                return elem;\n\n            });\n        },\n\n        addClass: null,\n        removeClass: null,\n        toggleClass: null,\n        hasClass: null\n    };\n\n\n    var testElem = DOM.create('span'),\n        prepare = function(args, asStr) {\n            args = Arrays.createFrom(args, 1).join(' ').trim();\n            return asStr ? args : args.split(/\\s+/g);\n        };\n\n    if ('classList' in testElem) {\n        testElem.classList.add('c1', 'c2');\n\n        if (testElem.classList.contains('c2')) {\n            DOM.addClass = function (elem, classes) {\n                classes = prepare(arguments);\n\n                return map([elem], function (elem) {\n                    elem.classList.add.apply(elem.classList, classes);\n                    return elem;\n\n                });\n            };\n\n            DOM.removeClass = function (elem, classes) {\n                classes = prepare(arguments);\n\n                return map([elem], function (elem) {\n                    elem.classList.remove.apply(elem.classList, classes);\n                    return elem;\n\n                });\n            };\n        } else {\n            DOM.addClass = function (elem, classes) {\n                classes = prepare(arguments);\n\n                return map([elem], function (elem) {\n                    classes.forEach(function (c) {\n                        elem.classList.add(c);\n\n                    });\n\n                    return elem;\n\n                });\n            };\n\n            DOM.removeClass = function (elem, classes) {\n                classes = prepare(arguments);\n\n                return map([elem], function (elem) {\n                    classes.forEach(function (c) {\n                        elem.classList.remove(c);\n\n                    });\n\n                    return elem;\n\n                });\n            };\n        }\n\n        testElem.classList.toggle('c1', true);\n\n        if (testElem.classList.contains('c1')) {\n            DOM.toggleClass = function (elem, classes, value) {\n                classes = classes.trim().split(/\\s+/g);\n\n                return map([elem], function (elem) {\n                    if (value === undefined) {\n                        classes.forEach(function (c) {\n                            elem.classList.toggle(c);\n\n                        });\n                    } else {\n                        classes.forEach(function (c) {\n                            elem.classList.toggle(c, !!value);\n\n                        });\n                    }\n\n                    return elem;\n\n                });\n            };\n        } else {\n            DOM.toggleClass = function (elem, classes, value) {\n                classes = classes.trim().split(/\\s+/g);\n\n                return map([elem], function (elem) {\n                    classes.forEach(function (c) {\n                        if (value === undefined || !value === elem.classList.contains(c)) {\n                            elem.classList.toggle(c);\n\n                        }\n                    });\n\n                    return elem;\n\n                });\n            };\n        }\n\n        DOM.hasClass = function (elem, classes) {\n            elem = getElem(elem);\n            classes = prepare(arguments);\n\n            for (var i = 0; i < classes.length; i++) {\n                if (!elem.classList || !elem.classList.contains(classes[i])) {\n                    return false;\n\n                }\n            }\n\n            return true;\n\n        };\n    } else {\n        DOM.addClass = function (elem, classes) {\n            classes = prepare(arguments, true);\n\n            return map([elem], function (elem) {\n                elem.className += (elem.className ? ' ' : '') + classes;\n                return elem;\n\n            });\n        };\n\n        DOM.removeClass = function (elem, classes) {\n            classes = prepare(arguments).map(Strings.escapeRegex);\n\n            return map([elem], function (elem) {\n                if (!elem.className) return elem;\n\n                elem.className = elem.className.replace(new RegExp('(?:(?:^|\\\\s+)(?:' + classes.join('|') + '))+(?=\\\\s+|$)', 'g'), ' ').trim().replace(/\\s\\s+/g, ' ');\n                return elem;\n\n            });\n        };\n\n        DOM.toggleClass = function (elem, classes, value) {\n            classes = classes.trim().split(/\\s+/g);\n\n            return map([elem], function (elem) {\n                var current = (elem.className || '').trim().split(/\\s+/g);\n\n                classes.forEach(function (c) {\n                    var i = current.indexOf(c),\n                        has = i > -1;\n\n                    if (value !== false && !has) {\n                        current.push(c);\n\n                    } else if (value !== true && has) {\n                        current.splice(i, 1);\n\n                    }\n                });\n\n                elem.className = current.join(' ');\n                return elem;\n\n            });\n        };\n\n        DOM.hasClass = function (elem, classes) {\n            elem = getElem(elem);\n            if (!elem.className) return false;\n            classes = prepare(arguments);\n\n            var current = elem.className.trim().split(/\\s+/g);\n\n            for (var i = 0; i < classes.length; i++) {\n                if (current.indexOf(classes[i]) === -1) {\n                    return false;\n\n                }\n            }\n\n            return true;\n\n        };\n    }\n\n    testElem = null;\n\n    _context.register(DOM, 'DOM');\n\n});\n","_context.invoke('Utils', function (DOM) {\n\n    var CSSTransitions = {\n        support: 'getComputedStyle' in window,\n\n        getDuration: function (elements) {\n            if (!Array.isArray(elements)) {\n                elements = [elements];\n            }\n\n            var durations = DOM.getStyle(elements, 'animationDuration')\n                .concat(DOM.getStyle(elements, 'transitionDuration'))\n                .map(function(d) {\n                    if (!d) {\n                        return 0;\n                    }\n\n                    return Math.max.apply(null, d.split(/\\s*,\\s*/g).map(function(v) {\n                        v = v.match(/^((?:\\d*\\.)?\\d+)(m?s)$/);\n                        return v ? parseFloat(v[1]) * (v[2] === 'ms' ? 1 : 1000) : 0;\n\n                    }));\n                });\n\n            return durations.length ? Math.max.apply(null, durations) : 0;\n\n        },\n\n        run: function(elements, classes, forceLayout) {\n            if (!CSSTransitions.support || (Array.isArray(elements) ? !elements.length : !elements)) {\n                return Promise.resolve(elements);\n\n            } else {\n                return CSSTransitions._resolve(elements, classes, forceLayout);\n\n            }\n        },\n\n        _resolve: function (elements, classes, forceLayout) {\n            if (forceLayout) {\n                var foo = window.pageXOffset; // needed to force layout and thus run asynchronously\n\n            }\n\n            classes && classes.add && DOM.addClass(elements, classes.add);\n            classes && classes.remove && DOM.removeClass(elements, classes.remove);\n\n            var duration = CSSTransitions.getDuration(elements);\n\n            return new Promise(function (fulfill) {\n                window.setTimeout(function () {\n                    classes && classes.add && DOM.removeClass(elements, classes.add);\n                    classes && classes.after && DOM.addClass(elements, classes.after);\n                    fulfill(elements);\n\n                }, duration);\n            });\n        }\n    };\n\n    if (CSSTransitions.support) try {\n        var s = DOM.create('span').style;\n\n        CSSTransitions.support = [\n            'transition',\n            'WebkitTransition',\n            'MozTransition',\n            'msTransition',\n            'OTransition'\n        ].some(function(prop) {\n            return prop in s;\n        });\n\n        s = null;\n\n    } catch (e) { }\n\n    _context.register(CSSTransitions, 'CSSTransitions');\n\n});\n","_context.invoke('Utils', function(undefined) {\n\n    var ReflectionClass = function(c) {\n        this._ = {\n            reflectedClass: typeof c === \"string\" ? ReflectionClass.getClass(c) : c\n        };\n    };\n\n    ReflectionClass.from = function(c) {\n        return c instanceof ReflectionClass ? c : new ReflectionClass(c);\n\n    };\n\n    ReflectionClass.getClass = function(name) {\n        return _context.lookup(name);\n\n    };\n\n    ReflectionClass.getClassName = function(obj, need) {\n        var className = _context.lookupClass(obj);\n\n        if (className === false && need) {\n            throw new Error('Unknown class');\n\n        }\n\n        return className;\n\n    };\n\n    ReflectionClass.prototype.hasProperty = function(name) {\n        return this._.reflectedClass.prototype[name] !== undefined && typeof this._.reflectedClass.prototype[name] !== \"function\";\n\n    };\n\n    ReflectionClass.prototype.hasMethod = function(name) {\n        return this._.reflectedClass.prototype[name] !== undefined && typeof this._.reflectedClass.prototype[name] === \"function\";\n\n    };\n\n    ReflectionClass.prototype.newInstance = function() {\n        return this.newInstanceArgs(arguments);\n\n    };\n\n    ReflectionClass.prototype.newInstanceArgs = function(args) {\n        var inst, ret, tmp = function() {};\n        tmp.prototype = this._.reflectedClass.prototype;\n        inst = new tmp();\n        ret = this._.reflectedClass.apply(inst, args);\n\n        return Object(ret) === ret ? ret : inst;\n\n    };\n\n    _context.register(ReflectionClass, 'ReflectionClass');\n\n});\n","_context.invoke('Utils', function(Arrays, undefined) {\n\n    var ReflectionFunction = function(f) {\n        this._ = {\n            reflectedFunction: f,\n            argsList: null,\n            name: null\n        };\n\n        var parts = f.toString()\n            .match(/^\\s*function(?:\\s*|\\s+([^\\(]+?)\\s*)\\(\\s*([\\s\\S]*?)\\s*\\)/i);\n\n        this._.name = parts[1] || null;\n        this._.argsList = !parts[2] ? [] : parts[2]\n            .replace(/\\/\\*\\*?[\\s\\S]*?\\*\\//g, '')\n            .trim()\n            .split(/\\s*,\\s*/);\n\n    };\n\n    ReflectionFunction.from = function(f) {\n        return f instanceof ReflectionFunction ? f : new ReflectionFunction(f);\n\n    };\n\n    ReflectionFunction.prototype.getName = function () {\n        return this._.name;\n\n    };\n\n    ReflectionFunction.prototype.getArgs = function () {\n        return this._.argsList;\n\n    };\n\n    ReflectionFunction.prototype.invoke = function(context) {\n        var args = Arrays.createFrom(arguments);\n        args.shift();\n\n        return this._.reflectedFunction.apply(context, args);\n\n    };\n\n    ReflectionFunction.prototype.invokeArgs = function(context, args) {\n        var list = [];\n        for (var i = 0; i < this._.argsList.length; i++) {\n            if (args[this._.argsList[i]] === undefined) {\n                throw new Error('Parameter \"' + this._.argsList[i] + '\" was not provided in argument list');\n\n            }\n\n            list.push(args[this._.argsList[i]]);\n\n        }\n\n        return this._.reflectedFunction.apply(context, list);\n\n    };\n\n    _context.register(ReflectionFunction, 'ReflectionFunction');\n\n});\n","_context.invoke('Nittro', function () {\n\n    function prepare (self, need) {\n        if (!self._) {\n            if (need === false) return false;\n            self._ = {};\n\n        }\n\n        if (!self._.eventEmitter) {\n            if (need === false) return false;\n\n            self._.eventEmitter = {\n                listeners: {},\n                defaultListeners: {},\n                namespaces: []\n            };\n        }\n    }\n\n    function prepareNamespaces (emitter, namespaces) {\n        return namespaces.map(function (ns) {\n            var i = emitter.namespaces.indexOf(ns);\n\n            if (i > -1) return i;\n\n            i = emitter.namespaces.length;\n            emitter.namespaces.push(ns);\n\n            return i;\n\n        });\n    }\n\n    function hasCommonElement (a, b) {\n        var i = 0, j = 0;\n\n        while (i < a.length && j < b.length) {\n            if (a[i] < b[j]) i++;\n            else if (a[i] > b[j]) j++;\n            else return true;\n\n        }\n\n        return false;\n\n    }\n\n    function process (emitter, evt, op, arg1, arg2) {\n        evt = (evt || '').replace(/^\\s+|\\s+$/g, '').split(/\\s+/g);\n\n        evt.forEach(function (e) {\n            var dflt = e.split(/:/),\n                ns = dflt[0].split(/\\./g);\n\n            e = ns.shift();\n            ns = prepareNamespaces(emitter, ns);\n            ns.sort();\n            op(emitter, e, ns, dflt[1] === 'default', arg1, arg2);\n\n        });\n    }\n\n    function add (emitter, evt, ns, dflt, handler, mode) {\n        if (!evt) {\n            throw new TypeError('No event specified');\n        }\n\n        if (dflt) {\n            if (mode !== 0 || ns.length) {\n                throw new TypeError(\"Default event handlers don't support namespaces and one()/first()\");\n\n            } else if (emitter.defaultListeners.hasOwnProperty(evt)) {\n                throw new TypeError(\"Event '\" + evt + \"' already has a default listener\");\n\n            }\n\n            emitter.defaultListeners[evt] = handler;\n            return;\n\n        }\n\n        if (mode === 2) {\n            ns.unshift(emitter.namespaces.length);\n\n        }\n\n        emitter.listeners[evt] || (emitter.listeners[evt] = []);\n        emitter.listeners[evt].push({handler: handler, namespaces: ns, mode: mode});\n\n    }\n\n    function remove (emitter, evt, ns, dflt, handler) {\n        if (!evt) {\n            var listeners = dflt ? emitter.defaultListeners : emitter.listeners;\n\n            for (evt in listeners) {\n                if (listeners.hasOwnProperty(evt)) {\n                    remove(emitter, evt, ns, dflt, handler);\n\n                }\n            }\n\n            return;\n\n        }\n\n        if (dflt) {\n            if (emitter.defaultListeners.hasOwnProperty(evt) && (!handler || emitter.defaultListeners[evt] === handler)) {\n                delete emitter.defaultListeners[evt];\n\n            }\n\n            return;\n\n        }\n\n        if (!emitter.listeners[evt]) return;\n\n        if (ns.length) {\n            emitter.listeners[evt] = emitter.listeners[evt].filter(function (listener) {\n                if (handler && listener.handler !== handler) return true;\n                return !listener.namespaces.length || !hasCommonElement(listener.namespaces, ns);\n\n            });\n        } else if (handler) {\n            emitter.listeners[evt] = emitter.listeners[evt].filter(function (listener) {\n                return listener.handler !== handler;\n\n            });\n        } else {\n            if (emitter.listeners.hasOwnProperty(evt)) {\n                delete emitter.listeners[evt];\n\n            }\n\n            if (emitter.defaultListeners.hasOwnProperty(evt)) {\n                delete emitter.defaultListeners[evt];\n\n            }\n        }\n    }\n\n    function trigger (self, evt, data) {\n        var e, _ = self._.eventEmitter;\n\n        if (typeof evt === \"object\") {\n            e = evt;\n            evt = e.type;\n        } else {\n            e = new NittroEvent(self, evt, data);\n        }\n\n        if (_.listeners.hasOwnProperty(evt)) {\n            _.listeners[evt].slice().forEach(function (listener) {\n                if (listener.mode === 1) {\n                    remove(_, evt, [], false, listener.handler);\n\n                } else if (listener.mode === 2) {\n                    remove(_, '', [listener.namespaces[0]], false);\n\n                }\n\n                listener.handler.call(self, e);\n\n            });\n        }\n\n        if (e.isAsync()) {\n            e.then(function () {\n                triggerDefault(self, _, evt, e);\n            }, function() { /* no default handler on async reject */ });\n        } else {\n            triggerDefault(self, _, evt, e);\n        }\n\n        return e;\n\n    }\n\n    function triggerDefault (self, _, evt, e) {\n        if (!e.isDefaultPrevented() && _.defaultListeners.hasOwnProperty(evt)) {\n            _.defaultListeners[evt].call(self, e);\n        }\n    }\n\n    var NittroEventEmitter = {\n        on: function (evt, handler) {\n            prepare(this);\n            process(this._.eventEmitter, evt, add, handler, 0);\n            return this;\n\n        },\n\n        one: function (evt, handler) {\n            prepare(this);\n            process(this._.eventEmitter, evt, add, handler, 1);\n            return this;\n\n        },\n\n        first: function (evt, handler) {\n            prepare(this);\n            process(this._.eventEmitter, evt, add, handler, 2);\n            this._.eventEmitter.namespaces.push(null);\n            return this;\n\n        },\n\n        off: function (evt, handler) {\n            if (prepare(this, false) === false) return this;\n            process(this._.eventEmitter, evt, remove, handler);\n            return this;\n\n        },\n\n        trigger: function (evt, data) {\n            prepare(this);\n            return trigger(this, evt, data);\n\n        }\n    };\n\n    var NittroEvent = _context.extend(function (target, type, data) {\n        this.target = target;\n        this.type = type;\n        this.data = data || {};\n\n        this._ = {\n            defaultPrevented: false,\n            async: false,\n            queue: null,\n            promise: null\n        };\n    }, {\n        preventDefault: function () {\n            this._.defaultPrevented = true;\n            return this;\n        },\n\n        isDefaultPrevented: function () {\n            return this._.defaultPrevented;\n        },\n\n        waitFor: function (promise) {\n            if (this._.promise) {\n                throw new Error('The event\\'s queue has already been frozen');\n            }\n\n            this._.queue || (this._.queue = []);\n            this._.queue.push(promise);\n            this._.async = true;\n            return this;\n        },\n\n        isAsync: function () {\n            return this._.async;\n        },\n\n        then: function (onfulfilled, onrejected) {\n            if (!this._.promise) {\n                this._.promise = this._.queue ? Promise.all(this._.queue) : Promise.resolve();\n                this._.queue = null;\n            }\n\n            return this._.promise.then(onfulfilled, onrejected);\n        }\n    });\n\n    _context.register(NittroEventEmitter, 'EventEmitter');\n    _context.register(NittroEvent, 'Event');\n\n});\n","_context.invoke('Nittro', function () {\n\n    var prepare = function (self, need) {\n        if (!self._) {\n            if (need === false) return false;\n            self._ = {};\n\n        }\n\n        if (!self._.hasOwnProperty('frozen')) {\n            if (need === false) return false;\n            self._.frozen = false;\n\n        }\n    };\n\n    var Freezable = {\n        freeze: function () {\n            prepare(this);\n            this._.frozen = true;\n            return this;\n\n        },\n\n        isFrozen: function () {\n            if (prepare(this, false) === false) {\n                return false;\n\n            }\n\n            return this._.frozen;\n\n        },\n\n        _updating: function (prop) {\n            if (prepare(this, false) === false) {\n                return this;\n\n            }\n\n            if (this._.frozen) {\n                var className = _context.lookupClass(this) || 'object';\n\n                if (prop) {\n                    prop = ' \"' + prop + '\"';\n\n                }\n\n                throw new Error('Cannot update property' + prop + ' of a frozen ' + className);\n\n            }\n\n            return this;\n\n        }\n    };\n\n\n    _context.register(Freezable, 'Freezable');\n\n});\n","_context.invoke('Nittro', function () {\n\n    var Object = _context.extend(function () {\n        this._ = { };\n\n    }, {\n\n    });\n\n    _context.mixin(Object, 'Nittro.EventEmitter');\n    _context.register(Object, 'Object');\n\n});\n","_context.invoke('Utils', function (Utils, undefined) {\n\n    var DateInterval = function (interval, locale) {\n        this._ = {\n            initialized: false,\n            interval: interval,\n            locale: locale || Utils.DateTime.defaultLocale\n        };\n    };\n\n    DateInterval.from = function (interval, locale) {\n        return new DateInterval(interval, locale);\n\n    };\n\n    var intervals = [\n        'year', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'\n    ];\n\n    var intervalLengths = {\n        year: 31536000000,\n        month: 2678400000,\n        week: 604800000,\n        day: 86400000,\n        hour: 3600000,\n        minute: 60000,\n        second: 1000,\n        millisecond: 1\n    };\n\n    function getValue(interval) {\n        if (typeof interval === 'number') {\n            return interval;\n        } else if (interval instanceof DateInterval) {\n            return interval.getLength();\n        } else {\n            return DateInterval.from(interval).getLength();\n        }\n    }\n\n    DateInterval.prototype.add = function (interval) {\n        this._initialize();\n        this._.interval += getValue(interval);\n        return this;\n\n    };\n\n    DateInterval.prototype.subtract = function (interval) {\n        this._initialize();\n        this._.interval -= getValue(interval);\n        return this;\n\n    };\n\n    DateInterval.prototype.isNegative = function () {\n        this._initialize();\n        return this._.interval < 0;\n\n    };\n\n    DateInterval.prototype.getLength = function () {\n        this._initialize();\n        return this._.interval;\n\n    };\n\n    DateInterval.prototype.valueOf = function () {\n        return this.getLength();\n\n    };\n\n\n    function formatAuto(interval, precision, locale) {\n        if (precision === true) {\n            precision = 8;\n\n        } else if (!precision) {\n            precision = 2;\n\n        }\n\n        var i, v, str = [], last, sign = '';\n\n        if (interval < 0) {\n            sign = '-';\n            interval = -interval;\n\n        }\n\n        intervals.some(function (i) {\n            if (interval >= intervalLengths[i]) {\n                precision--;\n                v = interval / intervalLengths[i];\n                v = precision === 0 ? Math.round(v) : Math.floor(v);\n                str.push(v + ' ' + Utils.DateTime.i18n.getInterval(locale, i, v));\n                interval -= v * intervalLengths[i];\n\n                if (precision === 0) {\n                    return true;\n\n                }\n            }\n        });\n\n        if (str.length > 2) {\n            last = str.pop();\n            return sign + str.join(', ') + ' ' + Utils.DateTime.i18n.getConjuction(locale) + ' ' + last;\n\n        } else {\n            return sign + str.join(' ' + Utils.DateTime.i18n.getConjuction(locale) + ' ');\n\n        }\n    }\n\n    function format(interval, pattern) {\n        var sign = interval < 0 ? '-' : '+';\n        interval = Math.abs(interval);\n\n        return (pattern + '').replace(/%(.)/g, function (m, f) {\n            var v, pad = false;\n\n            switch (f) {\n                case '%':\n                    return '%';\n\n                case 'y':\n                    m = intervalLengths.year;\n                    break;\n\n                case 'w':\n                    m = intervalLengths.week;\n                    break;\n\n                case 'm':\n                    pad = true;\n                case 'n':\n                    m = intervalLengths.month;\n                    break;\n\n                case 'd':\n                    pad = true;\n                case 'j':\n                    m = intervalLengths.day;\n                    break;\n\n                case 'H':\n                    pad = true;\n                case 'G':\n                    m = intervalLengths.hour;\n                    break;\n\n                case 'i':\n                    pad = true;\n                case 'I':\n                    m = intervalLengths.minute;\n                    break;\n\n                case 's':\n                    pad = true;\n                case 'S':\n                    m = intervalLengths.second;\n                    break;\n\n                case '-':\n                    return sign === '-' ? sign : '';\n\n                case '+':\n                    return sign;\n\n                default:\n                    throw new Error('Unknown format modifier: %' + f);\n\n            }\n\n            v = Math.floor(interval / m);\n            interval -= m * v;\n            return pad && v < 10 ? '0' + v : v;\n\n        });\n    }\n\n    DateInterval.prototype.format = function (pattern) {\n        this._initialize();\n\n        if (typeof pattern === 'boolean' || typeof pattern === 'number' || !pattern) {\n            return formatAuto(this._.interval, pattern, this._.locale);\n\n        } else {\n            return format(this._.interval, pattern);\n\n        }\n    };\n\n    DateInterval.prototype._initialize = function () {\n        if (this._.initialized) {\n            return;\n        }\n\n        this._.initialized = true;\n\n        if (typeof this._.interval === 'number') {\n            return;\n\n        }\n\n        var interval = this._.interval;\n\n        if (interval instanceof DateInterval) {\n            this._.interval = interval.getLength();\n\n        } else if (typeof interval === 'string') {\n            if (interval.match(/^\\s*(?:\\+|-)?\\s*\\d+\\s*$/)) {\n                this._.interval = parseInt(interval.trim());\n\n            } else {\n                var res = 0,\n                    rest;\n\n                rest = interval.replace(Utils.DateTime.i18n.getIntervalParser(this._.locale), function (_, sign, n, y, m, w, d, h, i, s, u) {\n                    sign = sign === '-' ? -1 : 1;\n\n                    n = parseInt(n) * sign;\n\n                    y && (n *= intervalLengths.year);\n                    m && (n *= intervalLengths.month);\n                    w && (n *= intervalLengths.week);\n                    d && (n *= intervalLengths.day);\n                    h && (n *= intervalLengths.hour);\n                    i && (n *= intervalLengths.minute);\n                    s && (n *= intervalLengths.second);\n                    u && (n *= intervalLengths.millisecond);\n\n                    res += n;\n\n                    return '';\n\n                });\n\n                if (rest.length) {\n                    throw new Error('Invalid interval specification \"' + interval + '\", didn\\'t understand \"' + rest + '\"');\n\n                }\n\n                this._.interval = res;\n\n            }\n        } else {\n            throw new Error('Invalid interval specification, expected string, number or a DateInterval instance');\n\n        }\n    };\n\n    _context.register(DateInterval, 'DateInterval');\n\n});\n","_context.invoke('Utils', function(Strings, Arrays, DateInterval, undefined) {\n\n\tvar DateTime = function(d, locale) {\n\t\tthis._ = {\n\t\t\tinitialized: false,\n\t\t\tdate: d || new Date(),\n            locale: locale || DateTime.defaultLocale\n\t\t};\n\t};\n\n\tDateTime.defaultLocale = 'en';\n\n\tDateTime.from = function(s, locale) {\n\t\treturn new DateTime(s, locale);\n\n\t};\n\n\tDateTime.now = function () {\n\t\treturn new DateTime();\n\t};\n\n\tDateTime.isDateObject = function(o) {\n\t\treturn typeof o === 'object' && o && o.date !== undefined && o.timezone !== undefined && o.timezone_type !== undefined;\n\n\t};\n\n\tDateTime.isLeapYear = function(y) {\n\t\treturn y % 4 === 0 && y % 100 !== 0 || y % 400 === 0;\n\n\t};\n\n    DateTime.isModifyString = function (str, locale) {\n        return DateTime.i18n.getParser(locale || DateTime.defaultLocale).test(str);\n    };\n\n\tDateTime.getDaysInMonth = function(m, y) {\n\t    while (m < 0) { m += 12; y--; }\n\t    while (m > 12) { m -= 12; y++; }\n\t\treturn m === 1 ? (DateTime.isLeapYear(y) ? 29 : 28) : (m in {3:1,5:1,8:1,10:1} ? 30 : 31);\n\n\t};\n\n\tvar ni = function() { throw new Error('Not implemented!'); },\n\t\tpad = function(n) {\n\t\t\treturn (n < 10) ? '0' + n : n;\n\t\t};\n\n\tvar formatTz = function (offset) {\n\t\tif ((typeof offset === 'string' || offset instanceof String) && offset.match(/(\\+|-)\\d\\d:\\d\\d/)) {\n\t\t\treturn offset;\n\n\t\t}\n\n\t\tif (typeof offset !== 'number') {\n\t\t\toffset = parseInt(offset);\n\n\t\t}\n\n\t\treturn (offset < 0 ? '+' : '-') + pad(parseInt(Math.abs(offset) / 60)) + ':' + pad(Math.abs(offset) % 60)\n\n\t};\n\n\tDateTime.getLocalTzOffset = function () {\n\t\treturn formatTz(new Date().getTimezoneOffset());\n\n\t};\n\n\tDateTime.formatModifiers = {\n\t\td: function(d, u) { return pad(u ? d.getUTCDate() : d.getDate()); },\n\t\tD: function(d, u, o) { return DateTime.i18n.getWeekday(o, u ? d.getUTCDay() : d.getDay(), true); },\n\t\tj: function(d, u) { return u ? d.getUTCDate() : d.getDate(); },\n\t\tl: function(d, u, o) { return DateTime.i18n.getWeekday(o, u ? d.getUTCDay() : d.getDay()); },\n\t\tN: function(d, u, n) { n = u ? d.getUTCDay() : d.getDay(); return n === 0 ? 7 : n; },\n\t\tS: function(d, u, n) { n = u ? d.getUTCDate() : d.getDate(); n %= 10; return n === 0 || n > 3 ? 'th' : ['st', 'nd', 'rd'][n - 1]; },\n\t\tw: function(d, u) { return u ? d.getUTCDay() : d.getDay(); },\n\t\tz: function(d, u, n, m, y, M) { n = u ? d.getUTCDate() : d.getDate(); n--; y = u ? d.getUTCFullYear() : d.getFullYear(); m = 0; M = u ? d.getUTCMonth() : d.getMonth(); while (m < M) n += DateTime.getDaysInMonth(m++, y); return n; },\n\t\tW: ni,\n\t\tF: function(d, u, o) { return DateTime.i18n.getMonth(o, u ? d.getUTCMonth() : d.getMonth()); },\n\t\tm: function(d, u) { return pad((u ? d.getUTCMonth() : d.getMonth()) + 1); },\n\t\tM: function(d, u, o) { return DateTime.i18n.getMonth(o, u ? d.getUTCMonth() : d.getMonth(), true); },\n\t\tn: function(d, u) { return (u ? d.getUTCMonth() : d.getMonth()) + 1; },\n\t\tt: function(d, u) { return DateTime.getDaysInMonth(u ? d.getUTCMonth() : d.getMonth(), u ? d.getUTCFullYear() : d.getFullYear()); },\n\t\tL: function(d, u) { return DateTime.isLeapYear(u ? d.getUTCFullYear() : d.getFullYear()) ? 1 : 0; },\n\t\to: ni,\n\t\tY: function(d, u) { return u ? d.getUTCFullYear() : d.getFullYear(); },\n\t\ty: function(d, u) { return (u ? d.getUTCFullYear() : d.getFullYear()).toString().substr(-2); },\n\t\ta: function(d, u, h) { h = u ? d.getUTCHours() : d.getHours(); return h >= 0 && h < 12 ? 'am' : 'pm'; },\n\t\tA: function(d, u) { return DateTime.formatModifiers.a(d, u).toUpperCase(); },\n\t\tg: function(d, u, h) { h = u ? d.getUTCHours() : d.getHours(); return h === 0 ? 12 : (h > 12 ? h - 12 : h); },\n\t\tG: function(d, u) { return u ? d.getUTCHours() : d.getHours(); },\n\t\th: function(d, u) { return pad(DateTime.formatModifiers.g(d, u)); },\n\t\tH: function(d, u) { return pad(u ? d.getUTCHours() : d.getHours()); },\n\t\ti: function(d, u) { return pad(u ? d.getUTCMinutes() : d.getMinutes()); },\n\t\ts: function(d, u) { return pad(u ? d.getUTCSeconds() : d.getSeconds()); },\n\t\tu: function(d, u) { return (u ? d.getUTCMilliseconds() : d.getMilliseconds()) * 1000; },\n\t\te: ni,\n\t\tI: ni,\n\t\tO: function (d, u) { return DateTime.formatModifiers.P(d, u).replace(':', ''); },\n\t\tP: function (d, u) { return u ? '+00:00' : formatTz(d.getTimezoneOffset()); },\n\t\tT: ni,\n\t\tZ: function (d, u) { return u ? 0 : d.getTimezoneOffset() * -60; },\n\t\tc: function (d, u) { return DateTime.from(d).format('Y-m-d\\\\TH:i:sP', u); },\n\t\tr: function (d, u) { return DateTime.from(d).format('D, n M Y G:i:s O', u); },\n\t\tU: function(d) { return Math.round(d.getTime() / 1000); }\n\t};\n\n\tDateTime.prototype.format = function(f, utc) {\n\t\tthis._initialize();\n\n\t\tvar date = this._.date,\n            locale = this._.locale,\n\t\t\tpattern = Arrays.getKeys(DateTime.formatModifiers).map(Strings.escapeRegex).join('|'),\n\t\t\tre = new RegExp('(\\\\\\\\*)(' + pattern + ')', 'g');\n\n\t\treturn f.replace(re, function(s, c, m) {\n\t\t\tif (c.length % 2) {\n\t\t\t\treturn c.substr(1) + m;\n\n\t\t\t}\n\n\t\t\treturn c + '' + (DateTime.formatModifiers[m](date, utc, locale));\n\n\t\t});\n\t};\n\n\tDateTime.prototype.getLocale = function () {\n        return this._.locale;\n    };\n\n\tDateTime.prototype.setLocale = function (locale) {\n\t    if (!DateTime.i18n.hasLocale(locale)) {\n\t        throw new Error('Unknown locale: ' + locale);\n        }\n\n        this._.locale = locale;\n        return this;\n\n    };\n\n\t[\n        'getTime',\n        'getDate', 'getDay', 'getMonth', 'getFullYear',\n        'getHours', 'getMinutes', 'getSeconds', 'getMilliseconds', 'getTimezoneOffset',\n        'getUTCDate', 'getUTCDay', 'getUTCMonth', 'getUTCFullYear',\n        'getUTCHours', 'getUTCMinutes', 'getUTCSeconds', 'getUTCMilliseconds',\n        'toDateString', 'toISOString', 'toJSON',\n        'toLocaleDateString', 'toLocaleFormat', 'toLocaleTimeString',\n        'toString', 'toTimeString', 'toUTCString'\n    ].forEach(function (method) {\n        DateTime.prototype[method] = function () {\n            this._initialize();\n            return this._.date[method].apply(this._.date, arguments);\n\n        };\n    });\n\n    [\n        'setTime',\n        'setDate', 'setMonth', 'setFullYear',\n        'setHours', 'setMinutes', 'setSeconds', 'setMilliseconds',\n        'setUTCDate', 'setUTCMonth', 'setUTCFullYear',\n        'setUTCHours', 'setUTCMinutes', 'setUTCSeconds', 'setUTCMilliseconds'\n    ].forEach(function (method) {\n        DateTime.prototype[method] = function () {\n            this._initialize();\n            this._.date[method].apply(this._.date, arguments);\n            return this;\n\n        };\n    });\n\n\tDateTime.prototype.getTimestamp = function() {\n\t\tthis._initialize();\n\t\treturn Math.round(this._.date.getTime() / 1000);\n\n\t};\n\n\tDateTime.prototype.getDateObject = function () {\n\t\tthis._initialize();\n\t\treturn this._.date;\n\n\t};\n\n\tDateTime.prototype.valueOf = function () {\n\t\treturn this.getTimestamp();\n\n\t};\n\n\tDateTime.prototype.modify = function(s) {\n\t\tthis._initialize();\n\n        var t = this._.date.getTime(),\n            parts, dt, i, o;\n\n        if (s instanceof DateInterval) {\n            this._.date = new Date(t + s.getLength());\n            return this;\n\n        }\n\n        parts = DateTime.i18n.getParser(this._.locale).exec(s.toLowerCase());\n\n        if (!parts) {\n            throw new Error('Invalid interval expression: ' + s);\n        }\n\n        /**\n         * Parts' indices:\n         *  1: now\n         *  2: yesterday\n         *  3: today\n         *  4: tomorrow\n         *  5: first of\n         *  6: last of\n         *  7: last\n         *  8: this\n         *  9: next\n         * 10: year\n         * 11: month\n         * 12: week\n         * 13: last\n         * 14: this\n         * 15: next\n         * 16-27: months\n         * 28-34: weekdays\n         * 35: noon\n         * 36: midnight\n         * 37: time\n         * 38: relative offset\n         */\n\n        if (parts[1]) {\n            t = Date.now();\n\n        } else if (parts[2]) {\n            t -= 86400000;\n\n        } else if (parts[3]) {\n            dt = new Date();\n            dt.setHours(this._.date.getHours(), this._.date.getMinutes(), this._.date.getSeconds(), this._.date.getMilliseconds());\n            t = dt.getTime();\n\n        } else if (parts[4]) {\n            t += 86400000;\n\n        } else if (parts[5] || parts[6]) {\n            dt = new Date(t);\n            o = parts[7] ? -1 : (parts[9] ? 1 : 0);\n\n            if (parts[10]) {\n                dt.setFullYear(dt.getFullYear() + o, parts[5] ? 0 : 11, parts[5] ? 1 : 31);\n\n            } else if (parts[11]) {\n                dt.setMonth(dt.getMonth() + o, parts[5] ? 1 : DateTime.getDaysInMonth(dt.getMonth() + o, dt.getFullYear()));\n\n            } else { // parts[12]\n                dt.setDate(dt.getDate() - dt.getDay() + DateTime.i18n.getWeekStart(this._.locale) + o * 7 + (parts[5] ? 0 : 6));\n\n            }\n\n            t = dt.getTime();\n\n        } else if (parts[13] || parts[14] || parts[15]) {\n            dt = new Date(t);\n            o = parts[13] ? -1 : (parts[15] ? 1 : 0);\n\n            for (i = 16; i < 35; i++) {\n                if (parts[i]) {\n                    break;\n                }\n            }\n\n            if (i < 28) {\n                i -= 16;\n                dt.setMonth(o * 12 + i, 1);\n\n            } else {\n                i -= 28;\n\n                if (i < DateTime.i18n.getWeekStart(this._.locale)) {\n                    i += 7;\n                }\n\n                dt.setDate(dt.getDate() - dt.getDay() + o * 7 + i);\n\n            }\n\n            t = dt.getTime();\n\n        }\n\n        if (parts[35] || parts[36]) {\n            dt = new Date(t);\n            dt.setHours(parts[36] ? 0 : 12, 0, 0, 0);\n            t = dt.getTime();\n\n        } else if (parts[37]) {\n            dt = new Date(t);\n            o = parts[37].match(/^(\\d+)(?::(\\d+)(?::(\\d+))?)?\\s*([ap]m)?/i);\n            o[1] = parseInt(o[1].replace(/^0(\\d)$/, '$1'));\n\n            if (o[1] === 12 && o[4] === 'am') {\n                o[1] = 0;\n            } else if (o[1] < 12 && o[4] === 'pm') {\n                o[1] += 12;\n            }\n\n            o[2] = o[2] !== undefined ? parseInt(o[2].replace(/^0(\\d)$/, '$1')) : 0;\n            o[3] = o[3] !== undefined ? parseInt(o[3].replace(/^0(\\d)$/, '$1')) : 0;\n            dt.setHours(o[1], o[2], o[3], 0);\n            t = dt.getTime();\n\n        }\n\n        if (parts[38]) {\n            t += DateInterval.from(parts[38], this._.locale).getLength();\n        }\n\n        this._.date = new Date(t);\n        return this;\n\n\t};\n\n\tDateTime.prototype.modifyClone = function(s) {\n\t\treturn DateTime.from(this).modify(s);\n\n\t};\n\n\tDateTime.prototype._initialize = function() {\n\t\tif (this._.initialized) {\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._.initialized = true;\n\n        var m, s;\n\n\t\tif (typeof this._.date === 'string') {\n\t\t\tif (m = this._.date.match(/^@(\\d+)$/)) {\n\t\t\t\tthis._.date = new Date(m[1] * 1000);\n\n\t\t\t} else if (m = this._.date.match(/^(\\d\\d\\d\\d-\\d\\d-\\d\\d)[ T](\\d\\d:\\d\\d(?::\\d\\d(?:\\.\\d+)?)?)([-+]\\d\\d:?\\d\\d)?$/)) {\n\t\t\t\tthis._.date = new Date(m[1] + 'T' + m[2] + (m[3] || ''));\n\n\t\t\t} else if (DateTime.isModifyString(this._.date, this._.locale)) {\n\t\t\t\ts = this._.date;\n\t\t\t\tthis._.date = new Date();\n\t\t\t\tthis.modify(s);\n\n\t\t\t} else {\n\t\t\t\tthis._.date = new Date(this._.date);\n\n\t\t\t}\n\t\t} else if (typeof this._.date === 'number') {\n\t\t\tthis._.date = new Date(this._.date);\n\n\t\t} else if (DateTime.isDateObject(this._.date)) {\n\t\t\ts = this._.date.date;\n\n\t\t\tif (this._.date.timezone_type !== 3 || this._.date.timezone === 'UTC') {\n\t\t\t\ts += ' ' + this._.date.timezone;\n\n\t\t\t}\n\n\t\t\tthis._.date = new Date(s);\n\n\t\t} else if (this._.date instanceof DateTime) {\n\t\t    this._.locale = this._.date.getLocale();\n\t\t\tthis._.date = new Date(this._.date.getTime());\n\n\t\t}\n\t};\n\n    _context.register(DateTime, 'DateTime');\n\n});\n","_context.invoke('Utils', function(DateTime, Strings) {\n\n    function buildParser(locale) {\n        var i;\n\n        if (!('months' in locale.parsers)) {\n            locale.parsers.months = [];\n\n            for (i = 0; i < 12; i++) {\n                locale.parsers.months.push(Strings.escapeRegex(locale.keywords.months.full[i]) + '|' + Strings.escapeRegex(locale.keywords.months.abbrev[i]));\n            }\n        }\n\n        if (!('weekdays' in locale.parsers)) {\n            locale.parsers.weekdays = [];\n\n            for (i = 0; i < 7; i++) {\n                locale.parsers.weekdays.push(Strings.escapeRegex(locale.keywords.weekdays.full[i]) + '|' + Strings.escapeRegex(locale.keywords.weekdays.abbrev[i]));\n            }\n        }\n\n        var parts = [\n            '^',\n            '(?:',\n                '(?:',\n                    '(', locale.parsers.now, ')|',\n                    '(', locale.parsers.yesterday, ')|',\n                    '(', locale.parsers.today, ')|',\n                    '(', locale.parsers.tomorrow, ')|',\n                    '(?:',\n                        '(', locale.parsers.firstOf, ')|',\n                        '(', locale.parsers.lastOf, ')',\n                    ')\\\\s+(?:',\n                        '(', locale.parsers.last, ')|',\n                        '(', locale.parsers['this'], ')|',\n                        '(', locale.parsers.next, ')',\n                    ')\\\\s+(?:',\n                        '(', locale.parsers.year, ')|',\n                        '(', locale.parsers.month, ')|',\n                        '(', locale.parsers.week, ')',\n                    ')',\n                    '|',\n                    '(?:',\n                        '(', locale.parsers.last, ')|',\n                        '(', locale.parsers['this'], ')|',\n                        '(', locale.parsers.next, ')',\n                    ')\\\\s+(?:',\n                        '(', locale.parsers.months.join(')|('), ')',\n                        '|',\n                        '(', locale.parsers.weekdays.join(')|('), ')',\n                    ')',\n                ')(?:\\\\s+|$)',\n            ')?',\n            '(?:',\n                '(?:', locale.parsers.at, '\\\\s+)?',\n                '(?:',\n                    '(', locale.parsers.noon, ')|',\n                    '(', locale.parsers.midnight, ')|',\n                    '([012]?\\\\d(?::[0-5]\\\\d(?::[0-5]\\\\d)?)?(?:\\\\s*[ap]m)?)',\n                ')',\n                '(?=[-+]|\\\\s|$)',\n            ')?',\n            '(',\n                '(?:',\n                    '\\\\s*[-+]?\\\\s*\\\\d+\\\\s+',\n                    '(?:',\n                        locale.parsers.intervals.year, '|',\n                        locale.parsers.intervals.month, '|',\n                        locale.parsers.intervals.week, '|',\n                        locale.parsers.intervals.day, '|',\n                        locale.parsers.intervals.hour, '|',\n                        locale.parsers.intervals.minute, '|',\n                        locale.parsers.intervals.second, '|',\n                        locale.parsers.intervals.millisecond,\n                    ')',\n                    '(?=[-+]|\\\\s|$)',\n                ')*',\n            ')',\n            '$'\n        ];\n\n        return new RegExp(parts.join(''), 'i');\n\n    }\n\n    function buildIntervalParser(locale) {\n        var parts = [\n            '\\\\s*([-+]?)\\\\s*(\\\\d+)\\\\s+',\n            '(?:',\n                '(', locale.parsers.intervals.year, ')|',\n                '(', locale.parsers.intervals.month, ')|',\n                '(', locale.parsers.intervals.week, ')|',\n                '(', locale.parsers.intervals.day, ')|',\n                '(', locale.parsers.intervals.hour, ')|',\n                '(', locale.parsers.intervals.minute, ')|',\n                '(', locale.parsers.intervals.second, ')|',\n                '(', locale.parsers.intervals.millisecond, ')',\n            ')\\\\s*'\n        ];\n\n        return new RegExp(parts.join(''), 'ig');\n\n    }\n\n    var i18n = DateTime.i18n = {\n        locales: {},\n\n        hasLocale: function(locale) {\n            return locale in i18n.locales;\n        },\n\n        getLocale: function(locale) {\n            if (!i18n.hasLocale(locale)) {\n                throw new Error('Unknown locale: ' + locale);\n            }\n\n            return i18n.locales[locale];\n\n        },\n\n        getMonth: function(locale, m, abbrev) {\n            return i18n.getLocale(locale).keywords.months[abbrev ? 'abbrev' : 'full'][m];\n        },\n\n        getWeekday: function(locale, d, abbrev) {\n            return i18n.getLocale(locale).keywords.weekdays[abbrev ? 'abbrev' : 'full'][d];\n        },\n\n        getConjuction: function(locale) {\n            return i18n.getLocale(locale).keywords.conjuction;\n        },\n\n        getInterval: function(locale, unit, n) {\n            locale = i18n.getLocale(locale);\n            n = locale.getPlural(n);\n            return locale.keywords.intervals[unit][n];\n\n        },\n\n        getWeekStart: function(locale) {\n            return i18n.getLocale(locale).weekStart;\n        },\n\n        getParser: function (locale) {\n            locale = i18n.getLocale(locale);\n\n            if (!locale.parser) {\n                locale.parser = buildParser(locale);\n            }\n\n            return locale.parser;\n\n        },\n\n        getIntervalParser: function(locale) {\n            locale = i18n.getLocale(locale);\n\n            if (!locale.intervalParser) {\n                locale.intervalParser = buildIntervalParser(locale);\n            }\n\n            return locale.intervalParser;\n\n        }\n    };\n\n});\n","_context.invoke('Utils', function (DateTime) {\n\n    DateTime.i18n.locales.en = {\n        getPlural: function(n) { return n === 1 ? 0 : 1; },\n        weekStart: 0,\n        keywords: {\n            weekdays: {\n                abbrev: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n                full: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n            },\n            months: {\n                abbrev: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n                full: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n            },\n            intervals: {\n                year: ['year', 'years'],\n                month: ['month', 'months'],\n                week: ['week', 'weeks'],\n                day: ['day', 'days'],\n                hour: ['hour', 'hours'],\n                minute: ['minute', 'minutes'],\n                second: ['second', 'seconds'],\n                millisecond: ['millisecond', 'milliseconds']\n            },\n            conjuction: 'and'\n        },\n        parsers: {\n            now: 'now',\n            today: 'today',\n            tomorrow: 'tomorrow',\n            yesterday: 'yesterday',\n            at: 'at',\n            noon: 'noon',\n            midnight: 'midnight',\n            last: 'last',\n            'this': 'this',\n            next: 'next',\n            firstOf: 'first(?:\\\\s+day)?\\\\s+of',\n            lastOf: 'last(?:\\\\s+day)?\\\\s+of',\n            year: 'year',\n            month: 'month',\n            week: 'week',\n            intervals: {\n                year: 'y(?:ears?)?',\n                month: 'mon(?:ths?)?',\n                week: 'w(?:eeks?)?',\n                day: 'd(?:ays?)?',\n                hour: 'h(?:ours?)?',\n                minute: 'min(?:utes?)?',\n                second: 's(?:ec(?:onds?)?)?',\n                millisecond: 'millis(?:econds?)?|ms'\n            }\n        }\n    };\n\n});\n","_context.invoke('Nittro.Utils', function(Nittro, Strings, Arrays, HashMap, undefined) {\n\n    var Tokenizer = _context.extend(function(patterns, matchCase) {\n        var types = false;\n\n        if (!Array.isArray(patterns)) {\n            if (patterns instanceof HashMap) {\n                types = patterns.getKeys();\n                patterns = patterns.getValues();\n\n            } else {\n                var tmp = patterns, type;\n                types = [];\n                patterns = [];\n\n                for (type in tmp) {\n                    if (tmp.hasOwnProperty(type)) {\n                        types.push(type);\n                        patterns.push(tmp[type]);\n\n                    }\n                }\n            }\n        }\n\n        this._ = {\n            pattern: '(' + patterns.join(')|(') + ')',\n            types: types,\n            matchCase: matchCase\n        };\n    }, {\n        STATIC: {\n            getCoordinates: function(text, offset) {\n                text = text.substr(0, offset);\n                var m = text.match(/\\n/g);\n\n                return [(m ? m.length : 0) + 1, offset - (\"\\n\" + text).lastIndexOf(\"\\n\") + 1];\n\n            }\n        },\n\n        tokenize: function(input) {\n            var re, tokens, pos, n;\n\n            if (this._.types) {\n                re = new RegExp(this._.pattern, 'gm' + (this._.matchCase ? '' : 'i'));\n                tokens = [];\n                pos = 0;\n                n = this._.types.length;\n\n                input.replace(re, function () {\n                    var ofs = arguments[n + 1],\n                        i;\n\n                    if (ofs > pos) {\n                        tokens.push([input.substr(pos, ofs - pos), pos, null]);\n\n                    }\n\n                    for (i = 1; i <= n; i++) {\n                        if (arguments[i] !== undefined) {\n                            tokens.push([arguments[i], ofs, this._.types[i - 1]]);\n                            pos = ofs + arguments[0].length;\n                            return;\n\n                        }\n                    }\n\n                    throw new Error('Unknown token type: ' + arguments[0]);\n\n                }.bind(this));\n\n                if (pos + 1 < input.length) {\n                    tokens.push([input.substr(pos), pos, null]);\n\n                }\n            } else {\n                tokens = Strings.split(input, new RegExp(this._.pattern, 'm' + (this._.matchCase ? '' : 'i')), true, true, true);\n\n            }\n\n            return tokens;\n\n        }\n    });\n\n    _context.register(Tokenizer, 'Tokenizer');\n\n}, {\n    Strings: 'Utils.Strings',\n    Arrays: 'Utils.Arrays',\n    HashMap: 'Utils.HashMap'\n});\n","_context.invoke('Nittro.Neon', function(Nittro, HashMap, Tokenizer, Strings, Arrays, DateTime, undefined) {\n\n    var Neon = _context.extend(function() {\n        this._cbStr = this._cbStr.bind(this);\n\n    }, {\n        STATIC: {\n            patterns: [\n                '\\'[^\\'\\\\n]*\\'|\"(?:\\\\\\\\.|[^\"\\\\\\\\\\\\n])*\"', //string\n                '(?:[^#\"\\',:=[\\\\]{}()\\x00-\\x20!`-]|[:-][^\"\\',\\\\]})\\\\s])(?:[^,:=\\\\]})(\\x00-\\x20]|:(?![\\\\s,\\\\]})]|$)|[ \\\\t]+[^#,:=\\\\]})(\\x00-\\x20])*', // literal / boolean / integer / float\n                '[,:=[\\\\]{}()-]', // symbol\n                '?:#.*', // comment\n                '\\\\n[\\\\t ]*', // new line + indent\n                '?:[\\\\t ]+' // whitespace\n            ],\n\n            brackets: {\n                '{' : '}',\n                '[' : ']',\n                '(' : ')'\n            },\n\n            consts: {\n                'true': true, 'True': true, 'TRUE': true, 'yes': true, 'Yes': true, 'YES': true, 'on': true, 'On': true, 'ON': true,\n                'false': false, 'False': false, 'FALSE': false, 'no': false, 'No': false, 'NO': false, 'off': false, 'Off': false, 'OFF': false,\n                'null': null, 'Null': null, 'NULL': null\n            },\n\n            indent: '    ',\n\n            BLOCK: 1,\n\n            encode: function(data, options) {\n                var tmp, s, isList;\n\n                if (data instanceof DateTime) {\n                    return data.format('Y-m-d H:i:s O');\n\n                } else if (data instanceof NeonEntity) {\n                    tmp = Neon.encode(data.attributes);\n                    return Neon.encode(data.value) + '(' + tmp.substr(1, tmp.length - 2) + ')';\n\n                }\n\n                if (data && typeof data === 'object') { // array or object literal\n                    s = [];\n                    isList = Array.isArray(data);\n\n                    if (options & Neon.BLOCK) {\n                        Arrays.walk(data, function(k, v) {\n                            v = Neon.encode(v, Neon.BLOCK);\n                            s.push(isList ? '-' : (Neon.encode(k) + ':'), Strings.contains(v, \"\\n\") ? \"\\n\" + Neon.indent + v.replace(/\\n/g, \"\\n\" + Neon.indent) : (' ' + v), \"\\n\");\n\n                        });\n\n                        return s.length ? s.join('') : '[]';\n\n                    } else {\n                        Arrays.walk(data, function(k, v) {\n                            s.push(isList ? '' : (Neon.encode(k) + ': '), Neon.encode(v), ', ');\n\n                        });\n\n                        s.pop(); // remove last ', '\n                        return (isList ? '[' : \"{\") + s.join('') + (isList ? ']' : '}');\n\n                    }\n                } else if (typeof data === 'string' && !Strings.isNumeric(data)\n                    && !data.match(/[\\x00-\\x1F]|^\\d{4}|^(true|false|yes|no|on|off|null)$/i)\n                    && data.match(new RegExp('^' + Neon.patterns[1] + '$'))) {\n\n                    return data;\n\n                } else {\n                    return JSON.stringify(data);\n\n                }\n            },\n\n            decode: function(input) {\n                if (typeof input !== 'string') {\n                    throw new Error('Invalid argument, must be a string');\n\n                }\n\n                if (!Neon.tokenizer) {\n                    Neon.tokenizer = new Tokenizer(Neon.patterns);\n\n                }\n\n                input = input.replace(/\\r/g, '');\n\n                var parser = new Neon(),\n                    res;\n\n                parser.input = input;\n                parser.tokens = Neon.tokenizer.tokenize(input);\n\n                res = parser.parse(0, new HashMap());\n\n                while (parser.tokens[parser.n] !== undefined) {\n                    if (parser.tokens[parser.n][0].charAt(0) === \"\\n\") {\n                        parser.n++;\n\n                    } else {\n                        parser.error();\n\n                    }\n                }\n\n                return res;\n\n            }\n        },\n\n        input: null,\n        tokens: null,\n        n: 0,\n        indentTabs: null,\n\n        parse: function(indent, result) {\n            indent === undefined && (indent = null);\n            result === undefined && (result = new HashMap());\n\n            var inlineParser = (indent === null),\n                value = null, key = null, entity = null,\n                hasValue = false, hasKey = false,\n                t;\n\n            for (; this.n < this.tokens.length; this.n++) {\n                t = this.tokens[this.n][0];\n\n                if (t === ',') {\n                    if ((!hasKey && !hasValue) || !inlineParser) {\n                        this.error();\n\n                    }\n\n                    this.addValue(result, hasKey, key, hasValue ? value : null);\n                    hasKey = hasValue = false;\n\n                } else if (t === ':' || t === '=') {\n                    if (hasKey || !hasValue) {\n                        this.error();\n\n                    }\n\n                    if (typeof value !== 'string' && typeof value !== 'number') {\n                        this.error('Unacceptable key');\n\n                    }\n\n                    key = Strings.toString(value);\n                    hasKey = true;\n                    hasValue = false;\n\n                } else if (t === '-') {\n                    if (hasKey || hasValue || inlineParser) {\n                        this.error();\n\n                    }\n\n                    key = null;\n                    hasKey = true;\n\n                } else if (Neon.brackets[t] !== undefined) {\n                    if (hasValue) {\n                        if (t !== '(') {\n                            this.error();\n\n                        }\n\n                        this.n++;\n\n                        entity = new NeonEntity();\n                        entity.value = value;\n                        entity.attributes = this.parse(null, new HashMap());\n                        value = entity;\n\n                    } else {\n                        this.n++;\n                        value = this.parse(null, new HashMap());\n\n                    }\n\n                    hasValue = true;\n\n                    if (this.tokens[this.n] === undefined || this.tokens[this.n][0] !== Neon.brackets[t]) {\n                        this.error();\n\n                    }\n\n                } else if (t === '}' || t === ']' || t === ')') {\n                    if (!inlineParser) {\n                        this.error();\n\n                    }\n\n                    break;\n\n                } else if (t.charAt(0) === \"\\n\") {\n                    if (inlineParser) {\n                        if (hasKey || hasValue) {\n                            this.addValue(result, hasKey, key, hasValue ? value : null);\n                            hasKey = hasValue = false;\n\n                        }\n                    } else {\n                        while (this.tokens[this.n + 1] !== undefined && this.tokens[this.n + 1][0].charAt(0) === \"\\n\") {\n                            this.n++;\n\n                        }\n\n                        if (this.tokens[this.n + 1] === undefined) {\n                            break;\n\n                        }\n\n                        var newIndent = this.tokens[this.n][0].length - 1;\n                        if (indent === null) {\n                            indent = newIndent;\n\n                        }\n\n                        if (newIndent) {\n                            if (this.indentTabs === null) {\n                                this.indentTabs = this.tokens[this.n][0].charAt(1) === \"\\t\";\n\n                            }\n\n                            if (Strings.contains(this.tokens[this.n][0], this.indentTabs ? ' ' : \"\\t\")) {\n                                this.n++;\n                                this.error('Either tabs or spaces may be used for indentation, not both');\n\n                            }\n                        }\n\n                        if (newIndent > indent) {\n                            if (hasValue || !hasKey) {\n                                this.n++;\n                                this.error('Unexpected indentation');\n\n                            } else {\n                                this.addValue(result, key !== null, key, this.parse(newIndent, new HashMap()));\n\n                            }\n\n                            newIndent = this.tokens[this.n] !== undefined ? this.tokens[this.n][0].length - 1 : 0;\n                            hasKey = false;\n\n                        } else {\n                            if (hasValue && !hasKey) {\n                                break;\n\n                            } else if (hasKey) {\n                                this.addValue(result, key !== null, key, hasValue ? value : null);\n                                hasKey = hasValue = false;\n\n                            }\n                        }\n\n                        if (newIndent < indent) {\n                            return result;\n\n                        }\n                    }\n                } else {\n                    if (hasValue) {\n                        this.error();\n\n                    }\n\n                    if (t.charAt(0) === '\"') {\n                        value = t.substr(1, t.length - 2).replace(/\\\\(?:u[0-9a-f]{4}|x[0-9a-f]{2}|.)/gi, this._cbStr);\n\n                    } else if (t.charAt(0) === \"'\") {\n                        value = t.substr(1, t.length - 2);\n\n                    } else if (Neon.consts[t] !== undefined) {\n                        value = Neon.consts[t];\n\n                    } else if (Strings.isNumeric(t)) {\n                        value = parseFloat(t);\n\n                    } else if (t.match(/^\\d\\d\\d\\d-\\d\\d?-\\d\\d?(?:(?:[Tt]| +)\\d\\d?:\\d\\d(?::\\d\\d(?:\\.\\d*)?)? *(?:Z|[-+]\\d\\d?(?::?\\d\\d)?)?)?$/)) {\n                        value = DateTime.from(t);\n\n                    } else {\n                        value = t;\n\n                    }\n\n                    hasValue = true;\n\n                }\n            }\n\n            if (inlineParser) {\n                if (hasKey || hasValue) {\n                    this.addValue(result, hasKey, key, hasValue ? value : null);\n\n                }\n            } else {\n                if (hasValue && !hasKey) {\n                    if (!result.length) {\n                        result = value;\n\n                    } else {\n                        this.error();\n\n                    }\n                } else if (hasKey) {\n                    this.addValue(result, key !== null, key, hasValue ? value : null);\n\n                }\n            }\n\n            return result;\n\n        },\n\n        addValue: function(result, hasKey, key, value) {\n            if (hasKey) {\n                if (result && result.has(key)) {\n                    this.error(\"Duplicated key \" + key);\n\n                }\n\n                result.set(key, value);\n\n            } else {\n                result.push(value);\n\n            }\n        },\n\n        _cbStr: function(m) {\n            var mapping = {t: '\\t', n: '\\n', r: '\\r', f: '\\x0C', b: '\\x08', '\"': '\"', '\\\\': '\\\\', '/': '/', '_': '\\xC2\\xA0'}\n\n            if (mapping[m.charAt(1)] !== undefined) {\n                return mapping[m.charAt(1)];\n\n            } else if (m.charAt(1) === 'u' && m.length === 6) {\n                return String.fromCharCode(parseInt(m.substr(2), 16));\n\n            } else if (m.charAt(1) === 'x' && m.length === 4) {\n                return String.fromCharCode(parseInt(m.substr(2), 16));\n\n            } else {\n                this.error('Invalid escape sequence ' + m);\n\n            }\n        },\n\n        error: function(msg) {\n            var last = this.tokens[this.n] !== undefined ? this.tokens[this.n] : null,\n                pos = Tokenizer.getCoordinates(this.input, last ? last[1] : this.input.length),\n                token = last ? last[0].substr(0, 40).replace(/\\n/g, '<new line>') : 'end';\n\n            throw new Error((msg || 'Unexpected %s').replace(/%s/g, token) + ' on line ' + pos[0] + ', column ' + pos[1]);\n\n        }\n\n    });\n\n    var NeonEntity = function(value, attributes) {\n        this.value = value || null;\n        this.attributes = attributes || null;\n\n    };\n\n    _context.register(Neon, 'Neon');\n    _context.register(NeonEntity, 'NeonEntity');\n\n}, {\n    HashMap: 'Utils.HashMap',\n    Strings: 'Utils.Strings',\n    Arrays: 'Utils.Arrays',\n    DateTime: 'Utils.DateTime',\n    Tokenizer: 'Nittro.Utils.Tokenizer'\n});\n","_context.invoke('Nittro.DI', function(undefined) {\n\n    var ServiceDefinition = _context.extend(function(factory, args, setup, run) {\n        this._ = {\n            factory: factory,\n            args: args || {},\n            setup: setup || [],\n            run: !!run\n        };\n    }, {\n        getFactory: function() {\n            return this._.factory;\n        },\n\n        setFactory: function(factory, args) {\n            this._.factory = factory;\n\n            if (args !== undefined) {\n                this._.args = args;\n            }\n\n            return this;\n        },\n\n        getArguments: function () {\n            return this._.args;\n        },\n\n        setArguments: function(args) {\n            this._.args = args;\n            return this;\n        },\n\n        getSetup: function () {\n            return this._.setup;\n        },\n\n        hasSetup: function() {\n            return this._.setup.length > 0;\n        },\n\n        addSetup: function(callback) {\n            this._.setup.push(callback);\n            return this;\n        },\n\n        setRun: function(state) {\n            this._.run = state === undefined || !!state;\n            return this;\n        },\n\n        isRun: function() {\n            return this._.run;\n        }\n    });\n\n    _context.register(ServiceDefinition, 'ServiceDefinition');\n\n});\n","_context.invoke('Nittro.DI', function(Nittro, ReflectionClass, ReflectionFunction, Arrays, Strings, HashMap, Neon, NeonEntity, ServiceDefinition, undefined) {\n\n    var prepare = function (self) {\n        if (!self._) {\n            self._ = {};\n        }\n\n        if (!self._.services) {\n            self._.services = {};\n            self._.serviceDefs = {};\n\n        }\n    };\n\n    var ContainerMixin = {\n        addService: function (name, service) {\n            prepare(this);\n\n            if (this._.services[name] || this._.serviceDefs[name]) {\n                throw new Error('Container already has a service named \"' + name + '\"');\n\n            }\n\n            this._.services[name] = service;\n\n            return this;\n\n        },\n\n        addServiceDefinition: function (name, definition, override) {\n            prepare(this);\n\n            if (!override && (this._.services[name] || this._.serviceDefs[name])) {\n               throw new Error('Container already has a service named \"' + name + '\"');\n\n            }\n\n            this._.serviceDefs[name] = definition;\n\n            return this;\n\n        },\n\n        hasServiceDefinition: function(name) {\n            prepare(this);\n            return this._.serviceDefs[name] !== undefined;\n        },\n\n        getServiceDefinition: function(name) {\n            prepare(this);\n\n            if (!this._.serviceDefs[name]) {\n                throw new Error('Container has no service \"' + name + '\"');\n\n            }\n\n            if (typeof this._.serviceDefs[name] === 'string') {\n                this._.serviceDefs[name] = new ServiceDefinition(\n                    this._.serviceDefs[name].replace(/!$/, ''),\n                    null,\n                    null,\n                    !!this._.serviceDefs[name].match(/!$/)\n                );\n            } else if (typeof this._.serviceDefs[name] === 'function') {\n                this._.serviceDefs[name] = new ServiceDefinition(\n                    this._.serviceDefs[name]\n                );\n            } else if (!(this._.serviceDefs[name] instanceof ServiceDefinition)) {\n                this._.serviceDefs[name] = new ServiceDefinition(\n                    this._.serviceDefs[name].factory,\n                    this._.serviceDefs[name].args,\n                    this._.serviceDefs[name].setup,\n                    this._.serviceDefs[name].run\n                );\n            }\n\n            return this._.serviceDefs[name];\n\n        },\n\n        getService: function (name) {\n            prepare(this);\n\n            if (name === 'container') {\n                return this;\n\n            } else if (this._.services[name] === undefined) {\n                if (this._.serviceDefs[name]) {\n                    this._createService(name);\n\n                } else {\n                    throw new Error('Container has no service named \"' + name + '\"');\n\n                }\n            }\n\n            return this._.services[name];\n\n        },\n\n        hasService: function (name) {\n            prepare(this);\n            return name === 'container' || this._.services[name] !== undefined || this._.serviceDefs[name] !== undefined;\n\n        },\n\n        isServiceCreated: function (name) {\n            if (!this.hasService(name)) {\n                throw new Error('Container has no service named \"' + name + '\"');\n\n            }\n\n            return !!this._.services[name];\n\n        },\n\n        runServices: function () {\n            prepare(this);\n\n            var name, def;\n\n            for (name in this._.serviceDefs) {\n                def = this.getServiceDefinition(name);\n\n                if (def.isRun()) {\n                    this.getService(name);\n\n                }\n            }\n        },\n\n        invoke: function (callback, args, thisArg) {\n            prepare(this);\n            args = this._autowireArguments(callback, args);\n            return callback.apply(thisArg || null, this._expandArguments(args));\n\n        },\n\n        _createService: function (name) {\n            var def = this.getServiceDefinition(name),\n                factory = def.getFactory(),\n                obj,\n                service,\n                setup;\n\n            if (typeof factory === 'function') {\n                service = this.invoke(factory, def.getArguments());\n\n                if (!service) {\n                    throw new Error('Factory failed to create service \"' + name + '\"');\n\n                }\n            } else {\n                factory = this._toEntity(factory);\n                service = this._expandEntity(factory, null, def.getArguments());\n\n                if (service === factory) {\n                    throw new Error('Invalid factory for service \"' + name + '\"');\n\n                }\n            }\n\n            this._.services[name] = service;\n\n            if (def.hasSetup()) {\n                setup = def.getSetup();\n\n                for (var i = 0; i < setup.length; i++) {\n                    if (typeof setup[i] === 'function') {\n                        this.invoke(setup[i], null, service);\n\n                    } else {\n                        obj = this._toEntity(setup[i]);\n                        this._expandEntity(obj, service);\n\n                    }\n                }\n            }\n\n            return service;\n\n        },\n\n        _autowireArguments: function (callback) {\n            var argList = ReflectionFunction.from(callback).getArgs();\n\n            var args = Arrays.createFrom(arguments, 1)\n                .filter(function(arg) { return !!arg; })\n                .map(function (arg) {\n                    if (arg instanceof HashMap) {\n                        if (arg.isList()) {\n                            arg = HashMap.from(arg.getValues(), argList);\n\n                        }\n                    } else {\n                        arg = HashMap.from(arg, argList);\n\n                    }\n\n                    return arg;\n\n                });\n\n            var i, a;\n\n            lookupArg:\n            for (i = 0; i < argList.length; i++) {\n                for (a = args.length - 1; a >= 0; a--) {\n                    if (args[a].has(argList[i])) {\n                        argList[i] = args[a].get(argList[i]);\n                        continue lookupArg;\n\n                    } else if (args[a].has(i)) {\n                        argList[i] = args[a].get(i);\n                        continue lookupArg;\n\n                    }\n                }\n\n                if (this.hasService(argList[i])) {\n                    argList[i] = this.getService(argList[i]);\n                    continue;\n\n                }\n\n                throw new Error('Cannot autowire argument \"' + argList[i] + '\" of function');\n\n            }\n\n            return argList;\n\n        },\n\n        _expandArguments: function (args) {\n            for (var i = 0; i < args.length; i++) {\n                args[i] = this._expandArg(args[i]);\n\n            }\n\n            return args;\n\n        },\n\n        _expandArg: function (arg) {\n            if (arg instanceof NeonEntity) {\n                return this._expandEntity(arg);\n\n            } else if (typeof arg === 'string' && arg.match(/^@\\S+$/)) {\n                return this.getService(arg.substr(1));\n\n            } else {\n                return arg;\n\n            }\n        },\n\n        _toEntity: function (str) {\n            var m = str.match(/^([^\\(]+)\\((.*)\\)$/);\n\n            if (m) {\n                return new NeonEntity(m[1], Neon.decode('[' + m[2] + ']'));\n\n            } else {\n                return new NeonEntity(str, new HashMap());\n\n            }\n        },\n\n        _expandEntity: function (entity, context, mergeArgs) {\n            var m, obj, method, args;\n\n            if (m = entity.value.match(/^(?:(@)?([^:].*?))?(?:::(.+))?$/)) {\n                if (m[2]) {\n                    obj = m[1] ? this.getService(m[2]) : ReflectionClass.getClass(m[2]);\n\n                } else if (context) {\n                    obj = context;\n\n                } else {\n                    throw new Error('No context for calling ' + entity.value + ' given');\n\n                }\n\n                if (m[3] !== undefined) {\n                    method = m[3];\n                    args = this._autowireArguments(obj[method], entity.attributes, mergeArgs);\n                    return obj[method].apply(obj, this._expandArguments(args));\n\n                } else if (!m[1]) {\n                    args = this._autowireArguments(obj, entity.attributes, mergeArgs);\n                    return ReflectionClass.from(obj).newInstanceArgs(this._expandArguments(args));\n\n                } else if (entity.attributes.length) {\n                    throw new Error('Invalid entity \"' + entity.value + '\"');\n\n                } else {\n                    return obj;\n\n                }\n            } else {\n                return entity;\n\n            }\n        }\n    };\n\n    _context.register(ContainerMixin, 'ContainerMixin');\n\n}, {\n    ReflectionClass: 'Utils.ReflectionClass',\n    ReflectionFunction: 'Utils.ReflectionFunction',\n    Arrays: 'Utils.Arrays',\n    Strings: 'Utils.Strings',\n    HashMap: 'Utils.HashMap',\n    Neon: 'Nittro.Neon.Neon',\n    NeonEntity: 'Nittro.Neon.NeonEntity'\n});\n","_context.invoke('Nittro.DI', function(ContainerMixin, Arrays, HashMap, ReflectionClass, NeonEntity, undefined) {\n\n    function traverse(cursor, path, create) {\n        if (typeof path === 'string') {\n            path = path.split(/\\./g);\n\n        }\n\n        var i, p, n = path.length;\n\n        for (i = 0; i < n; i++) {\n            p = path[i];\n\n            if (Array.isArray(cursor) && p.match(/^\\d+$/)) {\n                p = parseInt(p);\n\n            }\n\n            if (cursor[p] === undefined) {\n                if (create) {\n                    cursor[p] = {};\n\n                } else {\n                    return undefined;\n\n                }\n            }\n\n            cursor = cursor[p];\n\n        }\n\n        return cursor;\n\n    }\n\n    var Container = _context.extend(function(config) {\n        config || (config = {});\n\n        this._ = {\n            params: Arrays.mergeTree({}, config.params || null),\n            serviceDefs: Arrays.mergeTree({}, config.services || null),\n            services: {},\n            factories: Arrays.mergeTree({}, config.factories || null)\n        };\n\n    }, {\n        hasParam: function(name) {\n            return traverse(this._.params, name) !== undefined;\n\n        },\n\n        getParam: function(name, def) {\n            var value = traverse(this._.params, name);\n            return value !== undefined ? value : (def !== undefined ? def : null);\n\n        },\n\n        setParam: function(name, value) {\n            name = name.split(/\\./g);\n\n            var p = name.pop(),\n                cursor = this._.params;\n\n            if (name.length) {\n                cursor = traverse(cursor, name, true);\n\n            }\n\n            if (Array.isArray(cursor) && p.match(/^\\d+$/)) {\n                p = parseInt(p);\n\n            }\n\n            cursor[p] = value;\n\n            return this;\n\n        },\n\n        hasFactory: function(name) {\n            return this._.factories[name] !== undefined;\n\n        },\n\n        addFactory: function(name, factory, params) {\n            if (typeof factory === 'string') {\n                this._.factories[name] = factory;\n\n            } else {\n                this._.factories[name] = {\n                    callback: factory,\n                    params: params || null\n                };\n            }\n\n            return this;\n\n        },\n\n        create: function(name, args) {\n            if (!this.hasFactory(name)) {\n                throw new Error('No factory named \"' + name + '\" has been registered');\n\n            }\n\n            var factory = this._.factories[name];\n\n            if (typeof factory === 'string') {\n                this._.factories[name] = factory = this._toEntity(factory);\n\n            } else if (!(factory.params instanceof HashMap)) {\n                factory.params = new HashMap(factory.params);\n\n            }\n\n            if (factory instanceof NeonEntity) {\n                return this._expandEntity(factory, null, args);\n\n            } else {\n                args = this._autowireArguments(factory.callback, factory.params, args);\n                return factory.callback.apply(null, this._expandArguments(args));\n\n            }\n        },\n\n        _expandArg: function (arg) {\n            if (typeof arg === 'string' && arg.indexOf('%') > -1) {\n                if (arg.match(/^%[^%]+%$/)) {\n                    return this.getParam(arg.replace(/^%|%$/g, ''));\n\n                } else {\n                    return arg.replace(/%([a-z0-9_.-]+)%/gi, function () {\n                        return this.getParam(arguments[1]);\n\n                    }.bind(this));\n                }\n            } else {\n                return this.__expandArg(arg);\n\n            }\n        }\n    });\n\n    _context.mixin(Container, ContainerMixin, {\n        _expandArg: '__expandArg'\n    });\n\n    _context.register(Container, 'Container');\n\n}, {\n    Arrays: 'Utils.Arrays',\n    HashMap: 'Utils.HashMap',\n    ReflectionClass: 'Utils.ReflectionClass',\n    NeonEntity: 'Nittro.Neon.NeonEntity'\n});\n","_context.invoke('Nittro.DI', function (Arrays) {\n\n    var BuilderExtension = _context.extend(function(containerBuilder, config) {\n        this._ = {\n            containerBuilder: containerBuilder,\n            config: config\n        };\n    }, {\n        load: function() {\n\n        },\n\n        setup: function () {\n\n        },\n\n        _getConfig: function (defaults) {\n            if (defaults) {\n                this._.config = Arrays.mergeTree({}, defaults, this._.config);\n            }\n\n            return this._.config;\n\n        },\n\n        _getContainerBuilder: function () {\n            return this._.containerBuilder;\n        }\n    });\n\n    _context.register(BuilderExtension, 'BuilderExtension');\n\n}, {\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.DI', function(Container, BuilderExtension, undefined) {\n\n    var ContainerBuilder = _context.extend(Container, function(config) {\n        config || (config = {});\n\n        ContainerBuilder.Super.call(this, config);\n        this._.extensions = config.extensions || {};\n\n    }, {\n        addExtension: function(name, extension) {\n            if (this._.extensions[name] !== undefined) {\n                throw new Error('Container builder already has an extension called \"' + name + '\"');\n            }\n\n            this._.extensions[name] = extension;\n\n            return this;\n        },\n\n        createContainer: function() {\n            this._prepareExtensions();\n            this._loadExtensions();\n            this._setupExtensions();\n\n            return new Container({\n                params: this._.params,\n                services: this._.serviceDefs,\n                factories: this._.factories\n            });\n        },\n\n        _prepareExtensions: function () {\n            var name, extension;\n\n            for (name in this._.extensions) {\n                extension = this._.extensions[name];\n\n                if (typeof extension === 'function') {\n                    extension = this.invoke(extension, {containerBuilder: this, config: this._.params[name] || {}});\n\n                } else if (typeof extension === 'string') {\n                    extension = this._expandEntity(this._toEntity(extension), null, {containerBuilder: this, config: this._.params[name] || {}});\n\n                }\n\n                if (!(extension instanceof BuilderExtension)) {\n                    throw new Error('Extension \"' + name + '\" is not an instance of Nittro.DI.BuilderExtension');\n\n                }\n\n                this._.extensions[name] = extension;\n\n            }\n        },\n\n        _loadExtensions: function () {\n            for (var name in this._.extensions) {\n                this._.extensions[name].load();\n\n            }\n        },\n\n        _setupExtensions: function () {\n            for (var name in this._.extensions) {\n                this._.extensions[name].setup();\n\n            }\n        }\n    });\n\n    _context.register(ContainerBuilder, 'ContainerBuilder');\n\n});\n","_context.invoke('Nittro.Ajax', function (Nittro, Url, undefined) {\n\n    var Request = _context.extend('Nittro.Object', function(url, method, data) {\n        this._ = {\n            url: Url.from(url),\n            method: (method || 'GET').toUpperCase(),\n            data: data || {},\n            headers: {},\n            normalized: false,\n            dispatched: false,\n            deferred: {\n                fulfill: null,\n                reject: null,\n                promise: null\n            },\n            abort: null,\n            aborted: false,\n            response: null\n        };\n\n        this._.deferred.promise = new Promise(function (fulfill, reject) {\n            this._.deferred.fulfill = fulfill;\n            this._.deferred.reject = reject;\n        }.bind(this));\n    }, {\n        getUrl: function () {\n            this._normalize();\n            return this._.url;\n        },\n\n        getMethod: function () {\n            return this._.method;\n        },\n\n        isGet: function () {\n            return this._.method === 'GET';\n        },\n\n        isPost: function () {\n            return this._.method === 'POST';\n        },\n\n        isMethod: function (method) {\n            return method.toUpperCase() === this._.method;\n        },\n\n        getData: function () {\n            this._normalize();\n            return this._.data;\n        },\n\n        getHeaders: function () {\n            return this._.headers;\n        },\n\n        setUrl: function (url) {\n            this._updating('url');\n            this._.url = Url.from(url);\n            return this;\n        },\n\n        setMethod: function (method) {\n            this._updating('method');\n            this._.method = method.toLowerCase();\n            return this;\n        },\n\n        setData: function (k, v) {\n            this._updating('data');\n\n            if (k === null) {\n                this._.data = {};\n\n            } else if (v === undefined && typeof k === 'object') {\n                for (v in k) {\n                    if (k.hasOwnProperty(v)) {\n                        this._.data[v] = k[v];\n\n                    }\n                }\n            } else {\n                this._.data[k] = v;\n\n            }\n\n            return this;\n        },\n\n        setHeader: function (header, value) {\n            this._updating('headers');\n            this._.headers[header] = value;\n            return this;\n        },\n\n        setHeaders: function (headers) {\n            this._updating('headers');\n\n            for (var header in headers) {\n                if (headers.hasOwnProperty(header)) {\n                    this._.headers[header] = headers[header];\n\n                }\n            }\n\n            return this;\n        },\n\n        setDispatched: function(abort) {\n            if (this._.dispatched) {\n                throw new Error('Request has already been dispatched');\n            } else if (typeof abort !== 'function') {\n                throw new Error('\"abort\" must be a function');\n            }\n\n            this._.dispatched = true;\n            this._.abort = abort;\n            return this;\n        },\n\n        isDispatched: function () {\n            return this._.dispatched;\n        },\n\n        setFulfilled: function (response) {\n            if (response) {\n                this.setResponse(response);\n            }\n\n            this._.deferred.fulfill(this.getResponse());\n            return this;\n        },\n\n        setRejected: function (reason) {\n            this._.deferred.reject(reason);\n            return this;\n        },\n\n        then: function (onfulfilled, onrejected) {\n            return this._.deferred.promise.then(onfulfilled, onrejected);\n        },\n\n        abort: function () {\n            if (this._.abort && !this._.aborted) {\n                this._.abort();\n            }\n\n            this._.aborted = true;\n            return this;\n\n        },\n\n        isAborted: function () {\n            return this._.aborted;\n        },\n\n        setResponse: function(response) {\n            this._.response = response;\n            return this;\n        },\n\n        getResponse: function () {\n            return this._.response;\n        },\n\n        _normalize: function() {\n            if (this._.normalized || !this.isFrozen()) {\n                return;\n            }\n\n            this._.normalized = true;\n\n            if (this._.method === 'GET' || this._.method === 'HEAD') {\n                this._.url.addParams(Nittro.Forms && Nittro.Forms.FormData && this._.data instanceof Nittro.Forms.FormData ? this._.data.exportData(true) : this._.data);\n                this._.data = {};\n            }\n        }\n    });\n\n    _context.mixin(Request, 'Nittro.Freezable');\n    _context.register(Request, 'Request');\n\n}, {\n    Url: 'Utils.Url'\n});\n","_context.invoke('Nittro.Ajax', function () {\n\n    var Response = _context.extend(function(status, payload, headers) {\n        this._ = {\n            status: status,\n            payload: payload,\n            headers: headers\n        };\n    }, {\n        getStatus: function () {\n            return this._.status;\n\n        },\n\n        getPayload: function () {\n            return this._.payload;\n\n        },\n\n        getHeader: function (name) {\n            return this._.headers[name.toLowerCase()];\n\n        },\n\n        getAllHeaders: function () {\n            return this._.headers;\n\n        }\n    });\n\n    _context.register(Response, 'Response');\n\n});\n","_context.invoke('Nittro.Ajax', function (Request, Arrays, Url) {\n\n    var Service = _context.extend('Nittro.Object', function (options) {\n        Service.Super.call(this);\n\n        this._.options = Arrays.mergeTree({}, Service.defaults, options);\n        this._.transport = null;\n\n        if (!this._.options.allowOrigins) {\n            this._.options.allowOrigins = [];\n        } else if (!Array.isArray(this._.options.allowOrigins)) {\n            this._.options.allowOrigins = this._.options.allowOrigins.split(/\\s*,\\s*/g);\n        }\n\n        this._.options.allowOrigins.push(Url.fromCurrent().getOrigin());\n    }, {\n        STATIC: {\n            defaults: {\n                allowOrigins: null\n            }\n        },\n\n        setTransport: function (transport) {\n            this._.transport = transport;\n            return this;\n        },\n\n        addTransport: function (transport) {\n            console.log('The Nittro.Ajax.Service.addTransport() method is deprecated, please use setTransport instead');\n            return this.setTransport(transport);\n        },\n\n        supports: function (url, method, data) {\n            return this._.transport.supports(url, method, data);\n        },\n\n        isAllowedOrigin: function(url) {\n            return this._.options.allowOrigins.indexOf(Url.from(url).getOrigin()) > -1\n        },\n\n        'get': function (url, data) {\n            return this.dispatch(this.createRequest(url, 'get', data));\n        },\n\n        post: function (url, data) {\n            return this.dispatch(this.createRequest(url, 'post', data));\n        },\n\n        createRequest: function (url, method, data) {\n            if (!this.isAllowedOrigin(url)) {\n                throw new Error('The origin of the URL \"' + url + '\" is not in the list of allowed origins');\n            } else if (!this.supports(url, method, data)) {\n                throw new Error('The request with the specified URL, method and data isn\\'t supported by the AJAX transport');\n            }\n\n            var request = new Request(url, method, data);\n            this.trigger('request-created', {request: request});\n            return request;\n        },\n\n        dispatch: function (request) {\n            request.freeze();\n            return this._.transport.dispatch(request);\n        }\n    });\n\n    _context.register(Service, 'Service');\n\n}, {\n    Arrays: 'Utils.Arrays',\n    Url: 'Utils.Url'\n});\n","_context.invoke('Nittro.Ajax.Transport', function (Nittro, Response, Url) {\n\n    var Native = _context.extend(function() {\n\n    }, {\n        STATIC: {\n            createXhr: function () {\n                if (window.XMLHttpRequest) {\n                    return new XMLHttpRequest();\n                } else if (window.ActiveXObject) {\n                    try {\n                        return new ActiveXObject('Msxml2.XMLHTTP');\n                    } catch (e) {\n                        return new ActiveXObject('Microsoft.XMLHTTP');\n                    }\n                }\n            }\n        },\n\n        supports: function (url, method, data) {\n            if (data && Nittro.Forms && data instanceof Nittro.Forms.FormData && data.isUpload() && !window.FormData) {\n                return false;\n            }\n\n            if ((!window.XMLHttpRequest || !('withCredentials' in XMLHttpRequest.prototype)) && Url.fromCurrent().compare(url) >= Url.PART.PORT) {\n                return false;\n            }\n\n            return true;\n        },\n\n        dispatch: function (request) {\n            var xhr = Native.createXhr(),\n                adv = this._checkSupport(request, xhr),\n                abort = xhr.abort.bind(xhr);\n\n            if (request.isAborted()) {\n                request.setRejected(this._createError(request, xhr, {type: 'abort'}));\n                return request;\n            }\n\n            this._bindEvents(request, xhr, adv);\n\n            xhr.open(request.getMethod(), request.getUrl().toAbsolute(), true);\n\n            var data = this._formatData(request, xhr);\n            this._addHeaders(request, xhr);\n            xhr.send(data);\n\n            request.setDispatched(abort);\n\n            return request;\n\n        },\n\n        _checkSupport: function (request, xhr) {\n            var adv;\n\n            if (!(adv = 'addEventListener' in xhr) && !('onreadystatechange' in xhr)) {\n                throw new Error('Unsupported XHR implementation');\n            }\n\n            return adv;\n\n        },\n\n        _bindEvents: function (request, xhr, adv) {\n            var self = this,\n                done = false;\n\n            function onLoad(evt) {\n                if (done) return;\n                done = true;\n\n                if (xhr.status >= 200 && xhr.status < 300) {\n                    request.setFulfilled(self._createResponse(xhr));\n                } else {\n                    request.setRejected(self._createError(request, xhr, evt));\n                }\n            }\n\n            function onError(evt) {\n                if (done) return;\n                done = true;\n\n                request.setRejected(self._createError(request, xhr, evt));\n            }\n\n            function onProgress(evt) {\n                request.trigger('progress', {\n                    lengthComputable: evt.lengthComputable,\n                    loaded: evt.loaded,\n                    total: evt.total\n                });\n            }\n\n            if (adv) {\n                xhr.addEventListener('load', onLoad, false);\n                xhr.addEventListener('error', onError, false);\n                xhr.addEventListener('abort', onError, false);\n\n                if ('upload' in xhr) {\n                    xhr.upload.addEventListener('progress', onProgress, false);\n                }\n            } else {\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === 4) {\n                        if (xhr.status >= 200 && xhr.status < 300) {\n                            onLoad();\n                        } else {\n                            onError();\n                        }\n                    }\n                };\n\n                if ('ontimeout' in xhr) {\n                    xhr.ontimeout = onError;\n                }\n\n                if ('onerror' in xhr) {\n                    xhr.onerror = onError;\n                }\n\n                if ('onload' in xhr) {\n                    xhr.onload = onLoad;\n                }\n            }\n        },\n\n        _addHeaders: function (request, xhr) {\n            var headers = request.getHeaders(),\n                h;\n\n            for (h in headers) {\n                if (headers.hasOwnProperty(h)) {\n                    xhr.setRequestHeader(h, headers[h]);\n                }\n            }\n\n            if (!headers.hasOwnProperty('X-Requested-With')) {\n                xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n            }\n        },\n\n        _formatData: function (request, xhr) {\n            var data = request.getData();\n\n            if (Nittro.Forms && data instanceof Nittro.Forms.FormData) {\n                data = data.exportData(request.isGet() || request.isMethod('HEAD'));\n\n                if (!window.FormData || !(data instanceof window.FormData)) {\n                    data = Url.buildQuery(data, true);\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n                }\n            } else {\n                data = Url.buildQuery(data);\n                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n            }\n\n            return data;\n        },\n\n        _createResponse: function (xhr) {\n            var payload,\n                headers = {};\n\n            (xhr.getAllResponseHeaders() || '').trim().split(/\\r\\n/g).forEach(function(header) {\n                if (header && !header.match(/^\\s*$/)) {\n                    header = header.match(/^\\s*([^:]+):\\s*(.+?)\\s*$/);\n                    headers[header[1].toLowerCase()] = header[2];\n                }\n            });\n\n            if (headers['content-type'] && headers['content-type'].split(/;/)[0] === 'application/json') {\n                payload = JSON.parse(xhr.responseText || '{}');\n            } else {\n                payload = xhr.responseText;\n            }\n\n            return new Response(xhr.status, payload, headers);\n        },\n\n        _createError: function (request, xhr, evt) {\n            if (xhr.readyState === 4 && xhr.status !== 0) {\n                request.setResponse(this._createResponse(xhr));\n            }\n\n            if (evt && evt.type === 'abort') {\n                return {\n                    type: 'abort',\n                    status: null,\n                    request: request\n                };\n            } else if (xhr.status === 0) {\n                return {\n                    type: 'connection',\n                    status: null,\n                    request: request\n                };\n            } else if (xhr.status < 200 || xhr.status >= 300) {\n                return {\n                    type: 'response',\n                    status: xhr.status,\n                    request: request\n                };\n            }\n\n            return {\n                type: 'unknown',\n                status: xhr.status,\n                request: request\n            };\n        }\n    });\n\n    _context.register(Native, 'Native');\n\n}, {\n    Url: 'Utils.Url',\n    Response: 'Nittro.Ajax.Response'\n});\n","/**\r\n * NetteForms - simple form validation.\r\n *\r\n * This file is part of the Nette Framework (https://nette.org)\r\n * Copyright (c) 2004 David Grudl (https://davidgrudl.com)\r\n */\r\n\r\n(function(global, factory) {\r\n\tif (!global.JSON) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(function() {\r\n\t\t\treturn factory(global);\r\n\t\t});\r\n\t} else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n\t\tmodule.exports = factory(global);\r\n\t} else {\r\n\t\tvar init = !global.Nette || !global.Nette.noInit;\r\n\t\tglobal.Nette = factory(global);\r\n\t\tif (init) {\r\n\t\t\tglobal.Nette.initOnLoad();\r\n\t\t}\r\n\t}\r\n\r\n}(typeof window !== 'undefined' ? window : this, function(window) {\r\n\r\n\t'use strict';\r\n\r\n\tvar Nette = {};\r\n\tvar preventFiltering = {};\r\n\tvar formToggles = {};\r\n\tvar toggleListeners = new window.WeakMap();\r\n\r\n\tNette.formErrors = [];\r\n\tNette.version = '3.0';\r\n\tNette.invalidNumberMessage = 'Please enter a valid value.';\r\n\r\n\r\n\t/**\r\n\t * Function to execute when the DOM is fully loaded.\r\n\t * @private\r\n\t */\r\n\tNette.onDocumentReady = function(callback) {\r\n\t\tif (document.readyState !== 'loading') {\r\n\t\t\tcallback.call(this);\r\n\t\t} else {\r\n\t\t\tdocument.addEventListener('DOMContentLoaded', callback);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Returns the value of form element.\r\n\t */\r\n\tNette.getValue = function(elem) {\r\n\t\tvar i;\r\n\t\tif (!elem) {\r\n\t\t\treturn null;\r\n\r\n\t\t} else if (!elem.tagName) { // RadioNodeList, HTMLCollection, array\r\n\t\t\treturn elem[0] ? Nette.getValue(elem[0]) : null;\r\n\r\n\t\t} else if (elem.type === 'radio') {\r\n\t\t\tvar elements = elem.form.elements; // prevents problem with name 'item' or 'namedItem'\r\n\t\t\tfor (i = 0; i < elements.length; i++) {\r\n\t\t\t\tif (elements[i].name === elem.name && elements[i].checked) {\r\n\t\t\t\t\treturn elements[i].value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\r\n\t\t} else if (elem.type === 'file') {\r\n\t\t\treturn elem.files || elem.value;\r\n\r\n\t\t} else if (elem.tagName.toLowerCase() === 'select') {\r\n\t\t\tvar index = elem.selectedIndex,\r\n\t\t\t\toptions = elem.options,\r\n\t\t\t\tvalues = [];\r\n\r\n\t\t\tif (elem.type === 'select-one') {\r\n\t\t\t\treturn index < 0 ? null : options[index].value;\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < options.length; i++) {\r\n\t\t\t\tif (options[i].selected) {\r\n\t\t\t\t\tvalues.push(options[i].value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\r\n\t\t} else if (elem.name && elem.name.substr(-2) === '[]') { // multiple elements []\r\n\t\t\telements = elem.form.elements[elem.name].tagName ? [elem] : elem.form.elements[elem.name];\r\n\t\t\tvalues = [];\r\n\r\n\t\t\tfor (i = 0; i < elements.length; i++) {\r\n\t\t\t\tif (elements[i].type !== 'checkbox' || elements[i].checked) {\r\n\t\t\t\t\tvalues.push(elements[i].value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\r\n\t\t} else if (elem.type === 'checkbox') {\r\n\t\t\treturn elem.checked;\r\n\r\n\t\t} else if (elem.tagName.toLowerCase() === 'textarea') {\r\n\t\t\treturn elem.value.replace('\\r', '');\r\n\r\n\t\t} else {\r\n\t\t\treturn elem.value.replace('\\r', '').replace(/^\\s+|\\s+$/g, '');\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Returns the effective value of form element.\r\n\t */\r\n\tNette.getEffectiveValue = function(elem, filter) {\r\n\t\tvar val = Nette.getValue(elem);\r\n\t\tif (elem.getAttribute) {\r\n\t\t\tif (val === elem.getAttribute('data-nette-empty-value')) {\r\n\t\t\t\tval = '';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (filter && preventFiltering[elem.name] === undefined) {\r\n\t\t\tpreventFiltering[elem.name] = true;\r\n\t\t\tvar ref = {value: val};\r\n\t\t\tNette.validateControl(elem, null, true, ref);\r\n\t\t\tval = ref.value;\r\n\t\t\tdelete preventFiltering[elem.name];\r\n\t\t}\r\n\t\treturn val;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Validates form element against given rules.\r\n\t */\r\n\tNette.validateControl = function(elem, rules, onlyCheck, value, emptyOptional) {\r\n\t\tvar top = !rules;\r\n\t\telem = elem.tagName ? elem : elem[0]; // RadioNodeList\r\n\t\trules = rules || JSON.parse(elem.getAttribute('data-nette-rules') || '[]');\r\n\t\tvalue = value === undefined ? {value: Nette.getEffectiveValue(elem)} : value;\r\n\t\temptyOptional = emptyOptional === undefined ? !Nette.validateRule(elem, ':filled', null, value) : emptyOptional;\r\n\r\n\t\tfor (var id = 0, len = rules.length; id < len; id++) {\r\n\t\t\tvar rule = rules[id],\r\n\t\t\t\top = rule.op.match(/(~)?([^?]+)/),\r\n\t\t\t\tcurElem = rule.control ? elem.form.elements.namedItem(rule.control) : elem;\r\n\r\n\t\t\trule.neg = op[1];\r\n\t\t\trule.op = op[2];\r\n\t\t\trule.condition = !!rule.rules;\r\n\r\n\t\t\tif (!curElem) {\r\n\t\t\t\tcontinue;\r\n\t\t\t} else if (emptyOptional && !rule.condition && rule.op !== ':filled') {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tcurElem = curElem.tagName ? curElem : curElem[0]; // RadioNodeList\r\n\t\t\tvar success = Nette.validateRule(curElem, rule.op, rule.arg, elem === curElem ? value : undefined);\r\n\r\n\t\t\tif (success === null) {\r\n\t\t\t\tcontinue;\r\n\t\t\t} else if (rule.neg) {\r\n\t\t\t\tsuccess = !success;\r\n\t\t\t}\r\n\r\n\t\t\tif (rule.condition && success) {\r\n\t\t\t\tif (!Nette.validateControl(elem, rule.rules, onlyCheck, value, rule.op === ':blank' ? false : emptyOptional)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else if (!rule.condition && !success) {\r\n\t\t\t\tif (Nette.isDisabled(curElem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (!onlyCheck) {\r\n\t\t\t\t\tvar arr = Array.isArray(rule.arg) ? rule.arg : [rule.arg],\r\n\t\t\t\t\t\tmessage = rule.msg.replace(/%(value|\\d+)/g, function(foo, m) {\r\n\t\t\t\t\t\t\treturn Nette.getValue(m === 'value' ? curElem : elem.form.elements.namedItem(arr[m].control));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tNette.addError(curElem, message);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (elem.type === 'number' && !elem.validity.valid) {\r\n\t\t\tif (top && !onlyCheck) {\r\n\t\t\t\tNette.addError(elem, Nette.invalidNumberMessage);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Validates whole form.\r\n\t */\r\n\tNette.validateForm = function(sender, onlyCheck) {\r\n\t\tvar form = sender.form || sender,\r\n\t\t\tscope = false;\r\n\r\n\t\tNette.formErrors = [];\r\n\r\n\t\tif (form['nette-submittedBy'] && form['nette-submittedBy'].getAttribute('formnovalidate') !== null) {\r\n\t\t\tvar scopeArr = JSON.parse(form['nette-submittedBy'].getAttribute('data-nette-validation-scope') || '[]');\r\n\t\t\tif (scopeArr.length) {\r\n\t\t\t\tscope = new RegExp('^(' + scopeArr.join('-|') + '-)');\r\n\t\t\t} else {\r\n\t\t\t\tNette.showFormErrors(form, []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar radios = {}, i, elem;\r\n\r\n\t\tfor (i = 0; i < form.elements.length; i++) {\r\n\t\t\telem = form.elements[i];\r\n\r\n\t\t\tif (elem.tagName && !(elem.tagName.toLowerCase() in {input: 1, select: 1, textarea: 1, button: 1})) {\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t} else if (elem.type === 'radio') {\r\n\t\t\t\tif (radios[elem.name]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tradios[elem.name] = true;\r\n\t\t\t}\r\n\r\n\t\t\tif ((scope && !elem.name.replace(/]\\[|\\[|]|$/g, '-').match(scope)) || Nette.isDisabled(elem)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (!Nette.validateControl(elem, null, onlyCheck) && !Nette.formErrors.length) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar success = !Nette.formErrors.length;\r\n\t\tNette.showFormErrors(form, Nette.formErrors);\r\n\t\treturn success;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Check if input is disabled.\r\n\t */\r\n\tNette.isDisabled = function(elem) {\r\n\t\tif (elem.type === 'radio') {\r\n\t\t\tfor (var i = 0, elements = elem.form.elements; i < elements.length; i++) {\r\n\t\t\t\tif (elements[i].name === elem.name && !elements[i].disabled) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn elem.disabled;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Adds error message to the queue.\r\n\t */\r\n\tNette.addError = function(elem, message) {\r\n\t\tNette.formErrors.push({\r\n\t\t\telement: elem,\r\n\t\t\tmessage: message\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Display error messages.\r\n\t */\r\n\tNette.showFormErrors = function(form, errors) {\r\n\t\tvar messages = [],\r\n\t\t\tfocusElem;\r\n\r\n\t\tfor (var i = 0; i < errors.length; i++) {\r\n\t\t\tvar elem = errors[i].element,\r\n\t\t\t\tmessage = errors[i].message;\r\n\r\n\t\t\tif (messages.indexOf(message) < 0) {\r\n\t\t\t\tmessages.push(message);\r\n\r\n\t\t\t\tif (!focusElem && elem.focus) {\r\n\t\t\t\t\tfocusElem = elem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (messages.length) {\r\n\t\t\talert(messages.join('\\n'));\r\n\r\n\t\t\tif (focusElem) {\r\n\t\t\t\tfocusElem.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Validates single rule.\r\n\t */\r\n\tNette.validateRule = function(elem, op, arg, value) {\r\n\t\tvalue = value === undefined ? {value: Nette.getEffectiveValue(elem, true)} : value;\r\n\r\n\t\tif (op.charAt(0) === ':') {\r\n\t\t\top = op.substr(1);\r\n\t\t}\r\n\t\top = op.replace('::', '_');\r\n\t\top = op.replace(/\\\\/g, '');\r\n\r\n\t\tvar arr = Array.isArray(arg) ? arg.slice(0) : [arg];\r\n\t\tfor (var i = 0, len = arr.length; i < len; i++) {\r\n\t\t\tif (arr[i] && arr[i].control) {\r\n\t\t\t\tvar control = elem.form.elements.namedItem(arr[i].control);\r\n\t\t\t\tarr[i] = control === elem ? value.value : Nette.getEffectiveValue(control, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Nette.validators[op]\r\n\t\t\t? Nette.validators[op](elem, Array.isArray(arg) ? arr : arr[0], value.value, value)\r\n\t\t\t: null;\r\n\t};\r\n\r\n\r\n\tNette.validators = {\r\n\t\tfilled: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number' && elem.validity.badInput) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn val !== '' && val !== false && val !== null\r\n\t\t\t\t&& (!Array.isArray(val) || !!val.length)\r\n\t\t\t\t&& (!window.FileList || !(val instanceof window.FileList) || val.length);\r\n\t\t},\r\n\r\n\t\tblank: function(elem, arg, val) {\r\n\t\t\treturn !Nette.validators.filled(elem, arg, val);\r\n\t\t},\r\n\r\n\t\tvalid: function(elem) {\r\n\t\t\treturn Nette.validateControl(elem, null, true);\r\n\t\t},\r\n\r\n\t\tequal: function(elem, arg, val) {\r\n\t\t\tif (arg === undefined) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tfunction toString(val) {\r\n\t\t\t\tif (typeof val === 'number' || typeof val === 'string') {\r\n\t\t\t\t\treturn '' + val;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn val === true ? '1' : '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tval = Array.isArray(val) ? val : [val];\r\n\t\t\targ = Array.isArray(arg) ? arg : [arg];\r\n\t\t\tloop:\r\n\t\t\tfor (var i1 = 0, len1 = val.length; i1 < len1; i1++) {\r\n\t\t\t\tfor (var i2 = 0, len2 = arg.length; i2 < len2; i2++) {\r\n\t\t\t\t\tif (toString(val[i1]) === toString(arg[i2])) {\r\n\t\t\t\t\t\tcontinue loop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn val.length > 0;\r\n\t\t},\r\n\r\n\t\tnotEqual: function(elem, arg, val) {\r\n\t\t\treturn arg === undefined ? null : !Nette.validators.equal(elem, arg, val);\r\n\t\t},\r\n\r\n\t\tminLength: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number') {\r\n\t\t\t\tif (elem.validity.tooShort) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (elem.validity.badInput) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn val.length >= arg;\r\n\t\t},\r\n\r\n\t\tmaxLength: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number') {\r\n\t\t\t\tif (elem.validity.tooLong) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (elem.validity.badInput) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn val.length <= arg;\r\n\t\t},\r\n\r\n\t\tlength: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number') {\r\n\t\t\t\tif (elem.validity.tooShort || elem.validity.tooLong) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (elem.validity.badInput) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\targ = Array.isArray(arg) ? arg : [arg, arg];\r\n\t\t\treturn (arg[0] === null || val.length >= arg[0]) && (arg[1] === null || val.length <= arg[1]);\r\n\t\t},\r\n\r\n\t\temail: function(elem, arg, val) {\r\n\t\t\treturn (/^(\"([ !#-[\\]-~]|\\\\[ -~])+\"|[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*)@([0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]([-0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]{0,61}[0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF])?\\.)+[a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]([-0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]{0,17}[a-z\\u00C0-\\u02FF\\u0370-\\u1EFF])?$/i).test(val);\r\n\t\t},\r\n\r\n\t\turl: function(elem, arg, val, value) {\r\n\t\t\tif (!(/^[a-z\\d+.-]+:/).test(val)) {\r\n\t\t\t\tval = 'https://' + val;\r\n\t\t\t}\r\n\t\t\tif ((/^https?:\\/\\/((([-_0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]+\\.)*[0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]([-0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]{0,61}[0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF])?\\.)?[a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]([-0-9a-z\\u00C0-\\u02FF\\u0370-\\u1EFF]{0,17}[a-z\\u00C0-\\u02FF\\u0370-\\u1EFF])?|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|\\[[0-9a-f:]{3,39}\\])(:\\d{1,5})?(\\/\\S*)?$/i).test(val)) {\r\n\t\t\t\tvalue.value = val;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tregexp: function(elem, arg, val) {\r\n\t\t\tvar parts = typeof arg === 'string' ? arg.match(/^\\/(.*)\\/([imu]*)$/) : false;\r\n\t\t\ttry {\r\n\t\t\t\treturn parts && (new RegExp(parts[1], parts[2].replace('u', ''))).test(val);\r\n\t\t\t} catch (e) {} // eslint-disable-line no-empty\r\n\t\t},\r\n\r\n\t\tpattern: function(elem, arg, val, value, caseInsensitive) {\r\n\t\t\tif (typeof arg !== 'string') {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar regExp = new RegExp('^(?:' + arg + ')$', caseInsensitive ? 'ui' : 'u');\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tregExp = new RegExp('^(?:' + arg + ')$', caseInsensitive ? 'i' : '');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (window.FileList && val instanceof FileList) {\r\n\t\t\t\t\tfor (var i = 0; i < val.length; i++) {\r\n\t\t\t\t\t\tif (!regExp.test(val[i].name)) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn regExp.test(val);\r\n\t\t\t} catch (e) {} // eslint-disable-line no-empty\r\n\t\t},\r\n\r\n\t\tpatternCaseInsensitive: function(elem, arg, val) {\r\n\t\t\treturn Nette.validators.pattern(elem, arg, val, null, true);\r\n\t\t},\r\n\r\n\t\tnumeric: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number' && elem.validity.badInput) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn (/^[0-9]+$/).test(val);\r\n\t\t},\r\n\r\n\t\tinteger: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number' && elem.validity.badInput) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn (/^-?[0-9]+$/).test(val);\r\n\t\t},\r\n\r\n\t\t'float': function(elem, arg, val, value) {\r\n\t\t\tif (elem.type === 'number' && elem.validity.badInput) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tval = val.replace(/ +/g, '').replace(/,/g, '.');\r\n\t\t\tif ((/^-?[0-9]*\\.?[0-9]+$/).test(val)) {\r\n\t\t\t\tvalue.value = val;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tmin: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number') {\r\n\t\t\t\tif (elem.validity.rangeUnderflow) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (elem.validity.badInput) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn arg === null || parseFloat(val) >= arg;\r\n\t\t},\r\n\r\n\t\tmax: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number') {\r\n\t\t\t\tif (elem.validity.rangeOverflow) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (elem.validity.badInput) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn arg === null || parseFloat(val) <= arg;\r\n\t\t},\r\n\r\n\t\trange: function(elem, arg, val) {\r\n\t\t\tif (elem.type === 'number') {\r\n\t\t\t\tif (elem.validity.rangeUnderflow || elem.validity.rangeOverflow) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (elem.validity.badInput) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn Array.isArray(arg) ?\r\n\t\t\t\t((arg[0] === null || parseFloat(val) >= arg[0]) && (arg[1] === null || parseFloat(val) <= arg[1])) : null;\r\n\t\t},\r\n\r\n\t\tsubmitted: function(elem) {\r\n\t\t\treturn elem.form['nette-submittedBy'] === elem;\r\n\t\t},\r\n\r\n\t\tfileSize: function(elem, arg, val) {\r\n\t\t\tif (window.FileList) {\r\n\t\t\t\tfor (var i = 0; i < val.length; i++) {\r\n\t\t\t\t\tif (val[i].size > arg) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tmimeType: function (elem, arg, val) {\r\n\t\t\targ = Array.isArray(arg) ? arg : [arg];\r\n\t\t\tfor (var i = 0, len = arg.length, re = []; i < len; i++) {\r\n\t\t\t\tre.push('^' + arg[i].replace(/([^\\w])/g, '\\\\$1').replace('\\\\*', '.*') + '$');\r\n\t\t\t}\r\n\t\t\tre = new RegExp(re.join('|'));\r\n\r\n\t\t\tif (window.FileList && val instanceof FileList) {\r\n\t\t\t\tfor (i = 0; i < val.length; i++) {\r\n\t\t\t\t\tif (val[i].type && !re.test(val[i].type)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else if (elem.validity.badInput) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\timage: function (elem, arg, val) {\r\n\t\t\treturn Nette.validators.mimeType(elem, ['image/gif', 'image/png', 'image/jpeg', 'image/webp'], val);\r\n\t\t},\r\n\r\n\t\t'static': function (elem, arg) {\r\n\t\t\treturn arg;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Process all toggles in form.\r\n\t */\r\n\tNette.toggleForm = function(form, event) {\r\n\t\tvar i;\r\n\t\tformToggles = {};\r\n\t\tfor (i = 0; i < form.elements.length; i++) {\r\n\t\t\tif (form.elements[i].tagName.toLowerCase() in {input: 1, select: 1, textarea: 1, button: 1}) {\r\n\t\t\t\tNette.toggleControl(form.elements[i], null, null, !event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (i in formToggles) {\r\n\t\t\tNette.toggle(i, formToggles[i].state, formToggles[i].elem, event);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Process toggles on form element.\r\n\t */\r\n\tNette.toggleControl = function(elem, rules, success, firsttime, value, emptyOptional) {\r\n\t\trules = rules || JSON.parse(elem.getAttribute('data-nette-rules') || '[]');\r\n\t\tvalue = value === undefined ? {value: Nette.getEffectiveValue(elem)} : value;\r\n\t\temptyOptional = emptyOptional === undefined ? !Nette.validateRule(elem, ':filled', null, value) : emptyOptional;\r\n\r\n\t\tvar has = false,\r\n\t\t\thandler = function (e) {\r\n\t\t\t\tNette.toggleForm(elem.form, e);\r\n\t\t\t},\r\n\t\t\tcurSuccess;\r\n\r\n\t\tfor (var id = 0, len = rules.length; id < len; id++) {\r\n\t\t\tvar rule = rules[id],\r\n\t\t\t\top = rule.op.match(/(~)?([^?]+)/),\r\n\t\t\t\tcurElem = rule.control ? elem.form.elements.namedItem(rule.control) : elem;\r\n\r\n\t\t\trule.neg = op[1];\r\n\t\t\trule.op = op[2];\r\n\t\t\trule.condition = !!rule.rules;\r\n\r\n\t\t\tif (!curElem) {\r\n\t\t\t\tcontinue;\r\n\t\t\t} else if (emptyOptional && !rule.condition && rule.op !== ':filled') {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tcurSuccess = success;\r\n\t\t\tif (success !== false) {\r\n\t\t\t\tcurSuccess = Nette.validateRule(curElem, rule.op, rule.arg, elem === curElem ? value : undefined);\r\n\t\t\t\tif (curSuccess === null) {\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t} else if (rule.neg) {\r\n\t\t\t\t\tcurSuccess = !curSuccess;\r\n\t\t\t\t}\r\n\t\t\t\tif (!rule.condition) {\r\n\t\t\t\t\tsuccess = curSuccess;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((rule.condition && Nette.toggleControl(elem, rule.rules, curSuccess, firsttime, value, rule.op === ':blank' ? false : emptyOptional)) || rule.toggle) {\r\n\t\t\t\thas = true;\r\n\t\t\t\tif (firsttime) {\r\n\t\t\t\t\tvar name = curElem.tagName ? curElem.name : curElem[0].name,\r\n\t\t\t\t\t\tels = curElem.tagName ? curElem.form.elements : curElem;\r\n\r\n\t\t\t\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\t\t\t\tif (els[i].name === name && !toggleListeners.has(els[i])) {\r\n\t\t\t\t\t\t\tels[i].addEventListener('change', handler);\r\n\t\t\t\t\t\t\ttoggleListeners.set(els[i], null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var toggleId in rule.toggle || []) {\r\n\t\t\t\t\tformToggles[toggleId] = formToggles[toggleId] || {elem: elem};\r\n\t\t\t\t\tformToggles[toggleId].state = formToggles[toggleId].state || (rule.toggle[toggleId] ? curSuccess : !curSuccess);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn has;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Displays or hides HTML element.\r\n\t */\r\n\tNette.toggle = function(selector, visible, srcElement, event) { // eslint-disable-line no-unused-vars\r\n\t\tif (/^\\w[\\w.:-]*$/.test(selector)) { // id\r\n\t\t\tselector = '#' + selector;\r\n\t\t}\r\n\t\tvar elems = document.querySelectorAll(selector);\r\n\t\tfor (var i = 0; i < elems.length; i++) {\r\n\t\t\telems[i].hidden = !visible;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Compact checkboxes\r\n\t */\r\n\tNette.compactCheckboxes = function(form) {\r\n\t\tvar name, i, elem, values = {};\r\n\r\n\t\tfor (i = 0; i < form.elements.length; i++) {\r\n\t\t\telem = form.elements[i];\r\n\t\t\tif (elem.tagName\r\n\t\t\t\t&& elem.tagName.toLowerCase() === 'input'\r\n\t\t\t\t&& elem.type === 'checkbox'\r\n\t\t\t) {\r\n\t\t\t\tif (elem.name\r\n\t\t\t\t\t&& elem.name.substr(-2) === '[]'\r\n\t\t\t\t) {\r\n\t\t\t\t\tname = elem.name.substr(0, elem.name.length - 2);\r\n\t\t\t\t\telem.removeAttribute('name');\r\n\t\t\t\t\telem.setAttribute('data-nette-name', name);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (name = elem.getAttribute('data-nette-name')) { // eslint-disable-line no-cond-assign\r\n\t\t\t\t\tvalues[name] = values[name] || [];\r\n\t\t\t\t\tif (elem.checked && !elem.disabled) {\r\n\t\t\t\t\t\tvalues[name].push(elem.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (name in values) {\r\n\t\t\tif (form.elements[name] === undefined) {\r\n\t\t\t\telem = document.createElement('input');\r\n\t\t\t\telem.setAttribute('name', name);\r\n\t\t\t\telem.setAttribute('type', 'hidden');\r\n\t\t\t\tform.appendChild(elem);\r\n\t\t\t}\r\n\t\t\tform.elements[name].value = values[name].join(',');\r\n\t\t\tform.elements[name].disabled = values[name].length === 0;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Setup handlers.\r\n\t */\r\n\tNette.initForm = function(form) {\r\n\t\tif (form.method === 'get' && form.hasAttribute('data-nette-compact')) {\r\n\t\t\tform.addEventListener('submit', function() {\r\n\t\t\t\tNette.compactCheckboxes(form);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tcheck: {\r\n\t\t\tfor (var i = 0; i < form.elements.length; i++) {\r\n\t\t\t\tif (form.elements[i].getAttribute('data-nette-rules')) {\r\n\t\t\t\t\tbreak check;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tNette.toggleForm(form);\r\n\r\n\t\tif (form.noValidate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tform.noValidate = true;\r\n\r\n\t\tform.addEventListener('submit', function(e) {\r\n\t\t\tif (!Nette.validateForm(form)) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tNette.initOnLoad = function() {\r\n\t\tNette.onDocumentReady(function() {\r\n\t\t\tfor (var i = 0; i < document.forms.length; i++) {\r\n\t\t\t\tNette.initForm(document.forms[i]);\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.addEventListener('click', function(e) {\r\n\t\t\t\tvar target = e.target;\r\n\t\t\t\twhile (target) {\r\n\t\t\t\t\tif (target.form && target.type in {submit: 1, image: 1}) {\r\n\t\t\t\t\t\ttarget.form['nette-submittedBy'] = target;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget = target.parentNode;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Converts string to web safe characters [a-z0-9-] text.\r\n\t */\r\n\tNette.webalize = function(s) {\r\n\t\ts = s.toLowerCase();\r\n\t\tvar res = '', i, ch;\r\n\t\tfor (i = 0; i < s.length; i++) {\r\n\t\t\tch = Nette.webalizeTable[s.charAt(i)];\r\n\t\t\tres += ch ? ch : s.charAt(i);\r\n\t\t}\r\n\t\treturn res.replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');\r\n\t};\r\n\r\n\tNette.webalizeTable = {\\u00e1: 'a', \\u00e4: 'a', \\u010d: 'c', \\u010f: 'd', \\u00e9: 'e', \\u011b: 'e', \\u00ed: 'i', \\u013e: 'l', \\u0148: 'n', \\u00f3: 'o', \\u00f4: 'o', \\u0159: 'r', \\u0161: 's', \\u0165: 't', \\u00fa: 'u', \\u016f: 'u', \\u00fd: 'y', \\u017e: 'z'};\r\n\r\n\treturn Nette;\r\n}));\r\n","_context.invoke('Nittro.Forms', function () {\n    var Nette;\n\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        Nette = require('nette-forms');\n    } else {\n        Nette = window.Nette;\n    }\n\n    if (!Nette || !Nette.validators) {\n        throw new Error('netteForms.js asset from Nette/Forms has not been loaded');\n    }\n\n    _context.register(Nette, 'Vendor');\n\n});\n","_context.invoke('Nittro.Forms', function(undefined) {\n\n    var FormData = _context.extend(function() {\n        this._ = {\n            dataStorage: [],\n            upload: false\n        };\n    }, {\n        append: function(name, value) {\n            if (value === undefined || value === null) {\n                return this;\n\n            }\n\n            if (this._isFile(value)) {\n                this._.upload = true;\n\n            } else if (typeof value === 'object' && 'valueOf' in value && /string|number|boolean/.test(typeof value.valueOf()) && !arguments[2]) {\n                return this.append(name, value.valueOf(), true);\n\n            } else if (!/string|number|boolean/.test(typeof value)) {\n                throw new Error('Only scalar values and File/Blob objects can be appended to FormData, ' + (typeof value) + ' given');\n\n            }\n\n            this._.dataStorage.push({ name: name, value: value });\n\n            return this;\n\n        },\n\n        isUpload: function() {\n            return this._.upload;\n\n        },\n\n        _isFile: function(value) {\n            return window.File !== undefined && value instanceof window.File || window.Blob !== undefined && value instanceof window.Blob;\n\n        },\n\n        mergeData: function(data) {\n            for (var i = 0; i < data.length; i++) {\n                this.append(data[i].name, data[i].value);\n\n            }\n\n            return this;\n\n        },\n\n        exportData: function(forcePlain) {\n            if (!forcePlain && this.isUpload() && window.FormData !== undefined) {\n                var fd = new window.FormData(),\n                    i;\n\n                for (i = 0; i < this._.dataStorage.length; i++) {\n                    if (typeof this._.dataStorage[i].value === 'boolean') {\n                        fd.append(this._.dataStorage[i].name, this._.dataStorage[i].value ? 1 : 0);\n                    } else {\n                        fd.append(this._.dataStorage[i].name, this._.dataStorage[i].value);\n                    }\n                }\n\n                return fd;\n\n            } else {\n                return this._.dataStorage.filter(function(e) {\n                    return !this._isFile(e.value);\n\n                }, this);\n\n            }\n        }\n    });\n\n    _context.register(FormData, 'FormData');\n\n});\n","_context.invoke('Nittro.Forms', function (DOM, Arrays, DateTime, FormData, Vendor, undefined) {\n\n    var FileList = window.FileList || function() {};\n\n    var Form = _context.extend('Nittro.Object', function (form) {\n        Form.Super.call(this);\n\n        this._.submittedBy = null;\n        this._.inLiveValidation = false;\n        this._.errorRenderer = null;\n        this._handleSubmit = this._handleSubmit.bind(this);\n        this._handleReset = this._handleReset.bind(this);\n\n        this.setElement(form);\n\n        this.on('error:default', this._handleError.bind(this));\n        this.on('blur:default', this._handleBlur.bind(this));\n\n    }, {\n        setErrorRenderer: function (renderer) {\n            this._.errorRenderer = renderer;\n        },\n\n        setElement: function (form) {\n            if (typeof form === 'string') {\n                form = DOM.getById(form);\n            }\n\n            if (!form || !(form instanceof HTMLFormElement)) {\n                throw new TypeError('Invalid argument, must be a HTMLFormElement');\n            }\n\n            this._.form = form;\n            this._.form.noValidate = 'novalidate';\n            this._.validationMode = DOM.getData(form, 'validation-mode');\n\n            if (this._.submittedBy) {\n                this._.form['nette-submittedBy'] = this.getElement(this._.submittedBy);\n            }\n\n            DOM.addListener(this._.form, 'submit', this._handleSubmit);\n            DOM.addListener(this._.form, 'reset', this._handleReset);\n\n            return this;\n        },\n\n        getElement: function (name) {\n            return name ? this._.form.elements.namedItem(name) : this._.form;\n        },\n\n        getElements: function () {\n            return this._.form.elements;\n        },\n\n        setSubmittedBy: function (value) {\n            if (value) {\n                this._.submittedBy = value;\n                this._.form['nette-submittedBy'] = this.getElement(value);\n            } else {\n                this._.submittedBy = this._.form['nette-submittedBy'] = null;\n            }\n\n            return this;\n        },\n\n        validate: function (sender) {\n            if (this._.errorRenderer) {\n                this._.errorRenderer.cleanupErrors(this._.form);\n            }\n\n            if (!Vendor.validateForm(sender || this._.form)) {\n                return false;\n            }\n\n            var evt = this.trigger('validate', {\n                sender: sender\n            });\n\n            return !evt.isDefaultPrevented();\n        },\n\n        setValues: function (values, reset) {\n            var names = this._getFieldNames(),\n                name, value, i;\n\n            values || (values = {});\n\n            for (i = 0; i < names.length; i++) {\n                name = names[i];\n                value = undefined;\n\n                if (name.indexOf('[') > -1) {\n                    value = values;\n\n                    name.replace(/]/g, '').split(/\\[/g).some(function (key) {\n                        if (key === '') {\n                            return true;\n                        } else if (!(key in value)) {\n                            value = undefined;\n                            return true;\n                        } else {\n                            value = value[key];\n                            return false;\n                        }\n                    });\n                } else if (name in values) {\n                    value = values[name];\n                }\n\n                if (value === undefined) {\n                    if (reset) {\n                        value = null;\n                    } else {\n                        continue;\n                    }\n                }\n\n                this.setValue(name, value);\n            }\n        },\n\n        setValue: function (elem, value) {\n            if (typeof elem === 'string') {\n                elem = this._.form.elements.namedItem(elem);\n            }\n\n            var i,\n                toStr = function(v) { return '' + v; };\n\n            if (!elem) {\n                throw new TypeError('Invalid argument to setValue(), must be (the name of) an existing form element');\n            } else if (!elem.tagName) {\n                if ('length' in elem) {\n                    for (i = 0; i < elem.length; i++) {\n                        this.setValue(elem[i], value);\n                    }\n                }\n            } else if (elem.type === 'radio') {\n                elem.checked = value !== null && elem.value === toStr(value);\n            } else if (elem.type === 'file') {\n                if (value === null) {\n                    value = elem.parentNode.innerHTML;\n                    DOM.html(elem.parentNode, value);\n                }\n            } else if (elem.tagName.toLowerCase() === 'select') {\n                var single = elem.type === 'select-one',\n                    arr = Array.isArray(value),\n                    v;\n\n                if (arr) {\n                    value = value.map(toStr);\n                } else {\n                    value = toStr(value);\n                }\n\n                for (i = 0; i < elem.options.length; i++) {\n                    v = arr ? value.indexOf(elem.options.item(i).value) > -1 : value === elem.options.item(i).value;\n                    elem.options.item(i).selected = v;\n\n                    if (v && single) {\n                        break;\n                    }\n                }\n            } else if (elem.type === 'checkbox') {\n                elem.checked = Array.isArray(value) ? value.map(toStr).indexOf(elem.value) > -1 : !!value;\n            } else if (elem.type === 'date') {\n                elem.value = value ? DateTime.from(value).format('Y-m-d') : '';\n            } else if (elem.type === 'datetime-local' || elem.type === 'datetime') {\n                elem.value = value ? DateTime.from(value).format('Y-m-d\\\\TH:i:s') : '';\n            } else {\n                elem.value = value !== null ? toStr(value) : '';\n            }\n\n            return this;\n        },\n\n        getValue: function (name) {\n            return Vendor.getEffectiveValue(this.getElement(name));\n        },\n\n        serialize: function () {\n            var elem, i,\n                data = new FormData(),\n                names = this._getFieldNames(true),\n                value;\n\n            if (this._.submittedBy) {\n                names.push(this._.submittedBy);\n            }\n\n            for (i = 0; i < names.length; i++) {\n                elem = this._.form.elements.namedItem(names[i]);\n                value = Vendor.getEffectiveValue(elem);\n\n                if (Array.isArray(value) || value instanceof FileList) {\n                    for (var j = 0; j < value.length; j++) {\n                        data.append(names[i], value[j]);\n                    }\n                } else {\n                    data.append(names[i], value);\n                }\n            }\n\n            this.trigger('serialize', data);\n\n            return data;\n        },\n\n        submit: function (by) {\n            if (by) {\n                var btn = this._.form.elements.namedItem(by);\n\n                if (btn && btn.type === 'submit') {\n                    DOM.trigger(btn, 'click');\n                } else {\n                    throw new TypeError('Unknown element or not a submit button: ' + by);\n                }\n            } else {\n                DOM.trigger(this._.form, 'submit');\n            }\n\n            return this;\n        },\n\n        reset: function () {\n            this._.form.reset();\n            return this;\n        },\n\n        destroy: function () {\n            this.trigger('destroy');\n            this.off();\n            DOM.removeListener(this._.form, 'submit', this._handleSubmit);\n            DOM.removeListener(this._.form, 'reset', this._handleReset);\n            this._.form = null;\n        },\n\n        _handleSubmit: function (evt) {\n            if (this.trigger('submit').isDefaultPrevented()) {\n                evt.preventDefault();\n                return;\n            }\n\n            var sender = this._.submittedBy ? this.getElement(this._.submittedBy) : null;\n\n            if (!this.validate(sender)) {\n                evt.preventDefault();\n            }\n        },\n\n        _handleReset: function (evt) {\n            if (evt.target !== this._.form) {\n                return;\n            }\n\n            var elem, i;\n\n            for (i = 0; i < this._.form.elements.length; i++) {\n                elem = this._.form.elements.item(i);\n\n                if (elem.type === 'hidden' && elem.hasAttribute('data-default-value')) {\n                    this.setValue(elem, DOM.getData(elem, 'default-value'));\n                } else if (elem.type === 'file') {\n                    this.setValue(elem, null);\n                }\n            }\n\n            this._.submittedBy = this._.form['nette-submittedBy'] = null;\n\n            this.trigger('reset');\n        },\n\n        _handleError: function (evt) {\n            if (this._.errorRenderer) {\n                this._.errorRenderer.addError(this._.form, evt.data.element, evt.data.message);\n            }\n\n            if (!this._.inLiveValidation && evt.data.element && typeof evt.data.element.focus === 'function') {\n                evt.data.element.focus();\n            }\n        },\n\n        _handleBlur: function (evt) {\n            if (this._.errorRenderer) {\n                this._.errorRenderer.cleanupErrors(this._.form, evt.data.element);\n            }\n\n            if (DOM.getData(evt.data.element, 'validation-mode', this._.validationMode) === 'live') {\n                this._.inLiveValidation = true;\n                Vendor.validateControl(evt.data.element);\n                this._.inLiveValidation = false;\n            }\n        },\n\n        _getFieldNames: function (enabledOnly) {\n            var elem, i,\n                names = [];\n\n            for (i = 0; i < this._.form.elements.length; i++) {\n                elem = this._.form.elements.item(i);\n\n                if (elem.name && (!enabledOnly || !elem.disabled) && names.indexOf(elem.name) === -1 && !(elem.type in {submit: 1, button: 1, reset: 1})) {\n                    names.push(elem.name);\n                }\n            }\n\n            return names;\n        }\n    });\n\n    _context.register(Form, 'Form');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays',\n    DateTime: 'Utils.DateTime'\n});\n","_context.invoke('Nittro.Forms', function (Form, Vendor, DOM, Arrays) {\n\n    var anonId = 0;\n\n    var Locator = _context.extend('Nittro.Object', function (formErrorRenderer) {\n        this._ = {\n            errorRenderer: formErrorRenderer || null,\n            registry: {}\n        };\n\n        Vendor.addError = this._forwardError.bind(this);\n        DOM.addListener(document, 'blur', this._handleBlur.bind(this), true);\n\n    }, {\n        getForm: function (id) {\n            var elem;\n\n            if (typeof id !== 'string') {\n                elem = id;\n\n                if (!elem.getAttribute('id')) {\n                    elem.setAttribute('id', 'frm-anonymous' + (++anonId));\n                }\n\n                id = elem.getAttribute('id');\n\n            }\n\n            if (!(id in this._.registry)) {\n                this._.registry[id] = new Form(elem || id);\n                this._.registry[id].setErrorRenderer(this._.errorRenderer);\n                this.trigger('form-added', { form: this._.registry[id] });\n            }\n\n            return this._.registry[id];\n\n        },\n\n        removeForm: function (id) {\n            if (typeof id !== 'string') {\n                id = id.getAttribute('id');\n            }\n\n            if (id in this._.registry) {\n                this.trigger('form-removed', { form: this._.registry[id] });\n                this._.registry[id].destroy();\n                delete this._.registry[id];\n            }\n        },\n\n        refreshForms: function () {\n            var elem, id;\n\n            for (id in this._.registry) {\n                if (this._.registry.hasOwnProperty(id)) {\n                    elem = DOM.getById(id);\n\n                    if (elem) {\n                        if (elem !== this._.registry[id].getElement()) {\n                            this._.registry[id].setElement(elem);\n                        }\n                    } else {\n                        this.removeForm(id);\n                    }\n                }\n            }\n\n            Arrays.createFrom(document.getElementsByTagName('form'))\n                .forEach(this.getForm.bind(this));\n        },\n\n        _forwardError: function (elem, msg) {\n            this.getForm(elem.form).trigger('error', {element: elem, message: msg});\n        },\n\n        _handleBlur: function (evt) {\n            if (evt.target.form && evt.target.form instanceof HTMLFormElement) {\n                this.getForm(evt.target.form).trigger('blur', { element: evt.target });\n            }\n        }\n    });\n\n    _context.register(Locator, 'Locator');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.Forms', function (DOM) {\n\n    var DefaultErrorRenderer = _context.extend(function () {\n\n    }, {\n        addError: function (form, element, message) {\n            var container = this._getErrorContainer(form, element),\n                elem;\n\n            if (container) {\n                if (element && element.parentNode === container) {\n                    elem = DOM.create('span', {'class': 'error'});\n                } else {\n                    elem = DOM.create(container.tagName.match(/^(ul|ol)$/i) ? 'li' : 'p', {'class': 'error'});\n                }\n\n                elem.textContent = message;\n                container.appendChild(elem);\n            }\n        },\n\n        cleanupErrors: function (form, element) {\n            var container = element ? this._getErrorContainer(form, element) : form;\n\n            if (container) {\n                DOM.getByClassName('error', container)\n                    .forEach(function (elem) {\n                        elem.parentNode.removeChild(elem);\n                    });\n            }\n        },\n\n        _getErrorContainer: function (form, elem) {\n            var container = elem && elem.id ? DOM.getById(elem.id + '-errors') : null;\n            return container || DOM.getById(form.id + '-errors') || (elem ? elem.parentNode : null);\n        }\n    });\n\n    _context.register(DefaultErrorRenderer, 'DefaultErrorRenderer');\n\n}, {\n    DOM: 'Utils.DOM'\n});\n","_context.invoke('Nittro.Page', function (DOM, undefined) {\n\n    var Snippet = _context.extend(function (id, phase) {\n        this._ = {\n            id: id,\n            container: false,\n            phase: typeof phase === 'number' ? phase : Snippet.INACTIVE,\n            data: {},\n            handlers: [\n                [], [], [], []\n            ]\n        };\n    }, {\n        STATIC: {\n            INACTIVE: -1,\n            PREPARE_SETUP: 0,\n            RUN_SETUP: 1,\n            PREPARE_TEARDOWN: 2,\n            RUN_TEARDOWN: 3\n        },\n\n        getId: function () {\n            return this._.id;\n\n        },\n\n        setup: function (prepare, run) {\n            if (prepare && !run) {\n                run = prepare;\n                prepare = null;\n\n            }\n\n            if (prepare) {\n                if (this._.phase === Snippet.PREPARE_SETUP) {\n                    prepare(this.getElement());\n\n                } else {\n                    this._.handlers[Snippet.PREPARE_SETUP].push(prepare);\n\n                }\n            }\n\n            if (run) {\n                if (this._.phase === Snippet.RUN_SETUP) {\n                    run(this.getElement());\n\n                } else {\n                    this._.handlers[Snippet.RUN_SETUP].push(run);\n\n                }\n            }\n\n            return this;\n\n        },\n\n        teardown: function (prepare, run) {\n            if (prepare && !run) {\n                run = prepare;\n                prepare = null;\n\n            }\n\n            if (prepare) {\n                if (this._.phase === Snippet.PREPARE_TEARDOWN) {\n                    prepare(this.getElement());\n\n                } else {\n                    this._.handlers[Snippet.PREPARE_TEARDOWN].push(prepare);\n\n                }\n            }\n\n            if (run) {\n                if (this._.phase === Snippet.RUN_TEARDOWN) {\n                    run(this.getElement());\n\n                } else {\n                    this._.handlers[Snippet.RUN_TEARDOWN].push(run);\n\n                }\n            }\n\n            return this;\n\n        },\n\n        runPhase: function (phase) {\n            if (phase === Snippet.INACTIVE) {\n                this._.phase = phase;\n\n                this._.handlers.forEach(function (queue) {\n                    queue.splice(0, queue.length);\n\n                });\n\n            } else if (phase - 1 === this._.phase) {\n                this._.phase = phase;\n\n                var elm = this.getElement();\n\n                this._.handlers[this._.phase].forEach(function (handler) {\n                    handler(elm);\n\n                });\n\n                this._.handlers[this._.phase].splice(0, this._.handlers[this._.phase].length);\n\n            }\n\n            return this;\n\n        },\n\n        getPhase: function () {\n            return this._.phase;\n\n        },\n\n        getData: function (key, def) {\n            return key in this._.data ? this._.data[key] : (def === undefined ? null : def);\n\n        },\n\n        setData: function (key, value) {\n            this._.data[key] = value;\n            return this;\n\n        },\n\n        setContainer: function () {\n            this._.container = true;\n            return this;\n\n        },\n\n        isContainer: function () {\n            return this._.container;\n\n        },\n\n        getElement: function () {\n            return DOM.getById(this._.id);\n\n        }\n    });\n\n    _context.register(Snippet, 'Snippet');\n\n}, {\n    DOM: 'Utils.DOM'\n});\n","_context.invoke('Nittro.Page', function(DOM) {\n\n    var Helpers = {\n        buildContent: function(elem, html) {\n            elem = elem.split(/\\./g);\n            elem[0] = DOM.create(elem[0]);\n\n            if (elem.length > 1) {\n                DOM.addClass.apply(DOM, elem);\n            }\n\n            elem = elem[0];\n            DOM.html(elem, html);\n\n            return elem;\n\n        },\n\n        prepareDynamicContainer: function (snippet) {\n            var elem = snippet.getElement(),\n                params = {\n                    id: snippet.getId(),\n                    mask: new RegExp('^' + DOM.getData(elem, 'dynamic-mask') + '$'),\n                    element: DOM.getData(elem, 'dynamic-element') || 'div',\n                    sort: DOM.getData(elem, 'dynamic-sort') || 'append',\n                    sortCache: DOM.getData(elem, 'dynamic-sort-cache') === false ? false : null\n                };\n\n            snippet.setContainer();\n            snippet.setData('_snippet_container', params);\n            return params;\n\n        },\n\n        computeSortedSnippets: function (container, snippets, changeset) {\n            var sortData = Helpers._getSortData(container.getData('_snippet_container'), container.getElement(), changeset);\n            Helpers._mergeSortData(sortData, snippets);\n            return Helpers._applySortData(sortData);\n        },\n\n        applySortedSnippets: function (container, ids, snippets) {\n            var i = 0, n = ids.length, tmp;\n\n            tmp = container.firstElementChild;\n\n            while (i < n && ids[i] in snippets && !snippets[ids[i]].element) {\n                container.insertBefore(snippets[ids[i]].content, tmp);\n                i++;\n\n            }\n\n            while (n > i && ids[n - 1] in snippets && !snippets[ids[n - 1]].element) {\n                n--;\n\n            }\n\n            for (; i < n; i++) {\n                if (ids[i] in snippets) {\n                    if (snippets[ids[i]].element) {\n                        if (snippets[ids[i]].element.previousElementSibling !== (i > 0 ? DOM.getById(ids[i - 1]) : null)) {\n                            container.insertBefore(snippets[ids[i]].element, i > 0 ? DOM.getById(ids[i - 1]).nextElementSibling : container.firstElementChild);\n\n                        }\n                    } else {\n                        container.insertBefore(snippets[ids[i]].content, DOM.getById(ids[i - 1]).nextElementSibling);\n\n                    }\n                }\n            }\n\n            while (n < ids.length) {\n                container.appendChild(snippets[ids[n]].content);\n                n++;\n\n            }\n        },\n\n        _applySortData: function (sortData) {\n            var sorted = [],\n                id;\n\n            for (id in sortData.snippets) {\n                if (sortData.snippets.hasOwnProperty(id)) {\n                    sorted.push({id: id, values: sortData.snippets[id]});\n\n                }\n            }\n\n            sorted.sort(Helpers._compareSnippets.bind(null, sortData.descriptor));\n            return sorted.map(function(snippet) { return snippet.id; });\n\n        },\n\n        _compareSnippets: function (descriptor, a, b) {\n            var i, n, v;\n\n            for (i = 0, n = descriptor.length; i < n; i++) {\n                v = a.values[i] < b.values[i] ? -1 : (a.values[i] > b.values[i] ? 1 : 0);\n\n                if (v !== 0) {\n                    return v * (descriptor[i].asc ? 1 : -1);\n\n                }\n            }\n\n            return 0;\n\n        },\n\n        _getSortData: function (params, elem, changeset) {\n            var sortData = params.sortCache;\n\n            if (!sortData) {\n                sortData = Helpers._buildSortData(params, elem, changeset);\n\n                if (params.sortCache !== false) {\n                    params.sortCache = sortData;\n\n                }\n            } else {\n                for (var id in sortData.snippets) {\n                    if (sortData.snippets.hasOwnProperty(id) && (id in changeset.remove || !DOM.getById(id))) {\n                        delete sortData.snippets[id];\n\n                    }\n                }\n            }\n\n            return sortData;\n\n        },\n\n        _buildSortData: function (params, elem, changeset) {\n            var sortData = {\n                descriptor: params.sort.trim().split(/\\s*,\\s*/g).map(Helpers._parseDescriptor.bind(null, params.id)),\n                snippets: {}\n            };\n\n            var children = {};\n\n            DOM.getChildren(elem).forEach(function(child) {\n                if (!(child.id in changeset.remove || child.id in changeset.update)) {\n                    children[child.id] = {\n                        content: child\n                    };\n                }\n            });\n\n            Helpers._mergeSortData(sortData, children);\n\n            return sortData;\n\n        },\n\n        _mergeSortData: function (sortData, snippets) {\n            for (var id in snippets) {\n                if (snippets.hasOwnProperty(id)) {\n                    sortData.snippets[id] = Helpers._extractSortData(snippets[id].content, sortData.descriptor);\n\n                }\n            }\n        },\n\n        _extractSortData: function (elem, descriptor) {\n            return descriptor.map(function (field) {\n                return field.extractor(elem);\n\n            });\n        },\n\n        _parseDescriptor: function (id, descriptor) {\n            var m = descriptor.match(/^(.+?)(?:\\[(.+?)\\])?(?:\\((.+?)\\))?(?:\\s+(.+?))?$/),\n                sel, attr, prop, asc;\n\n            if (!m) {\n                throw new Error('Invalid sort descriptor: ' + descriptor);\n\n            }\n\n            sel = m[1];\n            attr = m[2];\n            prop = m[3];\n            asc = m[4];\n\n            if (sel.match(/^[^.]|[\\s#\\[>+:]/)) {\n                throw new TypeError('Invalid selector for sorted insert mode in container #' + id);\n\n            }\n\n            sel = sel.substr(1);\n            asc = asc ? /^[1tay]/i.test(asc) : true;\n\n            if (attr) {\n                return {extractor: Helpers._getAttrExtractor(sel, attr), asc: asc};\n\n            } else if (prop) {\n                return {extractor: Helpers._getDataExtractor(sel, prop), asc: asc};\n\n            } else {\n                return {extractor: Helpers._getTextExtractor(sel), asc: asc};\n\n            }\n        },\n\n        _getAttrExtractor: function (sel, attr) {\n            return function (elem) {\n                elem = elem.getElementsByClassName(sel);\n                return elem.length ? elem[0].getAttribute(attr) || null : null;\n            };\n        },\n\n        _getDataExtractor: function (sel, prop) {\n            return function (elem) {\n                elem = elem.getElementsByClassName(sel);\n                return elem.length ? DOM.getData(elem[0], prop, null) : null;\n            };\n        },\n\n        _getTextExtractor: function (sel) {\n            return function (elem) {\n                elem = elem.getElementsByClassName(sel);\n                return elem.length ? elem[0].textContent : null;\n            };\n        }\n    };\n\n    _context.register(Helpers, 'SnippetManagerHelpers');\n\n}, {\n    DOM: 'Utils.DOM'\n});\n","_context.invoke('Nittro.Page', function (Helpers, Snippet, DOM, Arrays, undefined) {\n\n    var SnippetManager = _context.extend('Nittro.Object', function() {\n        SnippetManager.Super.call(this);\n\n        this._.snippets = {};\n        this._.containerCache = null;\n        this._.currentPhase = Snippet.INACTIVE;\n\n    }, {\n        getSnippet: function (id) {\n            if (!this._.snippets[id]) {\n                this._.snippets[id] = new Snippet(id, this._.currentPhase);\n\n            }\n\n            return this._.snippets[id];\n\n        },\n\n        isSnippet: function (elem) {\n            return (typeof elem === 'string' ? elem : elem.id) in this._.snippets;\n\n        },\n\n        setup: function() {\n            this.trigger('after-update');\n            this._runSnippetsPhase(this._.snippets, Snippet.PREPARE_SETUP);\n            this._runSnippetsPhase(this._.snippets, Snippet.RUN_SETUP);\n        },\n\n        getRemoveTargets: function (elem) {\n            var sel = DOM.getData(elem, 'dynamic-remove');\n            return sel ? DOM.find(sel) : [];\n\n        },\n\n        computeChanges: function (snippets, removeTargets) {\n            this._clearDynamicContainerCache();\n\n            var changeset = {\n                remove: {},\n                update: {},\n                add: {},\n                containers: {}\n            };\n\n            this._resolveRemovals(removeTargets, changeset);\n            this._resolveUpdates(snippets, changeset);\n            this._resolveDynamicSnippets(changeset);\n\n            return changeset;\n\n        },\n\n        applyChanges: function (changeset) {\n            var teardown = Arrays.mergeTree({}, changeset.remove, changeset.update);\n\n            this._runSnippetsPhase(teardown, Snippet.PREPARE_TEARDOWN);\n            this._runSnippetsPhase(teardown, Snippet.RUN_TEARDOWN);\n            this._runSnippetsPhase(teardown, Snippet.INACTIVE);\n\n            this.trigger('before-update', changeset);\n\n            this._applyRemove(changeset.remove);\n            this._applyUpdate(changeset.update);\n            this._applyAdd(changeset.add, changeset.containers);\n            this._applyDynamic(changeset.containers, Arrays.mergeTree({}, changeset.update, changeset.add));\n\n            this.trigger('after-update', changeset);\n\n            return this._runSnippetsPhaseOnNextFrame(this._.snippets, Snippet.PREPARE_SETUP)\n                .then(function () {\n                    this._runSnippetsPhase(this._.snippets, Snippet.RUN_SETUP);\n\n                }.bind(this));\n        },\n\n        cleanupDescendants: function(elem, changeset) {\n            var id, snippet,\n                snippets = changeset ? changeset.remove : {};\n\n            for (id in this._.snippets) {\n                if (this._.snippets.hasOwnProperty(id) && !(id in snippets)) {\n                    snippet = this._.snippets[id].getElement();\n\n                    if (snippet !== elem && DOM.contains(elem, snippet)) {\n                        snippets[id] = {\n                            element: snippet,\n                            isDescendant: true\n                        };\n                    }\n                }\n            }\n\n            if (!changeset) {\n                this._runSnippetsPhase(snippets, Snippet.PREPARE_TEARDOWN);\n                this._runSnippetsPhase(snippets, Snippet.RUN_TEARDOWN);\n                this._runSnippetsPhase(snippets, Snippet.INACTIVE);\n            }\n        },\n\n        _resolveRemovals: function(removeTargets, changeset) {\n            removeTargets.forEach(function(elem) {\n                changeset.remove[elem.id] = {\n                    element: elem\n                };\n\n                this.cleanupDescendants(elem, changeset);\n\n            }.bind(this));\n        },\n\n        _resolveUpdates: function(snippets, changeset) {\n            var id, elem, params;\n\n            for (id in snippets) {\n                if (snippets.hasOwnProperty(id)) {\n                    elem = DOM.getById(id);\n\n                    if (elem) {\n                        this.cleanupDescendants(elem, changeset);\n\n                        if (id in changeset.remove && (params = this._resolveAddition(id, snippets[id]))) {\n                            changeset.add[id] = params;\n\n                        } else {\n                            changeset.update[id] = this._resolveUpdate(elem, snippets[id]);\n\n                        }\n                    } else if (params = this._resolveAddition(id, snippets[id])) {\n                        changeset.add[id] = params;\n\n                    }\n                }\n            }\n        },\n\n        _resolveDynamicSnippets: function(changeset) {\n            var id, type, cid, params;\n\n            for (type in {update: 1, add: 1}) {\n                for (id in changeset[type]) {\n                    if (changeset[type].hasOwnProperty(id) && (cid = changeset[type][id].container)) {\n                        params = this._getDynamicContainerParams(cid);\n\n                        if (params.sort !== 'prepend' && params.sort !== 'append') {\n                            changeset.containers[cid] || (changeset.containers[cid] = {});\n                            changeset.containers[cid][id] = changeset[type][id];\n\n                        } else {\n                            changeset[type][id].action = params.sort;\n\n                        }\n                    }\n                }\n            }\n\n            for (cid in changeset.containers) {\n                if (changeset.containers.hasOwnProperty(cid)) {\n                    changeset.containers[cid] = Helpers.computeSortedSnippets(this.getSnippet(cid), changeset.containers[cid], changeset);\n\n                }\n            }\n        },\n\n        _resolveUpdate: function(elem, content) {\n            return {\n                element: elem,\n                content: Helpers.buildContent(elem.tagName, content),\n                container: DOM.hasClass(elem.parentNode, 'nittro-snippet-container') ? elem.parentNode.id : null\n            };\n        },\n\n        _resolveAddition: function(id, content) {\n            var params = this._getDynamicContainerParamsForId(id),\n                elem;\n\n            if (!params) {\n                return null;\n            }\n\n            elem = Helpers.buildContent(params.element, content);\n            elem.id = id;\n\n            return {\n                content: elem,\n                container: params.id\n            };\n        },\n\n        _runSnippetsPhase: function (snippets, phase) {\n            this._.currentPhase = phase;\n\n            for (var id in snippets) {\n                if (snippets.hasOwnProperty(id)) {\n                    this.getSnippet(id).runPhase(phase);\n\n                }\n            }\n        },\n\n        _runSnippetsPhaseOnNextFrame: function(snippets, phase) {\n            return new Promise(function(fulfill) {\n                window.requestAnimationFrame(function() {\n                    this._runSnippetsPhase(snippets, phase);\n                    fulfill();\n\n                }.bind(this));\n            }.bind(this));\n        },\n\n        _applyRemove: function(snippets) {\n            for (var id in snippets) {\n                if (snippets.hasOwnProperty(id)) {\n                    if (!snippets[id].isDescendant && snippets[id].element.parentNode) {\n                        snippets[id].element.parentNode.removeChild(snippets[id].element);\n                    }\n\n                    if (id in this._.snippets) {\n                        delete this._.snippets[id];\n                    }\n                }\n            }\n        },\n\n        _applyUpdate: function(snippets) {\n            for (var id in snippets) {\n                if (snippets.hasOwnProperty(id)) {\n                    DOM.empty(snippets[id].element);\n                    DOM.append(snippets[id].element, Arrays.createFrom(snippets[id].content.childNodes));\n\n                }\n            }\n        },\n\n        _applyAdd: function(snippets, containers) {\n            for (var id in snippets) {\n                if (snippets.hasOwnProperty(id) && !(snippets[id].container in containers)) {\n                    if (snippets[id].action === 'prepend') {\n                        DOM.prepend(snippets[id].container, snippets[id].content);\n\n                    } else {\n                        DOM.append(snippets[id].container, snippets[id].content);\n\n                    }\n                }\n            }\n        },\n\n        _applyDynamic: function(containers, snippets) {\n            for (var cid in containers) {\n                if (containers.hasOwnProperty(cid)) {\n                    Helpers.applySortedSnippets(this.getSnippet(cid).getElement(), containers[cid], snippets);\n\n                }\n            }\n        },\n\n        _getDynamicContainerCache: function () {\n            if (this._.containerCache === null) {\n                this._.containerCache = DOM.getByClassName('nittro-snippet-container')\n                    .map(function (elem) {\n                        return elem.id;\n                    });\n            }\n\n            return this._.containerCache;\n\n        },\n\n        _clearDynamicContainerCache: function () {\n            this._.containerCache = null;\n\n        },\n\n        _getDynamicContainerParams: function (id) {\n            var container = this.getSnippet(id),\n                params = container.isContainer() ? container.getData('_snippet_container') : null;\n\n            if (!params || params.sortCache === false) {\n                return Helpers.prepareDynamicContainer(container);\n            } else {\n                return params;\n            }\n        },\n\n        _getDynamicContainerParamsForId: function (id) {\n            var cache = this._getDynamicContainerCache(),\n                i, n, params;\n\n            for (i = 0, n = cache.length; i < n; i++) {\n                params = this._getDynamicContainerParams(cache[i]);\n\n                if (params.mask.test(id)) {\n                    return params;\n\n                }\n            }\n\n            if (window.console) {\n                console.error('Dynamic snippet #' + id + ' has no container');\n            }\n\n            return null;\n        }\n    });\n\n    _context.register(SnippetManager, 'SnippetManager');\n\n}, {\n    Helpers: 'Nittro.Page.SnippetManagerHelpers',\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.Page', function() {\n\n    var SnippetAgent = _context.extend(function(page, snippetManager) {\n        this._ = {\n            page: page,\n            snippetManager: snippetManager\n        };\n\n        this._.page.on('transaction-created', this._initTransaction.bind(this));\n    }, {\n        _initTransaction: function(evt) {\n            var data = {\n                removeTargets: 'remove' in evt.data.context\n                    ? evt.data.context.remove || []\n                    : (evt.data.context.element ? this._.snippetManager.getRemoveTargets(evt.data.context.element) : [])\n            };\n\n            evt.data.transaction.on('ajax-response', this._handleResponse.bind(this, data));\n        },\n\n        _handleResponse: function(data, evt) {\n            var payload = evt.data.response.getPayload(),\n                changeset;\n\n            if (payload.snippets || data.removeTargets.length) {\n                changeset = this._.snippetManager.computeChanges(payload.snippets || {}, data.removeTargets);\n                evt.waitFor(this._applyChangeset(evt.target, changeset));\n            }\n        },\n\n        _applyChangeset: function (transaction, changeset) {\n            return Promise.resolve().then(this._doApplyChangeset.bind(this, transaction, changeset));\n        },\n\n        _doApplyChangeset: function (transaction, changeset) {\n            return transaction.trigger('snippets-apply', { changeset: changeset })\n                .then(function() {\n                    this._.snippetManager.applyChanges(changeset)\n                }.bind(this));\n        }\n    });\n\n    _context.register(SnippetAgent, 'SnippetAgent');\n\n});\n","_context.invoke('Nittro.Page', function(Arrays) {\n\n    var AjaxAgent = _context.extend(function(page, ajax, options) {\n        this._ = {\n            page: page,\n            ajax: ajax,\n            options: Arrays.mergeTree({}, AjaxAgent.defaults, options)\n        };\n\n        this._.page.on('before-transaction', this._checkTransaction.bind(this));\n        this._.page.on('transaction-created', this._initTransaction.bind(this));\n    }, {\n        STATIC: {\n            defaults: {\n                whitelistRedirects: false\n            }\n        },\n\n        _checkTransaction: function (evt) {\n            if (!this._.ajax.isAllowedOrigin(evt.data.url) || !this._.ajax.supports(evt.data.url, evt.data.context.method, evt.data.context.data)) {\n                evt.preventDefault();\n            }\n        },\n\n        _initTransaction: function(evt) {\n            var data = {\n                request: this._.ajax.createRequest(evt.data.transaction.getUrl(), evt.data.context.method, evt.data.context.data)\n            };\n\n            evt.data.transaction.on('dispatch', this._dispatch.bind(this, data));\n            evt.data.transaction.on('abort', this._abort.bind(this, data));\n        },\n\n        _dispatch: function(data, evt) {\n            evt.waitFor(Promise.resolve().then(this._doDispatch.bind(this, evt.target, data)));\n        },\n\n        _doDispatch: function (transaction, data) {\n            return transaction.trigger('ajax-request', { request: data.request })\n                .then(this._.ajax.dispatch.bind(this._.ajax, data.request))\n                .then(this._handleResponse.bind(this, transaction, data));\n        },\n\n        _abort: function(data) {\n            data.request.abort();\n        },\n\n        _handleResponse: function (transaction, data, response) {\n            return Promise.resolve().then(this._doHandleResponse.bind(this, transaction, data, response));\n        },\n\n        _doHandleResponse: function(transaction, data, response) {\n            return transaction.trigger('ajax-response', { response: response })\n                .then(function() {\n                    var payload = response.getPayload();\n\n                    if (payload.postGet) {\n                        transaction.setUrl(payload.url);\n                    }\n\n                    if ('redirect' in payload) {\n                        if ((!this._.options.whitelistRedirects ? payload.allowAjax !== false : payload.allowAjax) && this._.ajax.isAllowedOrigin(payload.redirect)) {\n                            transaction.setUrl(payload.redirect);\n                            data.request = this._.ajax.createRequest(payload.redirect);\n                            return this._doDispatch(transaction, data);\n\n                        } else {\n                            document.location.href = payload.redirect;\n                            return new Promise(function() {});\n                        }\n                    } else {\n                        return data.request;\n                    }\n                }.bind(this));\n        }\n    });\n\n    _context.register(AjaxAgent, 'AjaxAgent');\n\n}, {\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.Page', function(Arrays, DOM, Url) {\n\n    var HistoryAgent = _context.extend(function(page, history, options) {\n        this._ = {\n            page: page,\n            history: history,\n            options: Arrays.mergeTree({}, HistoryAgent.defaults, options)\n        };\n\n        this._.page.on('transaction-created', this._initTransaction.bind(this));\n    }, {\n        STATIC: {\n            defaults: {\n                whitelistHistory: false\n            }\n        },\n\n        _initTransaction: function (evt) {\n            if (evt.data.context.fromHistory) {\n                evt.data.transaction.setIsFromHistory();\n            } else if ('history' in evt.data.context) {\n                evt.data.transaction.setIsHistoryState(evt.data.context.history);\n            } else if (evt.data.context.element) {\n                evt.data.transaction.setIsHistoryState(DOM.getData(evt.data.context.element, 'history', !this._.options.whitelistHistory));\n            } else {\n                evt.data.transaction.setIsHistoryState(!this._.options.whitelistHistory);\n            }\n\n            var data = {\n                title: document.title\n            };\n\n            evt.data.transaction.on('dispatch', this._dispatch.bind(this, data));\n            evt.data.transaction.on('ajax-response', this._handleResponse.bind(this, data));\n        },\n\n        _dispatch: function (data, evt) {\n            evt.target.then(this._saveState.bind(this, evt.target, data), function () { /* noop on transaction error */ });\n        },\n\n        _handleResponse: function (data, evt) {\n            var payload = evt.data.response.getPayload();\n\n            if (payload.title) {\n                data.title = payload.title;\n            }\n        },\n\n        _saveState: function (transaction, data) {\n            if (transaction.getUrl().getOrigin() !== Url.fromCurrent().getOrigin() || transaction.isBackground()) {\n                transaction.setIsHistoryState(false);\n            } else if (transaction.isHistoryState()) {\n                data.state = {};\n\n                if (!transaction.trigger('history-save', data).isDefaultPrevented()) {\n                    this._.history.push(transaction.getUrl().toAbsolute(), data.title, data.state);\n                }\n            }\n\n            if (data.title) {\n                document.title = data.title;\n            }\n        }\n    });\n\n    _context.register(HistoryAgent, 'HistoryAgent');\n\n}, {\n    Arrays: 'Utils.Arrays',\n    DOM: 'Utils.DOM',\n    Url: 'Utils.Url'\n});\n","_context.invoke('Nittro.Page', function (DOM, Arrays) {\n\n    var location = window.history.location || window.location; // support for HTML5 history polyfill\n\n    var History = _context.extend('Nittro.Object', function () {\n        History.Super.call(this);\n        this._.state = null;\n        DOM.addListener(window, 'popstate', this._handleState.bind(this));\n    }, {\n        init: function () {\n            if (window.history.state && window.history.state._nittro) {\n                this._.state = window.history.state.data;\n            } else {\n                this._.state = {};\n                this.update();\n            }\n        },\n\n        push: function (url, title, data) {\n            this._saveState(url, title, data, false);\n        },\n\n        replace: function (url, title, data) {\n            this._saveState(url, title, data, true);\n        },\n\n        update: function (data) {\n            Arrays.mergeTree(this._.state, data);\n            window.history.replaceState({_nittro: true, data: this._.state}, document.title, location.href);\n        },\n\n        getState: function () {\n            return this._.state;\n        },\n\n        _saveState: function (url, title, data, replace) {\n            data = data || {};\n            this.trigger('before-savestate', data);\n\n            this._.state = data;\n\n            if (replace) {\n                window.history.replaceState({_nittro: true, data: data}, title || document.title, url);\n            } else {\n                window.history.pushState({_nittro: true, data: data}, title || document.title, url);\n            }\n\n            title && (document.title = title);\n\n            this.trigger('savestate', {\n                title: title,\n                url: url,\n                data: data,\n                replace: replace\n            });\n        },\n\n        _handleState: function (evt) {\n            if (!evt.state || !evt.state._nittro) {\n                return;\n            }\n\n            this._.state = evt.state.data;\n\n            this.trigger('popstate', {\n                title: document.title,\n                url: location.href,\n                data: evt.state.data\n            });\n        }\n    });\n\n    _context.register(History, 'History');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.Page', function (DOM, Arrays, CSSTransitions, undefined) {\n\n    var TransitionAgent = _context.extend('Nittro.Object', function(page, options) {\n        TransitionAgent.Super.call(this);\n\n        this._.page = page;\n        this._.options = Arrays.mergeTree({}, TransitionAgent.defaults, options);\n\n        this._.page.on('transaction-created', this._initTransaction.bind(this));\n    }, {\n        STATIC: {\n            defaults: {\n                defaultSelector: '.nittro-transition-auto'\n            }\n        },\n\n        _initTransaction: function(evt) {\n            var data = {\n                elements: this._getTransitionTargets(evt.data.context),\n                removeTargets: this._getRemoveTargets(evt.data.context)\n            };\n\n            evt.data.transaction.on('dispatch', this._dispatch.bind(this, data));\n            evt.data.transaction.on('abort', this._abort.bind(this, data));\n            evt.data.transaction.on('snippets-apply', this._handleSnippets.bind(this, data));\n        },\n\n        _dispatch: function(data, evt) {\n            evt.target.on('error', this._handleError.bind(this, data));\n            evt.target.then(this._transitionIn.bind(this, data, false), this._transitionIn.bind(this, data, true));\n\n            if (data.elements.length || data.removeTargets.length) {\n                DOM.addClass(data.removeTargets, 'nittro-dynamic-remove');\n                data.transitionOut = this._transitionOut(data);\n                evt.waitFor(data.transitionOut);\n            }\n        },\n\n        _abort: function(data) {\n            if (data.elements.length || data.removeTargets.length) {\n                this._transitionIn(data, true);\n            }\n        },\n\n        _handleSnippets: function(data, evt) {\n            var changeset = evt.data.changeset,\n                id;\n\n            for (id in changeset.add) {\n                if (changeset.add.hasOwnProperty(id)) {\n                    DOM.addClass(changeset.add[id].content, 'nittro-dynamic-add', 'nittro-transition-middle');\n                    data.elements.push(changeset.add[id].content);\n                }\n            }\n\n            if (data.transitionOut) {\n                evt.waitFor(data.transitionOut);\n            }\n        },\n\n        _handleError: function (data, evt) {\n            if (data.transitionOut) {\n                evt.waitFor(data.transitionOut);\n            }\n        },\n\n        _transitionOut: function (data) {\n            return this._transition(data.elements.concat(data.removeTargets), 'out');\n        },\n\n        _transitionIn: function (data, aborting) {\n            var elements = aborting ? data.elements.concat(data.removeTargets) : data.elements;\n\n            if (elements.length) {\n                return this._transition(elements, 'in')\n                    .then(function () {\n                        DOM.removeClass(elements, 'nittro-dynamic-add', 'nittro-dynamic-remove');\n                    });\n\n            }\n        },\n\n        _transition: function(elements, dir) {\n            return CSSTransitions.run(elements, {\n                    add: 'nittro-transition-active nittro-transition-' + dir,\n                    remove: 'nittro-transition-middle',\n                    after: dir === 'out' ? 'nittro-transition-middle' : null\n                }, dir === 'in');\n        },\n\n        _getTransitionTargets: function(context) {\n            var sel, targets;\n\n            if (context.transition !== undefined) {\n                sel = context.transition;\n            } else {\n                sel = context.element ? DOM.getData(context.element, 'transition') : undefined;\n            }\n\n            if (sel === undefined && (!context.element || !DOM.getData(context.element, 'dynamic-remove'))) {\n                sel = this._.options.defaultSelector;\n            }\n\n            targets = sel ? DOM.find(sel) : [];\n\n            this.trigger('prepare-transition-targets', {\n                element: context.element,\n                targets: targets\n            });\n\n            return targets;\n\n        },\n\n        _getRemoveTargets: function (context) {\n            if (!context.element) {\n                return [];\n            }\n\n            var sel = DOM.getData(context.element, 'dynamic-remove'),\n                targets = sel ? DOM.find(sel) : [];\n\n            if (targets.length) {\n                this.trigger('prepare-remove-targets', {\n                    targets: targets.slice()\n                });\n            }\n\n            return targets;\n\n        }\n    });\n\n    _context.register(TransitionAgent, 'TransitionAgent');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays',\n    CSSTransitions: 'Utils.CSSTransitions'\n});\n","_context.invoke('Nittro.Page', function (DOM, Arrays) {\n\n    var location = window.history.location || window.location; // support for HTML5 history polyfill\n\n    var ScrollAgent = _context.extend(function (page, history, options) {\n        this._ = {\n            page: page,\n            history: history,\n            anchor: DOM.create('div'),\n            options: Arrays.mergeTree({}, ScrollAgent.defaults, options)\n        };\n\n        this._.anchor.style.position = 'absolute';\n        this._.anchor.style.left = 0;\n        this._.anchor.style.top = 0;\n        this._.anchor.style.width = '100%';\n        this._.anchor.style.height = '1px';\n        this._.anchor.style.marginTop = '-1px';\n\n        if ('scrollRestoration' in window.history) {\n            window.history.scrollRestoration = 'manual';\n        }\n        this._.page.on('ready', this._init.bind(this));\n        this._.page.on('transaction-created', this._initTransaction.bind(this));\n    }, {\n        STATIC: {\n            defaults: {\n                target: null,\n                margin: 30,\n                scrollDown: false,\n                duration: 400\n            }\n        },\n\n        _init: function () {\n            var state = this._.history.getState(),\n                target;\n\n            if ('scrollAgent' in state) {\n                target = state.scrollAgent.target;\n            } else if (location.hash.match(/^#[^\\s\\[>+:.]+$/i)) {\n                target = this._resolveSingleTarget(location.hash);\n            }\n\n            if (typeof target === 'number') {\n                this._scrollTo(target, true, true);\n            }\n        },\n\n        _initTransaction: function (evt) {\n            if (evt.data.transaction.isBackground()) {\n                return;\n            }\n\n            var rect = document.body.getBoundingClientRect(),\n                data = {\n                    previous: window.pageYOffset,\n                    target: this._.options.target\n                };\n\n            this._.anchor.style.top = data.previous + rect.bottom + 'px';\n            document.body.appendChild(this._.anchor);\n            evt.data.transaction.on('dispatch', this._dispatch.bind(this, data));\n            evt.data.transaction.on('abort error', this._cleanup.bind(this));\n            evt.data.transaction.on('ajax-response', this._handleResponse.bind(this, data));\n            evt.data.transaction.on('snippets-apply', this._handleSnippets.bind(this, data));\n            evt.data.transaction.on('history-save', this._handleHistory.bind(this, data));\n\n            if ('scrollTo' in evt.data.context) {\n                data.target = evt.data.context.scrollTo;\n            } else if (evt.data.context.element && evt.data.context.element.hasAttribute('data-scroll-to')) {\n                data.target = DOM.getData(evt.data.context.element, 'scroll-to', null);\n            }\n        },\n\n        _dispatch: function (data, evt) {\n            var state = this._.history.getState();\n\n            if (data.target === null && evt.target.isFromHistory() && state && 'scrollAgent' in state) {\n                data.target = state.scrollAgent.target;\n            }\n\n            evt.target.then(this._apply.bind(this, data, evt.target), this._cleanup.bind(this));\n        },\n\n        _cleanup: function () {\n            if (this._.anchor.parentNode) {\n                this._.anchor.parentNode.removeChild(this._.anchor);\n                this._.anchor.style.top = 0;\n            }\n        },\n\n        _handleResponse: function (data, evt) {\n            var payload = evt.data.response.getPayload();\n\n            if ('scrollTo' in payload) {\n                data.target = payload.scrollTo;\n            }\n        },\n\n        _handleSnippets: function (data, evt) {\n            if (data.target === null) {\n                data.target = [];\n\n                var id, params;\n\n                for (id in evt.data.changeset.add) if (evt.data.changeset.add.hasOwnProperty(id)) {\n                    params = evt.data.changeset.add[id];\n\n                    if (!DOM.getData(params.container, 'scroll-ignore')) {\n                        data.target.push('#' + id);\n                    }\n                }\n\n                for (id in evt.data.changeset.update) if (evt.data.changeset.update.hasOwnProperty(id)) {\n                    if (!DOM.getData(id, 'scroll-ignore')) {\n                        data.target.push('#' + id);\n                    }\n                }\n            }\n        },\n\n        _apply: function (data, transaction) {\n            if (this._resolveTarget(data)) {\n                this._scrollTo(data.target, transaction.isFromHistory());\n            } else {\n                this._cleanup();\n            }\n        },\n\n        _scrollTo: function (to, force, instant) {\n            var y0 = window.pageYOffset,\n                dy = to - y0,\n                t0 = Date.now(),\n                dt = this._.options.duration,\n                a = this._.anchor;\n\n            if (force || this._.options.scrollDown || dy < 0) {\n                if (instant) {\n                    window.scrollTo(null, to);\n                } else {\n                    window.requestAnimationFrame(step);\n                }\n            } else {\n                this._cleanup();\n            }\n\n            function step() {\n                var x = (Date.now() - t0) / dt,\n                    y;\n\n                if (x <= 1) {\n                    window.requestAnimationFrame(step);\n\n                    y = y0 + dy * (-0.5 * Math.cos(Math.PI * x) + 0.5);\n                    window.scrollTo(null, y);\n                } else if (a.parentNode) {\n                    a.parentNode.removeChild(a);\n                    a.style.top = 0;\n                }\n            }\n        },\n\n        _handleHistory: function (data, evt) {\n            this._.history.update({\n                scrollAgent: {\n                    target: data.previous\n                }\n            });\n\n            this._resolveTarget(data);\n\n            evt.data.state.scrollAgent = {\n                target: data.target\n            };\n        },\n\n        _resolveSingleTarget: function(target) {\n            if (target === false) {\n                return false;\n            } else if (target === null) {\n                return 0;\n            } else if (typeof target === 'string') {\n                if (target = DOM.find(target)[0]) {\n                    return target.getBoundingClientRect().top + window.pageYOffset - this._.options.margin;\n                } else {\n                    return 0;\n                }\n            } else if (typeof target === 'number') {\n                return target;\n            } else {\n                return false;\n            }\n        },\n\n        _resolveTarget: function(data) {\n            if (data.target === false) {\n                return false;\n            } else if (data.target === null) {\n                data.target = 0;\n            } else if (typeof data.target !== 'number') {\n                if (Array.isArray(data.target)) {\n                    data.target = data.target.join(',');\n                }\n\n                data.target = DOM.find(data.target).map(function (elem) {\n                    return elem.getBoundingClientRect().top;\n                });\n\n                data.target = data.target.length\n                    ? Math.min.apply(null, data.target) + window.pageYOffset - this._.options.margin\n                    : 0;\n            }\n\n            return true;\n        }\n    });\n\n    _context.register(ScrollAgent, 'ScrollAgent');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.Page', function(Url) {\n\n    var Transaction = _context.extend('Nittro.Object', function (url) {\n        Transaction.Super.call(this);\n\n        this._.url = Url.from(url);\n        this._.history = true;\n        this._.fromHistory = false;\n        this._.background = false;\n\n        this._.promise = new Promise(function(fulfill, reject) {\n            this._.fulfill = fulfill;\n            this._.reject = reject;\n        }.bind(this));\n    }, {\n        STATIC: {\n            createRejected: function (url, reason) {\n                var self = new Transaction(url);\n                self._.reject(reason);\n                return self;\n            }\n        },\n\n        getUrl: function() {\n            return this._.url;\n        },\n\n        setUrl: function(url) {\n            this._.url = Url.from(url);\n            return this;\n        },\n\n        isHistoryState: function() {\n            return this._.history;\n        },\n\n        setIsHistoryState: function(value) {\n            this._.history = value;\n            return this;\n        },\n\n        isFromHistory: function() {\n            return this._.fromHistory;\n        },\n\n        setIsFromHistory: function() {\n            this._.fromHistory = true;\n            this._.history = false;\n        },\n\n        isBackground: function() {\n            return this._.background;\n        },\n\n        setIsBackground: function(value) {\n            this._.background = value;\n            return this;\n        },\n\n        dispatch: function() {\n            this.trigger('dispatch')\n                .then(this._.fulfill, this._handleError.bind(this));\n\n            return this;\n        },\n\n        abort: function() {\n            this._.reject({type: 'abort'});\n            this.trigger('abort');\n            return this;\n        },\n\n        then: function(onfulfilled, onrejected) {\n            return this._.promise.then(onfulfilled, onrejected);\n        },\n\n        _handleError: function (err) {\n            this.trigger('error')\n                .then(function () {\n                    this._.reject(err);\n                }.bind(this));\n        }\n    });\n\n    _context.register(Transaction, 'Transaction');\n\n}, {\n    Url: 'Utils.Url'\n});\n","_context.invoke('Nittro.Page', function () {\n\n    var CspAgent = _context.extend(function(page, nonce) {\n        this._ = {\n            page: page,\n            nonce: nonce\n        };\n\n        this._.page.on('transaction-created', this._initTransaction.bind(this));\n    }, {\n        _initTransaction: function (evt) {\n            var data = {\n                nonce: null,\n                pending: null\n            };\n\n            evt.data.transaction.on('ajax-response', this._handleResponse.bind(this, data));\n            evt.data.transaction.on('snippets-apply', this._handleSnippets.bind(this, data));\n        },\n\n        _handleResponse: function (data, evt) {\n            if ('redirect' in evt.data.response.getPayload()) {\n                return;\n            }\n\n            var h = evt.data.response.getHeader('Content-Security-Policy') || evt.data.response.getHeader('Content-Security-Policy-Report-Only') || '',\n                m = /(?:^|;\\s*)script-src\\s[^;]*'nonce-([^']+)'/.exec(h);\n\n            if (m) {\n                data.nonce = m[1];\n            } else {\n                data.nonce = false;\n            }\n        },\n\n        _handleSnippets: function (data, evt) {\n            this._handleChangeset(evt.data.changeset, data.nonce);\n        },\n\n        _handleChangeset: function (changeset, nonce) {\n            if (!nonce) {\n                return;\n            }\n\n            var id;\n\n            for (id in changeset.add) {\n                if (changeset.add.hasOwnProperty(id)) {\n                    this._fixNonce(changeset.add[id].content, nonce);\n                }\n            }\n\n            for (id in changeset.update) {\n                if (changeset.update.hasOwnProperty(id)) {\n                    this._fixNonce(changeset.update[id].content, nonce);\n                }\n            }\n        },\n\n        _fixNonce: function (elem, nonce) {\n            var scripts = elem.getElementsByTagName('script'),\n                i;\n\n            for (i = 0; i < scripts.length; i++) {\n                if (scripts.item(i).nonce === nonce) {\n                    scripts.item(i).setAttribute('nonce', this._.nonce || '');\n                }\n            }\n        }\n    });\n\n    _context.register(CspAgent, 'CspAgent');\n\n});\n","_context.invoke('Nittro.Page', function (Url) {\n\n    var GoogleAnalyticsHelper = _context.extend(function (history) {\n        this._ = {\n            history: history\n        };\n\n        this._.history.on('savestate popstate', this._handleState.bind(this));\n    }, {\n        _handleState: function (evt) {\n            if (typeof window.ga === 'function' && !evt.data.replace) {\n                window.ga('set', {\n                    page: Url.from(evt.data.url).setHash(null).toLocal(),\n                    title: evt.data.title\n                });\n\n                window.ga('send', 'pageview');\n            }\n        }\n    });\n\n    _context.register(GoogleAnalyticsHelper, 'GoogleAnalyticsHelper');\n\n}, {\n    Url: 'Utils.Url'\n});\n","_context.invoke('Nittro.Page', function (Transaction, DOM, Arrays, Url) {\n\n    var Service = _context.extend('Nittro.Object', function (snippetManager, history, options) {\n        Service.Super.call(this);\n\n        this._.snippetManager = snippetManager;\n        this._.history = history;\n        this._.options = Arrays.mergeTree({}, Service.defaults, options);\n        this._.setup = false;\n        this._.currentTransaction = null;\n        this._.currentUrl = Url.fromCurrent();\n\n        this._.history.on('popstate', this._handleState.bind(this));\n        DOM.addListener(document, 'click', this._handleLinkClick.bind(this));\n\n        this._checkReady();\n\n    }, {\n        STATIC: {\n            defaults: {\n                whitelistLinks: false,\n                backgroundErrors: false\n            }\n        },\n\n        open: function (url, method, data, context) {\n            try {\n                context || (context = {});\n                context.method = method;\n                context.data = data;\n\n                var evt = this.trigger('before-transaction', {\n                    url: url,\n                    context: context\n                });\n\n                if (evt.isDefaultPrevented()) {\n                    return this._createRejectedTransaction(url, {type: 'abort'});\n                }\n\n                context.event && context.event.preventDefault();\n\n                return evt.then(function () {\n                    if (evt.isDefaultPrevented()) {\n                        return this._createRejectedTransaction(url, {type: 'abort'});\n                    } else {\n                        return this._createTransaction(url, context);\n                    }\n                }.bind(this));\n            } catch (e) {\n                return this._createRejectedTransaction(url, e);\n            }\n        },\n\n        openLink: function (link, evt) {\n            return this.open(link.href, 'get', null, {\n                event: evt,\n                element: link\n            });\n        },\n\n        getSnippet: function (id) {\n            return this._.snippetManager.getSnippet(id);\n        },\n\n        isSnippet: function (elem) {\n            return this._.snippetManager.isSnippet(elem);\n        },\n\n        _handleState: function (evt) {\n            if (!this._checkUrl(null, this._.currentUrl)) {\n                return;\n            }\n\n            var url = Url.from(evt.data.url);\n            this._.currentUrl = url;\n\n            this.open(url, 'get', null, {fromHistory: true})\n                .then(null, function () {\n                    document.location.href = url.toAbsolute();\n                });\n        },\n\n        _checkReady: function () {\n            if (document.readyState === 'loading') {\n                DOM.addListener(document, 'readystatechange', this._checkReady.bind(this));\n                return;\n            }\n\n            if (!this._.setup) {\n                this._.setup = true;\n\n                Promise.resolve().then(function () {\n                    this._.history.init();\n                    this._.snippetManager.setup();\n                    this.trigger('ready');\n                }.bind(this));\n            }\n        },\n\n        _handleLinkClick: function(evt) {\n            if (evt.defaultPrevented || evt.ctrlKey || evt.shiftKey || evt.altKey || evt.metaKey || evt.button > 0) {\n                return;\n            }\n\n            var link = DOM.closest(evt.target, 'a');\n\n            if (!link || !this._checkLink(link) || !this._checkUrl(link.href)) {\n                return;\n            }\n\n            this.openLink(link, evt);\n        },\n\n        _createTransaction: function(url, context) {\n            var transaction = new Transaction(url);\n\n            this._initTransaction(transaction, context);\n\n            this.trigger('transaction-created', {\n                transaction: transaction,\n                context: context\n            });\n\n            return this._dispatchTransaction(transaction);\n        },\n\n        _createRejectedTransaction: function (url, reason) {\n            var transaction = Transaction.createRejected(url, reason);\n            return transaction.then(null, this._handleError.bind(this, transaction));\n        },\n\n        _initTransaction: function (transaction, context) {\n            if ('background' in context) {\n                transaction.setIsBackground(context.background);\n            } else if (context.element) {\n                transaction.setIsBackground(DOM.getData(context.element, 'background', false));\n            }\n        },\n\n        _dispatchTransaction: function(transaction) {\n            if (!transaction.isBackground()) {\n                if (this._.currentTransaction) {\n                    this._.currentTransaction.abort();\n                }\n\n                this._.currentTransaction = transaction;\n            }\n\n            return transaction.dispatch().then(\n                this._handleSuccess.bind(this, transaction),\n                this._handleError.bind(this, transaction)\n            );\n        },\n\n        _checkUrl: function(url, current) {\n            url = url ? Url.from(url) : Url.fromCurrent();\n            current = current ? Url.from(current) : Url.fromCurrent();\n            return url.compare(current) !== Url.PART.HASH;\n        },\n\n        _checkLink: function (link) {\n            return !link.hasAttribute('target') && link.hasAttribute('href') && DOM.getData(link, 'ajax', !this._.options.whitelistLinks);\n        },\n\n        _handleSuccess: function(transaction) {\n            if (!transaction.isBackground()) {\n                this._.currentTransaction = null;\n            }\n\n            if (transaction.isHistoryState()) {\n                this._.currentUrl = transaction.getUrl();\n            }\n        },\n\n        _handleError: function (transaction, err) {\n            if (transaction === this._.currentTransaction) {\n                this._.currentTransaction = null;\n            }\n\n            if (!transaction.isBackground() || this._.options.backgroundErrors) {\n                this.trigger('error', err);\n            }\n        }\n    });\n\n    _context.register(Service, 'Service');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays',\n    Url: 'Utils.Url'\n});\n","_context.invoke('Nittro.Flashes', function (DOM) {\n\n    var Helpers = {\n        hasFixedParent: function (elem) {\n            do {\n                if (DOM.getStyle(elem, 'position', false) === 'fixed') return true;\n                elem = elem.offsetParent;\n\n            } while (elem && elem !== document.documentElement && elem !== document.body);\n\n            return false;\n\n        },\n\n        getRect: function (elem) {\n            var rect = elem.getBoundingClientRect();\n\n            return {\n                left: rect.left,\n                top: rect.top,\n                right: rect.right,\n                bottom: rect.bottom,\n                width: 'width' in rect ? rect.width : (rect.right - rect.left),\n                height: 'height' in rect ? rect.height : (rect.bottom - rect.top)\n            };\n        },\n\n        tryFloatingPosition: function (elem, target, placement, positioner) {\n            DOM.addClass(elem, 'nittro-flash-floating');\n            DOM.setStyle(elem, {\n                position: 'absolute',\n                opacity: 0\n            });\n\n            var fixed = Helpers.hasFixedParent(target),\n                elemRect = Helpers.getRect(elem),\n                targetRect = Helpers.getRect(target),\n                style = {},\n                order = positioner.getDefaultOrder(),\n                force = false,\n                position;\n\n            if (fixed) {\n                style.position = 'fixed';\n\n            }\n\n            if (placement) {\n                var m = placement.match(/^(.+?)(!)?(!)?$/);\n\n                if (!positioner.supports(m[1])) {\n                    throw new Error(\"Placement '\" + m[1] + \"' isn't supported\");\n                }\n\n                force = !!m[3];\n                order = m[2] ? [m[1]] : [m[1]].concat(order);\n            }\n\n            for (var i = 0; i < order.length; i++) {\n                placement = order[i];\n\n                if (position = positioner[placement].call(positioner, targetRect, elemRect, force)) {\n                    break;\n                }\n            }\n\n            if (position) {\n                style.left = position.left;\n                style.top = position.top;\n\n                if (!fixed) {\n                    style.left += window.pageXOffset;\n                    style.top += window.pageYOffset;\n                }\n\n                style.left += 'px';\n                style.top += 'px';\n                style.opacity = '';\n\n                DOM.setStyle(elem, style);\n                return placement;\n\n            } else {\n                DOM.removeClass(elem, 'nittro-flash-floating');\n                DOM.setStyle(elem, {\n                    position: '',\n                    opacity: ''\n                });\n\n                return null;\n            }\n        }\n    };\n\n    _context.register(Helpers, 'Helpers');\n\n}, {\n    DOM: 'Utils.DOM'\n});\n","_context.invoke('Nittro.Flashes', function (DOM, Arrays, CSSTransitions, Helpers) {\n\n    var Message = _context.extend('Nittro.Object', function (service, content, options) {\n        Message.Super.call(this);\n\n        this._doDismiss = this._doDismiss.bind(this);\n\n        this._.service = service;\n        this._.options = Arrays.mergeTree({}, Message.defaults, options);\n        this._.visible = false;\n\n        if (this._.service === null) {\n            this._.elem = content;\n            this._.visible = true;\n            this._normalizeDismissTime();\n            this._scheduleDismiss();\n            return;\n        }\n\n        var target = this._getTarget(),\n            tag = 'div';\n\n        if (target) {\n            this._.options.classes === null && (this._.options.classes = DOM.getData(target, 'flash-classes'));\n            this._.options.inline === null && (this._.options.inline = DOM.getData(target, 'flash-inline'));\n            this._.options.rich === null && (this._.options.rich = DOM.getData(target, 'flash-rich'));\n\n            if (this._.options.inline) {\n                tag = target.tagName.match(/^(?:ul|ol)$/i) ? 'li' : 'p';\n            }\n        } else {\n            this._.options.inline = false;\n        }\n\n        this._.elem = DOM.create(tag, {\n            'class': 'nittro-flash nittro-flash-' + this._.options.type,\n            'data-flash-dynamic': 'true'\n        });\n\n        if (this._.options.classes) {\n            DOM.addClass(this._.elem, this._.options.classes.replace(/%type%/g, this._.options.type));\n        }\n\n        if (this._.options.rich) {\n            DOM.html(this._.elem, content);\n        } else {\n            DOM.addClass(this._.elem, 'nittro-flash-plain');\n            this._.elem.textContent = content;\n        }\n\n        this._normalizeDismissTime();\n    }, {\n        STATIC: {\n            wrap: function (elem) {\n                return new Message(null, elem);\n            },\n            defaults: {\n                type: 'info',\n                target: null,\n                classes: null,\n                inline: null,\n                placement: null,\n                rich: null,\n                dismiss: null\n            }\n        },\n\n        getElement: function () {\n            return this._.elem;\n        },\n\n        show: function () {\n            if (this._.visible !== false) {\n                return Promise.resolve(this);\n            }\n\n            this._.visible = null;\n\n            var target = this._getTarget();\n\n            if (target) {\n                if (this._.options.inline) {\n                    target.appendChild(this._.elem);\n                    return this._show('inline');\n                } else {\n                    this._.service.getLayer().appendChild(this._.elem);\n\n                    var placement = Helpers.tryFloatingPosition(this._.elem, target, this._.options.placement, this._.service.getPositioner());\n\n                    if (placement) {\n                        return this._show(placement);\n                    }\n                }\n            }\n\n            this._.service.getGlobalHolder().appendChild(this._.elem);\n            return this._show('global');\n        },\n\n        hide: function () {\n            if (this._.visible !== true) {\n                return Promise.resolve(this);\n            }\n\n            this._.visible = null;\n\n            DOM.addClass(this._.elem, 'nittro-flash-hide');\n            this.trigger('hide');\n\n            return CSSTransitions.run(this._.elem).then(function () {\n                this._.visible = false;\n                this._.elem.parentNode.removeChild(this._.elem);\n                DOM.removeClass(this._.elem, 'nittro-flash-hide');\n                this.trigger('hidden');\n                return this;\n            }.bind(this));\n        },\n\n        dismiss: function () {\n            return this.hide().then(function () {\n                this.off();\n                this._.elem = this._.options = this._.service = null;\n            }.bind(this));\n        },\n\n        _show: function (placement) {\n            DOM.toggleClass(this._.elem, 'nittro-flash-prepare nittro-flash-' + placement, true);\n            this.trigger('show');\n            this.one('hidden', function() { DOM.toggleClass(this._.elem, 'nittro-flash-' + placement, false); });\n\n            return CSSTransitions.run(this._.elem, {remove: 'nittro-flash-prepare'}, true).then(function () {\n                this._.visible = true;\n                this.trigger('shown');\n                this._scheduleDismiss();\n                return this;\n            }.bind(this));\n        },\n\n        _normalizeDismissTime: function () {\n            if (this._.options.dismiss !== false) {\n                if (typeof this._.options.dismiss !== 'number') {\n                    this._.options.dismiss = Math.max(5000, Math.round(this._.elem.textContent.split(/\\s+/).length / 0.003));\n                }\n            }\n        },\n\n        _scheduleDismiss: function () {\n            if (this._.options.dismiss === false) {\n                return;\n            }\n\n            DOM.addListener(document, 'mousemove', this._doDismiss);\n            DOM.addListener(document, 'mousedown', this._doDismiss);\n            DOM.addListener(document, 'keydown', this._doDismiss);\n            DOM.addListener(document, 'touchstart', this._doDismiss);\n        },\n\n        _doDismiss: function () {\n            DOM.removeListener(document, 'mousemove', this._doDismiss);\n            DOM.removeListener(document, 'mousedown', this._doDismiss);\n            DOM.removeListener(document, 'keydown', this._doDismiss);\n            DOM.removeListener(document, 'touchstart', this._doDismiss);\n\n            window.setTimeout(this.dismiss.bind(this), this._.options.dismiss);\n        },\n\n        _getTarget: function () {\n            return typeof this._.options.target === 'string' ? DOM.getById(this._.options.target) : this._.options.target;\n        }\n    });\n\n    _context.register(Message, 'Message');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays',\n    CSSTransitions: 'Utils.CSSTransitions'\n});\n","_context.invoke('Nittro.Flashes', function () {\n\n    var DefaultPositioner = _context.extend(function (margin, defaultOrder) {\n        this._ = {\n            margin: typeof margin === 'number' ? margin : 20,\n            defaultOrder: defaultOrder || 'above,rightOf,below,leftOf'\n        };\n\n        if (typeof this._.defaultOrder === 'string') {\n            this._.defaultOrder = this._.defaultOrder.split(/\\s*,\\s*/g);\n        }\n    }, {\n        supports: function (placement) {\n            return placement === 'above' || placement === 'below' || placement === 'leftOf' || placement === 'rightOf';\n        },\n\n        getDefaultOrder: function () {\n            return this._.defaultOrder;\n        },\n\n        above: function (target, elem, force) {\n            var res = {\n                left: target.left + (target.width - elem.width) / 2,\n                top: target.top - elem.height\n            };\n\n            if (force || res.left > this._.margin && res.left + elem.width < window.innerWidth - this._.margin && res.top > this._.margin && res.top + elem.height < window.innerHeight - this._.margin) {\n                return res;\n\n            }\n        },\n        below: function(target, elem, force) {\n            var res = {\n                left: target.left + (target.width - elem.width) / 2,\n                top: target.bottom\n            };\n\n            if (force || res.left > this._.margin && res.left + elem.width < window.innerWidth - this._.margin && res.top + elem.height < window.innerHeight - this._.margin && res.top > this._.margin) {\n                return res;\n\n            }\n        },\n        leftOf: function (target, elem, force) {\n            var res = {\n                left: target.left - elem.width,\n                top: target.top + (target.height - elem.height) / 2\n            };\n\n            if (force || res.top > this._.margin && res.top + elem.height < window.innerHeight - this._.margin && res.left > this._.margin && res.left + elem.width < window.innerWidth - this._.margin) {\n                return res;\n\n            }\n        },\n        rightOf: function (target, elem, force) {\n            var res = {\n                left: target.right,\n                top: target.top + (target.height - elem.height) / 2\n            };\n\n            if (force || res.top > this._.margin && res.top + elem.height < window.innerHeight - this._.margin && res.left + elem.width < window.innerWidth - this._.margin && res.left > this._.margin) {\n                return res;\n\n            }\n        }\n    });\n\n\n    _context.register(DefaultPositioner, 'DefaultPositioner');\n\n});\n","_context.invoke('Nittro.Flashes', function (Message, DOM, Arrays) {\n\n    var Service = _context.extend(function (positioner, options) {\n        this._ = {\n            positioner: positioner,\n            options: Arrays.mergeTree({}, Service.defaults, options),\n            globalHolder: DOM.create('div', {'class': 'nittro-flash-global-holder'})\n        };\n\n        if (typeof this._.options.layer === 'string') {\n            this._.options.layer = DOM.getById(this._.options.layer);\n        } else if (!this._.options.layer) {\n            this._.options.layer = document.body;\n        }\n\n        this._.options.layer.appendChild(this._.globalHolder);\n\n        if (!this._.options.classes) {\n            this._.options.classes = DOM.getData(this._.options.layer, 'flash-classes');\n        }\n\n        Message.defaults.classes = this._.options.classes;\n\n        this._removeStatic();\n    }, {\n        STATIC: {\n            defaults: {\n                layer: null,\n                classes: null\n            }\n        },\n\n        create: function (content, options) {\n            return new Message(this, content, options);\n        },\n\n        add: function (content, type, target, rich) {\n            var options;\n\n            if (type && typeof type === 'object') {\n                options = type;\n            } else {\n                options = {\n                    type: type || 'info',\n                    target: target,\n                    rich: rich\n                };\n            }\n\n            return this.create(content, options).show();\n        },\n\n        getGlobalHolder: function () {\n            return this._.globalHolder;\n        },\n\n        getLayer: function () {\n            return this._.options.layer;\n        },\n\n        getPositioner: function () {\n            return this._.positioner;\n        },\n\n        _removeStatic: function () {\n            DOM.getByClassName('nittro-flash')\n                .forEach(function (elem) {\n                    if (!DOM.getData(elem, 'flash-dynamic')) {\n                        Message.wrap(elem);\n                    }\n                }.bind(this));\n        }\n    });\n\n    _context.register(Service, 'Service');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays',\n    CSSTransitions: 'Utils.CSSTransitions'\n});\n","_context.invoke('Nittro.Extras.Dialogs', function(DOM, CSSTransitions, Arrays, ReflectionClass) {\n\n    var Dialog = _context.extend('Nittro.Object', function(name, options) {\n        Dialog.Super.call(this);\n\n        this._.name = name;\n        this._.options = Arrays.mergeTree({}, Dialog.getDefaults(this.constructor), options);\n\n        this._.state = {\n            visible: false,\n            destroying: false,\n            current: 'hidden',\n            scrollLock: false,\n            next: null,\n            promise: null,\n            cancel: null\n        };\n\n        this._.scrollPosition = null;\n        this._.keyMap = null;\n        this._.tabContext = null;\n        this._.origFocusTarget = null;\n        this._.ios = /ipod|ipad|iphone/i.test(navigator.userAgent);\n\n        this._.elms = {\n            holder : DOM.createFromHtml(this._.options.templates.holder),\n            wrapper : DOM.createFromHtml(this._.options.templates.wrapper),\n            content : null,\n            buttons : null\n        };\n\n        this._.elms.holder.appendChild(this._.elms.wrapper);\n\n        if (this._.ios) {\n            DOM.addClass(this._.elms.holder, 'nittro-dialog-ios');\n        }\n\n        if (this._.options.classes) {\n            DOM.addClass(this._.elms.holder, this._.options.classes);\n        }\n\n        if (this._.options.content) {\n            this._.elms.content = this._.options.content;\n            DOM.toggleClass(this._.elms.content, 'nittro-dialog-content', true);\n            this._.options.content = null;\n\n        } else if (this._.options.text) {\n            this._.elms.content = DOM.createFromHtml(this._.options.templates.content);\n\n            var content = DOM.create('p');\n            content.textContent = this._.options.text;\n            this._.elms.content.appendChild(content);\n\n        } else if (this._.options.html) {\n            this._.elms.content = DOM.createFromHtml(this._.options.templates.content);\n            DOM.html(this._.elms.content, this._.options.html);\n        }\n\n        if (this._.elms.content) {\n            this._.elms.wrapper.appendChild(this._.elms.content);\n        }\n\n        if (this._.options.buttons) {\n            if (this._.options.buttons instanceof HTMLElement) {\n                this._.elms.buttons = this._.options.buttons;\n                DOM.toggleClass(this._.elms.buttons, 'nittro-dialog-buttons', true);\n                this._.options.buttons = null;\n            } else {\n                this._.elms.buttons = DOM.createFromHtml(this._.options.templates.buttons);\n                this._createButtons();\n            }\n\n            this._.elms.wrapper.appendChild(this._.elms.buttons);\n        }\n\n        try {\n            var keymap = ReflectionClass.from('Nittro.Extras.Keymap.Keymap'),\n                tabContext = ReflectionClass.from('Nittro.Extras.Keymap.TabContext');\n\n            this._.keyMap = keymap.newInstance();\n            this._.tabContext = tabContext.newInstance();\n        } catch (e) {}\n\n\n        if (this._.keyMap && this._.options.keyMap) {\n            this._handleKey = this._handleKey.bind(this);\n\n            for (var key in this._.options.keyMap) {\n                if (this._.options.keyMap.hasOwnProperty(key)) {\n                    this._.keyMap.add(key, this._handleKey);\n                }\n            }\n        }\n\n        if (this._.tabContext && this._.elms.buttons) {\n            this._.tabContext.addFromContainer(this._.elms.buttons, true);\n        }\n\n        this.on('button:default', this.hide.bind(this));\n        this.on('show', this._saveFocusedElement.bind(this));\n        this.on('hide', this._restoreFocusedElement.bind(this));\n\n        DOM.addListener(this._.elms.wrapper, 'click', this._handleClick.bind(this));\n        this._handleScroll = this._handleScroll.bind(this);\n\n    }, {\n        STATIC: {\n            defaults: {\n                classes: null,\n                content: null,\n                html: null,\n                text: null,\n                buttons: null,\n                keyMap: {\n                    'Escape': 'close'\n                },\n                templates: {\n                    holder : '<div class=\"nittro-dialog-holder\"></div>',\n                    wrapper : '<div class=\"nittro-dialog-inner\"></div>',\n                    content : '<div class=\"nittro-dialog-content\"></div>',\n                    buttons : '<div class=\"nittro-dialog-buttons\"></div>',\n                    button : '<button></button>'\n                }\n            },\n            getDefaults: function (type) {\n                var defaults = {},\n                    k;\n\n                do {\n                    if (type.defaults) {\n                        for (k in type.defaults) {\n                            if (type.defaults.hasOwnProperty(k) && !defaults.hasOwnProperty(k)) {\n                                defaults[k] = type.defaults[k];\n                            }\n                        }\n                    }\n                } while ((type = type.Super) && type !== Dialog.Super);\n\n                return defaults;\n            },\n            setDefaults: function(options) {\n                Arrays.mergeTree(Dialog.defaults, options);\n            }\n        },\n\n        getName: function () {\n            return this._.name;\n        },\n\n        isVisible: function(next) {\n            return this._.state.current === 'visible' && !this._.state.next\n                || next && this._.state.next === 'visible';\n        },\n\n        show: function() {\n            return this._setState('visible', function (done) {\n                this._lockScrolling();\n                this._setVisible(true);\n\n                DOM.toggleClass(this._.elms.holder, 'visible', true);\n                DOM.toggleClass(this._.elms.holder, 'busy', false);\n\n                CSSTransitions.run(this._.elms.wrapper)\n                    .then(done.bind(this, 'shown'));\n            });\n        },\n\n        hide: function() {\n            return this._setState('hidden', function (done) {\n                this._unlockScrolling();\n                this._setVisible(false);\n\n                DOM.toggleClass(this._.elms.holder, 'visible', false);\n                DOM.toggleClass(this._.elms.holder, 'busy', false);\n\n                CSSTransitions.run(this._.elms.wrapper)\n                    .then(done.bind(this, 'hidden'));\n            });\n        },\n\n        isBusy: function (next) {\n            return this._.state.current === 'busy' && !this._.state.next\n                || next && this._.state.next === 'busy';\n        },\n\n        setBusy: function () {\n            return this._setState('busy', function (done) {\n                this._lockScrolling();\n                this._setVisible(true);\n\n                DOM.toggleClass(this._.elms.holder, 'visible', true);\n                DOM.toggleClass(this._.elms.holder, 'busy', true);\n\n                CSSTransitions.run(this._.elms.wrapper)\n                    .then(done.bind(this, 'busy'));\n            });\n        },\n\n        getElement: function () {\n            return this._.elms.holder;\n        },\n\n        getContent: function() {\n            return this._.elms.content;\n        },\n\n        getButtons: function() {\n            return this._.elms.buttons;\n        },\n\n        getKeyMap: function () {\n            return this._.keyMap;\n        },\n\n        getTabContext: function () {\n            return this._.tabContext;\n        },\n\n        destroy: function () {\n            if (this._.state.destroying) {\n                return this._.state.promise || Promise.resolve(null);\n            }\n\n            this._.state.destroying = true;\n            this.trigger('destroy');\n\n            if (this._.state.current !== 'hidden') {\n                return this.hide().then(this._doDestroy.bind(this));\n            } else {\n                return this._doDestroy();\n            }\n        },\n\n        _doDestroy: function () {\n            if (this._.state.cancel) {\n                this._.state.cancel();\n            }\n\n            this.trigger('destroyed');\n\n            if (this._.elms.holder.parentNode) {\n                this._.elms.holder.parentNode.removeChild(this._.elms.holder);\n            }\n\n            this.off();\n\n            this._.state = null;\n\n            for (var k in this._.elms) if (this._.elms.hasOwnProperty(k)) {\n                this._.elms[k] = null;\n            }\n\n            return Promise.resolve(null);\n        },\n\n        _setState: function (state, init, cancel) {\n            if (!this._.state || this._.state.current === state) {\n                return Promise.resolve();\n            } else if (this._.state.next === state) {\n                return this._.state.promise;\n            } else if (this._.state.cancel) {\n                this._.state.cancel();\n            }\n\n            this._.state.next = state;\n\n            return this._.state.promise = new Promise(function (fulfill) {\n                var resolved = null;\n\n                this._.state.cancel = function () {\n                    if (resolved === null) {\n                        resolved = false;\n                        this._.state.next = null;\n                        this._.state.promise = null;\n                        this._.state.cancel = null;\n                        cancel && cancel.call(this);\n                        fulfill();\n                    }\n                }.bind(this);\n\n                init.call(this, function(evt) {\n                    if (resolved === null) {\n                        resolved = true;\n                        this._.state.current = state;\n                        this._.state.next = null;\n                        this._.state.promise = null;\n                        this._.state.cancel = null;\n                        evt && this.trigger(evt);\n                        fulfill();\n                    }\n                }.bind(this));\n            }.bind(this));\n        },\n\n        _setVisible: function (state) {\n            if (this._.state.visible !== state) {\n                this._.state.visible = state;\n                this.trigger(state ? 'show' : 'hide');\n            }\n        },\n\n        _saveFocusedElement: function () {\n            this._.origFocusTarget = document.activeElement;\n            this._.origFocusTarget && this._.origFocusTarget.blur && this._.origFocusTarget.blur();\n        },\n\n        _restoreFocusedElement: function () {\n            this._.origFocusTarget && DOM.contains(document, this._.origFocusTarget) && this._.origFocusTarget.focus();\n            this._.origFocusTarget = null;\n        },\n\n        _lockScrolling: function () {\n            if (this._.state.scrollLock) {\n                return;\n            }\n\n            this._.state.scrollLock = true;\n\n            if (this._.ios) {\n                this._.scrollPosition = window.pageYOffset;\n                window.scrollTo(0, 0);\n            } else {\n                this._.scrollLock = {\n                    left: window.pageXOffset,\n                    top: window.pageYOffset\n                };\n\n                DOM.addListener(window, 'scroll', this._handleScroll);\n            }\n        },\n\n        _unlockScrolling: function () {\n            if (!this._.state.scrollLock) {\n                return;\n            }\n\n            this._.state.scrollLock = false;\n\n            if (this._.ios) {\n                window.scrollTo(0, this._.scrollPosition);\n                this._.scrollPosition = null;\n            } else {\n                DOM.removeListener(window, 'scroll', this._handleScroll);\n                this._.scrollLock = null;\n            }\n        },\n\n        _createButtons: function () {\n            var action, btn, def;\n\n            for (action in this._.options.buttons) {\n                if (this._.options.buttons.hasOwnProperty(action)) {\n                    btn = DOM.createFromHtml(this._.options.templates.button);\n\n                    def = this._.options.buttons[action];\n\n                    if (typeof def === 'string') {\n                        def = {label: def, type: 'button'};\n                    }\n\n                    DOM.setData(btn, 'action', action);\n                    DOM.addClass(btn, 'nittro-dialog-button', def.type && def.type !== 'button' ? 'nittro-dialog-button-' + def.type : '');\n                    btn.textContent = def.label;\n\n                    this._.elms.buttons.appendChild(btn);\n                }\n            }\n        },\n\n        _handleClick: function (evt) {\n            var action = DOM.getData(evt.target, 'action');\n\n            if (action) {\n                evt.preventDefault();\n\n                this.trigger('button', {\n                    action: action\n                });\n            }\n        },\n\n        _handleKey: function (key, evt) {\n            if (evt.target && evt.target.tagName && evt.target.tagName.match(/^(input|button|textarea|select)$/i) && DOM.contains(this._.elms.wrapper, evt.target)) {\n                return false;\n            } else {\n                this.trigger('button', {\n                    action: this._.options.keyMap[key]\n                });\n            }\n        },\n\n        _handleScroll: function (evt) {\n            if (evt.target === window || evt.target === document) {\n                window.scrollTo(this._.scrollLock.left, this._.scrollLock.top);\n            }\n        }\n    });\n\n    _context.register(Dialog, 'Dialog');\n\n}, {\n    DOM: 'Utils.DOM',\n    CSSTransitions: 'Utils.CSSTransitions',\n    Arrays: 'Utils.Arrays',\n    ReflectionClass: 'Utils.ReflectionClass'\n});\n","_context.invoke('Nittro.Extras.Dialogs', function (Dialog, DOM, Arrays, Url) {\n\n    var IFrameDialog = _context.extend(Dialog, function (name, url, options) {\n        IFrameDialog.Super.call(this, name, options);\n\n        this._.current = null;\n\n        DOM.addClass(this._.elms.holder, 'nittro-dialog-iframe');\n        this._.elms.content = document.createElement('iframe');\n        this._.elms.content.name = name;\n        DOM.addClass(this._.elms.content, 'nittro-dialog-content');\n        DOM.addListener(this._.elms.content, 'load', this._handleLoad.bind(this));\n        this._.elms.wrapper.insertBefore(this._.elms.content, this._.elms.wrapper.firstChild);\n\n        if (url) {\n            this.setUrl(url);\n        }\n    }, {\n        STATIC: {\n            defaults: {\n                allowFullscreen: null,\n                allowPaymentRequest: null,\n                autoHeight: null,\n                lazy: true,\n                buttons: {\n                    'close': 'Close'\n                }\n            },\n            setDefaults: function(defaults) {\n                Arrays.mergeTree(IFrameDialog.defaults, defaults);\n            }\n        },\n\n        getContentDocument: function () {\n            return this._.elms.content.contentDocument;\n        },\n\n        setUrl: function (url, external) {\n            var o = this._.options;\n            url = Url.from(url);\n\n            this._.current = {\n                url: url,\n                allowFullscreen: o.allowFullscreen === null ? url.isLocal() : o.allowFullscreen,\n                allowPaymentRequest: o.allowPaymentRequest === null ? url.isLocal() : o.allowPaymentRequest,\n                autoHeight: o.autoHeight !== false && url.isLocal(),\n                ready: false,\n                external: external,\n                onload: null\n            };\n\n            var promise, busy;\n\n            if ((busy = this.isBusy(true)) || this.isVisible(true)) {\n                promise = this.setBusy()\n                    .then(this._load.bind(this));\n\n                return busy ? promise : promise.then(this.show.bind(this));\n            } else if (!this._.options.lazy) {\n                return this._load();\n            } else {\n                return Promise.resolve();\n            }\n        },\n\n        getUrl: function () {\n            return this._.current ? Url.from(this._.current.url) : null;\n        },\n\n        isCurrent: function (url, ignoreHash) {\n            return this._.current !== null && this._.current.url.compare(url) < (ignoreHash === false ? Url.PART.HASH : Url.PART.QUERY);\n        },\n\n        show: function () {\n            if (!this._.current || this._.current.ready) {\n                return IFrameDialog.Super.prototype.show.call(this);\n            }\n\n            if (!this.isBusy()) {\n                return this.setBusy()\n                    .then(this._load.bind(this))\n                    .then(this.show.bind(this));\n            } else {\n                return this._load()\n                    .then(this.show.bind(this));\n            }\n        },\n\n        _load: function () {\n            return this._setState('loaded', function (done) {\n                this._.current.onload = function () {\n                    this._.current.onload = null;\n                    done('loaded');\n                }.bind(this);\n\n                if (!this._.current.external) {\n                    this._.elms.content.src = this._.current.url.toAbsolute();\n                }\n\n                this._.elms.content.allowFullscreen = this._.current.allowFullscreen;\n                this._.elms.content.allowPaymentRequest = this._.current.allowPaymentRequest;\n            }, function () {\n                this._.current.onload = null;\n            }).then(this._applyAutoHeight.bind(this));\n        },\n\n        _applyAutoHeight: function () {\n            var height = null;\n\n            try {\n                height = this.getContentDocument().documentElement.offsetHeight;\n            } catch (e) {\n                height = null;\n            } finally {\n                if (!height) {\n                    this._.current.autoHeight = false;\n                }\n\n                DOM.toggleClass(this._.elms.holder, 'nittro-dialog-iframe-auto', this._.current.autoHeight);\n                this._.elms.content.style.height = this._.current.autoHeight\n                    ? height + 'px'\n                    : '';\n            }\n        },\n\n        _handleLoad: function () {\n            if (this._.current && !this._.current.ready && this.isCurrent(this._.elms.content.src)) {\n                this._.current.ready = true;\n                this._.current.onload && this._.current.onload();\n            }\n        }\n    });\n\n    _context.register(IFrameDialog, 'IFrameDialog');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays',\n    Url: 'Utils.Url'\n});\n","_context.invoke('Nittro.Extras.Dialogs', function (Dialog, IFrameDialog, DOM) {\n\n    var Manager = _context.extend('Nittro.Object', function(baseZ) {\n        Manager.Super.call(this);\n\n        this._.registry = {};\n        this._.stack = [];\n        this._.zIndex = baseZ || 1000;\n\n        this._handleShow = this._handleShow.bind(this);\n        this._handleHide = this._handleHide.bind(this);\n        this._handleDestroy = this._handleDestroy.bind(this);\n\n    }, {\n        createDialog: function (name, options) {\n            var dlg = new Dialog(name, options);\n            this._setup(dlg);\n            return dlg;\n        },\n\n        createIFrameDialog: function (name, url, options) {\n            var dlg = new IFrameDialog(name, url, options);\n            this._setup(dlg);\n            return dlg;\n        },\n\n        hasOpenDialog: function () {\n            return this._.stack.length > 0;\n        },\n\n        getTopmostOpenDialog: function () {\n            return this._.stack.length ? this._.stack[0] : null;\n        },\n\n        getOpenDialogs: function () {\n            return this._.stack.slice();\n        },\n\n        getDialog: function (name) {\n            return this._.registry[name] || null;\n        },\n\n        registerDialog: function (dialog) {\n            if (dialog.getName() in this._.registry) {\n                throw new Error('A dialog named \"' + dialog.getName() + '\" already exists');\n            }\n\n            this._.registry[dialog.getName()] = dialog;\n            return this;\n        },\n\n        unregisterDialog: function (name) {\n            if (name in this._.registry) {\n                delete this._.registry[name];\n            }\n\n            return this;\n        },\n\n        _setup: function (dialog) {\n            this.registerDialog(dialog);\n            dialog.on('show', this._handleShow);\n            dialog.on('hide', this._handleHide);\n            dialog.on('destroy', this._handleDestroy);\n            this.trigger('setup', {dialog: dialog});\n            document.body.appendChild(dialog.getElement());\n        },\n\n        _handleShow: function (evt) {\n            if (this._.stack.length) {\n                DOM.toggleClass(this._.stack[0].getElement(), 'topmost', false);\n            }\n\n            DOM.toggleClass(evt.target.getElement(), 'topmost', true);\n            evt.target.getElement().style.zIndex = this._.zIndex + this._.stack.length;\n            this._.stack.unshift(evt.target);\n        },\n\n        _handleHide: function (evt) {\n            DOM.toggleClass(evt.target.getElement(), 'topmost', false);\n\n            var index = this._.stack.indexOf(evt.target);\n\n            if (index > -1) {\n                this._.stack.splice(index, 1);\n            }\n\n            if (this._.stack.length) {\n                DOM.toggleClass(this._.stack[0].getElement(), 'topmost', true);\n            }\n        },\n\n        _handleDestroy: function (evt) {\n            this.unregisterDialog(evt.target.getName());\n        }\n    });\n\n    _context.register(Manager, 'Manager');\n\n}, {\n    DOM: 'Utils.DOM'\n});\n","_context.invoke('Nittro.Extras.Confirm', function (Dialog, Arrays, ReflectionClass) {\n\n    var id = 0;\n\n\tvar Confirm = _context.extend(Dialog, function (options) {\n\t\tif (!(this instanceof Confirm)) {\n\t\t\tvar dlg = ReflectionClass.from(Confirm).newInstanceArgs(arguments);\n\t\t\twindow.setTimeout(function() { dlg.show(); }, 1);\n\t\t\treturn dlg;\n\t\t}\n\n\t\tConfirm.Super.call(this, 'nittro-confirm-' + (++id), this._prepareOptions(arguments));\n\n\t\tthis._.promise = new Promise(function (fulfill) {\n            this.on('button', function(evt) {\n                this.destroy();\n                fulfill(evt.data.action === 'confirm');\n            });\n        }.bind(this));\n\n\t}, {\n        STATIC: {\n            defaults: {\n                classes: 'nittro-dialog-confirm',\n                buttons: {\n                    confirm: 'OK',\n                    cancel: {label: 'Cancel', type: 'text'}\n                },\n                keyMap: {\n                    'Enter': 'confirm',\n                    'Escape': 'cancel'\n                }\n            },\n            setDefaults: function(defaults) {\n                Arrays.mergeTree(Confirm.defaults, defaults);\n            }\n        },\n\n\t\t_prepareOptions: function (args) {\n\t\t\tvar options = args[0];\n\n\t\t\tif (typeof options === 'string') {\n\t\t\t\toptions = {\n\t\t\t\t\ttext: options\n\t\t\t\t};\n\n\t\t\t\tif (args.length > 1) {\n\t\t\t\t\toptions.buttons = {\n\t\t\t\t\t\tconfirm: args[1]\n\t\t\t\t\t};\n\n\t\t\t\t\tif (args.length > 2) {\n\t\t\t\t\t\tif (typeof args[2] === 'string') {\n\t\t\t\t\t\t\toptions.buttons.cancel = {label: args[2], type: 'text'};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toptions.buttons.cancel = args[2];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\toptions.buttons.cancel = {label: 'Cancel', type: 'text'};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn options;\n\t\t},\n\n\t\tthen: function (onfulfill, onreject) {\n            return this._.promise.then(onfulfill, onreject);\n        }\n\t});\n\n    _context.register(Confirm, 'Confirm');\n\n}, {\n    Dialog: 'Nittro.Extras.Dialogs.Dialog',\n\tReflectionClass: 'Utils.ReflectionClass',\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.Extras.Confirm', function (Manager, Confirm) {\n\n    var ConfirmMixin = {\n        createConfirm: function (options) {\n            var dlg = Confirm.apply(null, arguments);\n            this._setup(dlg);\n            return dlg;\n        }\n    };\n\n    _context.mixin(Manager, ConfirmMixin);\n\n}, {\n    Manager: 'Nittro.Extras.Dialogs.Manager'\n});\n","_context.invoke('Nittro.Ajax.Bridges.AjaxDI', function(Nittro) {\n\n    var AjaxExtension = _context.extend('Nittro.DI.BuilderExtension', function(containerBuilder, config) {\n        AjaxExtension.Super.call(this, containerBuilder, config);\n    }, {\n        STATIC: {\n            defaults: {\n                allowOrigins: null\n            }\n        },\n        load: function() {\n            var builder = this._getContainerBuilder(),\n                config = this._getConfig(AjaxExtension.defaults);\n\n            builder.addServiceDefinition('ajax', {\n                factory: 'Nittro.Ajax.Service()',\n                args: {\n                    options: config\n                },\n                run: true,\n                setup: [\n                    '::setTransport(Nittro.Ajax.Transport.Native())'\n                ]\n            });\n        }\n    });\n\n    _context.register(AjaxExtension, 'AjaxExtension')\n\n});\n","_context.invoke('Nittro.Forms.Bridges.FormsDI', function(Nittro) {\n\n    var FormsExtension = _context.extend('Nittro.DI.BuilderExtension', function(containerBuilder, config) {\n        FormsExtension.Super.call(this, containerBuilder, config);\n    }, {\n        STATIC: {\n            defaults: {\n                whitelistForms: false,\n                autoResetForms: true\n            }\n        },\n\n        load: function() {\n            var builder = this._getContainerBuilder();\n            builder.addServiceDefinition('formLocator', 'Nittro.Forms.Locator()');\n\n        },\n\n        setup: function () {\n            var builder = this._getContainerBuilder(),\n                config = this._getConfig(FormsExtension.defaults);\n\n            if (builder.hasServiceDefinition('page')) {\n                builder.getServiceDefinition('page')\n                    .addSetup(function (formLocator) {\n                        this.initForms(formLocator, config);\n                    });\n            }\n\n            if (!builder.hasServiceDefinition('formErrorRenderer')) {\n                builder.addServiceDefinition('formErrorRenderer', 'Nittro.Forms.DefaultErrorRenderer()');\n            }\n        }\n    });\n\n    _context.register(FormsExtension, 'FormsExtension')\n\n});\n","_context.invoke('Nittro.Forms.Bridges.FormsPage', function(Service, DOM) {\n\n    var FormsMixin = {\n        initForms: function (formLocator, options) {\n            this._.formLocator = formLocator;\n            this._.options.whitelistForms = options.whitelistForms;\n            this._.options.autoResetForms = options.autoResetForms;\n\n            DOM.addListener(document, 'submit', this._handleSubmit.bind(this));\n            DOM.addListener(document, 'click', this._handleButtonClick.bind(this));\n            this._.snippetManager.on('after-update', this._refreshForms.bind(this));\n            this.on('transaction-created', this._initFormTransaction.bind(this));\n        },\n\n        sendForm: function (form, evt) {\n            var frm = this._.formLocator.getForm(form);\n\n            return this.open(form.action, form.method, frm.serialize(), {\n                    event: evt,\n                    element: form\n                })\n                .then(this._handleFormSuccess.bind(this, frm));\n        },\n\n        _initFormTransaction: function (evt) {\n            if (evt.data.context.element && evt.data.context.element instanceof HTMLFormElement) {\n                var data = {\n                    form: this._.formLocator.getForm(evt.data.context.element),\n                    allowReset: true\n                };\n\n                evt.data.transaction.on('ajax-response', this._handleFormResponse.bind(this, data));\n                evt.data.transaction.then(this._handleFormSuccess.bind(this, data), function() { /* noop on transaction error */ });\n            }\n        },\n\n        _handleFormResponse: function (data, evt) {\n            var payload = evt.data.response.getPayload();\n\n            if ('allowReset' in payload) {\n                data.allowReset = payload.allowReset;\n            }\n        },\n\n        _handleFormSuccess: function (data) {\n            if (data.allowReset && data.form.getElement() && DOM.getData(data.form.getElement(), 'reset', this._.options.autoResetForms)) {\n                data.form.reset();\n            }\n        },\n\n        _handleSubmit: function (evt) {\n            if (evt.defaultPrevented || !(evt.target instanceof HTMLFormElement) || !this._checkForm(evt.target)) {\n                return;\n            }\n\n            this.sendForm(evt.target, evt);\n\n        },\n\n        _handleButtonClick: function (evt) {\n            if (evt.defaultPrevented || evt.ctrlKey || evt.shiftKey || evt.altKey || evt.metaKey || evt.button > 0) {\n                return;\n\n            }\n\n            var btn = DOM.closest(evt.target, 'button') || DOM.closest(evt.target, 'input'),\n                frm;\n\n            if (!btn || btn.type !== 'submit' || !btn.form || !this._checkForm(btn.form)) {\n                return;\n\n            }\n\n            frm = this._.formLocator.getForm(btn.form);\n            frm.setSubmittedBy(btn.name || null);\n\n        },\n\n        _checkForm: function (form) {\n            if (form.getAttribute('target')) {\n                return false;\n            }\n\n            return DOM.getData(form, 'ajax', !this._.options.whitelistForms);\n\n        },\n\n        _refreshForms: function() {\n            this._.formLocator.refreshForms();\n        }\n    };\n\n    _context.register(FormsMixin, 'FormsMixin');\n    _context.mixin(Service, FormsMixin);\n\n    Service.defaults.whitelistForms = false;\n    Service.defaults.autoResetForms = true;\n\n}, {\n    Service: 'Nittro.Page.Service',\n    DOM: 'Utils.DOM'\n});\n","_context.invoke('Nittro.Page.Bridges.PageDI', function (Nittro) {\n\n    var PageExtension = _context.extend('Nittro.DI.BuilderExtension', function (containerBuilder, config) {\n        PageExtension.Super.call(this, containerBuilder, config);\n    }, {\n        STATIC: {\n            defaults: {\n                whitelistHistory: false,\n                whitelistLinks: false,\n                whitelistRedirects: false,\n                backgroundErrors: false,\n                csp: null,\n                transitions: {\n                    defaultSelector: '.nittro-transition-auto'\n                },\n                i18n: {\n                    connectionError: 'There was an error connecting to the server. Please check your internet connection and try again.',\n                    unknownError: 'There was an error processing your request. Please try again later.'\n                },\n                scroll: {\n                    target: null,\n                    margin: 30,\n                    scrollDown: false,\n                    duration: 500\n                }\n            }\n        },\n        load: function () {\n            var builder = this._getContainerBuilder(),\n                config = this._getConfig(PageExtension.defaults);\n\n            builder.addServiceDefinition('page', {\n                factory: 'Nittro.Page.Service()',\n                args: {\n                    options: {\n                        whitelistLinks: config.whitelistLinks,\n                        backgroundErrors: config.backgroundErrors\n                    }\n                },\n                run: true\n            });\n\n            builder.addServiceDefinition('ajaxAgent', {\n                factory: 'Nittro.Page.AjaxAgent()',\n                args: {\n                    options: {\n                        whitelistRedirects: config.whitelistRedirects\n                    }\n                },\n                run: true\n            });\n\n            builder.addServiceDefinition('historyAgent', {\n                factory: 'Nittro.Page.HistoryAgent()',\n                args: {\n                    options: {\n                        whitelistHistory: config.whitelistHistory\n                    }\n                },\n                run: true\n            });\n\n            builder.addServiceDefinition('scrollAgent', {\n                factory: 'Nittro.Page.ScrollAgent()',\n                args: {\n                    options: config.scroll\n                },\n                run: true\n            });\n\n            builder.addServiceDefinition('snippetAgent', 'Nittro.Page.SnippetAgent()!');\n            builder.addServiceDefinition('snippetManager', 'Nittro.Page.SnippetManager()');\n            builder.addServiceDefinition('history', 'Nittro.Page.History()');\n\n            if (typeof window.ga === 'function') {\n                builder.addServiceDefinition('googleAnalyticsHelper', 'Nittro.Page.GoogleAnalyticsHelper()!');\n            }\n\n            if (config.transitions) {\n                builder.addServiceDefinition('transitionAgent', {\n                    factory: 'Nittro.Page.TransitionAgent()',\n                    args: {\n                        options: {\n                            defaultSelector: config.transitions.defaultSelector\n                        }\n                    },\n                    run: true\n                });\n            }\n\n            if (config.csp !== false) {\n                var scripts = document.getElementsByTagName('script'),\n                    i, n, nonce = null;\n\n                for (i = 0, n = scripts.length; i < n; i++) {\n                    if (/^((text|application)\\/javascript)?$/i.test(scripts.item(i).type) && scripts.item(i).nonce) {\n                        nonce = scripts.item(i).nonce;\n                        break;\n                    }\n                }\n\n                if (config.csp || nonce) {\n                    builder.addServiceDefinition('cspAgent', {\n                        factory: 'Nittro.Page.CspAgent()',\n                        args: {\n                            nonce: nonce\n                        },\n                        run: true\n                    });\n                }\n            }\n        },\n\n        setup: function() {\n            var builder = this._getContainerBuilder(),\n                config = this._getConfig();\n\n            if (builder.hasServiceDefinition('flashes')) {\n                builder.addServiceDefinition('flashAgent', 'Nittro.Page.Bridges.PageFlashes.FlashAgent()!');\n\n                builder.getServiceDefinition('page')\n                    .addSetup(function(flashes) {\n                        this.on('error:default', function (evt) {\n                            if (evt.data.type === 'connection') {\n                                flashes.add(config.i18n.connectionError, 'error');\n\n                            } else if (evt.data.type !== 'abort') {\n                                flashes.add(config.i18n.unknownError, 'error');\n\n                            }\n                        });\n                    });\n            }\n        }\n    });\n\n    _context.register(PageExtension, 'PageExtension');\n\n});\n","_context.invoke('Nittro.Page.Bridges.PageFlashes', function () {\n\n    var FlashAgent = _context.extend(function(page, flashes) {\n        this._ = {\n            page: page,\n            flashes: flashes\n        };\n\n        this._handleResponse = this._handleResponse.bind(this);\n        this._.page.on('transaction-created', this._initTransaction.bind(this));\n    }, {\n        _initTransaction: function (evt) {\n            evt.data.transaction.on('ajax-response', this._handleResponse);\n        },\n\n        _handleResponse: function (evt) {\n            var payload = evt.data.response.getPayload();\n\n            if (!payload.redirect && payload.flashes) {\n                this._showFlashes(payload.flashes);\n            }\n        },\n\n        _showFlashes: function (flashes) {\n            var id, i;\n\n            for (id in flashes) {\n                if (flashes.hasOwnProperty(id) && flashes[id]) {\n                    for (i = 0; i < flashes[id].length; i++) {\n                        this._.flashes.add(flashes[id][i].message, flashes[id][i].type, id + 'es');\n\n                    }\n                }\n            }\n        }\n    });\n\n    _context.register(FlashAgent, 'FlashAgent');\n\n});\n","_context.invoke('Nittro.Flashes.Bridges.FlashesDI', function(Neon, NeonEntity, HashMap) {\n\n    var FlashesExtension = _context.extend('Nittro.DI.BuilderExtension', function(containerBuilder, config) {\n        FlashesExtension.Super.call(this, containerBuilder, config);\n\n    }, {\n        STATIC: {\n            defaults: {\n                layer: null,\n                classes: null,\n                positioner: {\n                    defaultOrder: null,\n                    margin: null\n                }\n            }\n        },\n        load: function() {\n            var builder = this._getContainerBuilder(),\n                config = this._getConfig(FlashesExtension.defaults);\n\n            var positioner;\n\n            if (typeof config.positioner === 'string') {\n                positioner = config.positioner.match(/^@[^(]+$/) ? config.positioner : Neon.decode('[' + config.positioner + ']').shift();\n            } else {\n                positioner = new NeonEntity('Nittro.Flashes.DefaultPositioner', HashMap.from(config.positioner));\n            }\n\n            builder.addServiceDefinition('flashes', {\n                factory: 'Nittro.Flashes.Service()',\n                args: {\n                    positioner: positioner,\n                    options: {\n                        layer: config.layer,\n                        classes: config.classes\n                    }\n                },\n                run: true\n            });\n        }\n    });\n\n    _context.register(FlashesExtension, 'FlashesExtension');\n\n}, {\n    Neon: 'Nittro.Neon.Neon',\n    NeonEntity: 'Nittro.Neon.NeonEntity',\n    HashMap: 'Utils.HashMap'\n});\n","_context.invoke('Nittro.Extras.Dialogs.Bridges.DialogsPage', function (DOM, Url, Arrays, undefined) {\n\n    var anonId = 0;\n\n    var DialogAgent = _context.extend('Nittro.Object', function (page, dialogManager, snippetManager, options) {\n        DialogAgent.Super.call(this);\n        this._.page = page;\n        this._.dialogManager = dialogManager;\n        this._.snippetManager = snippetManager;\n        this._.formLocator = null;\n        this._.options = Arrays.mergeTree({}, DialogAgent.defaults, options);\n\n        this._.page.on('before-transaction', this._setupTransactionContext.bind(this));\n        this._.page.on('transaction-created', this._initTransaction.bind(this));\n    }, {\n        STATIC: {\n            defaults: {\n                whitelistHistory: true,\n                disableDefaultTransitions: true,\n                disableDefaultScroll: true\n            }\n        },\n\n        setFormLocator: function (formLocator) {\n            this._.formLocator = formLocator;\n            return this;\n        },\n\n        _setupTransactionContext: function (evt) {\n            if (evt.isDefaultPrevented()) {\n                return;\n            }\n\n            var ctx = evt.data.context,\n                def = ctx.element ? DOM.getData(ctx.element, 'dialog', null) : null,\n                current = this._.dialogManager.getTopmostOpenDialog(),\n                dialogs = {},\n                active, iframe, name;\n\n            if (def !== null) {\n                this._mergeDefinitions(dialogs, def);\n            }\n\n            if (ctx.dialogs) {\n                this._mergeDefinitions(dialogs, ctx.dialogs);\n            }\n\n            for (name in dialogs) if (dialogs.hasOwnProperty(name)) {\n                def = dialogs[name];\n\n                if (name === 'current' || name === 'self') {\n                    delete dialogs[name];\n\n                    if (current && (name === 'current' || ctx.element && DOM.contains(current.getContent(), ctx.element))) {\n                        name = current.getName();\n                        dialogs[name] = def;\n\n                        if (typeof def === 'object') {\n                            def.name = name;\n                        }\n                    } else {\n                        continue;\n                    }\n                }\n\n                if (typeof def === 'object') {\n                    active = true;\n\n                    if (def.type === 'iframe') {\n                        iframe = name;\n                    }\n                }\n            }\n\n            if (current) {\n                if (!(current.getName() in dialogs)) {\n                    dialogs[current.getName()] = false;\n                } else if (dialogs[current.getName()] === true) {\n                    delete dialogs[current.getName()];\n                }\n            }\n\n            ctx.dialogs = dialogs;\n\n            if (active) {\n                if (this._.options.whitelistHistory && !('history' in ctx) && (!ctx.element || !ctx.element.hasAttribute('data-history'))) {\n                    ctx.history = false;\n                }\n\n                if (this._.options.disableDefaultTransitions && !('transition' in ctx) && (!ctx.element || !ctx.element.hasAttribute('data-transition'))) {\n                    ctx.transition = false;\n                }\n\n                if (this._.options.disableDefaultScroll && !('scrollTo' in ctx) && (!ctx.element || !ctx.element.hasAttribute('data-scroll-to'))) {\n                    ctx.scrollTo = false;\n                }\n            }\n\n            if (iframe) {\n                evt.preventDefault();\n                ctx.event && ctx.event.preventDefault();\n                def = dialogs[iframe];\n                def.source || def.source === '' || (def.source = evt.data.url);\n                this._openIframeDialog(def, ctx.element);\n            }\n        },\n\n        _initTransaction: function (evt) {\n            var data = {\n                pending: [],\n                dialogs: evt.data.context.dialogs\n            };\n\n            evt.data.transaction.on('dispatch', this._dispatch.bind(this, data));\n            evt.data.transaction.on('ajax-response', this._handleResponse.bind(this, data));\n            evt.data.transaction.on('snippets-apply', this._handleSnippets.bind(this, data));\n        },\n\n        _openIframeDialog: function (def, elem) {\n            var dlg = this._createDialog(def.name, def);\n\n            if (elem && this._.formLocator && elem instanceof HTMLFormElement) {\n                var frm = this._.formLocator.getForm(elem),\n                    external = true,\n                    tmp;\n\n                if (/^get$/i.test(elem.method)) {\n                    def.source = Url.from(def.source)\n                        .addParams(frm.serialize().exportData(true))\n                        .toAbsolute();\n\n                    external = false;\n                }\n\n                dlg.setUrl(def.source, external);\n\n                if (external) {\n                    tmp = elem.target;\n                    elem.target = def.name;\n                    frm.submit();\n                    window.setTimeout(function() { elem.target = tmp; }, 1);\n                }\n            } else {\n                dlg.setUrl(def.source);\n            }\n\n            dlg.show();\n        },\n\n        _dispatch: function (data, evt) {\n            var name, promise;\n\n            for (name in data.dialogs) if (data.dialogs.hasOwnProperty(name)) {\n                if (promise = this._processDialog(name, data.dialogs[name], data, evt.target)) {\n                    evt.waitFor(promise);\n                }\n            }\n        },\n\n        _handleResponse: function (data, evt) {\n            var payload = evt.data.response.getPayload(),\n                merged, i, n;\n\n            if ('dialogs' in payload) {\n                merged = this._mergeDefinitions(data.dialogs, payload.dialogs);\n\n                for (i = 0, n = merged.length; i < n; i++) {\n                    this._processDialog(merged[i], data.dialogs[merged[i]], data, evt.target);\n                }\n            }\n        },\n\n        _handleSnippets: function (data, evt) {\n            var changeset = evt.data.changeset;\n\n            evt.waitFor(Promise.all(data.pending));\n            data.pending = [];\n\n            var name, def, id, dlg, snippet, content;\n\n            for (name in data.dialogs) if (data.dialogs.hasOwnProperty(name) && (def = data.dialogs[name]) && this._isSnippetType(def)) {\n                dlg = this._.dialogManager.getDialog(name);\n                snippet = changeset.update[def.source];\n\n                if (snippet) {\n                    if (snippet.container) {\n                        throw new Error('Dialogs from dynamic snippets aren\\'t supported');\n                    }\n\n                    for (id in changeset.remove) if (changeset.remove.hasOwnProperty(id)) {\n                        if (changeset.remove[id].isDescendant && DOM.contains(snippet.element, changeset.remove[id].element)) {\n                            delete changeset.remove[id];\n                        }\n                    }\n\n                    id = def.source.replace(/^snippet-/, 'dlg-');\n                    delete changeset.update[def.source];\n\n                    if (dlg) {\n                        changeset.update[id] = snippet;\n                        content = dlg.getContent();\n                        content.id = id;\n                        snippet.element = content;\n\n                        if (this._.formLocator && def.type === 'form') {\n                            evt.target.then(this._injectForm.bind(this, dlg));\n                        }\n\n                        evt.target.then(dlg.show.bind(dlg));\n                    }\n                } else {\n                    dlg && evt.waitFor(dlg.destroy());\n                }\n            }\n        },\n\n        _isSnippetType: function (def) {\n            return !def.type || def.type === 'form';\n        },\n\n        _mergeDefinitions: function (dialogs, defs) {\n            var merged = [],\n                name, m, def;\n\n            if (typeof defs === 'string') {\n                defs = { '': defs };\n            } else if ('source' in defs || 'type' in defs) {\n                defs = { '': defs };\n            }\n\n            for (name in defs) if (defs.hasOwnProperty(name)) {\n                def = defs[name];\n\n                if (typeof def === 'string') {\n                    m = /^keep-current(?:;\\s*|$)/.exec(def);\n\n                    if (m) {\n                        def = def.substr(m[0].length);\n                        dialogs.current = true;\n                    }\n\n                    if (!def) {\n                        continue;\n                    }\n\n                    def = this._parseDescriptor(def);\n                }\n\n                if (typeof def === 'object') {\n                    if (!def.name && name) {\n                        def.name = name;\n                    }\n\n                    if (!def.name || !def.source && def.type !== 'iframe') {\n                        throw new Error('Invalid dialog definition: must be an object with the keys \"name\" and \"source\" and optionally \"type\" and / or \"options\"');\n                    }\n\n                    dialogs[def.name] = def;\n                    merged.push(def.name);\n                } else if (name) {\n                    dialogs[name] = def;\n                    merged.push(name);\n                }\n            }\n\n            return merged;\n        },\n\n        _parseDescriptor: function (descriptor) {\n            var m = /^(?:(self|current)|(?:(form|iframe)(?=[\\s:]))?\\s*([^:]+?)?)\\s*:\\s*(.+)$/.exec(descriptor);\n\n            if (!m) {\n                window.console && console.warn(\n                    'Construction of dialogs using data-dialog=\"<snippet id>\" is deprecated, please update  '\n                    + 'your code to use data-dialog=\"([<type iframe|form> ]<name>|self): (<snippet id>|<url>)\".'\n                );\n\n                return {\n                    name: 'dlg-anonymous-' + (++anonId),\n                    source: descriptor\n                };\n            } else if (m[1]) {\n                return {\n                    name: m[1],\n                    source: m[4]\n                };\n            } else {\n                return {\n                    name: m[3],\n                    type: m[2] || null,\n                    source: m[4]\n                };\n            }\n        },\n\n        _processDialog: function (name, def, data, transaction) {\n            var dlg = this._.dialogManager.getDialog(name),\n                promise = null;\n\n            if (!def) {\n                if (dlg) {\n                    promise = dlg.destroy();\n                }\n            } else {\n                if (!dlg) {\n                    dlg = this._createDialog(name, def);\n                }\n\n                promise = dlg.setBusy();\n\n                if (def.type === 'iframe') {\n                    dlg.setUrl(def.source);\n                    transaction.then(dlg.show.bind(dlg));\n                }\n            }\n\n            promise && data.pending.push(promise);\n            return promise;\n        },\n\n        _createDialog: function (name, def) {\n            def.options || (def.options = {});\n\n            if (this._isSnippetType(def)) {\n                def.options.content = DOM.create('div');\n                def.options.buttons = null;\n            }\n\n            var dlg;\n\n            if (def.type === 'form' && this._.formLocator) {\n                dlg = this._.dialogManager.createFormDialog(name, def.options);\n            } else if (def.type === 'iframe') {\n                dlg = this._.dialogManager.createIFrameDialog(name, null, def.options);\n            } else {\n                dlg = this._.dialogManager.createDialog(name, def.options);\n            }\n\n            dlg.one('hidden', dlg.destroy.bind(dlg));\n\n            if (this._isSnippetType(def)) {\n                dlg.on('destroyed', this._cleanupDialog.bind(this));\n            }\n\n            return dlg;\n        },\n\n        _injectForm: function (dlg) {\n            var frm = dlg.getContent().getElementsByTagName('form').item(0);\n            dlg.setForm(frm ? this._.formLocator.getForm(frm) : null);\n        },\n\n        _cleanupDialog: function (evt) {\n            this._.snippetManager.cleanupDescendants(evt.target.getElement());\n        }\n    });\n\n    _context.register(DialogAgent, 'DialogAgent');\n\n}, {\n    DOM: 'Utils.DOM',\n    Url: 'Utils.Url',\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.Extras.Dialogs', function(Dialog, DOM, Arrays) {\n\n    var FormDialog = _context.extend(Dialog, function(name, options, form) {\n        FormDialog.Super.call(this, name, options);\n\n        this._.form = null;\n\n        this.on('button', this._handleButton.bind(this));\n\n        if (this._.options.autoFocus) {\n            this.on('shown', this._autoFocus.bind(this));\n        }\n\n        if (this._.options.resetOnHide) {\n            this.on('hidden', this._autoReset.bind(this));\n        }\n\n        if (form) {\n            this.setForm(form);\n        }\n    }, {\n        STATIC: {\n            defaults: {\n                classes: 'nittro-dialog-form',\n                resetOnHide: true,\n                autoFocus: true\n            },\n            setDefaults: function(defaults) {\n                Arrays.mergeTree(FormDialog.defaults, defaults);\n            }\n        },\n\n        setForm: function (form) {\n            this._.form = form;\n\n            if (form && this._.tabContext) {\n                this._.tabContext.clear().addFromContainer(form.getElement(), false, 0);\n            }\n\n            return this;\n        },\n\n        setValues: function(values) {\n            this._.form.setValues(values);\n            return this;\n        },\n\n        reset: function() {\n            this._.form && this._.form.reset();\n            return this;\n        },\n\n        getForm: function() {\n            return this._.form;\n        },\n\n        _handleButton: function(evt) {\n            if (evt.data.action === 'submit') {\n                evt.preventDefault();\n                this._.form.submit();\n            }\n        },\n\n        _autoFocus: function () {\n            if (this._.form) {\n                try {\n                    for (var elems = this._.form.getElements(), i = 0, n = elems.length; i < n; i++) {\n                        if (!/^(?:button|submit|reset|hidden)$/i.test(elems.item(i).type || '') && elems.item(i).tabIndex >= 0) {\n                            elems.item(i).focus();\n                            break;\n                        }\n                    }\n                } catch (e) { /* noop */ }\n            }\n        },\n\n        _autoReset: function () {\n            if (this._.form && this._.form.getElement() && DOM.getData(this._.form.getElement(), 'reset', true)) {\n                this.reset();\n            }\n        }\n    });\n\n    _context.register(FormDialog, 'FormDialog');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke('Nittro.Extras.Dialogs.Bridges.DialogsForms', function (Manager, FormDialog) {\n\n    var FormDialogMixin = {\n        setFormLocator: function (formLocator) {\n            this._.formLocator = formLocator;\n            return this;\n        },\n\n        createFormDialog: function (name, options) {\n            var dlg = new FormDialog(name, options);\n            this._setup(dlg);\n\n            dlg.on('destroyed', this._removeDialogForm.bind(this));\n\n            var frm = dlg.getContent().getElementsByTagName('form').item(0);\n            dlg.setForm(frm ? this._.formLocator.getForm(frm) : null);\n\n            return dlg;\n        },\n\n        _removeDialogForm: function (evt) {\n            var form = evt.target.getForm();\n\n            if (form) {\n                if (form.getElement()) {\n                    this._.formLocator.removeForm(form.getElement());\n                }\n\n                evt.target.setForm(null);\n            }\n        }\n    };\n\n    _context.mixin(Manager, FormDialogMixin);\n\n}, {\n    Manager: 'Nittro.Extras.Dialogs.Manager',\n    FormDialog: 'Nittro.Extras.Dialogs.FormDialog'\n});\n","_context.invoke('Nittro.Extras.Dialogs.Bridges.DialogsDI', function() {\n\n    var DialogsExtension = _context.extend('Nittro.DI.BuilderExtension', function(containerBuilder, config) {\n        DialogsExtension.Super.call(this, containerBuilder, config);\n    }, {\n        STATIC: {\n            defaults: {\n                baseZ: 1000,\n                whitelistHistory: true,\n                disableDefaultTransitions: true\n            }\n        },\n\n        load: function () {\n            var builder = this._getContainerBuilder(),\n                config = this._getConfig(DialogsExtension.defaults);\n\n            builder.addServiceDefinition('dialogManager', {\n                factory: 'Nittro.Extras.Dialogs.Manager()',\n                args: {\n                    baseZ: config.baseZ\n                }\n            });\n\n            builder.addFactory('dialog', '@dialogManager::createDialog()');\n            builder.addFactory('iframeDialog', '@dialogManager::createIFrameDialog()');\n        },\n\n        setup: function() {\n            var builder = this._getContainerBuilder(),\n                config = this._getConfig(),\n                def = builder.getServiceDefinition('dialogManager');\n\n            if (builder.hasServiceDefinition('formLocator')) {\n                def.addSetup('::setFormLocator()');\n                builder.addFactory('formDialog', '@dialogManager::createFormDialog()');\n            }\n\n            if (builder.hasServiceDefinition('keymapManager')) {\n                def.addSetup('::setKeymapManager()');\n            }\n\n            if (builder.hasServiceDefinition('page')) {\n                builder.addServiceDefinition('dialogAgent', {\n                    factory: 'Nittro.Extras.Dialogs.Bridges.DialogsPage.DialogAgent()',\n                    args: {\n                        options: {\n                            whitelistHistory: config.whitelistHistory,\n                            disableDefaultTransitions: config.disableDefaultTransitions\n                        }\n                    },\n                    run: true\n                });\n\n                if (builder.hasServiceDefinition('formLocator')) {\n                    builder.getServiceDefinition('dialogAgent')\n                        .addSetup('::setFormLocator()');\n                }\n            }\n        }\n    });\n\n    _context.register(DialogsExtension, 'DialogsExtension')\n\n});\n","_context.invoke('Nittro.Extras.Confirm.Bridges.ConfirmDI', function() {\n\n    var ConfirmExtension = _context.extend('Nittro.DI.BuilderExtension', function(containerBuilder, config) {\n        ConfirmExtension.Super.call(this, containerBuilder, config);\n    }, {\n        setup: function() {\n            var builder = this._getContainerBuilder();\n\n            if (builder.hasServiceDefinition('dialogManager')) {\n                builder.addFactory('confirm', '@dialogManager::createConfirm()');\n            }\n\n            if (builder.hasServiceDefinition('page')) {\n                builder.addServiceDefinition('autoConfirm', {\n                    factory: 'Nittro.Extras.Confirm.Bridges.ConfirmPage.AutoConfirm()',\n                    args: {\n                        options: this._getConfig()\n                    },\n                    run: true\n                });\n\n                builder.getServiceDefinition('page')\n                    .addSetup(function(autoConfirm) {\n                        this.on('before-transaction', autoConfirm.handleTransaction.bind(autoConfirm))\n                    });\n            }\n\n        }\n    });\n\n    _context.register(ConfirmExtension, 'ConfirmExtension')\n\n});\n","_context.invoke('Nittro.Extras.Confirm.Bridges.ConfirmPage', function (DOM, Arrays) {\n\n    var AutoConfirm = _context.extend(function(dialogManager, options) {\n        this._ = {\n            dialogManager: dialogManager,\n            options: Arrays.mergeTree(true, {}, AutoConfirm.defaults, options)\n        };\n    }, {\n        STATIC: {\n            defaults: {\n                prompt: 'Are you sure?',\n                confirm: 'Yes',\n                cancel: 'No'\n            }\n        },\n\n        handleTransaction: function (evt) {\n            var elem = evt.data.context.element || null,\n                prompt = elem ? DOM.getData(elem, 'prompt') : null;\n\n            if (!prompt) {\n                return;\n            }\n\n            if (typeof prompt !== 'string') {\n                prompt = this._.options.prompt;\n            }\n\n            var confirm = DOM.getData(elem, 'confirm') || this._.options.confirm,\n                cancel = DOM.getData(elem, 'cancel') || this._.options.cancel;\n\n            evt.waitFor(\n                this._.dialogManager.createConfirm(prompt, confirm, cancel)\n                    .then(function(result) { result || evt.preventDefault(); })\n            );\n        }\n    });\n\n    _context.register(AutoConfirm, 'AutoConfirm');\n\n}, {\n    DOM: 'Utils.DOM',\n    Arrays: 'Utils.Arrays'\n});\n","_context.invoke(function(Nittro) {\n    var builder = new Nittro.DI.ContainerBuilder({\n        \"params\": {},\n        \"extensions\": {\n            \"ajax\": \"Nittro.Ajax.Bridges.AjaxDI.AjaxExtension()\",\n            \"forms\": \"Nittro.Forms.Bridges.FormsDI.FormsExtension()\",\n            \"page\": \"Nittro.Page.Bridges.PageDI.PageExtension()\",\n            \"flashes\": \"Nittro.Flashes.Bridges.FlashesDI.FlashesExtension()\",\n            \"dialogs\": \"Nittro.Extras.Dialogs.Bridges.DialogsDI.DialogsExtension()\",\n            \"confirm\": \"Nittro.Extras.Confirm.Bridges.ConfirmDI.ConfirmExtension()\"\n        },\n        \"services\": {},\n        \"factories\": {}\n    });\n\n    this.di = builder.createContainer();\n    this.di.runServices();\n\n});","window._stack || (window._stack = []);\n\n(function(stack) {\n    function exec(f) {\n        if (typeof f === 'function') {\n            _context.invoke(f);\n\n        } else if (typeof f === 'object' && typeof f.load !== 'undefined') {\n            var q = _context.load.apply(_context, f.load);\n\n            if (typeof f.then === 'function') {\n                q.then(f.then);\n\n            } else if (f.then && f.then instanceof Array) {\n                q.then.apply(_context, f.then);\n\n            }\n        } else {\n            _context.invoke.apply(_context, f);\n\n        }\n    }\n\n    while (stack.length) {\n        exec(stack.shift());\n\n    }\n\n    stack.push = function() {\n        for (var i = 0; i < arguments.length; i++) {\n            exec(arguments[i]);\n\n        }\n    };\n})(window._stack);\n"]}